"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/genkit";
exports.ids = ["vendor-chunks/genkit"];
exports.modules = {

/***/ "(rsc)/./node_modules/genkit/lib/chat.js":
/*!*****************************************!*\
  !*** ./node_modules/genkit/lib/chat.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar chat_exports = {};\n__export(chat_exports, {\n  Chat: () => Chat,\n  MAIN_THREAD: () => MAIN_THREAD\n});\nmodule.exports = __toCommonJS(chat_exports);\nvar import_session = __webpack_require__(/*! ./session */ \"(rsc)/./node_modules/genkit/lib/session.js\");\nvar import_tracing = __webpack_require__(/*! ./tracing */ \"(rsc)/./node_modules/genkit/lib/tracing.js\");\nconst MAIN_THREAD = \"main\";\nclass Chat {\n  constructor(session, requestBase, options) {\n    this.session = session;\n    this.sessionId = options.id;\n    this.threadName = options.thread;\n    this.requestBase = requestBase == null ? void 0 : requestBase.then((rb) => {\n      var _a, _b, _c;\n      const requestBase2 = __spreadValues({}, rb);\n      if (requestBase2 && requestBase2[\"prompt\"]) {\n        const basePrompt = requestBase2[\"prompt\"];\n        let promptMessage;\n        if (typeof basePrompt === \"string\") {\n          promptMessage = {\n            role: \"user\",\n            content: [{ text: basePrompt }]\n          };\n        } else if (Array.isArray(basePrompt)) {\n          promptMessage = {\n            role: \"user\",\n            content: basePrompt\n          };\n        } else {\n          promptMessage = {\n            role: \"user\",\n            content: [basePrompt]\n          };\n        }\n        requestBase2.messages = [...(_a = requestBase2.messages) != null ? _a : [], promptMessage];\n      }\n      requestBase2.messages = [\n        ...(_b = options.messages) != null ? _b : [],\n        ...(_c = requestBase2.messages) != null ? _c : []\n      ];\n      this._messages = requestBase2.messages;\n      return requestBase2;\n    });\n    this._messages = options.messages;\n  }\n  send(options) {\n    return __async(this, null, function* () {\n      return (0, import_session.runWithSession)(\n        this.session,\n        () => (0, import_tracing.runInNewSpan)({ metadata: { name: \"send\" } }, () => __async(this, null, function* () {\n          var _a, _b;\n          let resolvedOptions;\n          let streamingCallback = void 0;\n          if (typeof options === \"string\") {\n            resolvedOptions = {\n              prompt: options\n            };\n          } else if (Array.isArray(options)) {\n            resolvedOptions = {\n              prompt: options\n            };\n          } else {\n            resolvedOptions = options;\n            streamingCallback = resolvedOptions.streamingCallback;\n          }\n          let request = __spreadValues(__spreadProps(__spreadValues({}, yield this.requestBase), {\n            messages: this.messages\n          }), resolvedOptions);\n          let response = yield this.genkit.generate(__spreadProps(__spreadValues({}, request), {\n            streamingCallback\n          }));\n          this.requestBase = Promise.resolve(__spreadProps(__spreadValues({}, yield this.requestBase), {\n            // these things may get changed by tools calling within generate.\n            tools: (_a = response == null ? void 0 : response.request) == null ? void 0 : _a.tools,\n            config: (_b = response == null ? void 0 : response.request) == null ? void 0 : _b.config\n          }));\n          yield this.updateMessages(response.messages);\n          return response;\n        }))\n      );\n    });\n  }\n  sendStream(options) {\n    return (0, import_session.runWithSession)(\n      this.session,\n      () => (0, import_tracing.runInNewSpan)({ metadata: { name: \"send\" } }, () => __async(this, null, function* () {\n        let resolvedOptions;\n        if (typeof options === \"string\") {\n          resolvedOptions = {\n            prompt: options\n          };\n        } else if (Array.isArray(options)) {\n          resolvedOptions = {\n            prompt: options\n          };\n        } else {\n          resolvedOptions = options;\n        }\n        const { response, stream } = yield this.genkit.generateStream(__spreadValues(__spreadProps(__spreadValues({}, yield this.requestBase), {\n          messages: this.messages\n        }), resolvedOptions));\n        return {\n          response: response.finally(() => __async(this, null, function* () {\n            var _a, _b;\n            const resolvedResponse = yield response;\n            this.requestBase = Promise.resolve(__spreadProps(__spreadValues({}, yield this.requestBase), {\n              // these things may get changed by tools calling within generate.\n              tools: (_a = resolvedResponse == null ? void 0 : resolvedResponse.request) == null ? void 0 : _a.tools,\n              config: (_b = resolvedResponse == null ? void 0 : resolvedResponse.request) == null ? void 0 : _b.config\n            }));\n            this.updateMessages(resolvedResponse.messages);\n          })),\n          stream\n        };\n      }))\n    );\n  }\n  get genkit() {\n    return this.session.genkit;\n  }\n  get messages() {\n    var _a;\n    return (_a = this._messages) != null ? _a : [];\n  }\n  updateMessages(messages) {\n    return __async(this, null, function* () {\n      this._messages = messages;\n      yield this.session.updateMessages(this.threadName, messages);\n    });\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=chat.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9jaGF0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EscUJBQXFCLG1CQUFPLENBQUMsNkRBQVc7QUFDeEMscUJBQXFCLG1CQUFPLENBQUMsNkRBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxZQUFZLGdCQUFnQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFO0FBQ3RFO0FBQ0EsV0FBVztBQUNYLG1GQUFtRjtBQUNuRjtBQUNBLFdBQVc7QUFDWCw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsWUFBWSxnQkFBZ0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGdCQUFnQixtQkFBbUIsaUZBQWlGO0FBQ3BIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU0sQ0FHTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9jaGF0LmpzPzMxMGMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIGNoYXRfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoY2hhdF9leHBvcnRzLCB7XG4gIENoYXQ6ICgpID0+IENoYXQsXG4gIE1BSU5fVEhSRUFEOiAoKSA9PiBNQUlOX1RIUkVBRFxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhjaGF0X2V4cG9ydHMpO1xudmFyIGltcG9ydF9zZXNzaW9uID0gcmVxdWlyZShcIi4vc2Vzc2lvblwiKTtcbnZhciBpbXBvcnRfdHJhY2luZyA9IHJlcXVpcmUoXCIuL3RyYWNpbmdcIik7XG5jb25zdCBNQUlOX1RIUkVBRCA9IFwibWFpblwiO1xuY2xhc3MgQ2hhdCB7XG4gIGNvbnN0cnVjdG9yKHNlc3Npb24sIHJlcXVlc3RCYXNlLCBvcHRpb25zKSB7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICB0aGlzLnNlc3Npb25JZCA9IG9wdGlvbnMuaWQ7XG4gICAgdGhpcy50aHJlYWROYW1lID0gb3B0aW9ucy50aHJlYWQ7XG4gICAgdGhpcy5yZXF1ZXN0QmFzZSA9IHJlcXVlc3RCYXNlID09IG51bGwgPyB2b2lkIDAgOiByZXF1ZXN0QmFzZS50aGVuKChyYikgPT4ge1xuICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICBjb25zdCByZXF1ZXN0QmFzZTIgPSBfX3NwcmVhZFZhbHVlcyh7fSwgcmIpO1xuICAgICAgaWYgKHJlcXVlc3RCYXNlMiAmJiByZXF1ZXN0QmFzZTJbXCJwcm9tcHRcIl0pIHtcbiAgICAgICAgY29uc3QgYmFzZVByb21wdCA9IHJlcXVlc3RCYXNlMltcInByb21wdFwiXTtcbiAgICAgICAgbGV0IHByb21wdE1lc3NhZ2U7XG4gICAgICAgIGlmICh0eXBlb2YgYmFzZVByb21wdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHByb21wdE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFt7IHRleHQ6IGJhc2VQcm9tcHQgfV1cbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZVByb21wdCkpIHtcbiAgICAgICAgICBwcm9tcHRNZXNzYWdlID0ge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBiYXNlUHJvbXB0XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9tcHRNZXNzYWdlID0ge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBbYmFzZVByb21wdF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3RCYXNlMi5tZXNzYWdlcyA9IFsuLi4oX2EgPSByZXF1ZXN0QmFzZTIubWVzc2FnZXMpICE9IG51bGwgPyBfYSA6IFtdLCBwcm9tcHRNZXNzYWdlXTtcbiAgICAgIH1cbiAgICAgIHJlcXVlc3RCYXNlMi5tZXNzYWdlcyA9IFtcbiAgICAgICAgLi4uKF9iID0gb3B0aW9ucy5tZXNzYWdlcykgIT0gbnVsbCA/IF9iIDogW10sXG4gICAgICAgIC4uLihfYyA9IHJlcXVlc3RCYXNlMi5tZXNzYWdlcykgIT0gbnVsbCA/IF9jIDogW11cbiAgICAgIF07XG4gICAgICB0aGlzLl9tZXNzYWdlcyA9IHJlcXVlc3RCYXNlMi5tZXNzYWdlcztcbiAgICAgIHJldHVybiByZXF1ZXN0QmFzZTI7XG4gICAgfSk7XG4gICAgdGhpcy5fbWVzc2FnZXMgPSBvcHRpb25zLm1lc3NhZ2VzO1xuICB9XG4gIHNlbmQob3B0aW9ucykge1xuICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICByZXR1cm4gKDAsIGltcG9ydF9zZXNzaW9uLnJ1bldpdGhTZXNzaW9uKShcbiAgICAgICAgdGhpcy5zZXNzaW9uLFxuICAgICAgICAoKSA9PiAoMCwgaW1wb3J0X3RyYWNpbmcucnVuSW5OZXdTcGFuKSh7IG1ldGFkYXRhOiB7IG5hbWU6IFwic2VuZFwiIH0gfSwgKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgbGV0IHJlc29sdmVkT3B0aW9ucztcbiAgICAgICAgICBsZXQgc3RyZWFtaW5nQ2FsbGJhY2sgPSB2b2lkIDA7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXNvbHZlZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIHByb21wdDogb3B0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJlc29sdmVkT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgcHJvbXB0OiBvcHRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlZE9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgc3RyZWFtaW5nQ2FsbGJhY2sgPSByZXNvbHZlZE9wdGlvbnMuc3RyZWFtaW5nQ2FsbGJhY2s7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCByZXF1ZXN0ID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgeWllbGQgdGhpcy5yZXF1ZXN0QmFzZSksIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzOiB0aGlzLm1lc3NhZ2VzXG4gICAgICAgICAgfSksIHJlc29sdmVkT3B0aW9ucyk7XG4gICAgICAgICAgbGV0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZW5raXQuZ2VuZXJhdGUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcmVxdWVzdCksIHtcbiAgICAgICAgICAgIHN0cmVhbWluZ0NhbGxiYWNrXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHRoaXMucmVxdWVzdEJhc2UgPSBQcm9taXNlLnJlc29sdmUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgeWllbGQgdGhpcy5yZXF1ZXN0QmFzZSksIHtcbiAgICAgICAgICAgIC8vIHRoZXNlIHRoaW5ncyBtYXkgZ2V0IGNoYW5nZWQgYnkgdG9vbHMgY2FsbGluZyB3aXRoaW4gZ2VuZXJhdGUuXG4gICAgICAgICAgICB0b29sczogKF9hID0gcmVzcG9uc2UgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlLnJlcXVlc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYS50b29scyxcbiAgICAgICAgICAgIGNvbmZpZzogKF9iID0gcmVzcG9uc2UgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlLnJlcXVlc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jb25maWdcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgeWllbGQgdGhpcy51cGRhdGVNZXNzYWdlcyhyZXNwb25zZS5tZXNzYWdlcyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbiAgc2VuZFN0cmVhbShvcHRpb25zKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfc2Vzc2lvbi5ydW5XaXRoU2Vzc2lvbikoXG4gICAgICB0aGlzLnNlc3Npb24sXG4gICAgICAoKSA9PiAoMCwgaW1wb3J0X3RyYWNpbmcucnVuSW5OZXdTcGFuKSh7IG1ldGFkYXRhOiB7IG5hbWU6IFwic2VuZFwiIH0gfSwgKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgcmVzb2x2ZWRPcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICByZXNvbHZlZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwcm9tcHQ6IG9wdGlvbnNcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICByZXNvbHZlZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwcm9tcHQ6IG9wdGlvbnNcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmVkT3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyByZXNwb25zZSwgc3RyZWFtIH0gPSB5aWVsZCB0aGlzLmdlbmtpdC5nZW5lcmF0ZVN0cmVhbShfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB5aWVsZCB0aGlzLnJlcXVlc3RCYXNlKSwge1xuICAgICAgICAgIG1lc3NhZ2VzOiB0aGlzLm1lc3NhZ2VzXG4gICAgICAgIH0pLCByZXNvbHZlZE9wdGlvbnMpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UuZmluYWxseSgoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRSZXNwb25zZSA9IHlpZWxkIHJlc3BvbnNlO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0QmFzZSA9IFByb21pc2UucmVzb2x2ZShfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB5aWVsZCB0aGlzLnJlcXVlc3RCYXNlKSwge1xuICAgICAgICAgICAgICAvLyB0aGVzZSB0aGluZ3MgbWF5IGdldCBjaGFuZ2VkIGJ5IHRvb2xzIGNhbGxpbmcgd2l0aGluIGdlbmVyYXRlLlxuICAgICAgICAgICAgICB0b29sczogKF9hID0gcmVzb2x2ZWRSZXNwb25zZSA9PSBudWxsID8gdm9pZCAwIDogcmVzb2x2ZWRSZXNwb25zZS5yZXF1ZXN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EudG9vbHMsXG4gICAgICAgICAgICAgIGNvbmZpZzogKF9iID0gcmVzb2x2ZWRSZXNwb25zZSA9PSBudWxsID8gdm9pZCAwIDogcmVzb2x2ZWRSZXNwb25zZS5yZXF1ZXN0KSA9PSBudWxsID8gdm9pZCAwIDogX2IuY29uZmlnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1lc3NhZ2VzKHJlc29sdmVkUmVzcG9uc2UubWVzc2FnZXMpO1xuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBzdHJlYW1cbiAgICAgICAgfTtcbiAgICAgIH0pKVxuICAgICk7XG4gIH1cbiAgZ2V0IGdlbmtpdCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLmdlbmtpdDtcbiAgfVxuICBnZXQgbWVzc2FnZXMoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSB0aGlzLl9tZXNzYWdlcykgIT0gbnVsbCA/IF9hIDogW107XG4gIH1cbiAgdXBkYXRlTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgdGhpcy5fbWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICAgIHlpZWxkIHRoaXMuc2Vzc2lvbi51cGRhdGVNZXNzYWdlcyh0aGlzLnRocmVhZE5hbWUsIG1lc3NhZ2VzKTtcbiAgICB9KTtcbiAgfVxufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIENoYXQsXG4gIE1BSU5fVEhSRUFEXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoYXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/embedder.js":
/*!*********************************************!*\
  !*** ./node_modules/genkit/lib/embedder.js ***!
  \*********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar embedder_exports = {};\n__export(embedder_exports, {\n  EmbedderInfoSchema: () => import_embedder.EmbedderInfoSchema,\n  EmbeddingSchema: () => import_embedder.EmbeddingSchema,\n  embedderRef: () => import_embedder.embedderRef\n});\nmodule.exports = __toCommonJS(embedder_exports);\nvar import_embedder = __webpack_require__(/*! @genkit-ai/ai/embedder */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=embedder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9lbWJlZGRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxzQkFBc0IsbUJBQU8sQ0FBQyxzR0FBd0I7QUFDdEQ7QUFDQSxNQUFNLENBSUw7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9saWIvZW1iZWRkZXIuanM/YmI4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgZW1iZWRkZXJfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZW1iZWRkZXJfZXhwb3J0cywge1xuICBFbWJlZGRlckluZm9TY2hlbWE6ICgpID0+IGltcG9ydF9lbWJlZGRlci5FbWJlZGRlckluZm9TY2hlbWEsXG4gIEVtYmVkZGluZ1NjaGVtYTogKCkgPT4gaW1wb3J0X2VtYmVkZGVyLkVtYmVkZGluZ1NjaGVtYSxcbiAgZW1iZWRkZXJSZWY6ICgpID0+IGltcG9ydF9lbWJlZGRlci5lbWJlZGRlclJlZlxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhlbWJlZGRlcl9leHBvcnRzKTtcbnZhciBpbXBvcnRfZW1iZWRkZXIgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9haS9lbWJlZGRlclwiKTtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBFbWJlZGRlckluZm9TY2hlbWEsXG4gIEVtYmVkZGluZ1NjaGVtYSxcbiAgZW1iZWRkZXJSZWZcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1iZWRkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/embedder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/genkit.js":
/*!*******************************************!*\
  !*** ./node_modules/genkit/lib/genkit.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar genkit_exports = {};\n__export(genkit_exports, {\n  Genkit: () => Genkit,\n  __disableReflectionApi: () => __disableReflectionApi,\n  genkit: () => genkit\n});\nmodule.exports = __toCommonJS(genkit_exports);\nvar import_ai = __webpack_require__(/*! @genkit-ai/ai */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.js\");\nvar import_embedder = __webpack_require__(/*! @genkit-ai/ai/embedder */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js\");\nvar import_evaluator = __webpack_require__(/*! @genkit-ai/ai/evaluator */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/evaluator.js\");\nvar import_model = __webpack_require__(/*! @genkit-ai/ai/model */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js\");\nvar import_reranker = __webpack_require__(/*! @genkit-ai/ai/reranker */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/reranker.js\");\nvar import_retriever = __webpack_require__(/*! @genkit-ai/ai/retriever */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js\");\nvar import_tool = __webpack_require__(/*! @genkit-ai/ai/tool */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\");\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_dotprompt = __webpack_require__(/*! @genkit-ai/dotprompt */ \"(rsc)/./node_modules/@genkit-ai/dotprompt/lib/index.js\");\nvar import_uuid = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nvar import_logging = __webpack_require__(/*! ./logging.js */ \"(rsc)/./node_modules/genkit/lib/logging.js\");\nvar import_plugin = __webpack_require__(/*! ./plugin.js */ \"(rsc)/./node_modules/genkit/lib/plugin.js\");\nvar import_registry = __webpack_require__(/*! ./registry.js */ \"(rsc)/./node_modules/genkit/lib/registry.js\");\nvar import_session = __webpack_require__(/*! ./session.js */ \"(rsc)/./node_modules/genkit/lib/session.js\");\nvar import_tool2 = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/genkit/lib/tool.js\");\nclass Genkit {\n  constructor(options) {\n    /** Environments that have been configured (at minimum dev). */\n    this.configuredEnvs = /* @__PURE__ */ new Set([\"dev\"]);\n    /** Reflection server for this registry. May be null if not started. */\n    this.reflectionServer = null;\n    /** Flow server. May be null if the flow server is not enabled in configuration or not started. */\n    this.flowServer = null;\n    /** List of flows that have been registered in this instance. */\n    this.registeredFlows = [];\n    this.options = options || {};\n    this.registry = new import_registry.Registry();\n    this.configure();\n    if ((0, import_core.isDevEnv)() && !disableReflectionApi) {\n      this.reflectionServer = new import_core.ReflectionServer(this.registry, {\n        configuredEnvs: [...this.configuredEnvs]\n      });\n      this.reflectionServer.start().catch((e) => import_logging.logger.error);\n    }\n  }\n  /**\n   * Defines and registers a non-streaming flow.\n   *\n   * @todo TODO: Improve this documentation (show snippets, etc).\n   */\n  defineFlow(config, fn) {\n    const flow = (0, import_core.defineFlow)(this.registry, config, fn);\n    this.registeredFlows.push(flow.flow);\n    return flow;\n  }\n  /**\n   * Defines and registers a streaming flow.\n   *\n   * @todo TODO: Improve this documentation (show snippetss, etc).\n   */\n  defineStreamingFlow(config, fn) {\n    const flow = (0, import_core.defineStreamingFlow)(\n      this.registry,\n      typeof config === \"string\" ? { name: config } : config,\n      fn\n    );\n    this.registeredFlows.push(flow.flow);\n    return flow;\n  }\n  /**\n   * Defines and registers a tool.\n   *\n   * Tools can be passed to models by name or value during `generate` calls to be called automatically based on the prompt and situation.\n   */\n  defineTool(config, fn) {\n    return (0, import_ai.defineTool)(this.registry, config, fn);\n  }\n  /**\n   * Defines and registers a schema from a Zod schema.\n   *\n   * Defined schemas can be referenced by `name` in prompts in place of inline schemas.\n   */\n  defineSchema(name, schema) {\n    return (0, import_core.defineSchema)(this.registry, name, schema);\n  }\n  /**\n   * Defines and registers a schema from a JSON schema.\n   *\n   * Defined schemas can be referenced by `name` in prompts in place of inline schemas.\n   */\n  defineJsonSchema(name, jsonSchema) {\n    return (0, import_core.defineJsonSchema)(this.registry, name, jsonSchema);\n  }\n  /**\n   * Defines a new model and adds it to the registry.\n   */\n  defineModel(options, runner) {\n    return (0, import_model.defineModel)(this.registry, options, runner);\n  }\n  /**\n   * Looks up a prompt by `name` and optional `variant`.\n   *\n   * @todo TODO: Show an example of a name and variant.\n   */\n  prompt(name, options) {\n    return __async(this, null, function* () {\n      let action = yield this.registry.lookupAction(\n        `/prompt/${name}`\n      );\n      if (!action) {\n        action = (yield (0, import_dotprompt.prompt)(this.registry, name, options)).promptAction;\n      }\n      return this.wrapPromptActionInExecutablePrompt(\n        action,\n        {}\n      );\n    });\n  }\n  definePrompt(options, templateOrFn) {\n    var _a, _b;\n    if (!options.name) {\n      throw new Error(\"options.name is required\");\n    }\n    if (!options.name) {\n      throw new Error(\"options.name is required\");\n    }\n    if (typeof templateOrFn === \"string\") {\n      const dotprompt = (0, import_dotprompt.defineDotprompt)(\n        this.registry,\n        __spreadProps(__spreadValues({}, options), {\n          tools: options.tools\n        }),\n        templateOrFn\n      );\n      return this.wrapPromptActionInExecutablePrompt(\n        dotprompt.promptAction,\n        options\n      );\n    } else {\n      const p = (0, import_ai.definePrompt)(\n        this.registry,\n        {\n          name: options.name,\n          inputJsonSchema: (_a = options.input) == null ? void 0 : _a.jsonSchema,\n          inputSchema: (_b = options.input) == null ? void 0 : _b.schema,\n          description: options.description\n        },\n        (input) => __async(this, null, function* () {\n          const response = yield templateOrFn(input);\n          if (!response.tools && options.tools) {\n            response.tools = (yield (0, import_tool.resolveTools)(this.registry, options.tools)).map(import_tool2.toToolDefinition);\n          }\n          if (!response.output && options.output) {\n            response.output = options.output;\n          }\n          return response;\n        })\n      );\n      return this.wrapPromptActionInExecutablePrompt(p, options);\n    }\n  }\n  wrapPromptActionInExecutablePrompt(p, options) {\n    const executablePrompt = (input, opts) => __async(this, null, function* () {\n      const renderedOpts = yield executablePrompt.render(__spreadProps(__spreadValues({}, opts), {\n        input\n      }));\n      return this.generate(renderedOpts);\n    });\n    executablePrompt.stream = (input, opts) => __async(this, null, function* () {\n      const renderedOpts = yield executablePrompt.render(__spreadProps(__spreadValues({}, opts), {\n        input\n      }));\n      return this.generateStream(renderedOpts);\n    });\n    executablePrompt.generate = (opt) => __async(this, null, function* () {\n      const renderedOpts = yield executablePrompt.render(opt);\n      return this.generate(renderedOpts);\n    });\n    executablePrompt.generateStream = (opt) => __async(this, null, function* () {\n      const renderedOpts = yield executablePrompt.render(opt);\n      return this.generateStream(renderedOpts);\n    });\n    executablePrompt.render = (opt) => __async(this, null, function* () {\n      var _a, _b, _c, _d, _e, _f, _g;\n      let model;\n      try {\n        model = yield this.resolveModel((_a = opt == null ? void 0 : opt.model) != null ? _a : options.model);\n      } catch (e) {\n      }\n      const promptResult = yield p(__spreadValues({\n        // this feels a litte hacky, but we need to pass session state as action input\n        // to make it replayable from trace view in the dev ui.\n        __genkit__sessionState: { state: (_b = (0, import_session.getCurrentSession)()) == null ? void 0 : _b.state }\n      }, opt.input));\n      const resultOptions = {\n        messages: promptResult.messages,\n        docs: promptResult.docs,\n        tools: (_c = promptResult.tools) != null ? _c : options.tools,\n        output: ((_d = promptResult.output) == null ? void 0 : _d.format) || ((_e = promptResult.output) == null ? void 0 : _e.schema) ? {\n          format: (_f = promptResult.output) == null ? void 0 : _f.format,\n          jsonSchema: (_g = promptResult.output) == null ? void 0 : _g.schema\n        } : options.output,\n        config: __spreadValues(__spreadValues(__spreadValues({}, options.config), promptResult.config), opt.config),\n        model\n      };\n      delete resultOptions.input;\n      return resultOptions;\n    });\n    executablePrompt.asTool = () => {\n      return p;\n    };\n    return executablePrompt;\n  }\n  /**\n   * Creates a retriever action for the provided {@link RetrieverFn} implementation.\n   */\n  defineRetriever(options, runner) {\n    return (0, import_retriever.defineRetriever)(this.registry, options, runner);\n  }\n  /**\n   * defineSimpleRetriever makes it easy to map existing data into documents that\n   * can be used for prompt augmentation.\n   *\n   * @param options Configuration options for the retriever.\n   * @param handler A function that queries a datastore and returns items from which to extract documents.\n   * @returns A Genkit retriever.\n   */\n  defineSimpleRetriever(options, handler) {\n    return (0, import_retriever.defineSimpleRetriever)(this.registry, options, handler);\n  }\n  /**\n   * Creates an indexer action for the provided {@link IndexerFn} implementation.\n   */\n  defineIndexer(options, runner) {\n    return (0, import_retriever.defineIndexer)(this.registry, options, runner);\n  }\n  /**\n   * Creates evaluator action for the provided {@link EvaluatorFn} implementation.\n   */\n  defineEvaluator(options, runner) {\n    return (0, import_evaluator.defineEvaluator)(this.registry, options, runner);\n  }\n  /**\n   * Creates embedder model for the provided {@link EmbedderFn} model implementation.\n   */\n  defineEmbedder(options, runner) {\n    return (0, import_embedder.defineEmbedder)(this.registry, options, runner);\n  }\n  /**\n   * create a handlebards helper (https://handlebarsjs.com/guide/block-helpers.html) to be used in dotpormpt templates.\n   */\n  defineHelper(name, fn) {\n    return (0, import_dotprompt.defineHelper)(name, fn);\n  }\n  /**\n   * Creates a handlebars partial (https://handlebarsjs.com/guide/partials.html) to be used in dotpormpt templates.\n   */\n  definePartial(name, source) {\n    return (0, import_dotprompt.definePartial)(name, source);\n  }\n  /**\n   *  Creates a reranker action for the provided {@link RerankerFn} implementation.\n   */\n  defineReranker(options, runner) {\n    return (0, import_reranker.defineReranker)(this.registry, options, runner);\n  }\n  /**\n   * Embeds the given `content` using the specified `embedder`.\n   */\n  embed(params) {\n    return (0, import_ai.embed)(this.registry, params);\n  }\n  /**\n   * A veneer for interacting with embedder models in bulk.\n   */\n  embedMany(params) {\n    return (0, import_embedder.embedMany)(this.registry, params);\n  }\n  /**\n   * Evaluates the given `dataset` using the specified `evaluator`.\n   */\n  evaluate(params) {\n    return (0, import_ai.evaluate)(this.registry, params);\n  }\n  /**\n   * Reranks documents from a {@link RerankerArgument} based on the provided query.\n   */\n  rerank(params) {\n    return (0, import_ai.rerank)(this.registry, params);\n  }\n  /**\n   * Indexes `documents` using the provided `indexer`.\n   */\n  index(params) {\n    return (0, import_retriever.index)(this.registry, params);\n  }\n  /**\n   * Retrieves documents from the `retriever` based on the provided `query`.\n   */\n  retrieve(params) {\n    return (0, import_ai.retrieve)(this.registry, params);\n  }\n  generate(options) {\n    return __async(this, null, function* () {\n      let resolvedOptions;\n      if (options instanceof Promise) {\n        resolvedOptions = yield options;\n      } else if (typeof options === \"string\" || Array.isArray(options)) {\n        resolvedOptions = {\n          prompt: options\n        };\n      } else {\n        resolvedOptions = options;\n      }\n      if (!resolvedOptions.model) {\n        resolvedOptions.model = this.options.model;\n      }\n      return (0, import_ai.generate)(this.registry, resolvedOptions);\n    });\n  }\n  generateStream(options) {\n    return __async(this, null, function* () {\n      let resolvedOptions;\n      if (options instanceof Promise) {\n        resolvedOptions = yield options;\n      } else if (typeof options === \"string\" || Array.isArray(options)) {\n        resolvedOptions = {\n          prompt: options\n        };\n      } else {\n        resolvedOptions = options;\n      }\n      if (!resolvedOptions.model) {\n        resolvedOptions.model = this.options.model;\n      }\n      return (0, import_ai.generateStream)(this.registry, resolvedOptions);\n    });\n  }\n  /**\n   * Create a chat session with the provided options.\n   *\n   * ```ts\n   * const chat = ai.chat({\n   *   system: 'talk like a pirate',\n   * })\n   * let response = await chat.send('tell me a joke')\n   * response = await chat.send('another one')\n   * ```\n   */\n  chat(options) {\n    const session = this.createSession();\n    return session.chat(options);\n  }\n  /**\n   * Create a session for this environment.\n   */\n  createSession(options) {\n    const sessionId = (0, import_uuid.v4)();\n    const sessionData = {\n      id: sessionId,\n      state: options == null ? void 0 : options.initialState\n    };\n    return new import_session.Session(this, {\n      id: sessionId,\n      sessionData,\n      store: options == null ? void 0 : options.store\n    });\n  }\n  /**\n   * Loads a session from the store.\n   */\n  loadSession(sessionId, options) {\n    return __async(this, null, function* () {\n      if (!options.store) {\n        throw new Error(\"options.store is required\");\n      }\n      const sessionData = yield options.store.get(sessionId);\n      return new import_session.Session(this, {\n        id: sessionId,\n        sessionData,\n        store: options.store\n      });\n    });\n  }\n  /**\n   * Gets the current session from async local storage.\n   */\n  currentSession() {\n    const currentSession = (0, import_session.getCurrentSession)();\n    if (!currentSession) {\n      throw new import_session.SessionError(\"not running within a session\");\n    }\n    return currentSession;\n  }\n  /**\n   * Configures the Genkit instance.\n   */\n  configure() {\n    var _a;\n    const activeRegistry = this.registry;\n    const plugins = [...(_a = this.options.plugins) != null ? _a : []];\n    if (this.options.promptDir !== null) {\n      const dotprompt = (0, import_plugin.genkitPlugin)(\"dotprompt\", (ai) => __async(this, null, function* () {\n        var _a2;\n        (0, import_dotprompt.loadPromptFolder)(this.registry, (_a2 = this.options.promptDir) != null ? _a2 : \"./prompts\");\n      }));\n      plugins.push(dotprompt);\n    }\n    plugins.forEach((plugin) => {\n      const loadedPlugin = plugin(this);\n      import_logging.logger.debug(`Registering plugin ${loadedPlugin.name}...`);\n      activeRegistry.registerPluginProvider(loadedPlugin.name, {\n        name: loadedPlugin.name,\n        initializer() {\n          return __async(this, null, function* () {\n            import_logging.logger.debug(`Initializing plugin ${loadedPlugin.name}:`);\n            yield loadedPlugin.initializer();\n          });\n        }\n      });\n    });\n  }\n  /**\n   * Stops all servers.\n   */\n  stopServers() {\n    return __async(this, null, function* () {\n      var _a, _b;\n      yield Promise.all([(_a = this.reflectionServer) == null ? void 0 : _a.stop(), (_b = this.flowServer) == null ? void 0 : _b.stop()]);\n      this.reflectionServer = null;\n      this.flowServer = null;\n    });\n  }\n  resolveModel(modelArg) {\n    return __async(this, null, function* () {\n      if (!modelArg) {\n        if (!this.options.model) {\n          throw new Error(\"Unable to resolve model.\");\n        }\n        return this.resolveModel(this.options.model);\n      }\n      if (typeof modelArg === \"string\") {\n        return yield this.registry.lookupAction(\n          `/model/${modelArg}`\n        );\n      } else if (modelArg.__action) {\n        return modelArg;\n      } else {\n        const ref = modelArg;\n        return yield this.registry.lookupAction(\n          `/model/${ref.name}`\n        );\n      }\n    });\n  }\n  startFlowServer(options) {\n    const flowServer = new import_core.FlowServer(this.registry, options);\n    flowServer.start();\n    return flowServer;\n  }\n}\nfunction genkit(options) {\n  return new Genkit(options);\n}\nconst shutdown = () => __async(void 0, null, function* () {\n  import_logging.logger.info(\"Shutting down all Genkit servers...\");\n  yield Promise.all([import_core.ReflectionServer.stopAll(), import_core.FlowServer.stopAll()]);\n  process.exit(0);\n});\nprocess.on(\"SIGTERM\", shutdown);\nprocess.on(\"SIGINT\", shutdown);\nlet disableReflectionApi = false;\nfunction __disableReflectionApi() {\n  disableReflectionApi = true;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=genkit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9nZW5raXQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGdCQUFnQixtQkFBTyxDQUFDLDBGQUFlO0FBQ3ZDLHNCQUFzQixtQkFBTyxDQUFDLHNHQUF3QjtBQUN0RCx1QkFBdUIsbUJBQU8sQ0FBQyx3R0FBeUI7QUFDeEQsbUJBQW1CLG1CQUFPLENBQUMsZ0dBQXFCO0FBQ2hELHNCQUFzQixtQkFBTyxDQUFDLHNHQUF3QjtBQUN0RCx1QkFBdUIsbUJBQU8sQ0FBQyx3R0FBeUI7QUFDeEQsa0JBQWtCLG1CQUFPLENBQUMsOEZBQW9CO0FBQzlDLGtCQUFrQixtQkFBTyxDQUFDLDBFQUFpQjtBQUMzQyx1QkFBdUIsbUJBQU8sQ0FBQyxvRkFBc0I7QUFDckQsa0JBQWtCLG1CQUFPLENBQUMsOERBQU07QUFDaEMscUJBQXFCLG1CQUFPLENBQUMsZ0VBQWM7QUFDM0Msb0JBQW9CLG1CQUFPLENBQUMsOERBQWE7QUFDekMsc0JBQXNCLG1CQUFPLENBQUMsa0VBQWU7QUFDN0MscUJBQXFCLG1CQUFPLENBQUMsZ0VBQWM7QUFDM0MsbUJBQW1CLG1CQUFPLENBQUMsMERBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGVBQWU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsS0FBSztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RjtBQUN4RjtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBLHdGQUF3RjtBQUN4RjtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsbUJBQW1CO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlCQUFpQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELG1CQUFtQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGtCQUFrQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGtCQUFrQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdCQUF3QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Qsa0JBQWtCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGtCQUFrQjtBQUNqRjtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLENBSUw7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9saWIvZ2Vua2l0LmpzPzZhMjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIGdlbmtpdF9leHBvcnRzID0ge307XG5fX2V4cG9ydChnZW5raXRfZXhwb3J0cywge1xuICBHZW5raXQ6ICgpID0+IEdlbmtpdCxcbiAgX19kaXNhYmxlUmVmbGVjdGlvbkFwaTogKCkgPT4gX19kaXNhYmxlUmVmbGVjdGlvbkFwaSxcbiAgZ2Vua2l0OiAoKSA9PiBnZW5raXRcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoZ2Vua2l0X2V4cG9ydHMpO1xudmFyIGltcG9ydF9haSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2FpXCIpO1xudmFyIGltcG9ydF9lbWJlZGRlciA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2FpL2VtYmVkZGVyXCIpO1xudmFyIGltcG9ydF9ldmFsdWF0b3IgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9haS9ldmFsdWF0b3JcIik7XG52YXIgaW1wb3J0X21vZGVsID0gcmVxdWlyZShcIkBnZW5raXQtYWkvYWkvbW9kZWxcIik7XG52YXIgaW1wb3J0X3JlcmFua2VyID0gcmVxdWlyZShcIkBnZW5raXQtYWkvYWkvcmVyYW5rZXJcIik7XG52YXIgaW1wb3J0X3JldHJpZXZlciA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2FpL3JldHJpZXZlclwiKTtcbnZhciBpbXBvcnRfdG9vbCA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2FpL3Rvb2xcIik7XG52YXIgaW1wb3J0X2NvcmUgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlXCIpO1xudmFyIGltcG9ydF9kb3Rwcm9tcHQgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9kb3Rwcm9tcHRcIik7XG52YXIgaW1wb3J0X3V1aWQgPSByZXF1aXJlKFwidXVpZFwiKTtcbnZhciBpbXBvcnRfbG9nZ2luZyA9IHJlcXVpcmUoXCIuL2xvZ2dpbmcuanNcIik7XG52YXIgaW1wb3J0X3BsdWdpbiA9IHJlcXVpcmUoXCIuL3BsdWdpbi5qc1wiKTtcbnZhciBpbXBvcnRfcmVnaXN0cnkgPSByZXF1aXJlKFwiLi9yZWdpc3RyeS5qc1wiKTtcbnZhciBpbXBvcnRfc2Vzc2lvbiA9IHJlcXVpcmUoXCIuL3Nlc3Npb24uanNcIik7XG52YXIgaW1wb3J0X3Rvb2wyID0gcmVxdWlyZShcIi4vdG9vbC5qc1wiKTtcbmNsYXNzIEdlbmtpdCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvKiogRW52aXJvbm1lbnRzIHRoYXQgaGF2ZSBiZWVuIGNvbmZpZ3VyZWQgKGF0IG1pbmltdW0gZGV2KS4gKi9cbiAgICB0aGlzLmNvbmZpZ3VyZWRFbnZzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1wiZGV2XCJdKTtcbiAgICAvKiogUmVmbGVjdGlvbiBzZXJ2ZXIgZm9yIHRoaXMgcmVnaXN0cnkuIE1heSBiZSBudWxsIGlmIG5vdCBzdGFydGVkLiAqL1xuICAgIHRoaXMucmVmbGVjdGlvblNlcnZlciA9IG51bGw7XG4gICAgLyoqIEZsb3cgc2VydmVyLiBNYXkgYmUgbnVsbCBpZiB0aGUgZmxvdyBzZXJ2ZXIgaXMgbm90IGVuYWJsZWQgaW4gY29uZmlndXJhdGlvbiBvciBub3Qgc3RhcnRlZC4gKi9cbiAgICB0aGlzLmZsb3dTZXJ2ZXIgPSBudWxsO1xuICAgIC8qKiBMaXN0IG9mIGZsb3dzIHRoYXQgaGF2ZSBiZWVuIHJlZ2lzdGVyZWQgaW4gdGhpcyBpbnN0YW5jZS4gKi9cbiAgICB0aGlzLnJlZ2lzdGVyZWRGbG93cyA9IFtdO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy5yZWdpc3RyeSA9IG5ldyBpbXBvcnRfcmVnaXN0cnkuUmVnaXN0cnkoKTtcbiAgICB0aGlzLmNvbmZpZ3VyZSgpO1xuICAgIGlmICgoMCwgaW1wb3J0X2NvcmUuaXNEZXZFbnYpKCkgJiYgIWRpc2FibGVSZWZsZWN0aW9uQXBpKSB7XG4gICAgICB0aGlzLnJlZmxlY3Rpb25TZXJ2ZXIgPSBuZXcgaW1wb3J0X2NvcmUuUmVmbGVjdGlvblNlcnZlcih0aGlzLnJlZ2lzdHJ5LCB7XG4gICAgICAgIGNvbmZpZ3VyZWRFbnZzOiBbLi4udGhpcy5jb25maWd1cmVkRW52c11cbiAgICAgIH0pO1xuICAgICAgdGhpcy5yZWZsZWN0aW9uU2VydmVyLnN0YXJ0KCkuY2F0Y2goKGUpID0+IGltcG9ydF9sb2dnaW5nLmxvZ2dlci5lcnJvcik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBEZWZpbmVzIGFuZCByZWdpc3RlcnMgYSBub24tc3RyZWFtaW5nIGZsb3cuXG4gICAqXG4gICAqIEB0b2RvIFRPRE86IEltcHJvdmUgdGhpcyBkb2N1bWVudGF0aW9uIChzaG93IHNuaXBwZXRzLCBldGMpLlxuICAgKi9cbiAgZGVmaW5lRmxvdyhjb25maWcsIGZuKSB7XG4gICAgY29uc3QgZmxvdyA9ICgwLCBpbXBvcnRfY29yZS5kZWZpbmVGbG93KSh0aGlzLnJlZ2lzdHJ5LCBjb25maWcsIGZuKTtcbiAgICB0aGlzLnJlZ2lzdGVyZWRGbG93cy5wdXNoKGZsb3cuZmxvdyk7XG4gICAgcmV0dXJuIGZsb3c7XG4gIH1cbiAgLyoqXG4gICAqIERlZmluZXMgYW5kIHJlZ2lzdGVycyBhIHN0cmVhbWluZyBmbG93LlxuICAgKlxuICAgKiBAdG9kbyBUT0RPOiBJbXByb3ZlIHRoaXMgZG9jdW1lbnRhdGlvbiAoc2hvdyBzbmlwcGV0c3MsIGV0YykuXG4gICAqL1xuICBkZWZpbmVTdHJlYW1pbmdGbG93KGNvbmZpZywgZm4pIHtcbiAgICBjb25zdCBmbG93ID0gKDAsIGltcG9ydF9jb3JlLmRlZmluZVN0cmVhbWluZ0Zsb3cpKFxuICAgICAgdGhpcy5yZWdpc3RyeSxcbiAgICAgIHR5cGVvZiBjb25maWcgPT09IFwic3RyaW5nXCIgPyB7IG5hbWU6IGNvbmZpZyB9IDogY29uZmlnLFxuICAgICAgZm5cbiAgICApO1xuICAgIHRoaXMucmVnaXN0ZXJlZEZsb3dzLnB1c2goZmxvdy5mbG93KTtcbiAgICByZXR1cm4gZmxvdztcbiAgfVxuICAvKipcbiAgICogRGVmaW5lcyBhbmQgcmVnaXN0ZXJzIGEgdG9vbC5cbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHBhc3NlZCB0byBtb2RlbHMgYnkgbmFtZSBvciB2YWx1ZSBkdXJpbmcgYGdlbmVyYXRlYCBjYWxscyB0byBiZSBjYWxsZWQgYXV0b21hdGljYWxseSBiYXNlZCBvbiB0aGUgcHJvbXB0IGFuZCBzaXR1YXRpb24uXG4gICAqL1xuICBkZWZpbmVUb29sKGNvbmZpZywgZm4pIHtcbiAgICByZXR1cm4gKDAsIGltcG9ydF9haS5kZWZpbmVUb29sKSh0aGlzLnJlZ2lzdHJ5LCBjb25maWcsIGZuKTtcbiAgfVxuICAvKipcbiAgICogRGVmaW5lcyBhbmQgcmVnaXN0ZXJzIGEgc2NoZW1hIGZyb20gYSBab2Qgc2NoZW1hLlxuICAgKlxuICAgKiBEZWZpbmVkIHNjaGVtYXMgY2FuIGJlIHJlZmVyZW5jZWQgYnkgYG5hbWVgIGluIHByb21wdHMgaW4gcGxhY2Ugb2YgaW5saW5lIHNjaGVtYXMuXG4gICAqL1xuICBkZWZpbmVTY2hlbWEobmFtZSwgc2NoZW1hKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfY29yZS5kZWZpbmVTY2hlbWEpKHRoaXMucmVnaXN0cnksIG5hbWUsIHNjaGVtYSk7XG4gIH1cbiAgLyoqXG4gICAqIERlZmluZXMgYW5kIHJlZ2lzdGVycyBhIHNjaGVtYSBmcm9tIGEgSlNPTiBzY2hlbWEuXG4gICAqXG4gICAqIERlZmluZWQgc2NoZW1hcyBjYW4gYmUgcmVmZXJlbmNlZCBieSBgbmFtZWAgaW4gcHJvbXB0cyBpbiBwbGFjZSBvZiBpbmxpbmUgc2NoZW1hcy5cbiAgICovXG4gIGRlZmluZUpzb25TY2hlbWEobmFtZSwganNvblNjaGVtYSkge1xuICAgIHJldHVybiAoMCwgaW1wb3J0X2NvcmUuZGVmaW5lSnNvblNjaGVtYSkodGhpcy5yZWdpc3RyeSwgbmFtZSwganNvblNjaGVtYSk7XG4gIH1cbiAgLyoqXG4gICAqIERlZmluZXMgYSBuZXcgbW9kZWwgYW5kIGFkZHMgaXQgdG8gdGhlIHJlZ2lzdHJ5LlxuICAgKi9cbiAgZGVmaW5lTW9kZWwob3B0aW9ucywgcnVubmVyKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfbW9kZWwuZGVmaW5lTW9kZWwpKHRoaXMucmVnaXN0cnksIG9wdGlvbnMsIHJ1bm5lcik7XG4gIH1cbiAgLyoqXG4gICAqIExvb2tzIHVwIGEgcHJvbXB0IGJ5IGBuYW1lYCBhbmQgb3B0aW9uYWwgYHZhcmlhbnRgLlxuICAgKlxuICAgKiBAdG9kbyBUT0RPOiBTaG93IGFuIGV4YW1wbGUgb2YgYSBuYW1lIGFuZCB2YXJpYW50LlxuICAgKi9cbiAgcHJvbXB0KG5hbWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgbGV0IGFjdGlvbiA9IHlpZWxkIHRoaXMucmVnaXN0cnkubG9va3VwQWN0aW9uKFxuICAgICAgICBgL3Byb21wdC8ke25hbWV9YFxuICAgICAgKTtcbiAgICAgIGlmICghYWN0aW9uKSB7XG4gICAgICAgIGFjdGlvbiA9ICh5aWVsZCAoMCwgaW1wb3J0X2RvdHByb21wdC5wcm9tcHQpKHRoaXMucmVnaXN0cnksIG5hbWUsIG9wdGlvbnMpKS5wcm9tcHRBY3Rpb247XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy53cmFwUHJvbXB0QWN0aW9uSW5FeGVjdXRhYmxlUHJvbXB0KFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIHt9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG4gIGRlZmluZVByb21wdChvcHRpb25zLCB0ZW1wbGF0ZU9yRm4pIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmICghb3B0aW9ucy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLm5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLm5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdGVtcGxhdGVPckZuID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBkb3Rwcm9tcHQgPSAoMCwgaW1wb3J0X2RvdHByb21wdC5kZWZpbmVEb3Rwcm9tcHQpKFxuICAgICAgICB0aGlzLnJlZ2lzdHJ5LFxuICAgICAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zKSwge1xuICAgICAgICAgIHRvb2xzOiBvcHRpb25zLnRvb2xzXG4gICAgICAgIH0pLFxuICAgICAgICB0ZW1wbGF0ZU9yRm5cbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy53cmFwUHJvbXB0QWN0aW9uSW5FeGVjdXRhYmxlUHJvbXB0KFxuICAgICAgICBkb3Rwcm9tcHQucHJvbXB0QWN0aW9uLFxuICAgICAgICBvcHRpb25zXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwID0gKDAsIGltcG9ydF9haS5kZWZpbmVQcm9tcHQpKFxuICAgICAgICB0aGlzLnJlZ2lzdHJ5LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgIGlucHV0SnNvblNjaGVtYTogKF9hID0gb3B0aW9ucy5pbnB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmpzb25TY2hlbWEsXG4gICAgICAgICAgaW5wdXRTY2hlbWE6IChfYiA9IG9wdGlvbnMuaW5wdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5zY2hlbWEsXG4gICAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb25cbiAgICAgICAgfSxcbiAgICAgICAgKGlucHV0KSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0ZW1wbGF0ZU9yRm4oaW5wdXQpO1xuICAgICAgICAgIGlmICghcmVzcG9uc2UudG9vbHMgJiYgb3B0aW9ucy50b29scykge1xuICAgICAgICAgICAgcmVzcG9uc2UudG9vbHMgPSAoeWllbGQgKDAsIGltcG9ydF90b29sLnJlc29sdmVUb29scykodGhpcy5yZWdpc3RyeSwgb3B0aW9ucy50b29scykpLm1hcChpbXBvcnRfdG9vbDIudG9Ub29sRGVmaW5pdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub3V0cHV0ICYmIG9wdGlvbnMub3V0cHV0KSB7XG4gICAgICAgICAgICByZXNwb25zZS5vdXRwdXQgPSBvcHRpb25zLm91dHB1dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLndyYXBQcm9tcHRBY3Rpb25JbkV4ZWN1dGFibGVQcm9tcHQocCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIHdyYXBQcm9tcHRBY3Rpb25JbkV4ZWN1dGFibGVQcm9tcHQocCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGV4ZWN1dGFibGVQcm9tcHQgPSAoaW5wdXQsIG9wdHMpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHJlbmRlcmVkT3B0cyA9IHlpZWxkIGV4ZWN1dGFibGVQcm9tcHQucmVuZGVyKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG9wdHMpLCB7XG4gICAgICAgIGlucHV0XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZShyZW5kZXJlZE9wdHMpO1xuICAgIH0pO1xuICAgIGV4ZWN1dGFibGVQcm9tcHQuc3RyZWFtID0gKGlucHV0LCBvcHRzKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBjb25zdCByZW5kZXJlZE9wdHMgPSB5aWVsZCBleGVjdXRhYmxlUHJvbXB0LnJlbmRlcihfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRzKSwge1xuICAgICAgICBpbnB1dFxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVTdHJlYW0ocmVuZGVyZWRPcHRzKTtcbiAgICB9KTtcbiAgICBleGVjdXRhYmxlUHJvbXB0LmdlbmVyYXRlID0gKG9wdCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgcmVuZGVyZWRPcHRzID0geWllbGQgZXhlY3V0YWJsZVByb21wdC5yZW5kZXIob3B0KTtcbiAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlKHJlbmRlcmVkT3B0cyk7XG4gICAgfSk7XG4gICAgZXhlY3V0YWJsZVByb21wdC5nZW5lcmF0ZVN0cmVhbSA9IChvcHQpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHJlbmRlcmVkT3B0cyA9IHlpZWxkIGV4ZWN1dGFibGVQcm9tcHQucmVuZGVyKG9wdCk7XG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVN0cmVhbShyZW5kZXJlZE9wdHMpO1xuICAgIH0pO1xuICAgIGV4ZWN1dGFibGVQcm9tcHQucmVuZGVyID0gKG9wdCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgICAgbGV0IG1vZGVsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgbW9kZWwgPSB5aWVsZCB0aGlzLnJlc29sdmVNb2RlbCgoX2EgPSBvcHQgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdC5tb2RlbCkgIT0gbnVsbCA/IF9hIDogb3B0aW9ucy5tb2RlbCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9tcHRSZXN1bHQgPSB5aWVsZCBwKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgLy8gdGhpcyBmZWVscyBhIGxpdHRlIGhhY2t5LCBidXQgd2UgbmVlZCB0byBwYXNzIHNlc3Npb24gc3RhdGUgYXMgYWN0aW9uIGlucHV0XG4gICAgICAgIC8vIHRvIG1ha2UgaXQgcmVwbGF5YWJsZSBmcm9tIHRyYWNlIHZpZXcgaW4gdGhlIGRldiB1aS5cbiAgICAgICAgX19nZW5raXRfX3Nlc3Npb25TdGF0ZTogeyBzdGF0ZTogKF9iID0gKDAsIGltcG9ydF9zZXNzaW9uLmdldEN1cnJlbnRTZXNzaW9uKSgpKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3RhdGUgfVxuICAgICAgfSwgb3B0LmlucHV0KSk7XG4gICAgICBjb25zdCByZXN1bHRPcHRpb25zID0ge1xuICAgICAgICBtZXNzYWdlczogcHJvbXB0UmVzdWx0Lm1lc3NhZ2VzLFxuICAgICAgICBkb2NzOiBwcm9tcHRSZXN1bHQuZG9jcyxcbiAgICAgICAgdG9vbHM6IChfYyA9IHByb21wdFJlc3VsdC50b29scykgIT0gbnVsbCA/IF9jIDogb3B0aW9ucy50b29scyxcbiAgICAgICAgb3V0cHV0OiAoKF9kID0gcHJvbXB0UmVzdWx0Lm91dHB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmZvcm1hdCkgfHwgKChfZSA9IHByb21wdFJlc3VsdC5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfZS5zY2hlbWEpID8ge1xuICAgICAgICAgIGZvcm1hdDogKF9mID0gcHJvbXB0UmVzdWx0Lm91dHB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmZvcm1hdCxcbiAgICAgICAgICBqc29uU2NoZW1hOiAoX2cgPSBwcm9tcHRSZXN1bHQub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2cuc2NoZW1hXG4gICAgICAgIH0gOiBvcHRpb25zLm91dHB1dCxcbiAgICAgICAgY29uZmlnOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucy5jb25maWcpLCBwcm9tcHRSZXN1bHQuY29uZmlnKSwgb3B0LmNvbmZpZyksXG4gICAgICAgIG1vZGVsXG4gICAgICB9O1xuICAgICAgZGVsZXRlIHJlc3VsdE9wdGlvbnMuaW5wdXQ7XG4gICAgICByZXR1cm4gcmVzdWx0T3B0aW9ucztcbiAgICB9KTtcbiAgICBleGVjdXRhYmxlUHJvbXB0LmFzVG9vbCA9ICgpID0+IHtcbiAgICAgIHJldHVybiBwO1xuICAgIH07XG4gICAgcmV0dXJuIGV4ZWN1dGFibGVQcm9tcHQ7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSByZXRyaWV2ZXIgYWN0aW9uIGZvciB0aGUgcHJvdmlkZWQge0BsaW5rIFJldHJpZXZlckZufSBpbXBsZW1lbnRhdGlvbi5cbiAgICovXG4gIGRlZmluZVJldHJpZXZlcihvcHRpb25zLCBydW5uZXIpIHtcbiAgICByZXR1cm4gKDAsIGltcG9ydF9yZXRyaWV2ZXIuZGVmaW5lUmV0cmlldmVyKSh0aGlzLnJlZ2lzdHJ5LCBvcHRpb25zLCBydW5uZXIpO1xuICB9XG4gIC8qKlxuICAgKiBkZWZpbmVTaW1wbGVSZXRyaWV2ZXIgbWFrZXMgaXQgZWFzeSB0byBtYXAgZXhpc3RpbmcgZGF0YSBpbnRvIGRvY3VtZW50cyB0aGF0XG4gICAqIGNhbiBiZSB1c2VkIGZvciBwcm9tcHQgYXVnbWVudGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSByZXRyaWV2ZXIuXG4gICAqIEBwYXJhbSBoYW5kbGVyIEEgZnVuY3Rpb24gdGhhdCBxdWVyaWVzIGEgZGF0YXN0b3JlIGFuZCByZXR1cm5zIGl0ZW1zIGZyb20gd2hpY2ggdG8gZXh0cmFjdCBkb2N1bWVudHMuXG4gICAqIEByZXR1cm5zIEEgR2Vua2l0IHJldHJpZXZlci5cbiAgICovXG4gIGRlZmluZVNpbXBsZVJldHJpZXZlcihvcHRpb25zLCBoYW5kbGVyKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfcmV0cmlldmVyLmRlZmluZVNpbXBsZVJldHJpZXZlcikodGhpcy5yZWdpc3RyeSwgb3B0aW9ucywgaGFuZGxlcik7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5kZXhlciBhY3Rpb24gZm9yIHRoZSBwcm92aWRlZCB7QGxpbmsgSW5kZXhlckZufSBpbXBsZW1lbnRhdGlvbi5cbiAgICovXG4gIGRlZmluZUluZGV4ZXIob3B0aW9ucywgcnVubmVyKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfcmV0cmlldmVyLmRlZmluZUluZGV4ZXIpKHRoaXMucmVnaXN0cnksIG9wdGlvbnMsIHJ1bm5lcik7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgZXZhbHVhdG9yIGFjdGlvbiBmb3IgdGhlIHByb3ZpZGVkIHtAbGluayBFdmFsdWF0b3JGbn0gaW1wbGVtZW50YXRpb24uXG4gICAqL1xuICBkZWZpbmVFdmFsdWF0b3Iob3B0aW9ucywgcnVubmVyKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfZXZhbHVhdG9yLmRlZmluZUV2YWx1YXRvcikodGhpcy5yZWdpc3RyeSwgb3B0aW9ucywgcnVubmVyKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBlbWJlZGRlciBtb2RlbCBmb3IgdGhlIHByb3ZpZGVkIHtAbGluayBFbWJlZGRlckZufSBtb2RlbCBpbXBsZW1lbnRhdGlvbi5cbiAgICovXG4gIGRlZmluZUVtYmVkZGVyKG9wdGlvbnMsIHJ1bm5lcikge1xuICAgIHJldHVybiAoMCwgaW1wb3J0X2VtYmVkZGVyLmRlZmluZUVtYmVkZGVyKSh0aGlzLnJlZ2lzdHJ5LCBvcHRpb25zLCBydW5uZXIpO1xuICB9XG4gIC8qKlxuICAgKiBjcmVhdGUgYSBoYW5kbGViYXJkcyBoZWxwZXIgKGh0dHBzOi8vaGFuZGxlYmFyc2pzLmNvbS9ndWlkZS9ibG9jay1oZWxwZXJzLmh0bWwpIHRvIGJlIHVzZWQgaW4gZG90cG9ybXB0IHRlbXBsYXRlcy5cbiAgICovXG4gIGRlZmluZUhlbHBlcihuYW1lLCBmbikge1xuICAgIHJldHVybiAoMCwgaW1wb3J0X2RvdHByb21wdC5kZWZpbmVIZWxwZXIpKG5hbWUsIGZuKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIGhhbmRsZWJhcnMgcGFydGlhbCAoaHR0cHM6Ly9oYW5kbGViYXJzanMuY29tL2d1aWRlL3BhcnRpYWxzLmh0bWwpIHRvIGJlIHVzZWQgaW4gZG90cG9ybXB0IHRlbXBsYXRlcy5cbiAgICovXG4gIGRlZmluZVBhcnRpYWwobmFtZSwgc291cmNlKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfZG90cHJvbXB0LmRlZmluZVBhcnRpYWwpKG5hbWUsIHNvdXJjZSk7XG4gIH1cbiAgLyoqXG4gICAqICBDcmVhdGVzIGEgcmVyYW5rZXIgYWN0aW9uIGZvciB0aGUgcHJvdmlkZWQge0BsaW5rIFJlcmFua2VyRm59IGltcGxlbWVudGF0aW9uLlxuICAgKi9cbiAgZGVmaW5lUmVyYW5rZXIob3B0aW9ucywgcnVubmVyKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfcmVyYW5rZXIuZGVmaW5lUmVyYW5rZXIpKHRoaXMucmVnaXN0cnksIG9wdGlvbnMsIHJ1bm5lcik7XG4gIH1cbiAgLyoqXG4gICAqIEVtYmVkcyB0aGUgZ2l2ZW4gYGNvbnRlbnRgIHVzaW5nIHRoZSBzcGVjaWZpZWQgYGVtYmVkZGVyYC5cbiAgICovXG4gIGVtYmVkKHBhcmFtcykge1xuICAgIHJldHVybiAoMCwgaW1wb3J0X2FpLmVtYmVkKSh0aGlzLnJlZ2lzdHJ5LCBwYXJhbXMpO1xuICB9XG4gIC8qKlxuICAgKiBBIHZlbmVlciBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBlbWJlZGRlciBtb2RlbHMgaW4gYnVsay5cbiAgICovXG4gIGVtYmVkTWFueShwYXJhbXMpIHtcbiAgICByZXR1cm4gKDAsIGltcG9ydF9lbWJlZGRlci5lbWJlZE1hbnkpKHRoaXMucmVnaXN0cnksIHBhcmFtcyk7XG4gIH1cbiAgLyoqXG4gICAqIEV2YWx1YXRlcyB0aGUgZ2l2ZW4gYGRhdGFzZXRgIHVzaW5nIHRoZSBzcGVjaWZpZWQgYGV2YWx1YXRvcmAuXG4gICAqL1xuICBldmFsdWF0ZShwYXJhbXMpIHtcbiAgICByZXR1cm4gKDAsIGltcG9ydF9haS5ldmFsdWF0ZSkodGhpcy5yZWdpc3RyeSwgcGFyYW1zKTtcbiAgfVxuICAvKipcbiAgICogUmVyYW5rcyBkb2N1bWVudHMgZnJvbSBhIHtAbGluayBSZXJhbmtlckFyZ3VtZW50fSBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgcXVlcnkuXG4gICAqL1xuICByZXJhbmsocGFyYW1zKSB7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfYWkucmVyYW5rKSh0aGlzLnJlZ2lzdHJ5LCBwYXJhbXMpO1xuICB9XG4gIC8qKlxuICAgKiBJbmRleGVzIGBkb2N1bWVudHNgIHVzaW5nIHRoZSBwcm92aWRlZCBgaW5kZXhlcmAuXG4gICAqL1xuICBpbmRleChwYXJhbXMpIHtcbiAgICByZXR1cm4gKDAsIGltcG9ydF9yZXRyaWV2ZXIuaW5kZXgpKHRoaXMucmVnaXN0cnksIHBhcmFtcyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBkb2N1bWVudHMgZnJvbSB0aGUgYHJldHJpZXZlcmAgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGBxdWVyeWAuXG4gICAqL1xuICByZXRyaWV2ZShwYXJhbXMpIHtcbiAgICByZXR1cm4gKDAsIGltcG9ydF9haS5yZXRyaWV2ZSkodGhpcy5yZWdpc3RyeSwgcGFyYW1zKTtcbiAgfVxuICBnZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGxldCByZXNvbHZlZE9wdGlvbnM7XG4gICAgICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmVzb2x2ZWRPcHRpb25zID0geWllbGQgb3B0aW9ucztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICByZXNvbHZlZE9wdGlvbnMgPSB7XG4gICAgICAgICAgcHJvbXB0OiBvcHRpb25zXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlZE9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgfVxuICAgICAgaWYgKCFyZXNvbHZlZE9wdGlvbnMubW9kZWwpIHtcbiAgICAgICAgcmVzb2x2ZWRPcHRpb25zLm1vZGVsID0gdGhpcy5vcHRpb25zLm1vZGVsO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgwLCBpbXBvcnRfYWkuZ2VuZXJhdGUpKHRoaXMucmVnaXN0cnksIHJlc29sdmVkT3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cbiAgZ2VuZXJhdGVTdHJlYW0ob3B0aW9ucykge1xuICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBsZXQgcmVzb2x2ZWRPcHRpb25zO1xuICAgICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJlc29sdmVkT3B0aW9ucyA9IHlpZWxkIG9wdGlvbnM7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgcmVzb2x2ZWRPcHRpb25zID0ge1xuICAgICAgICAgIHByb21wdDogb3B0aW9uc1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgIH1cbiAgICAgIGlmICghcmVzb2x2ZWRPcHRpb25zLm1vZGVsKSB7XG4gICAgICAgIHJlc29sdmVkT3B0aW9ucy5tb2RlbCA9IHRoaXMub3B0aW9ucy5tb2RlbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoMCwgaW1wb3J0X2FpLmdlbmVyYXRlU3RyZWFtKSh0aGlzLnJlZ2lzdHJ5LCByZXNvbHZlZE9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjaGF0IHNlc3Npb24gd2l0aCB0aGUgcHJvdmlkZWQgb3B0aW9ucy5cbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgY2hhdCA9IGFpLmNoYXQoe1xuICAgKiAgIHN5c3RlbTogJ3RhbGsgbGlrZSBhIHBpcmF0ZScsXG4gICAqIH0pXG4gICAqIGxldCByZXNwb25zZSA9IGF3YWl0IGNoYXQuc2VuZCgndGVsbCBtZSBhIGpva2UnKVxuICAgKiByZXNwb25zZSA9IGF3YWl0IGNoYXQuc2VuZCgnYW5vdGhlciBvbmUnKVxuICAgKiBgYGBcbiAgICovXG4gIGNoYXQob3B0aW9ucykge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmNyZWF0ZVNlc3Npb24oKTtcbiAgICByZXR1cm4gc2Vzc2lvbi5jaGF0KG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBzZXNzaW9uIGZvciB0aGlzIGVudmlyb25tZW50LlxuICAgKi9cbiAgY3JlYXRlU2Vzc2lvbihvcHRpb25zKSB7XG4gICAgY29uc3Qgc2Vzc2lvbklkID0gKDAsIGltcG9ydF91dWlkLnY0KSgpO1xuICAgIGNvbnN0IHNlc3Npb25EYXRhID0ge1xuICAgICAgaWQ6IHNlc3Npb25JZCxcbiAgICAgIHN0YXRlOiBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmluaXRpYWxTdGF0ZVxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBpbXBvcnRfc2Vzc2lvbi5TZXNzaW9uKHRoaXMsIHtcbiAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICBzZXNzaW9uRGF0YSxcbiAgICAgIHN0b3JlOiBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnN0b3JlXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIExvYWRzIGEgc2Vzc2lvbiBmcm9tIHRoZSBzdG9yZS5cbiAgICovXG4gIGxvYWRTZXNzaW9uKHNlc3Npb25JZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBpZiAoIW9wdGlvbnMuc3RvcmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib3B0aW9ucy5zdG9yZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0geWllbGQgb3B0aW9ucy5zdG9yZS5nZXQoc2Vzc2lvbklkKTtcbiAgICAgIHJldHVybiBuZXcgaW1wb3J0X3Nlc3Npb24uU2Vzc2lvbih0aGlzLCB7XG4gICAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICAgIHNlc3Npb25EYXRhLFxuICAgICAgICBzdG9yZTogb3B0aW9ucy5zdG9yZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgc2Vzc2lvbiBmcm9tIGFzeW5jIGxvY2FsIHN0b3JhZ2UuXG4gICAqL1xuICBjdXJyZW50U2Vzc2lvbigpIHtcbiAgICBjb25zdCBjdXJyZW50U2Vzc2lvbiA9ICgwLCBpbXBvcnRfc2Vzc2lvbi5nZXRDdXJyZW50U2Vzc2lvbikoKTtcbiAgICBpZiAoIWN1cnJlbnRTZXNzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgaW1wb3J0X3Nlc3Npb24uU2Vzc2lvbkVycm9yKFwibm90IHJ1bm5pbmcgd2l0aGluIGEgc2Vzc2lvblwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRTZXNzaW9uO1xuICB9XG4gIC8qKlxuICAgKiBDb25maWd1cmVzIHRoZSBHZW5raXQgaW5zdGFuY2UuXG4gICAqL1xuICBjb25maWd1cmUoKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGFjdGl2ZVJlZ2lzdHJ5ID0gdGhpcy5yZWdpc3RyeTtcbiAgICBjb25zdCBwbHVnaW5zID0gWy4uLihfYSA9IHRoaXMub3B0aW9ucy5wbHVnaW5zKSAhPSBudWxsID8gX2EgOiBbXV07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5wcm9tcHREaXIgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGRvdHByb21wdCA9ICgwLCBpbXBvcnRfcGx1Z2luLmdlbmtpdFBsdWdpbikoXCJkb3Rwcm9tcHRcIiwgKGFpKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHZhciBfYTI7XG4gICAgICAgICgwLCBpbXBvcnRfZG90cHJvbXB0LmxvYWRQcm9tcHRGb2xkZXIpKHRoaXMucmVnaXN0cnksIChfYTIgPSB0aGlzLm9wdGlvbnMucHJvbXB0RGlyKSAhPSBudWxsID8gX2EyIDogXCIuL3Byb21wdHNcIik7XG4gICAgICB9KSk7XG4gICAgICBwbHVnaW5zLnB1c2goZG90cHJvbXB0KTtcbiAgICB9XG4gICAgcGx1Z2lucy5mb3JFYWNoKChwbHVnaW4pID0+IHtcbiAgICAgIGNvbnN0IGxvYWRlZFBsdWdpbiA9IHBsdWdpbih0aGlzKTtcbiAgICAgIGltcG9ydF9sb2dnaW5nLmxvZ2dlci5kZWJ1ZyhgUmVnaXN0ZXJpbmcgcGx1Z2luICR7bG9hZGVkUGx1Z2luLm5hbWV9Li4uYCk7XG4gICAgICBhY3RpdmVSZWdpc3RyeS5yZWdpc3RlclBsdWdpblByb3ZpZGVyKGxvYWRlZFBsdWdpbi5uYW1lLCB7XG4gICAgICAgIG5hbWU6IGxvYWRlZFBsdWdpbi5uYW1lLFxuICAgICAgICBpbml0aWFsaXplcigpIHtcbiAgICAgICAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaW1wb3J0X2xvZ2dpbmcubG9nZ2VyLmRlYnVnKGBJbml0aWFsaXppbmcgcGx1Z2luICR7bG9hZGVkUGx1Z2luLm5hbWV9OmApO1xuICAgICAgICAgICAgeWllbGQgbG9hZGVkUGx1Z2luLmluaXRpYWxpemVyKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBTdG9wcyBhbGwgc2VydmVycy5cbiAgICovXG4gIHN0b3BTZXJ2ZXJzKCkge1xuICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB2YXIgX2EsIF9iO1xuICAgICAgeWllbGQgUHJvbWlzZS5hbGwoWyhfYSA9IHRoaXMucmVmbGVjdGlvblNlcnZlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN0b3AoKSwgKF9iID0gdGhpcy5mbG93U2VydmVyKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3RvcCgpXSk7XG4gICAgICB0aGlzLnJlZmxlY3Rpb25TZXJ2ZXIgPSBudWxsO1xuICAgICAgdGhpcy5mbG93U2VydmVyID0gbnVsbDtcbiAgICB9KTtcbiAgfVxuICByZXNvbHZlTW9kZWwobW9kZWxBcmcpIHtcbiAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgaWYgKCFtb2RlbEFyZykge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5tb2RlbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byByZXNvbHZlIG1vZGVsLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlTW9kZWwodGhpcy5vcHRpb25zLm1vZGVsKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbW9kZWxBcmcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHlpZWxkIHRoaXMucmVnaXN0cnkubG9va3VwQWN0aW9uKFxuICAgICAgICAgIGAvbW9kZWwvJHttb2RlbEFyZ31gXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG1vZGVsQXJnLl9fYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBtb2RlbEFyZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IG1vZGVsQXJnO1xuICAgICAgICByZXR1cm4geWllbGQgdGhpcy5yZWdpc3RyeS5sb29rdXBBY3Rpb24oXG4gICAgICAgICAgYC9tb2RlbC8ke3JlZi5uYW1lfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGFydEZsb3dTZXJ2ZXIob3B0aW9ucykge1xuICAgIGNvbnN0IGZsb3dTZXJ2ZXIgPSBuZXcgaW1wb3J0X2NvcmUuRmxvd1NlcnZlcih0aGlzLnJlZ2lzdHJ5LCBvcHRpb25zKTtcbiAgICBmbG93U2VydmVyLnN0YXJ0KCk7XG4gICAgcmV0dXJuIGZsb3dTZXJ2ZXI7XG4gIH1cbn1cbmZ1bmN0aW9uIGdlbmtpdChvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgR2Vua2l0KG9wdGlvbnMpO1xufVxuY29uc3Qgc2h1dGRvd24gPSAoKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgaW1wb3J0X2xvZ2dpbmcubG9nZ2VyLmluZm8oXCJTaHV0dGluZyBkb3duIGFsbCBHZW5raXQgc2VydmVycy4uLlwiKTtcbiAgeWllbGQgUHJvbWlzZS5hbGwoW2ltcG9ydF9jb3JlLlJlZmxlY3Rpb25TZXJ2ZXIuc3RvcEFsbCgpLCBpbXBvcnRfY29yZS5GbG93U2VydmVyLnN0b3BBbGwoKV0pO1xuICBwcm9jZXNzLmV4aXQoMCk7XG59KTtcbnByb2Nlc3Mub24oXCJTSUdURVJNXCIsIHNodXRkb3duKTtcbnByb2Nlc3Mub24oXCJTSUdJTlRcIiwgc2h1dGRvd24pO1xubGV0IGRpc2FibGVSZWZsZWN0aW9uQXBpID0gZmFsc2U7XG5mdW5jdGlvbiBfX2Rpc2FibGVSZWZsZWN0aW9uQXBpKCkge1xuICBkaXNhYmxlUmVmbGVjdGlvbkFwaSA9IHRydWU7XG59XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgR2Vua2l0LFxuICBfX2Rpc2FibGVSZWZsZWN0aW9uQXBpLFxuICBnZW5raXRcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2Vua2l0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/genkit.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/index.js":
/*!******************************************!*\
  !*** ./node_modules/genkit/lib/index.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar src_exports = {};\n__export(src_exports, {\n  Document: () => import_ai.Document,\n  DocumentDataSchema: () => import_ai.DocumentDataSchema,\n  FlowActionInputSchema: () => import_core.FlowActionInputSchema,\n  FlowErrorSchema: () => import_core.FlowErrorSchema,\n  FlowInvokeEnvelopeMessageSchema: () => import_core.FlowInvokeEnvelopeMessageSchema,\n  FlowServer: () => import_core.FlowServer,\n  GENKIT_CLIENT_HEADER: () => import_core.GENKIT_CLIENT_HEADER,\n  GENKIT_VERSION: () => import_core.GENKIT_VERSION,\n  GenerationBlockedError: () => import_ai.GenerationBlockedError,\n  GenerationCommonConfigSchema: () => import_ai.GenerationCommonConfigSchema,\n  GenerationResponseError: () => import_ai.GenerationResponseError,\n  GenkitError: () => import_core.GenkitError,\n  LlmResponseSchema: () => import_ai.LlmResponseSchema,\n  LlmStatsSchema: () => import_ai.LlmStatsSchema,\n  Message: () => import_ai.Message,\n  MessageSchema: () => import_ai.MessageSchema,\n  ModelIdSchema: () => import_ai.ModelIdSchema,\n  ModelRequestSchema: () => import_ai.ModelRequestSchema,\n  ModelResponseSchema: () => import_ai.ModelResponseSchema,\n  PartSchema: () => import_ai.PartSchema,\n  ReflectionServer: () => import_core.ReflectionServer,\n  RoleSchema: () => import_ai.RoleSchema,\n  RunActionResponseSchema: () => import_core.RunActionResponseSchema,\n  StatusCodes: () => import_core.StatusCodes,\n  StatusSchema: () => import_core.StatusSchema,\n  ToolCallSchema: () => import_ai.ToolCallSchema,\n  ToolSchema: () => import_ai.ToolSchema,\n  asTool: () => import_ai.asTool,\n  defineFlow: () => import_core.defineFlow,\n  defineJsonSchema: () => import_core.defineJsonSchema,\n  defineSchema: () => import_core.defineSchema,\n  defineStreamingFlow: () => import_core.defineStreamingFlow,\n  deleteUndefinedProps: () => import_core.deleteUndefinedProps,\n  embedderRef: () => import_ai.embedderRef,\n  evaluatorRef: () => import_ai.evaluatorRef,\n  flowMetadataPrefix: () => import_core.flowMetadataPrefix,\n  getCurrentEnv: () => import_core.getCurrentEnv,\n  getFlowAuth: () => import_core.getFlowAuth,\n  getStreamingCallback: () => import_core.getStreamingCallback,\n  indexerRef: () => import_ai.indexerRef,\n  isDevEnv: () => import_core.isDevEnv,\n  loadPromptFile: () => import_dotprompt.loadPromptFile,\n  rerankerRef: () => import_ai.rerankerRef,\n  retrieverRef: () => import_ai.retrieverRef,\n  run: () => import_core.run,\n  runWithStreamingCallback: () => import_core.runWithStreamingCallback,\n  toGenerateRequest: () => import_ai.toGenerateRequest,\n  toToolWireFormat: () => import_ai.toToolWireFormat,\n  z: () => import_core.z\n});\nmodule.exports = __toCommonJS(src_exports);\nvar import_ai = __webpack_require__(/*! @genkit-ai/ai */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.js\");\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_dotprompt = __webpack_require__(/*! @genkit-ai/dotprompt */ \"(rsc)/./node_modules/@genkit-ai/dotprompt/lib/index.js\");\n__reExport(src_exports, __webpack_require__(/*! ./genkit.js */ \"(rsc)/./node_modules/genkit/lib/genkit.js\"), module.exports);\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQWU7QUFDdkMsa0JBQWtCLG1CQUFPLENBQUMsMEVBQWlCO0FBQzNDLHVCQUF1QixtQkFBTyxDQUFDLG9GQUFzQjtBQUNyRCx3QkFBd0IsbUJBQU8sQ0FBQyw4REFBYTtBQUM3QztBQUNBLE1BQU0sQ0FtREw7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9saWIvaW5kZXguanM/OTVjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fcmVFeHBvcnQgPSAodGFyZ2V0LCBtb2QsIHNlY29uZFRhcmdldCkgPT4gKF9fY29weVByb3BzKHRhcmdldCwgbW9kLCBcImRlZmF1bHRcIiksIHNlY29uZFRhcmdldCAmJiBfX2NvcHlQcm9wcyhzZWNvbmRUYXJnZXQsIG1vZCwgXCJkZWZhdWx0XCIpKTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIHNyY19leHBvcnRzID0ge307XG5fX2V4cG9ydChzcmNfZXhwb3J0cywge1xuICBEb2N1bWVudDogKCkgPT4gaW1wb3J0X2FpLkRvY3VtZW50LFxuICBEb2N1bWVudERhdGFTY2hlbWE6ICgpID0+IGltcG9ydF9haS5Eb2N1bWVudERhdGFTY2hlbWEsXG4gIEZsb3dBY3Rpb25JbnB1dFNjaGVtYTogKCkgPT4gaW1wb3J0X2NvcmUuRmxvd0FjdGlvbklucHV0U2NoZW1hLFxuICBGbG93RXJyb3JTY2hlbWE6ICgpID0+IGltcG9ydF9jb3JlLkZsb3dFcnJvclNjaGVtYSxcbiAgRmxvd0ludm9rZUVudmVsb3BlTWVzc2FnZVNjaGVtYTogKCkgPT4gaW1wb3J0X2NvcmUuRmxvd0ludm9rZUVudmVsb3BlTWVzc2FnZVNjaGVtYSxcbiAgRmxvd1NlcnZlcjogKCkgPT4gaW1wb3J0X2NvcmUuRmxvd1NlcnZlcixcbiAgR0VOS0lUX0NMSUVOVF9IRUFERVI6ICgpID0+IGltcG9ydF9jb3JlLkdFTktJVF9DTElFTlRfSEVBREVSLFxuICBHRU5LSVRfVkVSU0lPTjogKCkgPT4gaW1wb3J0X2NvcmUuR0VOS0lUX1ZFUlNJT04sXG4gIEdlbmVyYXRpb25CbG9ja2VkRXJyb3I6ICgpID0+IGltcG9ydF9haS5HZW5lcmF0aW9uQmxvY2tlZEVycm9yLFxuICBHZW5lcmF0aW9uQ29tbW9uQ29uZmlnU2NoZW1hOiAoKSA9PiBpbXBvcnRfYWkuR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYSxcbiAgR2VuZXJhdGlvblJlc3BvbnNlRXJyb3I6ICgpID0+IGltcG9ydF9haS5HZW5lcmF0aW9uUmVzcG9uc2VFcnJvcixcbiAgR2Vua2l0RXJyb3I6ICgpID0+IGltcG9ydF9jb3JlLkdlbmtpdEVycm9yLFxuICBMbG1SZXNwb25zZVNjaGVtYTogKCkgPT4gaW1wb3J0X2FpLkxsbVJlc3BvbnNlU2NoZW1hLFxuICBMbG1TdGF0c1NjaGVtYTogKCkgPT4gaW1wb3J0X2FpLkxsbVN0YXRzU2NoZW1hLFxuICBNZXNzYWdlOiAoKSA9PiBpbXBvcnRfYWkuTWVzc2FnZSxcbiAgTWVzc2FnZVNjaGVtYTogKCkgPT4gaW1wb3J0X2FpLk1lc3NhZ2VTY2hlbWEsXG4gIE1vZGVsSWRTY2hlbWE6ICgpID0+IGltcG9ydF9haS5Nb2RlbElkU2NoZW1hLFxuICBNb2RlbFJlcXVlc3RTY2hlbWE6ICgpID0+IGltcG9ydF9haS5Nb2RlbFJlcXVlc3RTY2hlbWEsXG4gIE1vZGVsUmVzcG9uc2VTY2hlbWE6ICgpID0+IGltcG9ydF9haS5Nb2RlbFJlc3BvbnNlU2NoZW1hLFxuICBQYXJ0U2NoZW1hOiAoKSA9PiBpbXBvcnRfYWkuUGFydFNjaGVtYSxcbiAgUmVmbGVjdGlvblNlcnZlcjogKCkgPT4gaW1wb3J0X2NvcmUuUmVmbGVjdGlvblNlcnZlcixcbiAgUm9sZVNjaGVtYTogKCkgPT4gaW1wb3J0X2FpLlJvbGVTY2hlbWEsXG4gIFJ1bkFjdGlvblJlc3BvbnNlU2NoZW1hOiAoKSA9PiBpbXBvcnRfY29yZS5SdW5BY3Rpb25SZXNwb25zZVNjaGVtYSxcbiAgU3RhdHVzQ29kZXM6ICgpID0+IGltcG9ydF9jb3JlLlN0YXR1c0NvZGVzLFxuICBTdGF0dXNTY2hlbWE6ICgpID0+IGltcG9ydF9jb3JlLlN0YXR1c1NjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWE6ICgpID0+IGltcG9ydF9haS5Ub29sQ2FsbFNjaGVtYSxcbiAgVG9vbFNjaGVtYTogKCkgPT4gaW1wb3J0X2FpLlRvb2xTY2hlbWEsXG4gIGFzVG9vbDogKCkgPT4gaW1wb3J0X2FpLmFzVG9vbCxcbiAgZGVmaW5lRmxvdzogKCkgPT4gaW1wb3J0X2NvcmUuZGVmaW5lRmxvdyxcbiAgZGVmaW5lSnNvblNjaGVtYTogKCkgPT4gaW1wb3J0X2NvcmUuZGVmaW5lSnNvblNjaGVtYSxcbiAgZGVmaW5lU2NoZW1hOiAoKSA9PiBpbXBvcnRfY29yZS5kZWZpbmVTY2hlbWEsXG4gIGRlZmluZVN0cmVhbWluZ0Zsb3c6ICgpID0+IGltcG9ydF9jb3JlLmRlZmluZVN0cmVhbWluZ0Zsb3csXG4gIGRlbGV0ZVVuZGVmaW5lZFByb3BzOiAoKSA9PiBpbXBvcnRfY29yZS5kZWxldGVVbmRlZmluZWRQcm9wcyxcbiAgZW1iZWRkZXJSZWY6ICgpID0+IGltcG9ydF9haS5lbWJlZGRlclJlZixcbiAgZXZhbHVhdG9yUmVmOiAoKSA9PiBpbXBvcnRfYWkuZXZhbHVhdG9yUmVmLFxuICBmbG93TWV0YWRhdGFQcmVmaXg6ICgpID0+IGltcG9ydF9jb3JlLmZsb3dNZXRhZGF0YVByZWZpeCxcbiAgZ2V0Q3VycmVudEVudjogKCkgPT4gaW1wb3J0X2NvcmUuZ2V0Q3VycmVudEVudixcbiAgZ2V0Rmxvd0F1dGg6ICgpID0+IGltcG9ydF9jb3JlLmdldEZsb3dBdXRoLFxuICBnZXRTdHJlYW1pbmdDYWxsYmFjazogKCkgPT4gaW1wb3J0X2NvcmUuZ2V0U3RyZWFtaW5nQ2FsbGJhY2ssXG4gIGluZGV4ZXJSZWY6ICgpID0+IGltcG9ydF9haS5pbmRleGVyUmVmLFxuICBpc0RldkVudjogKCkgPT4gaW1wb3J0X2NvcmUuaXNEZXZFbnYsXG4gIGxvYWRQcm9tcHRGaWxlOiAoKSA9PiBpbXBvcnRfZG90cHJvbXB0LmxvYWRQcm9tcHRGaWxlLFxuICByZXJhbmtlclJlZjogKCkgPT4gaW1wb3J0X2FpLnJlcmFua2VyUmVmLFxuICByZXRyaWV2ZXJSZWY6ICgpID0+IGltcG9ydF9haS5yZXRyaWV2ZXJSZWYsXG4gIHJ1bjogKCkgPT4gaW1wb3J0X2NvcmUucnVuLFxuICBydW5XaXRoU3RyZWFtaW5nQ2FsbGJhY2s6ICgpID0+IGltcG9ydF9jb3JlLnJ1bldpdGhTdHJlYW1pbmdDYWxsYmFjayxcbiAgdG9HZW5lcmF0ZVJlcXVlc3Q6ICgpID0+IGltcG9ydF9haS50b0dlbmVyYXRlUmVxdWVzdCxcbiAgdG9Ub29sV2lyZUZvcm1hdDogKCkgPT4gaW1wb3J0X2FpLnRvVG9vbFdpcmVGb3JtYXQsXG4gIHo6ICgpID0+IGltcG9ydF9jb3JlLnpcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoc3JjX2V4cG9ydHMpO1xudmFyIGltcG9ydF9haSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2FpXCIpO1xudmFyIGltcG9ydF9jb3JlID0gcmVxdWlyZShcIkBnZW5raXQtYWkvY29yZVwiKTtcbnZhciBpbXBvcnRfZG90cHJvbXB0ID0gcmVxdWlyZShcIkBnZW5raXQtYWkvZG90cHJvbXB0XCIpO1xuX19yZUV4cG9ydChzcmNfZXhwb3J0cywgcmVxdWlyZShcIi4vZ2Vua2l0LmpzXCIpLCBtb2R1bGUuZXhwb3J0cyk7XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgRG9jdW1lbnQsXG4gIERvY3VtZW50RGF0YVNjaGVtYSxcbiAgRmxvd0FjdGlvbklucHV0U2NoZW1hLFxuICBGbG93RXJyb3JTY2hlbWEsXG4gIEZsb3dJbnZva2VFbnZlbG9wZU1lc3NhZ2VTY2hlbWEsXG4gIEZsb3dTZXJ2ZXIsXG4gIEdFTktJVF9DTElFTlRfSEVBREVSLFxuICBHRU5LSVRfVkVSU0lPTixcbiAgR2VuZXJhdGlvbkJsb2NrZWRFcnJvcixcbiAgR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYSxcbiAgR2VuZXJhdGlvblJlc3BvbnNlRXJyb3IsXG4gIEdlbmtpdEVycm9yLFxuICBMbG1SZXNwb25zZVNjaGVtYSxcbiAgTGxtU3RhdHNTY2hlbWEsXG4gIE1lc3NhZ2UsXG4gIE1lc3NhZ2VTY2hlbWEsXG4gIE1vZGVsSWRTY2hlbWEsXG4gIE1vZGVsUmVxdWVzdFNjaGVtYSxcbiAgTW9kZWxSZXNwb25zZVNjaGVtYSxcbiAgUGFydFNjaGVtYSxcbiAgUmVmbGVjdGlvblNlcnZlcixcbiAgUm9sZVNjaGVtYSxcbiAgUnVuQWN0aW9uUmVzcG9uc2VTY2hlbWEsXG4gIFN0YXR1c0NvZGVzLFxuICBTdGF0dXNTY2hlbWEsXG4gIFRvb2xDYWxsU2NoZW1hLFxuICBUb29sU2NoZW1hLFxuICBhc1Rvb2wsXG4gIGRlZmluZUZsb3csXG4gIGRlZmluZUpzb25TY2hlbWEsXG4gIGRlZmluZVNjaGVtYSxcbiAgZGVmaW5lU3RyZWFtaW5nRmxvdyxcbiAgZGVsZXRlVW5kZWZpbmVkUHJvcHMsXG4gIGVtYmVkZGVyUmVmLFxuICBldmFsdWF0b3JSZWYsXG4gIGZsb3dNZXRhZGF0YVByZWZpeCxcbiAgZ2V0Q3VycmVudEVudixcbiAgZ2V0Rmxvd0F1dGgsXG4gIGdldFN0cmVhbWluZ0NhbGxiYWNrLFxuICBpbmRleGVyUmVmLFxuICBpc0RldkVudixcbiAgbG9hZFByb21wdEZpbGUsXG4gIHJlcmFua2VyUmVmLFxuICByZXRyaWV2ZXJSZWYsXG4gIHJ1bixcbiAgcnVuV2l0aFN0cmVhbWluZ0NhbGxiYWNrLFxuICB0b0dlbmVyYXRlUmVxdWVzdCxcbiAgdG9Ub29sV2lyZUZvcm1hdCxcbiAgeixcbiAgLi4ucmVxdWlyZShcIi4vZ2Vua2l0LmpzXCIpXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/logging.js":
/*!********************************************!*\
  !*** ./node_modules/genkit/lib/logging.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar logging_exports = {};\n__export(logging_exports, {\n  logger: () => import_logging.logger\n});\nmodule.exports = __toCommonJS(logging_exports);\nvar import_logging = __webpack_require__(/*! @genkit-ai/core/logging */ \"(rsc)/./node_modules/@genkit-ai/core/lib/logging.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=logging.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9sb2dnaW5nLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EscUJBQXFCLG1CQUFPLENBQUMsb0ZBQXlCO0FBQ3REO0FBQ0EsTUFBTSxDQUVMO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbGliL2xvZ2dpbmcuanM/YWI3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgbG9nZ2luZ19leHBvcnRzID0ge307XG5fX2V4cG9ydChsb2dnaW5nX2V4cG9ydHMsIHtcbiAgbG9nZ2VyOiAoKSA9PiBpbXBvcnRfbG9nZ2luZy5sb2dnZXJcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMobG9nZ2luZ19leHBvcnRzKTtcbnZhciBpbXBvcnRfbG9nZ2luZyA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvbG9nZ2luZ1wiKTtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBsb2dnZXJcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2luZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/logging.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/middleware.js":
/*!***********************************************!*\
  !*** ./node_modules/genkit/lib/middleware.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar middleware_exports = {};\n__export(middleware_exports, {\n  augmentWithContext: () => import_middleware.augmentWithContext,\n  conformOutput: () => import_middleware.conformOutput,\n  downloadRequestMedia: () => import_middleware.downloadRequestMedia,\n  simulateSystemPrompt: () => import_middleware.simulateSystemPrompt,\n  validateSupport: () => import_middleware.validateSupport\n});\nmodule.exports = __toCommonJS(middleware_exports);\nvar import_middleware = __webpack_require__(/*! @genkit-ai/ai/model/middleware */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model/middleware.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=middleware.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9taWRkbGV3YXJlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSx3QkFBd0IsbUJBQU8sQ0FBQyxzSEFBZ0M7QUFDaEU7QUFDQSxNQUFNLENBTUw7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9saWIvbWlkZGxld2FyZS5qcz9jMzc1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBtaWRkbGV3YXJlX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KG1pZGRsZXdhcmVfZXhwb3J0cywge1xuICBhdWdtZW50V2l0aENvbnRleHQ6ICgpID0+IGltcG9ydF9taWRkbGV3YXJlLmF1Z21lbnRXaXRoQ29udGV4dCxcbiAgY29uZm9ybU91dHB1dDogKCkgPT4gaW1wb3J0X21pZGRsZXdhcmUuY29uZm9ybU91dHB1dCxcbiAgZG93bmxvYWRSZXF1ZXN0TWVkaWE6ICgpID0+IGltcG9ydF9taWRkbGV3YXJlLmRvd25sb2FkUmVxdWVzdE1lZGlhLFxuICBzaW11bGF0ZVN5c3RlbVByb21wdDogKCkgPT4gaW1wb3J0X21pZGRsZXdhcmUuc2ltdWxhdGVTeXN0ZW1Qcm9tcHQsXG4gIHZhbGlkYXRlU3VwcG9ydDogKCkgPT4gaW1wb3J0X21pZGRsZXdhcmUudmFsaWRhdGVTdXBwb3J0XG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKG1pZGRsZXdhcmVfZXhwb3J0cyk7XG52YXIgaW1wb3J0X21pZGRsZXdhcmUgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9haS9tb2RlbC9taWRkbGV3YXJlXCIpO1xuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIGF1Z21lbnRXaXRoQ29udGV4dCxcbiAgY29uZm9ybU91dHB1dCxcbiAgZG93bmxvYWRSZXF1ZXN0TWVkaWEsXG4gIHNpbXVsYXRlU3lzdGVtUHJvbXB0LFxuICB2YWxpZGF0ZVN1cHBvcnRcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlkZGxld2FyZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/middleware.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/model.js":
/*!******************************************!*\
  !*** ./node_modules/genkit/lib/model.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar model_exports = {};\n__export(model_exports, {\n  CandidateErrorSchema: () => import_model.CandidateErrorSchema,\n  CandidateSchema: () => import_model.CandidateSchema,\n  CustomPartSchema: () => import_model.CustomPartSchema,\n  DataPartSchema: () => import_model.DataPartSchema,\n  GenerateRequestSchema: () => import_model.GenerateRequestSchema,\n  GenerateResponseChunkSchema: () => import_model.GenerateResponseChunkSchema,\n  GenerateResponseSchema: () => import_model.GenerateResponseSchema,\n  GenerationCommonConfigSchema: () => import_model.GenerationCommonConfigSchema,\n  GenerationUsageSchema: () => import_model.GenerationUsageSchema,\n  MediaPartSchema: () => import_model.MediaPartSchema,\n  MessageSchema: () => import_model.MessageSchema,\n  ModelInfoSchema: () => import_model.ModelInfoSchema,\n  ModelRequestSchema: () => import_model.ModelRequestSchema,\n  ModelResponseChunkSchema: () => import_model.ModelResponseChunkSchema,\n  ModelResponseSchema: () => import_model.ModelResponseSchema,\n  PartSchema: () => import_model.PartSchema,\n  RoleSchema: () => import_model.RoleSchema,\n  TextPartSchema: () => import_model.TextPartSchema,\n  ToolDefinitionSchema: () => import_model.ToolDefinitionSchema,\n  ToolRequestPartSchema: () => import_model.ToolRequestPartSchema,\n  ToolResponsePartSchema: () => import_model.ToolResponsePartSchema,\n  getBasicUsageStats: () => import_model.getBasicUsageStats,\n  modelRef: () => import_model.modelRef\n});\nmodule.exports = __toCommonJS(model_exports);\nvar import_model = __webpack_require__(/*! @genkit-ai/ai/model */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=model.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9tb2RlbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsbUJBQW1CLG1CQUFPLENBQUMsZ0dBQXFCO0FBQ2hEO0FBQ0EsTUFBTSxDQXdCTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9tb2RlbC5qcz81YjMzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBtb2RlbF9leHBvcnRzID0ge307XG5fX2V4cG9ydChtb2RlbF9leHBvcnRzLCB7XG4gIENhbmRpZGF0ZUVycm9yU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuQ2FuZGlkYXRlRXJyb3JTY2hlbWEsXG4gIENhbmRpZGF0ZVNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLkNhbmRpZGF0ZVNjaGVtYSxcbiAgQ3VzdG9tUGFydFNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLkN1c3RvbVBhcnRTY2hlbWEsXG4gIERhdGFQYXJ0U2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuRGF0YVBhcnRTY2hlbWEsXG4gIEdlbmVyYXRlUmVxdWVzdFNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLkdlbmVyYXRlUmVxdWVzdFNjaGVtYSxcbiAgR2VuZXJhdGVSZXNwb25zZUNodW5rU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuR2VuZXJhdGVSZXNwb25zZUNodW5rU2NoZW1hLFxuICBHZW5lcmF0ZVJlc3BvbnNlU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuR2VuZXJhdGVSZXNwb25zZVNjaGVtYSxcbiAgR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLkdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWEsXG4gIEdlbmVyYXRpb25Vc2FnZVNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLkdlbmVyYXRpb25Vc2FnZVNjaGVtYSxcbiAgTWVkaWFQYXJ0U2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuTWVkaWFQYXJ0U2NoZW1hLFxuICBNZXNzYWdlU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuTWVzc2FnZVNjaGVtYSxcbiAgTW9kZWxJbmZvU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuTW9kZWxJbmZvU2NoZW1hLFxuICBNb2RlbFJlcXVlc3RTY2hlbWE6ICgpID0+IGltcG9ydF9tb2RlbC5Nb2RlbFJlcXVlc3RTY2hlbWEsXG4gIE1vZGVsUmVzcG9uc2VDaHVua1NjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLk1vZGVsUmVzcG9uc2VDaHVua1NjaGVtYSxcbiAgTW9kZWxSZXNwb25zZVNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLk1vZGVsUmVzcG9uc2VTY2hlbWEsXG4gIFBhcnRTY2hlbWE6ICgpID0+IGltcG9ydF9tb2RlbC5QYXJ0U2NoZW1hLFxuICBSb2xlU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuUm9sZVNjaGVtYSxcbiAgVGV4dFBhcnRTY2hlbWE6ICgpID0+IGltcG9ydF9tb2RlbC5UZXh0UGFydFNjaGVtYSxcbiAgVG9vbERlZmluaXRpb25TY2hlbWE6ICgpID0+IGltcG9ydF9tb2RlbC5Ub29sRGVmaW5pdGlvblNjaGVtYSxcbiAgVG9vbFJlcXVlc3RQYXJ0U2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuVG9vbFJlcXVlc3RQYXJ0U2NoZW1hLFxuICBUb29sUmVzcG9uc2VQYXJ0U2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuVG9vbFJlc3BvbnNlUGFydFNjaGVtYSxcbiAgZ2V0QmFzaWNVc2FnZVN0YXRzOiAoKSA9PiBpbXBvcnRfbW9kZWwuZ2V0QmFzaWNVc2FnZVN0YXRzLFxuICBtb2RlbFJlZjogKCkgPT4gaW1wb3J0X21vZGVsLm1vZGVsUmVmXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKG1vZGVsX2V4cG9ydHMpO1xudmFyIGltcG9ydF9tb2RlbCA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2FpL21vZGVsXCIpO1xuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIENhbmRpZGF0ZUVycm9yU2NoZW1hLFxuICBDYW5kaWRhdGVTY2hlbWEsXG4gIEN1c3RvbVBhcnRTY2hlbWEsXG4gIERhdGFQYXJ0U2NoZW1hLFxuICBHZW5lcmF0ZVJlcXVlc3RTY2hlbWEsXG4gIEdlbmVyYXRlUmVzcG9uc2VDaHVua1NjaGVtYSxcbiAgR2VuZXJhdGVSZXNwb25zZVNjaGVtYSxcbiAgR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYSxcbiAgR2VuZXJhdGlvblVzYWdlU2NoZW1hLFxuICBNZWRpYVBhcnRTY2hlbWEsXG4gIE1lc3NhZ2VTY2hlbWEsXG4gIE1vZGVsSW5mb1NjaGVtYSxcbiAgTW9kZWxSZXF1ZXN0U2NoZW1hLFxuICBNb2RlbFJlc3BvbnNlQ2h1bmtTY2hlbWEsXG4gIE1vZGVsUmVzcG9uc2VTY2hlbWEsXG4gIFBhcnRTY2hlbWEsXG4gIFJvbGVTY2hlbWEsXG4gIFRleHRQYXJ0U2NoZW1hLFxuICBUb29sRGVmaW5pdGlvblNjaGVtYSxcbiAgVG9vbFJlcXVlc3RQYXJ0U2NoZW1hLFxuICBUb29sUmVzcG9uc2VQYXJ0U2NoZW1hLFxuICBnZXRCYXNpY1VzYWdlU3RhdHMsXG4gIG1vZGVsUmVmXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGVsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/model.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/plugin.js":
/*!*******************************************!*\
  !*** ./node_modules/genkit/lib/plugin.js ***!
  \*******************************************/
/***/ ((module) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar plugin_exports = {};\n__export(plugin_exports, {\n  genkitPlugin: () => genkitPlugin\n});\nmodule.exports = __toCommonJS(plugin_exports);\nfunction genkitPlugin(pluginName, initFn) {\n  return (genkit) => ({\n    name: pluginName,\n    initializer: () => __async(this, null, function* () {\n      yield initFn(genkit);\n    })\n  });\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=plugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9wbHVnaW4uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLE1BQU0sQ0FFTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9wbHVnaW4uanM/ODIwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIHBsdWdpbl9leHBvcnRzID0ge307XG5fX2V4cG9ydChwbHVnaW5fZXhwb3J0cywge1xuICBnZW5raXRQbHVnaW46ICgpID0+IGdlbmtpdFBsdWdpblxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhwbHVnaW5fZXhwb3J0cyk7XG5mdW5jdGlvbiBnZW5raXRQbHVnaW4ocGx1Z2luTmFtZSwgaW5pdEZuKSB7XG4gIHJldHVybiAoZ2Vua2l0KSA9PiAoe1xuICAgIG5hbWU6IHBsdWdpbk5hbWUsXG4gICAgaW5pdGlhbGl6ZXI6ICgpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIHlpZWxkIGluaXRGbihnZW5raXQpO1xuICAgIH0pXG4gIH0pO1xufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdlbmtpdFBsdWdpblxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbHVnaW4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/plugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/registry.js":
/*!*********************************************!*\
  !*** ./node_modules/genkit/lib/registry.js ***!
  \*********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar registry_exports = {};\n__export(registry_exports, {\n  ActionType: () => import_registry.ActionType,\n  AsyncProvider: () => import_registry.AsyncProvider,\n  Registry: () => import_registry.Registry,\n  Schema: () => import_registry.Schema\n});\nmodule.exports = __toCommonJS(registry_exports);\nvar import_registry = __webpack_require__(/*! @genkit-ai/core/registry */ \"(rsc)/./node_modules/@genkit-ai/core/lib/registry.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=registry.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9yZWdpc3RyeS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHNCQUFzQixtQkFBTyxDQUFDLHNGQUEwQjtBQUN4RDtBQUNBLE1BQU0sQ0FLTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9yZWdpc3RyeS5qcz9kMmM0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciByZWdpc3RyeV9leHBvcnRzID0ge307XG5fX2V4cG9ydChyZWdpc3RyeV9leHBvcnRzLCB7XG4gIEFjdGlvblR5cGU6ICgpID0+IGltcG9ydF9yZWdpc3RyeS5BY3Rpb25UeXBlLFxuICBBc3luY1Byb3ZpZGVyOiAoKSA9PiBpbXBvcnRfcmVnaXN0cnkuQXN5bmNQcm92aWRlcixcbiAgUmVnaXN0cnk6ICgpID0+IGltcG9ydF9yZWdpc3RyeS5SZWdpc3RyeSxcbiAgU2NoZW1hOiAoKSA9PiBpbXBvcnRfcmVnaXN0cnkuU2NoZW1hXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHJlZ2lzdHJ5X2V4cG9ydHMpO1xudmFyIGltcG9ydF9yZWdpc3RyeSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvcmVnaXN0cnlcIik7XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgQWN0aW9uVHlwZSxcbiAgQXN5bmNQcm92aWRlcixcbiAgUmVnaXN0cnksXG4gIFNjaGVtYVxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWdpc3RyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/registry.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/session.js":
/*!********************************************!*\
  !*** ./node_modules/genkit/lib/session.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar session_exports = {};\n__export(session_exports, {\n  Session: () => Session,\n  SessionError: () => SessionError,\n  getCurrentSession: () => getCurrentSession,\n  inMemorySessionStore: () => inMemorySessionStore,\n  runWithSession: () => runWithSession\n});\nmodule.exports = __toCommonJS(session_exports);\nvar import_ai = __webpack_require__(/*! @genkit-ai/ai */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.js\");\nvar import_node_async_hooks = __webpack_require__(/*! node:async_hooks */ \"node:async_hooks\");\nvar import_uuid = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nvar import_chat = __webpack_require__(/*! ./chat */ \"(rsc)/./node_modules/genkit/lib/chat.js\");\nclass Session {\n  constructor(genkit, options) {\n    this.genkit = genkit;\n    var _a, _b, _c;\n    this.id = (_a = options == null ? void 0 : options.id) != null ? _a : (0, import_uuid.v4)();\n    this.sessionData = (_b = options == null ? void 0 : options.sessionData) != null ? _b : {\n      id: this.id\n    };\n    if (!this.sessionData) {\n      this.sessionData = { id: this.id };\n    }\n    if (!this.sessionData.threads) {\n      this.sessionData.threads = {};\n    }\n    this.store = (_c = options == null ? void 0 : options.store) != null ? _c : new InMemorySessionStore();\n  }\n  get state() {\n    if (this.genkit instanceof Session) {\n      return this.genkit.state;\n    }\n    return this.sessionData.state;\n  }\n  /**\n   * Update session state data.\n   */\n  updateState(data) {\n    return __async(this, null, function* () {\n      let sessionData = this.sessionData;\n      if (!sessionData) {\n        sessionData = {};\n      }\n      sessionData.state = data;\n      this.sessionData = sessionData;\n      yield this.store.save(this.id, sessionData);\n    });\n  }\n  /**\n   * Update messages for a given thread.\n   */\n  updateMessages(thread, messasges) {\n    return __async(this, null, function* () {\n      let sessionData = this.sessionData;\n      if (!sessionData) {\n        sessionData = {};\n      }\n      if (!sessionData.threads) {\n        sessionData.threads = {};\n      }\n      sessionData.threads[thread] = messasges;\n      this.sessionData = sessionData;\n      yield this.store.save(this.id, sessionData);\n    });\n  }\n  chat(optionsOrThreadName, maybeOptions) {\n    return runWithSession(this, () => {\n      var _a, _b, _c, _d;\n      let options;\n      let threadName = import_chat.MAIN_THREAD;\n      if (maybeOptions) {\n        threadName = optionsOrThreadName;\n        options = maybeOptions;\n      } else if (optionsOrThreadName) {\n        if (typeof optionsOrThreadName === \"string\") {\n          threadName = optionsOrThreadName;\n        } else {\n          options = optionsOrThreadName;\n        }\n      }\n      let requestBase;\n      if (!!((_a = options == null ? void 0 : options.prompt) == null ? void 0 : _a.render)) {\n        const renderOptions = options;\n        requestBase = renderOptions.prompt.render({\n          input: renderOptions.input\n        }).then((rb) => {\n          return __spreadProps(__spreadValues({}, rb), {\n            messages: (0, import_ai.tagAsPreamble)(rb == null ? void 0 : rb.messages)\n          });\n        });\n      } else {\n        const baseOptions = __spreadValues({}, options);\n        const messages = [];\n        if (baseOptions.system) {\n          messages.push({\n            role: \"system\",\n            content: (0, import_ai.normalizePart)(baseOptions.system)\n          });\n        }\n        delete baseOptions.system;\n        if (baseOptions.messages) {\n          messages.push(...baseOptions.messages);\n        }\n        baseOptions.messages = (0, import_ai.tagAsPreamble)(messages);\n        requestBase = Promise.resolve(baseOptions);\n      }\n      return new import_chat.Chat(this, requestBase, {\n        thread: threadName,\n        id: this.id,\n        messages: (_d = ((_b = this.sessionData) == null ? void 0 : _b.threads) && ((_c = this.sessionData) == null ? void 0 : _c.threads[threadName])) != null ? _d : []\n      });\n    });\n  }\n  /**\n   * Executes provided function within this session context allowing calling\n   * `ai.currentSession().state`\n   */\n  run(fn) {\n    return runWithSession(this, fn);\n  }\n  toJSON() {\n    return this.sessionData;\n  }\n}\nconst sessionAls = new import_node_async_hooks.AsyncLocalStorage();\nfunction runWithSession(session, fn) {\n  return sessionAls.run(session, fn);\n}\nfunction getCurrentSession() {\n  return sessionAls.getStore();\n}\nclass SessionError extends Error {\n  constructor(msg) {\n    super(msg);\n  }\n}\nfunction inMemorySessionStore() {\n  return new InMemorySessionStore();\n}\nclass InMemorySessionStore {\n  constructor() {\n    this.data = {};\n  }\n  get(sessionId) {\n    return __async(this, null, function* () {\n      return this.data[sessionId];\n    });\n  }\n  save(sessionId, sessionData) {\n    return __async(this, null, function* () {\n      this.data[sessionId] = sessionData;\n    });\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=session.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQWU7QUFDdkMsOEJBQThCLG1CQUFPLENBQUMsMENBQWtCO0FBQ3hELGtCQUFrQixtQkFBTyxDQUFDLDhEQUFNO0FBQ2hDLGtCQUFrQixtQkFBTyxDQUFDLHVEQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxnREFBZ0Q7QUFDaEQ7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULFFBQVE7QUFDUiw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU0sQ0FNTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9zZXNzaW9uLmpzP2NkMTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIHNlc3Npb25fZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoc2Vzc2lvbl9leHBvcnRzLCB7XG4gIFNlc3Npb246ICgpID0+IFNlc3Npb24sXG4gIFNlc3Npb25FcnJvcjogKCkgPT4gU2Vzc2lvbkVycm9yLFxuICBnZXRDdXJyZW50U2Vzc2lvbjogKCkgPT4gZ2V0Q3VycmVudFNlc3Npb24sXG4gIGluTWVtb3J5U2Vzc2lvblN0b3JlOiAoKSA9PiBpbk1lbW9yeVNlc3Npb25TdG9yZSxcbiAgcnVuV2l0aFNlc3Npb246ICgpID0+IHJ1bldpdGhTZXNzaW9uXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHNlc3Npb25fZXhwb3J0cyk7XG52YXIgaW1wb3J0X2FpID0gcmVxdWlyZShcIkBnZW5raXQtYWkvYWlcIik7XG52YXIgaW1wb3J0X25vZGVfYXN5bmNfaG9va3MgPSByZXF1aXJlKFwibm9kZTphc3luY19ob29rc1wiKTtcbnZhciBpbXBvcnRfdXVpZCA9IHJlcXVpcmUoXCJ1dWlkXCIpO1xudmFyIGltcG9ydF9jaGF0ID0gcmVxdWlyZShcIi4vY2hhdFwiKTtcbmNsYXNzIFNlc3Npb24ge1xuICBjb25zdHJ1Y3RvcihnZW5raXQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmdlbmtpdCA9IGdlbmtpdDtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICB0aGlzLmlkID0gKF9hID0gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pZCkgIT0gbnVsbCA/IF9hIDogKDAsIGltcG9ydF91dWlkLnY0KSgpO1xuICAgIHRoaXMuc2Vzc2lvbkRhdGEgPSAoX2IgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnNlc3Npb25EYXRhKSAhPSBudWxsID8gX2IgOiB7XG4gICAgICBpZDogdGhpcy5pZFxuICAgIH07XG4gICAgaWYgKCF0aGlzLnNlc3Npb25EYXRhKSB7XG4gICAgICB0aGlzLnNlc3Npb25EYXRhID0geyBpZDogdGhpcy5pZCB9O1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2Vzc2lvbkRhdGEudGhyZWFkcykge1xuICAgICAgdGhpcy5zZXNzaW9uRGF0YS50aHJlYWRzID0ge307XG4gICAgfVxuICAgIHRoaXMuc3RvcmUgPSAoX2MgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnN0b3JlKSAhPSBudWxsID8gX2MgOiBuZXcgSW5NZW1vcnlTZXNzaW9uU3RvcmUoKTtcbiAgfVxuICBnZXQgc3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuZ2Vua2l0IGluc3RhbmNlb2YgU2Vzc2lvbikge1xuICAgICAgcmV0dXJuIHRoaXMuZ2Vua2l0LnN0YXRlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uRGF0YS5zdGF0ZTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHNlc3Npb24gc3RhdGUgZGF0YS5cbiAgICovXG4gIHVwZGF0ZVN0YXRlKGRhdGEpIHtcbiAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgbGV0IHNlc3Npb25EYXRhID0gdGhpcy5zZXNzaW9uRGF0YTtcbiAgICAgIGlmICghc2Vzc2lvbkRhdGEpIHtcbiAgICAgICAgc2Vzc2lvbkRhdGEgPSB7fTtcbiAgICAgIH1cbiAgICAgIHNlc3Npb25EYXRhLnN0YXRlID0gZGF0YTtcbiAgICAgIHRoaXMuc2Vzc2lvbkRhdGEgPSBzZXNzaW9uRGF0YTtcbiAgICAgIHlpZWxkIHRoaXMuc3RvcmUuc2F2ZSh0aGlzLmlkLCBzZXNzaW9uRGF0YSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBtZXNzYWdlcyBmb3IgYSBnaXZlbiB0aHJlYWQuXG4gICAqL1xuICB1cGRhdGVNZXNzYWdlcyh0aHJlYWQsIG1lc3Nhc2dlcykge1xuICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBsZXQgc2Vzc2lvbkRhdGEgPSB0aGlzLnNlc3Npb25EYXRhO1xuICAgICAgaWYgKCFzZXNzaW9uRGF0YSkge1xuICAgICAgICBzZXNzaW9uRGF0YSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKCFzZXNzaW9uRGF0YS50aHJlYWRzKSB7XG4gICAgICAgIHNlc3Npb25EYXRhLnRocmVhZHMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHNlc3Npb25EYXRhLnRocmVhZHNbdGhyZWFkXSA9IG1lc3Nhc2dlcztcbiAgICAgIHRoaXMuc2Vzc2lvbkRhdGEgPSBzZXNzaW9uRGF0YTtcbiAgICAgIHlpZWxkIHRoaXMuc3RvcmUuc2F2ZSh0aGlzLmlkLCBzZXNzaW9uRGF0YSk7XG4gICAgfSk7XG4gIH1cbiAgY2hhdChvcHRpb25zT3JUaHJlYWROYW1lLCBtYXliZU9wdGlvbnMpIHtcbiAgICByZXR1cm4gcnVuV2l0aFNlc3Npb24odGhpcywgKCkgPT4ge1xuICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICBsZXQgdGhyZWFkTmFtZSA9IGltcG9ydF9jaGF0Lk1BSU5fVEhSRUFEO1xuICAgICAgaWYgKG1heWJlT3B0aW9ucykge1xuICAgICAgICB0aHJlYWROYW1lID0gb3B0aW9uc09yVGhyZWFkTmFtZTtcbiAgICAgICAgb3B0aW9ucyA9IG1heWJlT3B0aW9ucztcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9uc09yVGhyZWFkTmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPclRocmVhZE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB0aHJlYWROYW1lID0gb3B0aW9uc09yVGhyZWFkTmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yVGhyZWFkTmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHJlcXVlc3RCYXNlO1xuICAgICAgaWYgKCEhKChfYSA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMucHJvbXB0KSA9PSBudWxsID8gdm9pZCAwIDogX2EucmVuZGVyKSkge1xuICAgICAgICBjb25zdCByZW5kZXJPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgcmVxdWVzdEJhc2UgPSByZW5kZXJPcHRpb25zLnByb21wdC5yZW5kZXIoe1xuICAgICAgICAgIGlucHV0OiByZW5kZXJPcHRpb25zLmlucHV0XG4gICAgICAgIH0pLnRoZW4oKHJiKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHJiKSwge1xuICAgICAgICAgICAgbWVzc2FnZXM6ICgwLCBpbXBvcnRfYWkudGFnQXNQcmVhbWJsZSkocmIgPT0gbnVsbCA/IHZvaWQgMCA6IHJiLm1lc3NhZ2VzKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJhc2VPcHRpb25zID0gX19zcHJlYWRWYWx1ZXMoe30sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtdO1xuICAgICAgICBpZiAoYmFzZU9wdGlvbnMuc3lzdGVtKSB7XG4gICAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgICAgICAgY29udGVudDogKDAsIGltcG9ydF9haS5ub3JtYWxpemVQYXJ0KShiYXNlT3B0aW9ucy5zeXN0ZW0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnN5c3RlbTtcbiAgICAgICAgaWYgKGJhc2VPcHRpb25zLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgbWVzc2FnZXMucHVzaCguLi5iYXNlT3B0aW9ucy5tZXNzYWdlcyk7XG4gICAgICAgIH1cbiAgICAgICAgYmFzZU9wdGlvbnMubWVzc2FnZXMgPSAoMCwgaW1wb3J0X2FpLnRhZ0FzUHJlYW1ibGUpKG1lc3NhZ2VzKTtcbiAgICAgICAgcmVxdWVzdEJhc2UgPSBQcm9taXNlLnJlc29sdmUoYmFzZU9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBpbXBvcnRfY2hhdC5DaGF0KHRoaXMsIHJlcXVlc3RCYXNlLCB7XG4gICAgICAgIHRocmVhZDogdGhyZWFkTmFtZSxcbiAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgIG1lc3NhZ2VzOiAoX2QgPSAoKF9iID0gdGhpcy5zZXNzaW9uRGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRocmVhZHMpICYmICgoX2MgPSB0aGlzLnNlc3Npb25EYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2MudGhyZWFkc1t0aHJlYWROYW1lXSkpICE9IG51bGwgPyBfZCA6IFtdXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZXMgcHJvdmlkZWQgZnVuY3Rpb24gd2l0aGluIHRoaXMgc2Vzc2lvbiBjb250ZXh0IGFsbG93aW5nIGNhbGxpbmdcbiAgICogYGFpLmN1cnJlbnRTZXNzaW9uKCkuc3RhdGVgXG4gICAqL1xuICBydW4oZm4pIHtcbiAgICByZXR1cm4gcnVuV2l0aFNlc3Npb24odGhpcywgZm4pO1xuICB9XG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uRGF0YTtcbiAgfVxufVxuY29uc3Qgc2Vzc2lvbkFscyA9IG5ldyBpbXBvcnRfbm9kZV9hc3luY19ob29rcy5Bc3luY0xvY2FsU3RvcmFnZSgpO1xuZnVuY3Rpb24gcnVuV2l0aFNlc3Npb24oc2Vzc2lvbiwgZm4pIHtcbiAgcmV0dXJuIHNlc3Npb25BbHMucnVuKHNlc3Npb24sIGZuKTtcbn1cbmZ1bmN0aW9uIGdldEN1cnJlbnRTZXNzaW9uKCkge1xuICByZXR1cm4gc2Vzc2lvbkFscy5nZXRTdG9yZSgpO1xufVxuY2xhc3MgU2Vzc2lvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcihtc2cpIHtcbiAgICBzdXBlcihtc2cpO1xuICB9XG59XG5mdW5jdGlvbiBpbk1lbW9yeVNlc3Npb25TdG9yZSgpIHtcbiAgcmV0dXJuIG5ldyBJbk1lbW9yeVNlc3Npb25TdG9yZSgpO1xufVxuY2xhc3MgSW5NZW1vcnlTZXNzaW9uU3RvcmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRhdGEgPSB7fTtcbiAgfVxuICBnZXQoc2Vzc2lvbklkKSB7XG4gICAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFbc2Vzc2lvbklkXTtcbiAgICB9KTtcbiAgfVxuICBzYXZlKHNlc3Npb25JZCwgc2Vzc2lvbkRhdGEpIHtcbiAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgdGhpcy5kYXRhW3Nlc3Npb25JZF0gPSBzZXNzaW9uRGF0YTtcbiAgICB9KTtcbiAgfVxufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIFNlc3Npb24sXG4gIFNlc3Npb25FcnJvcixcbiAgZ2V0Q3VycmVudFNlc3Npb24sXG4gIGluTWVtb3J5U2Vzc2lvblN0b3JlLFxuICBydW5XaXRoU2Vzc2lvblxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/session.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/tool.js":
/*!*****************************************!*\
  !*** ./node_modules/genkit/lib/tool.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar tool_exports = {};\n__export(tool_exports, {\n  asTool: () => import_tool.asTool,\n  toToolDefinition: () => import_tool.toToolDefinition\n});\nmodule.exports = __toCommonJS(tool_exports);\nvar import_tool = __webpack_require__(/*! @genkit-ai/ai/tool */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=tool.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi90b29sLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxrQkFBa0IsbUJBQU8sQ0FBQyw4RkFBb0I7QUFDOUM7QUFDQSxNQUFNLENBR0w7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9saWIvdG9vbC5qcz9kNjZlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciB0b29sX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHRvb2xfZXhwb3J0cywge1xuICBhc1Rvb2w6ICgpID0+IGltcG9ydF90b29sLmFzVG9vbCxcbiAgdG9Ub29sRGVmaW5pdGlvbjogKCkgPT4gaW1wb3J0X3Rvb2wudG9Ub29sRGVmaW5pdGlvblxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyh0b29sX2V4cG9ydHMpO1xudmFyIGltcG9ydF90b29sID0gcmVxdWlyZShcIkBnZW5raXQtYWkvYWkvdG9vbFwiKTtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBhc1Rvb2wsXG4gIHRvVG9vbERlZmluaXRpb25cbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/tracing.js":
/*!********************************************!*\
  !*** ./node_modules/genkit/lib/tracing.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar tracing_exports = {};\n__export(tracing_exports, {\n  GenkitSpanProcessorWrapper: () => import_tracing.GenkitSpanProcessorWrapper,\n  InstrumentationLibrarySchema: () => import_tracing.InstrumentationLibrarySchema,\n  LinkSchema: () => import_tracing.LinkSchema,\n  PathMetadata: () => import_tracing.PathMetadata,\n  PathMetadataSchema: () => import_tracing.PathMetadataSchema,\n  SPAN_TYPE_ATTR: () => import_tracing.SPAN_TYPE_ATTR,\n  SpanContextSchema: () => import_tracing.SpanContextSchema,\n  SpanData: () => import_tracing.SpanData,\n  SpanDataSchema: () => import_tracing.SpanDataSchema,\n  SpanMetadata: () => import_tracing.SpanMetadata,\n  SpanMetadataSchema: () => import_tracing.SpanMetadataSchema,\n  SpanStatusSchema: () => import_tracing.SpanStatusSchema,\n  TimeEventSchema: () => import_tracing.TimeEventSchema,\n  TraceData: () => import_tracing.TraceData,\n  TraceDataSchema: () => import_tracing.TraceDataSchema,\n  TraceMetadata: () => import_tracing.TraceMetadata,\n  TraceMetadataSchema: () => import_tracing.TraceMetadataSchema,\n  TraceServerExporter: () => import_tracing.TraceServerExporter,\n  appendSpan: () => import_tracing.appendSpan,\n  cleanUpTracing: () => import_tracing.cleanUpTracing,\n  enableTelemetry: () => import_tracing.enableTelemetry,\n  ensureBasicTelemetryInstrumentation: () => import_tracing.ensureBasicTelemetryInstrumentation,\n  flushTracing: () => import_tracing.flushTracing,\n  newTrace: () => import_tracing.newTrace,\n  runInNewSpan: () => import_tracing.runInNewSpan,\n  setCustomMetadataAttribute: () => import_tracing.setCustomMetadataAttribute,\n  setCustomMetadataAttributes: () => import_tracing.setCustomMetadataAttributes,\n  setTelemetryServerUrl: () => import_tracing.setTelemetryServerUrl,\n  spanMetadataAls: () => import_tracing.spanMetadataAls,\n  toDisplayPath: () => import_tracing.toDisplayPath,\n  traceMetadataAls: () => import_tracing.traceMetadataAls\n});\nmodule.exports = __toCommonJS(tracing_exports);\nvar import_tracing = __webpack_require__(/*! @genkit-ai/core/tracing */ \"(rsc)/./node_modules/@genkit-ai/core/lib/tracing.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=tracing.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi90cmFjaW5nLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EscUJBQXFCLG1CQUFPLENBQUMsb0ZBQXlCO0FBQ3REO0FBQ0EsTUFBTSxDQWdDTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi90cmFjaW5nLmpzP2E4NTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIHRyYWNpbmdfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQodHJhY2luZ19leHBvcnRzLCB7XG4gIEdlbmtpdFNwYW5Qcm9jZXNzb3JXcmFwcGVyOiAoKSA9PiBpbXBvcnRfdHJhY2luZy5HZW5raXRTcGFuUHJvY2Vzc29yV3JhcHBlcixcbiAgSW5zdHJ1bWVudGF0aW9uTGlicmFyeVNjaGVtYTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuSW5zdHJ1bWVudGF0aW9uTGlicmFyeVNjaGVtYSxcbiAgTGlua1NjaGVtYTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuTGlua1NjaGVtYSxcbiAgUGF0aE1ldGFkYXRhOiAoKSA9PiBpbXBvcnRfdHJhY2luZy5QYXRoTWV0YWRhdGEsXG4gIFBhdGhNZXRhZGF0YVNjaGVtYTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuUGF0aE1ldGFkYXRhU2NoZW1hLFxuICBTUEFOX1RZUEVfQVRUUjogKCkgPT4gaW1wb3J0X3RyYWNpbmcuU1BBTl9UWVBFX0FUVFIsXG4gIFNwYW5Db250ZXh0U2NoZW1hOiAoKSA9PiBpbXBvcnRfdHJhY2luZy5TcGFuQ29udGV4dFNjaGVtYSxcbiAgU3BhbkRhdGE6ICgpID0+IGltcG9ydF90cmFjaW5nLlNwYW5EYXRhLFxuICBTcGFuRGF0YVNjaGVtYTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuU3BhbkRhdGFTY2hlbWEsXG4gIFNwYW5NZXRhZGF0YTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuU3Bhbk1ldGFkYXRhLFxuICBTcGFuTWV0YWRhdGFTY2hlbWE6ICgpID0+IGltcG9ydF90cmFjaW5nLlNwYW5NZXRhZGF0YVNjaGVtYSxcbiAgU3BhblN0YXR1c1NjaGVtYTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuU3BhblN0YXR1c1NjaGVtYSxcbiAgVGltZUV2ZW50U2NoZW1hOiAoKSA9PiBpbXBvcnRfdHJhY2luZy5UaW1lRXZlbnRTY2hlbWEsXG4gIFRyYWNlRGF0YTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuVHJhY2VEYXRhLFxuICBUcmFjZURhdGFTY2hlbWE6ICgpID0+IGltcG9ydF90cmFjaW5nLlRyYWNlRGF0YVNjaGVtYSxcbiAgVHJhY2VNZXRhZGF0YTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuVHJhY2VNZXRhZGF0YSxcbiAgVHJhY2VNZXRhZGF0YVNjaGVtYTogKCkgPT4gaW1wb3J0X3RyYWNpbmcuVHJhY2VNZXRhZGF0YVNjaGVtYSxcbiAgVHJhY2VTZXJ2ZXJFeHBvcnRlcjogKCkgPT4gaW1wb3J0X3RyYWNpbmcuVHJhY2VTZXJ2ZXJFeHBvcnRlcixcbiAgYXBwZW5kU3BhbjogKCkgPT4gaW1wb3J0X3RyYWNpbmcuYXBwZW5kU3BhbixcbiAgY2xlYW5VcFRyYWNpbmc6ICgpID0+IGltcG9ydF90cmFjaW5nLmNsZWFuVXBUcmFjaW5nLFxuICBlbmFibGVUZWxlbWV0cnk6ICgpID0+IGltcG9ydF90cmFjaW5nLmVuYWJsZVRlbGVtZXRyeSxcbiAgZW5zdXJlQmFzaWNUZWxlbWV0cnlJbnN0cnVtZW50YXRpb246ICgpID0+IGltcG9ydF90cmFjaW5nLmVuc3VyZUJhc2ljVGVsZW1ldHJ5SW5zdHJ1bWVudGF0aW9uLFxuICBmbHVzaFRyYWNpbmc6ICgpID0+IGltcG9ydF90cmFjaW5nLmZsdXNoVHJhY2luZyxcbiAgbmV3VHJhY2U6ICgpID0+IGltcG9ydF90cmFjaW5nLm5ld1RyYWNlLFxuICBydW5Jbk5ld1NwYW46ICgpID0+IGltcG9ydF90cmFjaW5nLnJ1bkluTmV3U3BhbixcbiAgc2V0Q3VzdG9tTWV0YWRhdGFBdHRyaWJ1dGU6ICgpID0+IGltcG9ydF90cmFjaW5nLnNldEN1c3RvbU1ldGFkYXRhQXR0cmlidXRlLFxuICBzZXRDdXN0b21NZXRhZGF0YUF0dHJpYnV0ZXM6ICgpID0+IGltcG9ydF90cmFjaW5nLnNldEN1c3RvbU1ldGFkYXRhQXR0cmlidXRlcyxcbiAgc2V0VGVsZW1ldHJ5U2VydmVyVXJsOiAoKSA9PiBpbXBvcnRfdHJhY2luZy5zZXRUZWxlbWV0cnlTZXJ2ZXJVcmwsXG4gIHNwYW5NZXRhZGF0YUFsczogKCkgPT4gaW1wb3J0X3RyYWNpbmcuc3Bhbk1ldGFkYXRhQWxzLFxuICB0b0Rpc3BsYXlQYXRoOiAoKSA9PiBpbXBvcnRfdHJhY2luZy50b0Rpc3BsYXlQYXRoLFxuICB0cmFjZU1ldGFkYXRhQWxzOiAoKSA9PiBpbXBvcnRfdHJhY2luZy50cmFjZU1ldGFkYXRhQWxzXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHRyYWNpbmdfZXhwb3J0cyk7XG52YXIgaW1wb3J0X3RyYWNpbmcgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlL3RyYWNpbmdcIik7XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgR2Vua2l0U3BhblByb2Nlc3NvcldyYXBwZXIsXG4gIEluc3RydW1lbnRhdGlvbkxpYnJhcnlTY2hlbWEsXG4gIExpbmtTY2hlbWEsXG4gIFBhdGhNZXRhZGF0YSxcbiAgUGF0aE1ldGFkYXRhU2NoZW1hLFxuICBTUEFOX1RZUEVfQVRUUixcbiAgU3BhbkNvbnRleHRTY2hlbWEsXG4gIFNwYW5EYXRhLFxuICBTcGFuRGF0YVNjaGVtYSxcbiAgU3Bhbk1ldGFkYXRhLFxuICBTcGFuTWV0YWRhdGFTY2hlbWEsXG4gIFNwYW5TdGF0dXNTY2hlbWEsXG4gIFRpbWVFdmVudFNjaGVtYSxcbiAgVHJhY2VEYXRhLFxuICBUcmFjZURhdGFTY2hlbWEsXG4gIFRyYWNlTWV0YWRhdGEsXG4gIFRyYWNlTWV0YWRhdGFTY2hlbWEsXG4gIFRyYWNlU2VydmVyRXhwb3J0ZXIsXG4gIGFwcGVuZFNwYW4sXG4gIGNsZWFuVXBUcmFjaW5nLFxuICBlbmFibGVUZWxlbWV0cnksXG4gIGVuc3VyZUJhc2ljVGVsZW1ldHJ5SW5zdHJ1bWVudGF0aW9uLFxuICBmbHVzaFRyYWNpbmcsXG4gIG5ld1RyYWNlLFxuICBydW5Jbk5ld1NwYW4sXG4gIHNldEN1c3RvbU1ldGFkYXRhQXR0cmlidXRlLFxuICBzZXRDdXN0b21NZXRhZGF0YUF0dHJpYnV0ZXMsXG4gIHNldFRlbGVtZXRyeVNlcnZlclVybCxcbiAgc3Bhbk1ldGFkYXRhQWxzLFxuICB0b0Rpc3BsYXlQYXRoLFxuICB0cmFjZU1ldGFkYXRhQWxzXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYWNpbmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/tracing.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js":
/*!************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar document_exports = {};\n__export(document_exports, {\n  Document: () => Document,\n  DocumentDataSchema: () => DocumentDataSchema,\n  MediaPartSchema: () => MediaPartSchema,\n  PartSchema: () => PartSchema,\n  TextPartSchema: () => TextPartSchema\n});\nmodule.exports = __toCommonJS(document_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nconst EmptyPartSchema = import_core.z.object({\n  text: import_core.z.never().optional(),\n  media: import_core.z.never().optional()\n});\nconst TextPartSchema = EmptyPartSchema.extend({\n  /** The text of the document. */\n  text: import_core.z.string()\n});\nconst MediaPartSchema = EmptyPartSchema.extend({\n  media: import_core.z.object({\n    /** The media content type. Inferred from data uri if not provided. */\n    contentType: import_core.z.string().optional(),\n    /** A `data:` or `https:` uri containing the media content.  */\n    url: import_core.z.string()\n  })\n});\nconst PartSchema = import_core.z.union([TextPartSchema, MediaPartSchema]);\nconst DocumentDataSchema = import_core.z.object({\n  content: import_core.z.array(PartSchema),\n  metadata: import_core.z.record(import_core.z.string(), import_core.z.any()).optional()\n});\nclass Document {\n  constructor(data) {\n    this.content = data.content;\n    this.metadata = data.metadata;\n  }\n  static fromText(text, metadata) {\n    return new Document({\n      content: [{ text }],\n      metadata\n    });\n  }\n  /**\n   * Concatenates all `text` parts present in the document with no delimiter.\n   * @returns A string of all concatenated text parts.\n   */\n  get text() {\n    return this.content.map((part) => part.text || \"\").join(\"\");\n  }\n  /**\n   * Returns the first media part detected in the document. Useful for extracting\n   * (for example) an image.\n   * @returns The first detected `media` part in the document.\n   */\n  get media() {\n    var _a;\n    return ((_a = this.content.find((part) => part.media)) == null ? void 0 : _a.media) || null;\n  }\n  toJSON() {\n    return {\n      content: this.content,\n      metadata: this.metadata\n    };\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=document.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9kb2N1bWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0JBQWtCLG1CQUFPLENBQUMsMEVBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQU1MO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL2RvY3VtZW50LmpzPzUxZTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIGRvY3VtZW50X2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGRvY3VtZW50X2V4cG9ydHMsIHtcbiAgRG9jdW1lbnQ6ICgpID0+IERvY3VtZW50LFxuICBEb2N1bWVudERhdGFTY2hlbWE6ICgpID0+IERvY3VtZW50RGF0YVNjaGVtYSxcbiAgTWVkaWFQYXJ0U2NoZW1hOiAoKSA9PiBNZWRpYVBhcnRTY2hlbWEsXG4gIFBhcnRTY2hlbWE6ICgpID0+IFBhcnRTY2hlbWEsXG4gIFRleHRQYXJ0U2NoZW1hOiAoKSA9PiBUZXh0UGFydFNjaGVtYVxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhkb2N1bWVudF9leHBvcnRzKTtcbnZhciBpbXBvcnRfY29yZSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmVcIik7XG5jb25zdCBFbXB0eVBhcnRTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIHRleHQ6IGltcG9ydF9jb3JlLnoubmV2ZXIoKS5vcHRpb25hbCgpLFxuICBtZWRpYTogaW1wb3J0X2NvcmUuei5uZXZlcigpLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgVGV4dFBhcnRTY2hlbWEgPSBFbXB0eVBhcnRTY2hlbWEuZXh0ZW5kKHtcbiAgLyoqIFRoZSB0ZXh0IG9mIHRoZSBkb2N1bWVudC4gKi9cbiAgdGV4dDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKVxufSk7XG5jb25zdCBNZWRpYVBhcnRTY2hlbWEgPSBFbXB0eVBhcnRTY2hlbWEuZXh0ZW5kKHtcbiAgbWVkaWE6IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgICAvKiogVGhlIG1lZGlhIGNvbnRlbnQgdHlwZS4gSW5mZXJyZWQgZnJvbSBkYXRhIHVyaSBpZiBub3QgcHJvdmlkZWQuICovXG4gICAgY29udGVudFR5cGU6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKiogQSBgZGF0YTpgIG9yIGBodHRwczpgIHVyaSBjb250YWluaW5nIHRoZSBtZWRpYSBjb250ZW50LiAgKi9cbiAgICB1cmw6IGltcG9ydF9jb3JlLnouc3RyaW5nKClcbiAgfSlcbn0pO1xuY29uc3QgUGFydFNjaGVtYSA9IGltcG9ydF9jb3JlLnoudW5pb24oW1RleHRQYXJ0U2NoZW1hLCBNZWRpYVBhcnRTY2hlbWFdKTtcbmNvbnN0IERvY3VtZW50RGF0YVNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgY29udGVudDogaW1wb3J0X2NvcmUuei5hcnJheShQYXJ0U2NoZW1hKSxcbiAgbWV0YWRhdGE6IGltcG9ydF9jb3JlLnoucmVjb3JkKGltcG9ydF9jb3JlLnouc3RyaW5nKCksIGltcG9ydF9jb3JlLnouYW55KCkpLm9wdGlvbmFsKClcbn0pO1xuY2xhc3MgRG9jdW1lbnQge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5jb250ZW50ID0gZGF0YS5jb250ZW50O1xuICAgIHRoaXMubWV0YWRhdGEgPSBkYXRhLm1ldGFkYXRhO1xuICB9XG4gIHN0YXRpYyBmcm9tVGV4dCh0ZXh0LCBtZXRhZGF0YSkge1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnQoe1xuICAgICAgY29udGVudDogW3sgdGV4dCB9XSxcbiAgICAgIG1ldGFkYXRhXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbGwgYHRleHRgIHBhcnRzIHByZXNlbnQgaW4gdGhlIGRvY3VtZW50IHdpdGggbm8gZGVsaW1pdGVyLlxuICAgKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgY29uY2F0ZW5hdGVkIHRleHQgcGFydHMuXG4gICAqL1xuICBnZXQgdGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50Lm1hcCgocGFydCkgPT4gcGFydC50ZXh0IHx8IFwiXCIpLmpvaW4oXCJcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IG1lZGlhIHBhcnQgZGV0ZWN0ZWQgaW4gdGhlIGRvY3VtZW50LiBVc2VmdWwgZm9yIGV4dHJhY3RpbmdcbiAgICogKGZvciBleGFtcGxlKSBhbiBpbWFnZS5cbiAgICogQHJldHVybnMgVGhlIGZpcnN0IGRldGVjdGVkIGBtZWRpYWAgcGFydCBpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBnZXQgbWVkaWEoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gdGhpcy5jb250ZW50LmZpbmQoKHBhcnQpID0+IHBhcnQubWVkaWEpKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWVkaWEpIHx8IG51bGw7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsXG4gICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YVxuICAgIH07XG4gIH1cbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBEb2N1bWVudCxcbiAgRG9jdW1lbnREYXRhU2NoZW1hLFxuICBNZWRpYVBhcnRTY2hlbWEsXG4gIFBhcnRTY2hlbWEsXG4gIFRleHRQYXJ0U2NoZW1hXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvY3VtZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js":
/*!************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar embedder_exports = {};\n__export(embedder_exports, {\n  EmbedderInfoSchema: () => EmbedderInfoSchema,\n  EmbeddingSchema: () => EmbeddingSchema,\n  defineEmbedder: () => defineEmbedder,\n  embed: () => embed,\n  embedMany: () => embedMany,\n  embedderRef: () => embedderRef\n});\nmodule.exports = __toCommonJS(embedder_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_document = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nconst EmbeddingSchema = import_core.z.array(import_core.z.number());\nconst EmbedRequestSchema = import_core.z.object({\n  input: import_core.z.array(import_document.DocumentDataSchema),\n  options: import_core.z.any().optional()\n});\nconst EmbedResponseSchema = import_core.z.object({\n  embeddings: import_core.z.array(import_core.z.object({ embedding: EmbeddingSchema }))\n  // TODO: stats, etc.\n});\nfunction withMetadata(embedder, configSchema) {\n  const withMeta = embedder;\n  withMeta.__configSchema = configSchema;\n  return withMeta;\n}\nfunction defineEmbedder(registry, options, runner) {\n  const embedder = (0, import_core.defineAction)(\n    registry,\n    {\n      actionType: \"embedder\",\n      name: options.name,\n      inputSchema: options.configSchema ? EmbedRequestSchema.extend({\n        options: options.configSchema.optional()\n      }) : EmbedRequestSchema,\n      outputSchema: EmbedResponseSchema,\n      metadata: {\n        type: \"embedder\",\n        info: options.info\n      }\n    },\n    (i) => runner(\n      i.input.map((dd) => new import_document.Document(dd)),\n      i.options\n    )\n  );\n  const ewm = withMetadata(\n    embedder,\n    options.configSchema\n  );\n  return ewm;\n}\nfunction embed(registry, params) {\n  return __async(this, null, function* () {\n    var _a, _b;\n    let embedder = yield resolveEmbedder(registry, params);\n    if (!embedder.embedderAction) {\n      let embedderId;\n      if (typeof params.embedder === \"string\") {\n        embedderId = params.embedder;\n      } else if ((_b = (_a = params.embedder) == null ? void 0 : _a.__action) == null ? void 0 : _b.name) {\n        embedderId = params.embedder.__action.name;\n      } else {\n        embedderId = params.embedder.name;\n      }\n      throw new Error(`Unable to resolve embedder ${embedderId}`);\n    }\n    const response = yield embedder.embedderAction({\n      input: typeof params.content === \"string\" ? [import_document.Document.fromText(params.content, params.metadata)] : [params.content],\n      options: __spreadValues(__spreadValues({\n        version: embedder.version\n      }, embedder.config), params.options)\n    });\n    return response.embeddings[0].embedding;\n  });\n}\nfunction resolveEmbedder(registry, params) {\n  return __async(this, null, function* () {\n    if (typeof params.embedder === \"string\") {\n      return {\n        embedderAction: yield registry.lookupAction(\n          `/embedder/${params.embedder}`\n        )\n      };\n    } else if (Object.hasOwnProperty.call(params.embedder, \"__action\")) {\n      return {\n        embedderAction: params.embedder\n      };\n    } else if (Object.hasOwnProperty.call(params.embedder, \"name\")) {\n      const ref = params.embedder;\n      return {\n        embedderAction: yield registry.lookupAction(\n          `/embedder/${params.embedder.name}`\n        ),\n        config: __spreadValues({}, ref.config),\n        version: ref.version\n      };\n    }\n    throw new Error(`failed to resolve embedder ${params.embedder}`);\n  });\n}\nfunction embedMany(registry, params) {\n  return __async(this, null, function* () {\n    let embedder;\n    if (typeof params.embedder === \"string\") {\n      embedder = yield registry.lookupAction(`/embedder/${params.embedder}`);\n    } else if (Object.hasOwnProperty.call(params.embedder, \"info\")) {\n      embedder = yield registry.lookupAction(\n        `/embedder/${params.embedder.name}`\n      );\n    } else {\n      embedder = params.embedder;\n    }\n    if (!embedder) {\n      throw new Error(\"Unable to utilize the provided embedder\");\n    }\n    const response = yield embedder({\n      input: params.content.map(\n        (i) => typeof i === \"string\" ? import_document.Document.fromText(i, params.metadata) : i\n      ),\n      options: params.options\n    });\n    return response.embeddings;\n  });\n}\nconst EmbedderInfoSchema = import_core.z.object({\n  /** Friendly label for this model (e.g. \"Google AI - Gemini Pro\") */\n  label: import_core.z.string().optional(),\n  /** Supported model capabilities. */\n  supports: import_core.z.object({\n    /** Model can input this type of data. */\n    input: import_core.z.array(import_core.z.enum([\"text\", \"image\"])).optional(),\n    /** Model can support multiple languages */\n    multilingual: import_core.z.boolean().optional()\n  }).optional(),\n  /** Embedding dimension */\n  dimensions: import_core.z.number().optional()\n});\nfunction embedderRef(options) {\n  return __spreadValues({}, options);\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=embedder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9lbWJlZGRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0JBQWtCLG1CQUFPLENBQUMsMEVBQWlCO0FBQzNDLHNCQUFzQixtQkFBTyxDQUFDLDZGQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EseURBQXlELDRCQUE0QjtBQUNyRjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxvREFBb0QsV0FBVztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0JBQWdCO0FBQ3ZDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxQkFBcUI7QUFDNUM7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxnQkFBZ0I7QUFDMUUsTUFBTTtBQUNOO0FBQ0EscUJBQXFCLHFCQUFxQjtBQUMxQztBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxNQUFNLENBT0w7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvQGdlbmtpdC1haS9haS9saWIvZW1iZWRkZXIuanM/MjY3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIGVtYmVkZGVyX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGVtYmVkZGVyX2V4cG9ydHMsIHtcbiAgRW1iZWRkZXJJbmZvU2NoZW1hOiAoKSA9PiBFbWJlZGRlckluZm9TY2hlbWEsXG4gIEVtYmVkZGluZ1NjaGVtYTogKCkgPT4gRW1iZWRkaW5nU2NoZW1hLFxuICBkZWZpbmVFbWJlZGRlcjogKCkgPT4gZGVmaW5lRW1iZWRkZXIsXG4gIGVtYmVkOiAoKSA9PiBlbWJlZCxcbiAgZW1iZWRNYW55OiAoKSA9PiBlbWJlZE1hbnksXG4gIGVtYmVkZGVyUmVmOiAoKSA9PiBlbWJlZGRlclJlZlxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhlbWJlZGRlcl9leHBvcnRzKTtcbnZhciBpbXBvcnRfY29yZSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmVcIik7XG52YXIgaW1wb3J0X2RvY3VtZW50ID0gcmVxdWlyZShcIi4vZG9jdW1lbnQuanNcIik7XG5jb25zdCBFbWJlZGRpbmdTY2hlbWEgPSBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9jb3JlLnoubnVtYmVyKCkpO1xuY29uc3QgRW1iZWRSZXF1ZXN0U2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBpbnB1dDogaW1wb3J0X2NvcmUuei5hcnJheShpbXBvcnRfZG9jdW1lbnQuRG9jdW1lbnREYXRhU2NoZW1hKSxcbiAgb3B0aW9uczogaW1wb3J0X2NvcmUuei5hbnkoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IEVtYmVkUmVzcG9uc2VTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGVtYmVkZGluZ3M6IGltcG9ydF9jb3JlLnouYXJyYXkoaW1wb3J0X2NvcmUuei5vYmplY3QoeyBlbWJlZGRpbmc6IEVtYmVkZGluZ1NjaGVtYSB9KSlcbiAgLy8gVE9ETzogc3RhdHMsIGV0Yy5cbn0pO1xuZnVuY3Rpb24gd2l0aE1ldGFkYXRhKGVtYmVkZGVyLCBjb25maWdTY2hlbWEpIHtcbiAgY29uc3Qgd2l0aE1ldGEgPSBlbWJlZGRlcjtcbiAgd2l0aE1ldGEuX19jb25maWdTY2hlbWEgPSBjb25maWdTY2hlbWE7XG4gIHJldHVybiB3aXRoTWV0YTtcbn1cbmZ1bmN0aW9uIGRlZmluZUVtYmVkZGVyKHJlZ2lzdHJ5LCBvcHRpb25zLCBydW5uZXIpIHtcbiAgY29uc3QgZW1iZWRkZXIgPSAoMCwgaW1wb3J0X2NvcmUuZGVmaW5lQWN0aW9uKShcbiAgICByZWdpc3RyeSxcbiAgICB7XG4gICAgICBhY3Rpb25UeXBlOiBcImVtYmVkZGVyXCIsXG4gICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICBpbnB1dFNjaGVtYTogb3B0aW9ucy5jb25maWdTY2hlbWEgPyBFbWJlZFJlcXVlc3RTY2hlbWEuZXh0ZW5kKHtcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucy5jb25maWdTY2hlbWEub3B0aW9uYWwoKVxuICAgICAgfSkgOiBFbWJlZFJlcXVlc3RTY2hlbWEsXG4gICAgICBvdXRwdXRTY2hlbWE6IEVtYmVkUmVzcG9uc2VTY2hlbWEsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0eXBlOiBcImVtYmVkZGVyXCIsXG4gICAgICAgIGluZm86IG9wdGlvbnMuaW5mb1xuICAgICAgfVxuICAgIH0sXG4gICAgKGkpID0+IHJ1bm5lcihcbiAgICAgIGkuaW5wdXQubWFwKChkZCkgPT4gbmV3IGltcG9ydF9kb2N1bWVudC5Eb2N1bWVudChkZCkpLFxuICAgICAgaS5vcHRpb25zXG4gICAgKVxuICApO1xuICBjb25zdCBld20gPSB3aXRoTWV0YWRhdGEoXG4gICAgZW1iZWRkZXIsXG4gICAgb3B0aW9ucy5jb25maWdTY2hlbWFcbiAgKTtcbiAgcmV0dXJuIGV3bTtcbn1cbmZ1bmN0aW9uIGVtYmVkKHJlZ2lzdHJ5LCBwYXJhbXMpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGxldCBlbWJlZGRlciA9IHlpZWxkIHJlc29sdmVFbWJlZGRlcihyZWdpc3RyeSwgcGFyYW1zKTtcbiAgICBpZiAoIWVtYmVkZGVyLmVtYmVkZGVyQWN0aW9uKSB7XG4gICAgICBsZXQgZW1iZWRkZXJJZDtcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmVtYmVkZGVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVtYmVkZGVySWQgPSBwYXJhbXMuZW1iZWRkZXI7XG4gICAgICB9IGVsc2UgaWYgKChfYiA9IChfYSA9IHBhcmFtcy5lbWJlZGRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9fYWN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2IubmFtZSkge1xuICAgICAgICBlbWJlZGRlcklkID0gcGFyYW1zLmVtYmVkZGVyLl9fYWN0aW9uLm5hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbWJlZGRlcklkID0gcGFyYW1zLmVtYmVkZGVyLm5hbWU7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZXNvbHZlIGVtYmVkZGVyICR7ZW1iZWRkZXJJZH1gKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBlbWJlZGRlci5lbWJlZGRlckFjdGlvbih7XG4gICAgICBpbnB1dDogdHlwZW9mIHBhcmFtcy5jb250ZW50ID09PSBcInN0cmluZ1wiID8gW2ltcG9ydF9kb2N1bWVudC5Eb2N1bWVudC5mcm9tVGV4dChwYXJhbXMuY29udGVudCwgcGFyYW1zLm1ldGFkYXRhKV0gOiBbcGFyYW1zLmNvbnRlbnRdLFxuICAgICAgb3B0aW9uczogX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICB2ZXJzaW9uOiBlbWJlZGRlci52ZXJzaW9uXG4gICAgICB9LCBlbWJlZGRlci5jb25maWcpLCBwYXJhbXMub3B0aW9ucylcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZW1iZWRkaW5nc1swXS5lbWJlZGRpbmc7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUVtYmVkZGVyKHJlZ2lzdHJ5LCBwYXJhbXMpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5lbWJlZGRlciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW1iZWRkZXJBY3Rpb246IHlpZWxkIHJlZ2lzdHJ5Lmxvb2t1cEFjdGlvbihcbiAgICAgICAgICBgL2VtYmVkZGVyLyR7cGFyYW1zLmVtYmVkZGVyfWBcbiAgICAgICAgKVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtcy5lbWJlZGRlciwgXCJfX2FjdGlvblwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW1iZWRkZXJBY3Rpb246IHBhcmFtcy5lbWJlZGRlclxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtcy5lbWJlZGRlciwgXCJuYW1lXCIpKSB7XG4gICAgICBjb25zdCByZWYgPSBwYXJhbXMuZW1iZWRkZXI7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbWJlZGRlckFjdGlvbjogeWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKFxuICAgICAgICAgIGAvZW1iZWRkZXIvJHtwYXJhbXMuZW1iZWRkZXIubmFtZX1gXG4gICAgICAgICksXG4gICAgICAgIGNvbmZpZzogX19zcHJlYWRWYWx1ZXMoe30sIHJlZi5jb25maWcpLFxuICAgICAgICB2ZXJzaW9uOiByZWYudmVyc2lvblxuICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBmYWlsZWQgdG8gcmVzb2x2ZSBlbWJlZGRlciAke3BhcmFtcy5lbWJlZGRlcn1gKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBlbWJlZE1hbnkocmVnaXN0cnksIHBhcmFtcykge1xuICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIGxldCBlbWJlZGRlcjtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5lbWJlZGRlciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZW1iZWRkZXIgPSB5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oYC9lbWJlZGRlci8ke3BhcmFtcy5lbWJlZGRlcn1gKTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtcy5lbWJlZGRlciwgXCJpbmZvXCIpKSB7XG4gICAgICBlbWJlZGRlciA9IHlpZWxkIHJlZ2lzdHJ5Lmxvb2t1cEFjdGlvbihcbiAgICAgICAgYC9lbWJlZGRlci8ke3BhcmFtcy5lbWJlZGRlci5uYW1lfWBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtYmVkZGVyID0gcGFyYW1zLmVtYmVkZGVyO1xuICAgIH1cbiAgICBpZiAoIWVtYmVkZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdXRpbGl6ZSB0aGUgcHJvdmlkZWQgZW1iZWRkZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgZW1iZWRkZXIoe1xuICAgICAgaW5wdXQ6IHBhcmFtcy5jb250ZW50Lm1hcChcbiAgICAgICAgKGkpID0+IHR5cGVvZiBpID09PSBcInN0cmluZ1wiID8gaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50LmZyb21UZXh0KGksIHBhcmFtcy5tZXRhZGF0YSkgOiBpXG4gICAgICApLFxuICAgICAgb3B0aW9uczogcGFyYW1zLm9wdGlvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZW1iZWRkaW5ncztcbiAgfSk7XG59XG5jb25zdCBFbWJlZGRlckluZm9TY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIC8qKiBGcmllbmRseSBsYWJlbCBmb3IgdGhpcyBtb2RlbCAoZS5nLiBcIkdvb2dsZSBBSSAtIEdlbWluaSBQcm9cIikgKi9cbiAgbGFiZWw6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqIFN1cHBvcnRlZCBtb2RlbCBjYXBhYmlsaXRpZXMuICovXG4gIHN1cHBvcnRzOiBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gICAgLyoqIE1vZGVsIGNhbiBpbnB1dCB0aGlzIHR5cGUgb2YgZGF0YS4gKi9cbiAgICBpbnB1dDogaW1wb3J0X2NvcmUuei5hcnJheShpbXBvcnRfY29yZS56LmVudW0oW1widGV4dFwiLCBcImltYWdlXCJdKSkub3B0aW9uYWwoKSxcbiAgICAvKiogTW9kZWwgY2FuIHN1cHBvcnQgbXVsdGlwbGUgbGFuZ3VhZ2VzICovXG4gICAgbXVsdGlsaW5ndWFsOiBpbXBvcnRfY29yZS56LmJvb2xlYW4oKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKCksXG4gIC8qKiBFbWJlZGRpbmcgZGltZW5zaW9uICovXG4gIGRpbWVuc2lvbnM6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKVxufSk7XG5mdW5jdGlvbiBlbWJlZGRlclJlZihvcHRpb25zKSB7XG4gIHJldHVybiBfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucyk7XG59XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgRW1iZWRkZXJJbmZvU2NoZW1hLFxuICBFbWJlZGRpbmdTY2hlbWEsXG4gIGRlZmluZUVtYmVkZGVyLFxuICBlbWJlZCxcbiAgZW1iZWRNYW55LFxuICBlbWJlZGRlclJlZlxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWJlZGRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/evaluator.js":
/*!*************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/evaluator.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar evaluator_exports = {};\n__export(evaluator_exports, {\n  ATTR_PREFIX: () => ATTR_PREFIX,\n  BaseDataPointSchema: () => BaseDataPointSchema,\n  BaseEvalDataPointSchema: () => BaseEvalDataPointSchema,\n  EVALUATOR_METADATA_KEY_DEFINITION: () => EVALUATOR_METADATA_KEY_DEFINITION,\n  EVALUATOR_METADATA_KEY_DISPLAY_NAME: () => EVALUATOR_METADATA_KEY_DISPLAY_NAME,\n  EVALUATOR_METADATA_KEY_IS_BILLED: () => EVALUATOR_METADATA_KEY_IS_BILLED,\n  EvalResponseSchema: () => EvalResponseSchema,\n  EvalResponsesSchema: () => EvalResponsesSchema,\n  EvaluatorInfoSchema: () => EvaluatorInfoSchema,\n  SPAN_STATE_ATTR: () => SPAN_STATE_ATTR,\n  ScoreSchema: () => ScoreSchema,\n  defineEvaluator: () => defineEvaluator,\n  evaluate: () => evaluate,\n  evaluatorRef: () => evaluatorRef\n});\nmodule.exports = __toCommonJS(evaluator_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_logging = __webpack_require__(/*! @genkit-ai/core/logging */ \"(rsc)/./node_modules/@genkit-ai/core/lib/logging.js\");\nvar import_tracing = __webpack_require__(/*! @genkit-ai/core/tracing */ \"(rsc)/./node_modules/@genkit-ai/core/lib/tracing.js\");\nvar import_crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst ATTR_PREFIX = \"genkit\";\nconst SPAN_STATE_ATTR = ATTR_PREFIX + \":state\";\nconst BaseDataPointSchema = import_core.z.object({\n  input: import_core.z.unknown(),\n  output: import_core.z.unknown().optional(),\n  context: import_core.z.array(import_core.z.unknown()).optional(),\n  reference: import_core.z.unknown().optional(),\n  testCaseId: import_core.z.string().optional(),\n  traceIds: import_core.z.array(import_core.z.string()).optional()\n});\nconst BaseEvalDataPointSchema = BaseDataPointSchema.extend({\n  testCaseId: import_core.z.string()\n});\nconst ScoreSchema = import_core.z.object({\n  score: import_core.z.union([import_core.z.number(), import_core.z.string(), import_core.z.boolean()]).optional(),\n  // TODO: use StatusSchema\n  error: import_core.z.string().optional(),\n  details: import_core.z.object({\n    reasoning: import_core.z.string().optional()\n  }).passthrough().optional()\n});\nconst EVALUATOR_METADATA_KEY_DISPLAY_NAME = \"evaluatorDisplayName\";\nconst EVALUATOR_METADATA_KEY_DEFINITION = \"evaluatorDefinition\";\nconst EVALUATOR_METADATA_KEY_IS_BILLED = \"evaluatorIsBilled\";\nconst EvalResponseSchema = import_core.z.object({\n  sampleIndex: import_core.z.number().optional(),\n  testCaseId: import_core.z.string(),\n  traceId: import_core.z.string().optional(),\n  spanId: import_core.z.string().optional(),\n  evaluation: ScoreSchema\n});\nconst EvalResponsesSchema = import_core.z.array(EvalResponseSchema);\nfunction withMetadata(evaluator, dataPointType, configSchema) {\n  const withMeta = evaluator;\n  withMeta.__dataPointType = dataPointType;\n  withMeta.__configSchema = configSchema;\n  return withMeta;\n}\nconst EvalRequestSchema = import_core.z.object({\n  dataset: import_core.z.array(BaseDataPointSchema),\n  options: import_core.z.unknown()\n});\nfunction defineEvaluator(registry, options, runner) {\n  var _a;\n  const metadata = {};\n  metadata[EVALUATOR_METADATA_KEY_IS_BILLED] = options.isBilled == void 0 ? true : options.isBilled;\n  metadata[EVALUATOR_METADATA_KEY_DISPLAY_NAME] = options.displayName;\n  metadata[EVALUATOR_METADATA_KEY_DEFINITION] = options.definition;\n  const evaluator = (0, import_core.defineAction)(\n    registry,\n    {\n      actionType: \"evaluator\",\n      name: options.name,\n      inputSchema: EvalRequestSchema.extend({\n        dataset: options.dataPointType ? import_core.z.array(options.dataPointType) : import_core.z.array(BaseDataPointSchema),\n        options: (_a = options.configSchema) != null ? _a : import_core.z.unknown(),\n        evalRunId: import_core.z.string()\n      }),\n      outputSchema: EvalResponsesSchema,\n      metadata\n    },\n    (i) => __async(this, null, function* () {\n      var _a2;\n      let evalResponses = [];\n      for (let index = 0; index < i.dataset.length; index++) {\n        const datapoint = __spreadProps(__spreadValues({}, i.dataset[index]), {\n          testCaseId: (_a2 = i.dataset[index].testCaseId) != null ? _a2 : (0, import_crypto.randomUUID)()\n        });\n        try {\n          yield (0, import_tracing.runInNewSpan)(\n            {\n              metadata: {\n                name: `Test Case ${datapoint.testCaseId}`,\n                metadata: { \"evaluator:evalRunId\": i.evalRunId }\n              },\n              labels: {\n                [import_tracing.SPAN_TYPE_ATTR]: \"evaluator\"\n              }\n            },\n            (metadata2, otSpan) => __async(this, null, function* () {\n              const spanId = otSpan.spanContext().spanId;\n              const traceId = otSpan.spanContext().traceId;\n              try {\n                metadata2.input = {\n                  input: datapoint.input,\n                  output: datapoint.output,\n                  context: datapoint.context\n                };\n                const testCaseOutput = yield runner(datapoint, i.options);\n                testCaseOutput.sampleIndex = index;\n                testCaseOutput.spanId = spanId;\n                testCaseOutput.traceId = traceId;\n                metadata2.output = testCaseOutput;\n                evalResponses.push(testCaseOutput);\n                return testCaseOutput;\n              } catch (e) {\n                evalResponses.push({\n                  sampleIndex: index,\n                  spanId,\n                  traceId,\n                  testCaseId: datapoint.testCaseId,\n                  evaluation: {\n                    error: `Evaluation of test case ${datapoint.testCaseId} failed: \n${e.stack}`\n                  }\n                });\n                throw e;\n              }\n            })\n          );\n        } catch (e) {\n          import_logging.logger.error(\n            `Evaluation of test case ${datapoint.testCaseId} failed: \n${e.stack}`\n          );\n          continue;\n        }\n      }\n      return evalResponses;\n    })\n  );\n  const ewm = withMetadata(\n    evaluator,\n    options.dataPointType,\n    options.configSchema\n  );\n  return ewm;\n}\nfunction evaluate(registry, params) {\n  return __async(this, null, function* () {\n    let evaluator;\n    if (typeof params.evaluator === \"string\") {\n      evaluator = yield registry.lookupAction(`/evaluator/${params.evaluator}`);\n    } else if (Object.hasOwnProperty.call(params.evaluator, \"info\")) {\n      evaluator = yield registry.lookupAction(\n        `/evaluator/${params.evaluator.name}`\n      );\n    } else {\n      evaluator = params.evaluator;\n    }\n    if (!evaluator) {\n      throw new Error(\"Unable to utilize the provided evaluator\");\n    }\n    return yield evaluator({\n      dataset: params.dataset,\n      options: params.options\n    });\n  });\n}\nconst EvaluatorInfoSchema = import_core.z.object({\n  /** Friendly label for this evaluator */\n  label: import_core.z.string().optional(),\n  metrics: import_core.z.array(import_core.z.string())\n});\nfunction evaluatorRef(options) {\n  return __spreadValues({}, options);\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=evaluator.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9ldmFsdWF0b3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxrQkFBa0IsbUJBQU8sQ0FBQywwRUFBaUI7QUFDM0MscUJBQXFCLG1CQUFPLENBQUMsb0ZBQXlCO0FBQ3RELHFCQUFxQixtQkFBTyxDQUFDLG9GQUF5QjtBQUN0RCxvQkFBb0IsbUJBQU8sQ0FBQyxzQkFBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BELHlEQUF5RDtBQUN6RDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxxQkFBcUI7QUFDeEQsNEJBQTRCO0FBQzVCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHNCQUFzQjtBQUM1RSxFQUFFLFFBQVE7QUFDVjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsdUNBQXVDLHNCQUFzQjtBQUM3RCxFQUFFLFFBQVE7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxpQkFBaUI7QUFDN0UsTUFBTTtBQUNOO0FBQ0Esc0JBQXNCLHNCQUFzQjtBQUM1QztBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxNQUFNLENBZUw7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvQGdlbmtpdC1haS9haS9saWIvZXZhbHVhdG9yLmpzPzAwOTMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIGV2YWx1YXRvcl9leHBvcnRzID0ge307XG5fX2V4cG9ydChldmFsdWF0b3JfZXhwb3J0cywge1xuICBBVFRSX1BSRUZJWDogKCkgPT4gQVRUUl9QUkVGSVgsXG4gIEJhc2VEYXRhUG9pbnRTY2hlbWE6ICgpID0+IEJhc2VEYXRhUG9pbnRTY2hlbWEsXG4gIEJhc2VFdmFsRGF0YVBvaW50U2NoZW1hOiAoKSA9PiBCYXNlRXZhbERhdGFQb2ludFNjaGVtYSxcbiAgRVZBTFVBVE9SX01FVEFEQVRBX0tFWV9ERUZJTklUSU9OOiAoKSA9PiBFVkFMVUFUT1JfTUVUQURBVEFfS0VZX0RFRklOSVRJT04sXG4gIEVWQUxVQVRPUl9NRVRBREFUQV9LRVlfRElTUExBWV9OQU1FOiAoKSA9PiBFVkFMVUFUT1JfTUVUQURBVEFfS0VZX0RJU1BMQVlfTkFNRSxcbiAgRVZBTFVBVE9SX01FVEFEQVRBX0tFWV9JU19CSUxMRUQ6ICgpID0+IEVWQUxVQVRPUl9NRVRBREFUQV9LRVlfSVNfQklMTEVELFxuICBFdmFsUmVzcG9uc2VTY2hlbWE6ICgpID0+IEV2YWxSZXNwb25zZVNjaGVtYSxcbiAgRXZhbFJlc3BvbnNlc1NjaGVtYTogKCkgPT4gRXZhbFJlc3BvbnNlc1NjaGVtYSxcbiAgRXZhbHVhdG9ySW5mb1NjaGVtYTogKCkgPT4gRXZhbHVhdG9ySW5mb1NjaGVtYSxcbiAgU1BBTl9TVEFURV9BVFRSOiAoKSA9PiBTUEFOX1NUQVRFX0FUVFIsXG4gIFNjb3JlU2NoZW1hOiAoKSA9PiBTY29yZVNjaGVtYSxcbiAgZGVmaW5lRXZhbHVhdG9yOiAoKSA9PiBkZWZpbmVFdmFsdWF0b3IsXG4gIGV2YWx1YXRlOiAoKSA9PiBldmFsdWF0ZSxcbiAgZXZhbHVhdG9yUmVmOiAoKSA9PiBldmFsdWF0b3JSZWZcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoZXZhbHVhdG9yX2V4cG9ydHMpO1xudmFyIGltcG9ydF9jb3JlID0gcmVxdWlyZShcIkBnZW5raXQtYWkvY29yZVwiKTtcbnZhciBpbXBvcnRfbG9nZ2luZyA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvbG9nZ2luZ1wiKTtcbnZhciBpbXBvcnRfdHJhY2luZyA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvdHJhY2luZ1wiKTtcbnZhciBpbXBvcnRfY3J5cHRvID0gcmVxdWlyZShcImNyeXB0b1wiKTtcbmNvbnN0IEFUVFJfUFJFRklYID0gXCJnZW5raXRcIjtcbmNvbnN0IFNQQU5fU1RBVEVfQVRUUiA9IEFUVFJfUFJFRklYICsgXCI6c3RhdGVcIjtcbmNvbnN0IEJhc2VEYXRhUG9pbnRTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGlucHV0OiBpbXBvcnRfY29yZS56LnVua25vd24oKSxcbiAgb3V0cHV0OiBpbXBvcnRfY29yZS56LnVua25vd24oKS5vcHRpb25hbCgpLFxuICBjb250ZXh0OiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9jb3JlLnoudW5rbm93bigpKS5vcHRpb25hbCgpLFxuICByZWZlcmVuY2U6IGltcG9ydF9jb3JlLnoudW5rbm93bigpLm9wdGlvbmFsKCksXG4gIHRlc3RDYXNlSWQ6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdHJhY2VJZHM6IGltcG9ydF9jb3JlLnouYXJyYXkoaW1wb3J0X2NvcmUuei5zdHJpbmcoKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBCYXNlRXZhbERhdGFQb2ludFNjaGVtYSA9IEJhc2VEYXRhUG9pbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdGVzdENhc2VJZDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKVxufSk7XG5jb25zdCBTY29yZVNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgc2NvcmU6IGltcG9ydF9jb3JlLnoudW5pb24oW2ltcG9ydF9jb3JlLnoubnVtYmVyKCksIGltcG9ydF9jb3JlLnouc3RyaW5nKCksIGltcG9ydF9jb3JlLnouYm9vbGVhbigpXSkub3B0aW9uYWwoKSxcbiAgLy8gVE9ETzogdXNlIFN0YXR1c1NjaGVtYVxuICBlcnJvcjogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBkZXRhaWxzOiBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gICAgcmVhc29uaW5nOiBpbXBvcnRfY29yZS56LnN0cmluZygpLm9wdGlvbmFsKClcbiAgfSkucGFzc3Rocm91Z2goKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IEVWQUxVQVRPUl9NRVRBREFUQV9LRVlfRElTUExBWV9OQU1FID0gXCJldmFsdWF0b3JEaXNwbGF5TmFtZVwiO1xuY29uc3QgRVZBTFVBVE9SX01FVEFEQVRBX0tFWV9ERUZJTklUSU9OID0gXCJldmFsdWF0b3JEZWZpbml0aW9uXCI7XG5jb25zdCBFVkFMVUFUT1JfTUVUQURBVEFfS0VZX0lTX0JJTExFRCA9IFwiZXZhbHVhdG9ySXNCaWxsZWRcIjtcbmNvbnN0IEV2YWxSZXNwb25zZVNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgc2FtcGxlSW5kZXg6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdGVzdENhc2VJZDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKSxcbiAgdHJhY2VJZDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzcGFuSWQ6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZXZhbHVhdGlvbjogU2NvcmVTY2hlbWFcbn0pO1xuY29uc3QgRXZhbFJlc3BvbnNlc1NjaGVtYSA9IGltcG9ydF9jb3JlLnouYXJyYXkoRXZhbFJlc3BvbnNlU2NoZW1hKTtcbmZ1bmN0aW9uIHdpdGhNZXRhZGF0YShldmFsdWF0b3IsIGRhdGFQb2ludFR5cGUsIGNvbmZpZ1NjaGVtYSkge1xuICBjb25zdCB3aXRoTWV0YSA9IGV2YWx1YXRvcjtcbiAgd2l0aE1ldGEuX19kYXRhUG9pbnRUeXBlID0gZGF0YVBvaW50VHlwZTtcbiAgd2l0aE1ldGEuX19jb25maWdTY2hlbWEgPSBjb25maWdTY2hlbWE7XG4gIHJldHVybiB3aXRoTWV0YTtcbn1cbmNvbnN0IEV2YWxSZXF1ZXN0U2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBkYXRhc2V0OiBpbXBvcnRfY29yZS56LmFycmF5KEJhc2VEYXRhUG9pbnRTY2hlbWEpLFxuICBvcHRpb25zOiBpbXBvcnRfY29yZS56LnVua25vd24oKVxufSk7XG5mdW5jdGlvbiBkZWZpbmVFdmFsdWF0b3IocmVnaXN0cnksIG9wdGlvbnMsIHJ1bm5lcikge1xuICB2YXIgX2E7XG4gIGNvbnN0IG1ldGFkYXRhID0ge307XG4gIG1ldGFkYXRhW0VWQUxVQVRPUl9NRVRBREFUQV9LRVlfSVNfQklMTEVEXSA9IG9wdGlvbnMuaXNCaWxsZWQgPT0gdm9pZCAwID8gdHJ1ZSA6IG9wdGlvbnMuaXNCaWxsZWQ7XG4gIG1ldGFkYXRhW0VWQUxVQVRPUl9NRVRBREFUQV9LRVlfRElTUExBWV9OQU1FXSA9IG9wdGlvbnMuZGlzcGxheU5hbWU7XG4gIG1ldGFkYXRhW0VWQUxVQVRPUl9NRVRBREFUQV9LRVlfREVGSU5JVElPTl0gPSBvcHRpb25zLmRlZmluaXRpb247XG4gIGNvbnN0IGV2YWx1YXRvciA9ICgwLCBpbXBvcnRfY29yZS5kZWZpbmVBY3Rpb24pKFxuICAgIHJlZ2lzdHJ5LFxuICAgIHtcbiAgICAgIGFjdGlvblR5cGU6IFwiZXZhbHVhdG9yXCIsXG4gICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICBpbnB1dFNjaGVtYTogRXZhbFJlcXVlc3RTY2hlbWEuZXh0ZW5kKHtcbiAgICAgICAgZGF0YXNldDogb3B0aW9ucy5kYXRhUG9pbnRUeXBlID8gaW1wb3J0X2NvcmUuei5hcnJheShvcHRpb25zLmRhdGFQb2ludFR5cGUpIDogaW1wb3J0X2NvcmUuei5hcnJheShCYXNlRGF0YVBvaW50U2NoZW1hKSxcbiAgICAgICAgb3B0aW9uczogKF9hID0gb3B0aW9ucy5jb25maWdTY2hlbWEpICE9IG51bGwgPyBfYSA6IGltcG9ydF9jb3JlLnoudW5rbm93bigpLFxuICAgICAgICBldmFsUnVuSWQ6IGltcG9ydF9jb3JlLnouc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgb3V0cHV0U2NoZW1hOiBFdmFsUmVzcG9uc2VzU2NoZW1hLFxuICAgICAgbWV0YWRhdGFcbiAgICB9LFxuICAgIChpKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgbGV0IGV2YWxSZXNwb25zZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpLmRhdGFzZXQubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IGRhdGFwb2ludCA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGkuZGF0YXNldFtpbmRleF0pLCB7XG4gICAgICAgICAgdGVzdENhc2VJZDogKF9hMiA9IGkuZGF0YXNldFtpbmRleF0udGVzdENhc2VJZCkgIT0gbnVsbCA/IF9hMiA6ICgwLCBpbXBvcnRfY3J5cHRvLnJhbmRvbVVVSUQpKClcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgeWllbGQgKDAsIGltcG9ydF90cmFjaW5nLnJ1bkluTmV3U3BhbikoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogYFRlc3QgQ2FzZSAke2RhdGFwb2ludC50ZXN0Q2FzZUlkfWAsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHsgXCJldmFsdWF0b3I6ZXZhbFJ1bklkXCI6IGkuZXZhbFJ1bklkIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgW2ltcG9ydF90cmFjaW5nLlNQQU5fVFlQRV9BVFRSXTogXCJldmFsdWF0b3JcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKG1ldGFkYXRhMiwgb3RTcGFuKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNwYW5JZCA9IG90U3Bhbi5zcGFuQ29udGV4dCgpLnNwYW5JZDtcbiAgICAgICAgICAgICAgY29uc3QgdHJhY2VJZCA9IG90U3Bhbi5zcGFuQ29udGV4dCgpLnRyYWNlSWQ7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEyLmlucHV0ID0ge1xuICAgICAgICAgICAgICAgICAgaW5wdXQ6IGRhdGFwb2ludC5pbnB1dCxcbiAgICAgICAgICAgICAgICAgIG91dHB1dDogZGF0YXBvaW50Lm91dHB1dCxcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGRhdGFwb2ludC5jb250ZXh0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0Q2FzZU91dHB1dCA9IHlpZWxkIHJ1bm5lcihkYXRhcG9pbnQsIGkub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdGVzdENhc2VPdXRwdXQuc2FtcGxlSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0ZXN0Q2FzZU91dHB1dC5zcGFuSWQgPSBzcGFuSWQ7XG4gICAgICAgICAgICAgICAgdGVzdENhc2VPdXRwdXQudHJhY2VJZCA9IHRyYWNlSWQ7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEyLm91dHB1dCA9IHRlc3RDYXNlT3V0cHV0O1xuICAgICAgICAgICAgICAgIGV2YWxSZXNwb25zZXMucHVzaCh0ZXN0Q2FzZU91dHB1dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlc3RDYXNlT3V0cHV0O1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZXZhbFJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHNhbXBsZUluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgIHNwYW5JZCxcbiAgICAgICAgICAgICAgICAgIHRyYWNlSWQsXG4gICAgICAgICAgICAgICAgICB0ZXN0Q2FzZUlkOiBkYXRhcG9pbnQudGVzdENhc2VJZCxcbiAgICAgICAgICAgICAgICAgIGV2YWx1YXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBFdmFsdWF0aW9uIG9mIHRlc3QgY2FzZSAke2RhdGFwb2ludC50ZXN0Q2FzZUlkfSBmYWlsZWQ6IFxuJHtlLnN0YWNrfWBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpbXBvcnRfbG9nZ2luZy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICBgRXZhbHVhdGlvbiBvZiB0ZXN0IGNhc2UgJHtkYXRhcG9pbnQudGVzdENhc2VJZH0gZmFpbGVkOiBcbiR7ZS5zdGFja31gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGV2YWxSZXNwb25zZXM7XG4gICAgfSlcbiAgKTtcbiAgY29uc3QgZXdtID0gd2l0aE1ldGFkYXRhKFxuICAgIGV2YWx1YXRvcixcbiAgICBvcHRpb25zLmRhdGFQb2ludFR5cGUsXG4gICAgb3B0aW9ucy5jb25maWdTY2hlbWFcbiAgKTtcbiAgcmV0dXJuIGV3bTtcbn1cbmZ1bmN0aW9uIGV2YWx1YXRlKHJlZ2lzdHJ5LCBwYXJhbXMpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBsZXQgZXZhbHVhdG9yO1xuICAgIGlmICh0eXBlb2YgcGFyYW1zLmV2YWx1YXRvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZXZhbHVhdG9yID0geWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKGAvZXZhbHVhdG9yLyR7cGFyYW1zLmV2YWx1YXRvcn1gKTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtcy5ldmFsdWF0b3IsIFwiaW5mb1wiKSkge1xuICAgICAgZXZhbHVhdG9yID0geWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKFxuICAgICAgICBgL2V2YWx1YXRvci8ke3BhcmFtcy5ldmFsdWF0b3IubmFtZX1gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmFsdWF0b3IgPSBwYXJhbXMuZXZhbHVhdG9yO1xuICAgIH1cbiAgICBpZiAoIWV2YWx1YXRvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHV0aWxpemUgdGhlIHByb3ZpZGVkIGV2YWx1YXRvclwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHlpZWxkIGV2YWx1YXRvcih7XG4gICAgICBkYXRhc2V0OiBwYXJhbXMuZGF0YXNldCxcbiAgICAgIG9wdGlvbnM6IHBhcmFtcy5vcHRpb25zXG4gICAgfSk7XG4gIH0pO1xufVxuY29uc3QgRXZhbHVhdG9ySW5mb1NjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgLyoqIEZyaWVuZGx5IGxhYmVsIGZvciB0aGlzIGV2YWx1YXRvciAqL1xuICBsYWJlbDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBtZXRyaWNzOiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9jb3JlLnouc3RyaW5nKCkpXG59KTtcbmZ1bmN0aW9uIGV2YWx1YXRvclJlZihvcHRpb25zKSB7XG4gIHJldHVybiBfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucyk7XG59XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgQVRUUl9QUkVGSVgsXG4gIEJhc2VEYXRhUG9pbnRTY2hlbWEsXG4gIEJhc2VFdmFsRGF0YVBvaW50U2NoZW1hLFxuICBFVkFMVUFUT1JfTUVUQURBVEFfS0VZX0RFRklOSVRJT04sXG4gIEVWQUxVQVRPUl9NRVRBREFUQV9LRVlfRElTUExBWV9OQU1FLFxuICBFVkFMVUFUT1JfTUVUQURBVEFfS0VZX0lTX0JJTExFRCxcbiAgRXZhbFJlc3BvbnNlU2NoZW1hLFxuICBFdmFsUmVzcG9uc2VzU2NoZW1hLFxuICBFdmFsdWF0b3JJbmZvU2NoZW1hLFxuICBTUEFOX1NUQVRFX0FUVFIsXG4gIFNjb3JlU2NoZW1hLFxuICBkZWZpbmVFdmFsdWF0b3IsXG4gIGV2YWx1YXRlLFxuICBldmFsdWF0b3JSZWZcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZhbHVhdG9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/evaluator.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/extract.js":
/*!***********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/extract.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar extract_exports = {};\n__export(extract_exports, {\n  extractJson: () => extractJson,\n  parsePartialJson: () => parsePartialJson\n});\nmodule.exports = __toCommonJS(extract_exports);\nvar import_json5 = __toESM(__webpack_require__(/*! json5 */ \"(rsc)/./node_modules/json5/dist/index.mjs\"));\nvar import_partial_json = __webpack_require__(/*! partial-json */ \"(rsc)/./node_modules/partial-json/dist/index.js\");\nfunction parsePartialJson(jsonString) {\n  return import_json5.default.parse(JSON.stringify((0, import_partial_json.parse)(jsonString, import_partial_json.Allow.ALL)));\n}\nfunction extractJson(text, throwOnBadJson) {\n  let openingChar;\n  let closingChar;\n  let startPos;\n  let nestingCount = 0;\n  for (let i = 0; i < text.length; i++) {\n    const char = text[i].replace(/\\u00A0/g, \" \");\n    if (!openingChar && (char === \"{\" || char === \"[\")) {\n      openingChar = char;\n      closingChar = char === \"{\" ? \"}\" : \"]\";\n      startPos = i;\n      nestingCount++;\n    } else if (char === openingChar) {\n      nestingCount++;\n    } else if (char === closingChar) {\n      nestingCount--;\n      if (!nestingCount) {\n        return import_json5.default.parse(text.substring(startPos || 0, i + 1));\n      }\n    }\n  }\n  if (startPos !== void 0 && nestingCount > 0) {\n    try {\n      return parsePartialJson(text.substring(startPos));\n    } catch (e) {\n      if (throwOnBadJson) {\n        throw new Error(`Invalid JSON extracted from model output: ${text}`);\n      }\n      return null;\n    }\n  }\n  if (throwOnBadJson) {\n    throw new Error(`Invalid JSON extracted from model output: ${text}`);\n  }\n  return null;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=extract.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9leHRyYWN0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLDhCQUE4QjtBQUN2RztBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsMkJBQTJCLG1CQUFPLENBQUMsd0RBQU87QUFDMUMsMEJBQTBCLG1CQUFPLENBQUMscUVBQWM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQSwrQkFBK0IsTUFBTTtBQUNyQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHFFQUFxRSxLQUFLO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsS0FBSztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sQ0FHTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9leHRyYWN0LmpzPzlmNzYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTVxuICAvLyBmaWxlIHRoYXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgQ29tbW9uSlMgZmlsZSB1c2luZyBhIEJhYmVsLVxuICAvLyBjb21wYXRpYmxlIHRyYW5zZm9ybSAoaS5lLiBcIl9fZXNNb2R1bGVcIiBoYXMgbm90IGJlZW4gc2V0KSwgdGhlbiBzZXRcbiAgLy8gXCJkZWZhdWx0XCIgdG8gdGhlIENvbW1vbkpTIFwibW9kdWxlLmV4cG9ydHNcIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LlxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldCwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCxcbiAgbW9kXG4pKTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIGV4dHJhY3RfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZXh0cmFjdF9leHBvcnRzLCB7XG4gIGV4dHJhY3RKc29uOiAoKSA9PiBleHRyYWN0SnNvbixcbiAgcGFyc2VQYXJ0aWFsSnNvbjogKCkgPT4gcGFyc2VQYXJ0aWFsSnNvblxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhleHRyYWN0X2V4cG9ydHMpO1xudmFyIGltcG9ydF9qc29uNSA9IF9fdG9FU00ocmVxdWlyZShcImpzb241XCIpKTtcbnZhciBpbXBvcnRfcGFydGlhbF9qc29uID0gcmVxdWlyZShcInBhcnRpYWwtanNvblwiKTtcbmZ1bmN0aW9uIHBhcnNlUGFydGlhbEpzb24oanNvblN0cmluZykge1xuICByZXR1cm4gaW1wb3J0X2pzb241LmRlZmF1bHQucGFyc2UoSlNPTi5zdHJpbmdpZnkoKDAsIGltcG9ydF9wYXJ0aWFsX2pzb24ucGFyc2UpKGpzb25TdHJpbmcsIGltcG9ydF9wYXJ0aWFsX2pzb24uQWxsb3cuQUxMKSkpO1xufVxuZnVuY3Rpb24gZXh0cmFjdEpzb24odGV4dCwgdGhyb3dPbkJhZEpzb24pIHtcbiAgbGV0IG9wZW5pbmdDaGFyO1xuICBsZXQgY2xvc2luZ0NoYXI7XG4gIGxldCBzdGFydFBvcztcbiAgbGV0IG5lc3RpbmdDb3VudCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXIgPSB0ZXh0W2ldLnJlcGxhY2UoL1xcdTAwQTAvZywgXCIgXCIpO1xuICAgIGlmICghb3BlbmluZ0NoYXIgJiYgKGNoYXIgPT09IFwie1wiIHx8IGNoYXIgPT09IFwiW1wiKSkge1xuICAgICAgb3BlbmluZ0NoYXIgPSBjaGFyO1xuICAgICAgY2xvc2luZ0NoYXIgPSBjaGFyID09PSBcIntcIiA/IFwifVwiIDogXCJdXCI7XG4gICAgICBzdGFydFBvcyA9IGk7XG4gICAgICBuZXN0aW5nQ291bnQrKztcbiAgICB9IGVsc2UgaWYgKGNoYXIgPT09IG9wZW5pbmdDaGFyKSB7XG4gICAgICBuZXN0aW5nQ291bnQrKztcbiAgICB9IGVsc2UgaWYgKGNoYXIgPT09IGNsb3NpbmdDaGFyKSB7XG4gICAgICBuZXN0aW5nQ291bnQtLTtcbiAgICAgIGlmICghbmVzdGluZ0NvdW50KSB7XG4gICAgICAgIHJldHVybiBpbXBvcnRfanNvbjUuZGVmYXVsdC5wYXJzZSh0ZXh0LnN1YnN0cmluZyhzdGFydFBvcyB8fCAwLCBpICsgMSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoc3RhcnRQb3MgIT09IHZvaWQgMCAmJiBuZXN0aW5nQ291bnQgPiAwKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwYXJzZVBhcnRpYWxKc29uKHRleHQuc3Vic3RyaW5nKHN0YXJ0UG9zKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKHRocm93T25CYWRKc29uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBKU09OIGV4dHJhY3RlZCBmcm9tIG1vZGVsIG91dHB1dDogJHt0ZXh0fWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIGlmICh0aHJvd09uQmFkSnNvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBKU09OIGV4dHJhY3RlZCBmcm9tIG1vZGVsIG91dHB1dDogJHt0ZXh0fWApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIGV4dHJhY3RKc29uLFxuICBwYXJzZVBhcnRpYWxKc29uXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4dHJhY3QuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/extract.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generate.js":
/*!************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generate.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar __await = function(promise, isYieldStar) {\n  this[0] = promise;\n  this[1] = isYieldStar;\n};\nvar __asyncGenerator = (__this, __arguments, generator) => {\n  var resume = (k, v, yes, no) => {\n    try {\n      var x = generator[k](v), isAwait = (v = x.value) instanceof __await, done = x.done;\n      Promise.resolve(isAwait ? v[0] : v).then((y) => isAwait ? resume(k === \"return\" ? k : \"next\", v[1] ? { done: y.done, value: y.value } : y, yes, no) : yes({ value: y, done })).catch((e) => resume(\"throw\", e, yes, no));\n    } catch (e) {\n      no(e);\n    }\n  }, method = (k) => it[k] = (x) => new Promise((yes, no) => resume(k, x, yes, no)), it = {};\n  return generator = generator.apply(__this, __arguments), it[__knownSymbol(\"asyncIterator\")] = () => it, method(\"next\"), method(\"throw\"), method(\"return\"), it;\n};\nvar generate_exports = {};\n__export(generate_exports, {\n  GenerateResponse: () => GenerateResponse,\n  GenerateResponseChunk: () => GenerateResponseChunk,\n  GenerationBlockedError: () => GenerationBlockedError,\n  GenerationResponseError: () => GenerationResponseError,\n  Message: () => Message,\n  generate: () => generate,\n  generateStream: () => generateStream,\n  normalizePart: () => normalizePart,\n  tagAsPreamble: () => tagAsPreamble,\n  toGenerateRequest: () => toGenerateRequest\n});\nmodule.exports = __toCommonJS(generate_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_schema = __webpack_require__(/*! @genkit-ai/core/schema */ \"(rsc)/./node_modules/@genkit-ai/core/lib/schema.js\");\nvar import_extract = __webpack_require__(/*! ./extract.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/extract.js\");\nvar import_generateAction = __webpack_require__(/*! ./generateAction.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generateAction.js\");\nvar import_tool = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\");\nclass Message {\n  constructor(message) {\n    this.role = message.role;\n    this.content = message.content;\n  }\n  /**\n   * If a message contains a `data` part, it is returned. Otherwise, the `output()`\n   * method extracts the first valid JSON object or array from the text contained in\n   * the message and returns it.\n   *\n   * @returns The structured output contained in the message.\n   */\n  get output() {\n    return this.data || (0, import_extract.extractJson)(this.text);\n  }\n  toolResponseParts() {\n    const res = this.content.filter((part) => !!part.toolResponse);\n    return res;\n  }\n  /**\n   * Concatenates all `text` parts present in the message with no delimiter.\n   * @returns A string of all concatenated text parts.\n   */\n  get text() {\n    return this.content.map((part) => part.text || \"\").join(\"\");\n  }\n  /**\n   * Returns the first media part detected in the message. Useful for extracting\n   * (for example) an image from a generation expected to create one.\n   * @returns The first detected `media` part in the message.\n   */\n  get media() {\n    var _a;\n    return ((_a = this.content.find((part) => part.media)) == null ? void 0 : _a.media) || null;\n  }\n  /**\n   * Returns the first detected `data` part of a message.\n   * @returns The first `data` part detected in the message (if any).\n   */\n  get data() {\n    var _a;\n    return (_a = this.content.find((part) => part.data)) == null ? void 0 : _a.data;\n  }\n  /**\n   * Returns all tool request found in this message.\n   * @returns Array of all tool request found in this message.\n   */\n  get toolRequests() {\n    return this.content.filter(\n      (part) => !!part.toolRequest\n    );\n  }\n  /**\n   * Converts the Message to a plain JS object.\n   * @returns Plain JS object representing the data contained in the message.\n   */\n  toJSON() {\n    return {\n      role: this.role,\n      content: [...this.content]\n    };\n  }\n}\nclass GenerateResponse {\n  constructor(response, request) {\n    var _a, _b, _c, _d, _e, _f;\n    const generatedMessage = response.message || ((_b = (_a = response.candidates) == null ? void 0 : _a[0]) == null ? void 0 : _b.message);\n    if (generatedMessage) {\n      this.message = new Message(generatedMessage);\n    }\n    this.finishReason = response.finishReason || ((_d = (_c = response.candidates) == null ? void 0 : _c[0]) == null ? void 0 : _d.finishReason);\n    this.finishMessage = response.finishMessage || ((_f = (_e = response.candidates) == null ? void 0 : _e[0]) == null ? void 0 : _f.finishMessage);\n    this.usage = response.usage || {};\n    this.custom = response.custom || {};\n    this.request = request;\n  }\n  get assertMessage() {\n    if (!this.message)\n      throw new Error(\n        \"Operation could not be completed because the response does not contain a generated message.\"\n      );\n    return this.message;\n  }\n  /**\n   * Throws an error if the response does not contain valid output.\n   */\n  assertValid(request) {\n    var _a, _b, _c, _d, _e, _f;\n    if (this.finishReason === \"blocked\") {\n      throw new GenerationBlockedError(\n        this,\n        `Generation blocked${this.finishMessage ? `: ${this.finishMessage}` : \".\"}`\n      );\n    }\n    if (!this.message) {\n      throw new GenerationResponseError(\n        this,\n        `Model did not generate a message. Finish reason: '${this.finishReason}': ${this.finishMessage}`\n      );\n    }\n    if (((_a = request == null ? void 0 : request.output) == null ? void 0 : _a.schema) || ((_c = (_b = this.request) == null ? void 0 : _b.output) == null ? void 0 : _c.schema)) {\n      const o = this.output;\n      (0, import_schema.parseSchema)(o, {\n        jsonSchema: ((_d = request == null ? void 0 : request.output) == null ? void 0 : _d.schema) || ((_f = (_e = this.request) == null ? void 0 : _e.output) == null ? void 0 : _f.schema)\n      });\n    }\n  }\n  isValid(request) {\n    try {\n      this.assertValid(request);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n  /**\n   * If the selected candidate's message contains a `data` part, it is returned. Otherwise,\n   * the `output()` method extracts the first valid JSON object or array from the text\n   * contained in the selected candidate's message and returns it.\n   *\n   * @param index The candidate index from which to extract output. If not provided, finds first candidate that conforms to output schema.\n   * @returns The structured output contained in the selected candidate.\n   */\n  get output() {\n    var _a;\n    return ((_a = this.message) == null ? void 0 : _a.output) || null;\n  }\n  /**\n   * Concatenates all `text` parts present in the candidate's message with no delimiter.\n   * @param index The candidate index from which to extract text, defaults to first candidate.\n   * @returns A string of all concatenated text parts.\n   */\n  get text() {\n    var _a;\n    return ((_a = this.message) == null ? void 0 : _a.text) || \"\";\n  }\n  /**\n   * Returns the first detected media part in the selected candidate's message. Useful for\n   * extracting (for example) an image from a generation expected to create one.\n   * @param index The candidate index from which to extract media, defaults to first candidate.\n   * @returns The first detected `media` part in the candidate.\n   */\n  get media() {\n    var _a;\n    return ((_a = this.message) == null ? void 0 : _a.media) || null;\n  }\n  /**\n   * Returns the first detected `data` part of the selected candidate's message.\n   * @param index The candidate index from which to extract data, defaults to first candidate.\n   * @returns The first `data` part detected in the candidate (if any).\n   */\n  get data() {\n    var _a;\n    return ((_a = this.message) == null ? void 0 : _a.data) || null;\n  }\n  /**\n   * Returns all tool request found in the candidate.\n   * @param index The candidate index from which to extract tool requests, defaults to first candidate.\n   * @returns Array of all tool request found in the candidate.\n   */\n  get toolRequests() {\n    var _a;\n    return ((_a = this.message) == null ? void 0 : _a.toolRequests) || [];\n  }\n  /**\n   * Appends the message generated by the selected candidate to the messages already\n   * present in the generation request. The result of this method can be safely\n   * serialized to JSON for persistence in a database.\n   * @param index The candidate index to utilize during conversion, defaults to first candidate.\n   * @returns A serializable list of messages compatible with `generate({history})`.\n   */\n  get messages() {\n    var _a;\n    if (!this.request)\n      throw new Error(\n        \"Can't construct history for response without request reference.\"\n      );\n    if (!this.message)\n      throw new Error(\n        \"Can't construct history for response without generated message.\"\n      );\n    return [...(_a = this.request) == null ? void 0 : _a.messages, this.message.toJSON()];\n  }\n  get raw() {\n    var _a;\n    return (_a = this.raw) != null ? _a : this.custom;\n  }\n  toJSON() {\n    var _a, _b, _c;\n    const out = {\n      message: (_a = this.message) == null ? void 0 : _a.toJSON(),\n      finishReason: this.finishReason,\n      finishMessage: this.finishMessage,\n      usage: this.usage,\n      custom: ((_c = (_b = this.custom).toJSON) == null ? void 0 : _c.call(_b)) || this.custom,\n      request: this.request\n    };\n    if (!out.finishMessage) delete out.finishMessage;\n    if (!out.request) delete out.request;\n    return out;\n  }\n}\nclass GenerateResponseChunk {\n  constructor(data, accumulatedChunks) {\n    this.index = data.index;\n    this.content = data.content || [];\n    this.custom = data.custom;\n    this.accumulatedChunks = accumulatedChunks;\n  }\n  /**\n   * Concatenates all `text` parts present in the chunk with no delimiter.\n   * @returns A string of all concatenated text parts.\n   */\n  get text() {\n    return this.content.map((part) => part.text || \"\").join(\"\");\n  }\n  /**\n   * Returns the first media part detected in the chunk. Useful for extracting\n   * (for example) an image from a generation expected to create one.\n   * @returns The first detected `media` part in the chunk.\n   */\n  get media() {\n    var _a;\n    return ((_a = this.content.find((part) => part.media)) == null ? void 0 : _a.media) || null;\n  }\n  /**\n   * Returns the first detected `data` part of a chunk.\n   * @returns The first `data` part detected in the chunk (if any).\n   */\n  get data() {\n    var _a;\n    return (_a = this.content.find((part) => part.data)) == null ? void 0 : _a.data;\n  }\n  /**\n   * Returns all tool request found in this chunk.\n   * @returns Array of all tool request found in this chunk.\n   */\n  get toolRequests() {\n    return this.content.filter(\n      (part) => !!part.toolRequest\n    );\n  }\n  /**\n   * Attempts to extract the longest valid JSON substring from the accumulated chunks.\n   * @returns The longest valid JSON substring found in the accumulated chunks.\n   */\n  get output() {\n    if (!this.accumulatedChunks) return null;\n    const accumulatedText = this.accumulatedChunks.map((chunk) => chunk.content.map((part) => part.text || \"\").join(\"\")).join(\"\");\n    return (0, import_extract.extractJson)(accumulatedText, false);\n  }\n  toJSON() {\n    return { index: this.index, content: this.content, custom: this.custom };\n  }\n}\nfunction normalizePart(input) {\n  if (typeof input === \"string\") {\n    return [{ text: input }];\n  } else if (Array.isArray(input)) {\n    return input;\n  } else {\n    return [input];\n  }\n}\nfunction toGenerateRequest(registry, options) {\n  return __async(this, null, function* () {\n    var _a, _b, _c, _d, _e;\n    const messages = [];\n    if (options.system) {\n      messages.push({ role: \"system\", content: normalizePart(options.system) });\n    }\n    if (options.messages) {\n      messages.push(...options.messages);\n    }\n    if (options.prompt) {\n      messages.push({ role: \"user\", content: normalizePart(options.prompt) });\n    }\n    if (messages.length === 0) {\n      throw new Error(\"at least one message is required in generate request\");\n    }\n    let tools;\n    if (options.tools) {\n      tools = yield (0, import_tool.resolveTools)(registry, options.tools);\n    }\n    const out = {\n      messages,\n      config: options.config,\n      docs: options.docs,\n      tools: (tools == null ? void 0 : tools.map((tool) => (0, import_tool.toToolDefinition)(tool))) || [],\n      output: {\n        format: ((_a = options.output) == null ? void 0 : _a.format) || (((_b = options.output) == null ? void 0 : _b.schema) || ((_c = options.output) == null ? void 0 : _c.jsonSchema) ? \"json\" : \"text\"),\n        schema: (0, import_schema.toJsonSchema)({\n          schema: (_d = options.output) == null ? void 0 : _d.schema,\n          jsonSchema: (_e = options.output) == null ? void 0 : _e.jsonSchema\n        })\n      }\n    };\n    if (!out.output.schema) delete out.output.schema;\n    return out;\n  });\n}\nfunction resolveModel(registry, options) {\n  return __async(this, null, function* () {\n    let model = options.model;\n    if (!model) {\n      throw new Error(\"Model is required.\");\n    }\n    if (typeof model === \"string\") {\n      return {\n        modelAction: yield registry.lookupAction(\n          `/model/${model}`\n        )\n      };\n    } else if (model.hasOwnProperty(\"__action\")) {\n      return { modelAction: model };\n    } else {\n      const ref = model;\n      return {\n        modelAction: yield registry.lookupAction(\n          `/model/${ref.name}`\n        ),\n        config: __spreadValues({}, ref.config),\n        version: ref.version\n      };\n    }\n  });\n}\nclass GenerationResponseError extends import_core.GenkitError {\n  constructor(response, message, status, detail) {\n    super({\n      status: status || \"FAILED_PRECONDITION\",\n      message\n    });\n    this.detail = __spreadValues({ response }, detail);\n  }\n}\nclass GenerationBlockedError extends GenerationResponseError {\n}\nfunction generate(registry, options) {\n  return __async(this, null, function* () {\n    var _a, _b, _c;\n    const resolvedOptions = yield Promise.resolve(options);\n    const resolvedModel = yield resolveModel(registry, resolvedOptions);\n    const model = resolvedModel.modelAction;\n    if (!model) {\n      let modelId;\n      if (typeof resolvedOptions.model === \"string\") {\n        modelId = resolvedOptions.model;\n      } else if ((_b = (_a = resolvedOptions.model) == null ? void 0 : _a.__action) == null ? void 0 : _b.name) {\n        modelId = resolvedOptions.model.__action.name;\n      } else {\n        modelId = resolvedOptions.model.name;\n      }\n      throw new Error(`Model ${modelId} not found`);\n    }\n    let tools;\n    if (resolvedOptions.tools) {\n      tools = [];\n      for (const t of resolvedOptions.tools) {\n        if (typeof t === \"string\") {\n          tools.push(yield resolveFullToolName(registry, t));\n        } else if (t.__action) {\n          tools.push(\n            `/${(_c = t.__action.metadata) == null ? void 0 : _c.type}/${t.__action.name}`\n          );\n        } else if (typeof t.asTool === \"function\") {\n          const promptToolAction = t.asTool();\n          tools.push(`/prompt/${promptToolAction.__action.name}`);\n        } else if (t.name) {\n          tools.push(yield resolveFullToolName(registry, t.name));\n        } else {\n          throw new Error(\n            `Unable to determine type of of tool: ${JSON.stringify(t)}`\n          );\n        }\n      }\n    }\n    const messages = [];\n    if (resolvedOptions.system) {\n      messages.push({\n        role: \"system\",\n        content: normalizePart(resolvedOptions.system)\n      });\n    }\n    if (resolvedOptions.messages) {\n      messages.push(...resolvedOptions.messages);\n    }\n    if (resolvedOptions.prompt) {\n      messages.push({\n        role: \"user\",\n        content: normalizePart(resolvedOptions.prompt)\n      });\n    }\n    if (messages.length === 0) {\n      throw new Error(\"at least one message is required in generate request\");\n    }\n    const params = {\n      model: model.__action.name,\n      docs: resolvedOptions.docs,\n      messages,\n      tools,\n      config: __spreadValues(__spreadValues({\n        version: resolvedModel.version\n      }, stripUndefinedOptions(resolvedModel.config)), stripUndefinedOptions(resolvedOptions.config)),\n      output: resolvedOptions.output && {\n        format: resolvedOptions.output.format,\n        jsonSchema: resolvedOptions.output.schema ? (0, import_schema.toJsonSchema)({\n          schema: resolvedOptions.output.schema,\n          jsonSchema: resolvedOptions.output.jsonSchema\n        }) : resolvedOptions.output.jsonSchema\n      },\n      returnToolRequests: resolvedOptions.returnToolRequests\n    };\n    return yield (0, import_core.runWithStreamingCallback)(\n      resolvedOptions.streamingCallback,\n      () => __async(this, null, function* () {\n        var _a2;\n        const response = yield (0, import_generateAction.generateHelper)(\n          registry,\n          params,\n          resolvedOptions.use\n        );\n        return new GenerateResponse(\n          response,\n          (_a2 = response.request) != null ? _a2 : yield toGenerateRequest(registry, __spreadProps(__spreadValues({}, resolvedOptions), { tools }))\n        );\n      })\n    );\n  });\n}\nfunction stripUndefinedOptions(input) {\n  if (!input) return input;\n  const copy = __spreadValues({}, input);\n  Object.keys(input).forEach((key) => {\n    if (copy[key] === void 0) {\n      delete copy[key];\n    }\n  });\n  return copy;\n}\nfunction resolveFullToolName(registry, name) {\n  return __async(this, null, function* () {\n    if (yield registry.lookupAction(`/tool/${name}`)) {\n      return `/tool/${name}`;\n    } else if (yield registry.lookupAction(`/prompt/${name}`)) {\n      return `/prompt/${name}`;\n    } else {\n      throw new Error(`Unable to determine type of of tool: ${name}`);\n    }\n  });\n}\nfunction createPromise() {\n  let resolve, reject;\n  let promise = new Promise((res, rej) => [resolve, reject] = [res, rej]);\n  return { resolve, reject, promise };\n}\nfunction generateStream(registry, options) {\n  return __async(this, null, function* () {\n    let firstChunkSent = false;\n    return new Promise(\n      (initialResolve, initialReject) => {\n        const {\n          resolve: finalResolve,\n          reject: finalReject,\n          promise: finalPromise\n        } = createPromise();\n        let provideNextChunk, nextChunk;\n        ({ resolve: provideNextChunk, promise: nextChunk } = createPromise());\n        function chunkStream() {\n          return __asyncGenerator(this, null, function* () {\n            while (true) {\n              const next = yield new __await(nextChunk);\n              if (!next) break;\n              yield next;\n            }\n          });\n        }\n        try {\n          generate(registry, __spreadProps(__spreadValues({}, options), {\n            streamingCallback: (chunk) => {\n              firstChunkSent = true;\n              provideNextChunk(chunk);\n              ({ resolve: provideNextChunk, promise: nextChunk } = createPromise());\n            }\n          })).then((result) => {\n            provideNextChunk(null);\n            finalResolve(result);\n          });\n        } catch (e) {\n          if (!firstChunkSent) {\n            initialReject(e);\n            return;\n          }\n          provideNextChunk(null);\n          finalReject(e);\n        }\n        initialResolve({\n          get response() {\n            return finalPromise;\n          },\n          get stream() {\n            return chunkStream();\n          }\n        });\n      }\n    );\n  });\n}\nfunction tagAsPreamble(msgs) {\n  if (!msgs) {\n    return void 0;\n  }\n  return msgs.map((m) => __spreadProps(__spreadValues({}, m), {\n    metadata: __spreadProps(__spreadValues({}, m.metadata), {\n      preamble: true\n    })\n  }));\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=generate.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9nZW5lcmF0ZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkcsK0JBQStCLHNCQUFzQixnQkFBZ0I7QUFDbEwsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLDBFQUFpQjtBQUMzQyxvQkFBb0IsbUJBQU8sQ0FBQyxrRkFBd0I7QUFDcEQscUJBQXFCLG1CQUFPLENBQUMsMkZBQWM7QUFDM0MsNEJBQTRCLG1CQUFPLENBQUMseUdBQXFCO0FBQ3pELGtCQUFrQixtQkFBTyxDQUFDLHFGQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBCQUEwQixtQkFBbUIsUUFBUTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGtCQUFrQixLQUFLLG1CQUFtQjtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxRQUFRO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdEQUF3RDtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFzRDtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsTUFBTTtBQUMxQjtBQUNBO0FBQ0EsTUFBTTtBQUNOLGVBQWU7QUFDZixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQ0FBbUMsVUFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSwrQkFBK0IsU0FBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGdCQUFnQixzREFBc0QsR0FBRyxnQkFBZ0I7QUFDekY7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxnQ0FBZ0MsK0JBQStCO0FBQy9ELFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLG9EQUFvRCxrQkFBa0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9IQUFvSCxzQkFBc0IsT0FBTztBQUNqSjtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsS0FBSztBQUNsRCxzQkFBc0IsS0FBSztBQUMzQixNQUFNLGdEQUFnRCxLQUFLO0FBQzNELHdCQUF3QixLQUFLO0FBQzdCLE1BQU07QUFDTiw4REFBOEQsS0FBSztBQUNuRTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFdBQVcsZ0RBQWdEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdEQUFnRDtBQUNqRTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hELDZDQUE2QztBQUM3QztBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLE1BQU0sQ0FXTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9nZW5lcmF0ZS5qcz8xN2ZkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2tub3duU3ltYm9sID0gKG5hbWUsIHN5bWJvbCkgPT4gKHN5bWJvbCA9IFN5bWJvbFtuYW1lXSkgPyBzeW1ib2wgOiBTeW1ib2wuZm9yKFwiU3ltYm9sLlwiICsgbmFtZSk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG52YXIgX19hd2FpdCA9IGZ1bmN0aW9uKHByb21pc2UsIGlzWWllbGRTdGFyKSB7XG4gIHRoaXNbMF0gPSBwcm9taXNlO1xuICB0aGlzWzFdID0gaXNZaWVsZFN0YXI7XG59O1xudmFyIF9fYXN5bmNHZW5lcmF0b3IgPSAoX190aGlzLCBfX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSA9PiB7XG4gIHZhciByZXN1bWUgPSAoaywgdiwgeWVzLCBubykgPT4ge1xuICAgIHRyeSB7XG4gICAgICB2YXIgeCA9IGdlbmVyYXRvcltrXSh2KSwgaXNBd2FpdCA9ICh2ID0geC52YWx1ZSkgaW5zdGFuY2VvZiBfX2F3YWl0LCBkb25lID0geC5kb25lO1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKGlzQXdhaXQgPyB2WzBdIDogdikudGhlbigoeSkgPT4gaXNBd2FpdCA/IHJlc3VtZShrID09PSBcInJldHVyblwiID8gayA6IFwibmV4dFwiLCB2WzFdID8geyBkb25lOiB5LmRvbmUsIHZhbHVlOiB5LnZhbHVlIH0gOiB5LCB5ZXMsIG5vKSA6IHllcyh7IHZhbHVlOiB5LCBkb25lIH0pKS5jYXRjaCgoZSkgPT4gcmVzdW1lKFwidGhyb3dcIiwgZSwgeWVzLCBubykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG5vKGUpO1xuICAgIH1cbiAgfSwgbWV0aG9kID0gKGspID0+IGl0W2tdID0gKHgpID0+IG5ldyBQcm9taXNlKCh5ZXMsIG5vKSA9PiByZXN1bWUoaywgeCwgeWVzLCBubykpLCBpdCA9IHt9O1xuICByZXR1cm4gZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpLCBpdFtfX2tub3duU3ltYm9sKFwiYXN5bmNJdGVyYXRvclwiKV0gPSAoKSA9PiBpdCwgbWV0aG9kKFwibmV4dFwiKSwgbWV0aG9kKFwidGhyb3dcIiksIG1ldGhvZChcInJldHVyblwiKSwgaXQ7XG59O1xudmFyIGdlbmVyYXRlX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGdlbmVyYXRlX2V4cG9ydHMsIHtcbiAgR2VuZXJhdGVSZXNwb25zZTogKCkgPT4gR2VuZXJhdGVSZXNwb25zZSxcbiAgR2VuZXJhdGVSZXNwb25zZUNodW5rOiAoKSA9PiBHZW5lcmF0ZVJlc3BvbnNlQ2h1bmssXG4gIEdlbmVyYXRpb25CbG9ja2VkRXJyb3I6ICgpID0+IEdlbmVyYXRpb25CbG9ja2VkRXJyb3IsXG4gIEdlbmVyYXRpb25SZXNwb25zZUVycm9yOiAoKSA9PiBHZW5lcmF0aW9uUmVzcG9uc2VFcnJvcixcbiAgTWVzc2FnZTogKCkgPT4gTWVzc2FnZSxcbiAgZ2VuZXJhdGU6ICgpID0+IGdlbmVyYXRlLFxuICBnZW5lcmF0ZVN0cmVhbTogKCkgPT4gZ2VuZXJhdGVTdHJlYW0sXG4gIG5vcm1hbGl6ZVBhcnQ6ICgpID0+IG5vcm1hbGl6ZVBhcnQsXG4gIHRhZ0FzUHJlYW1ibGU6ICgpID0+IHRhZ0FzUHJlYW1ibGUsXG4gIHRvR2VuZXJhdGVSZXF1ZXN0OiAoKSA9PiB0b0dlbmVyYXRlUmVxdWVzdFxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhnZW5lcmF0ZV9leHBvcnRzKTtcbnZhciBpbXBvcnRfY29yZSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmVcIik7XG52YXIgaW1wb3J0X3NjaGVtYSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvc2NoZW1hXCIpO1xudmFyIGltcG9ydF9leHRyYWN0ID0gcmVxdWlyZShcIi4vZXh0cmFjdC5qc1wiKTtcbnZhciBpbXBvcnRfZ2VuZXJhdGVBY3Rpb24gPSByZXF1aXJlKFwiLi9nZW5lcmF0ZUFjdGlvbi5qc1wiKTtcbnZhciBpbXBvcnRfdG9vbCA9IHJlcXVpcmUoXCIuL3Rvb2wuanNcIik7XG5jbGFzcyBNZXNzYWdlIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHRoaXMucm9sZSA9IG1lc3NhZ2Uucm9sZTtcbiAgICB0aGlzLmNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIElmIGEgbWVzc2FnZSBjb250YWlucyBhIGBkYXRhYCBwYXJ0LCBpdCBpcyByZXR1cm5lZC4gT3RoZXJ3aXNlLCB0aGUgYG91dHB1dCgpYFxuICAgKiBtZXRob2QgZXh0cmFjdHMgdGhlIGZpcnN0IHZhbGlkIEpTT04gb2JqZWN0IG9yIGFycmF5IGZyb20gdGhlIHRleHQgY29udGFpbmVkIGluXG4gICAqIHRoZSBtZXNzYWdlIGFuZCByZXR1cm5zIGl0LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgc3RydWN0dXJlZCBvdXRwdXQgY29udGFpbmVkIGluIHRoZSBtZXNzYWdlLlxuICAgKi9cbiAgZ2V0IG91dHB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhIHx8ICgwLCBpbXBvcnRfZXh0cmFjdC5leHRyYWN0SnNvbikodGhpcy50ZXh0KTtcbiAgfVxuICB0b29sUmVzcG9uc2VQYXJ0cygpIHtcbiAgICBjb25zdCByZXMgPSB0aGlzLmNvbnRlbnQuZmlsdGVyKChwYXJ0KSA9PiAhIXBhcnQudG9vbFJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIGB0ZXh0YCBwYXJ0cyBwcmVzZW50IGluIHRoZSBtZXNzYWdlIHdpdGggbm8gZGVsaW1pdGVyLlxuICAgKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgY29uY2F0ZW5hdGVkIHRleHQgcGFydHMuXG4gICAqL1xuICBnZXQgdGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50Lm1hcCgocGFydCkgPT4gcGFydC50ZXh0IHx8IFwiXCIpLmpvaW4oXCJcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IG1lZGlhIHBhcnQgZGV0ZWN0ZWQgaW4gdGhlIG1lc3NhZ2UuIFVzZWZ1bCBmb3IgZXh0cmFjdGluZ1xuICAgKiAoZm9yIGV4YW1wbGUpIGFuIGltYWdlIGZyb20gYSBnZW5lcmF0aW9uIGV4cGVjdGVkIHRvIGNyZWF0ZSBvbmUuXG4gICAqIEByZXR1cm5zIFRoZSBmaXJzdCBkZXRlY3RlZCBgbWVkaWFgIHBhcnQgaW4gdGhlIG1lc3NhZ2UuXG4gICAqL1xuICBnZXQgbWVkaWEoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gdGhpcy5jb250ZW50LmZpbmQoKHBhcnQpID0+IHBhcnQubWVkaWEpKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWVkaWEpIHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IGRldGVjdGVkIGBkYXRhYCBwYXJ0IG9mIGEgbWVzc2FnZS5cbiAgICogQHJldHVybnMgVGhlIGZpcnN0IGBkYXRhYCBwYXJ0IGRldGVjdGVkIGluIHRoZSBtZXNzYWdlIChpZiBhbnkpLlxuICAgKi9cbiAgZ2V0IGRhdGEoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSB0aGlzLmNvbnRlbnQuZmluZCgocGFydCkgPT4gcGFydC5kYXRhKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRhdGE7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHRvb2wgcmVxdWVzdCBmb3VuZCBpbiB0aGlzIG1lc3NhZ2UuXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIGFsbCB0b29sIHJlcXVlc3QgZm91bmQgaW4gdGhpcyBtZXNzYWdlLlxuICAgKi9cbiAgZ2V0IHRvb2xSZXF1ZXN0cygpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50LmZpbHRlcihcbiAgICAgIChwYXJ0KSA9PiAhIXBhcnQudG9vbFJlcXVlc3RcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgTWVzc2FnZSB0byBhIHBsYWluIEpTIG9iamVjdC5cbiAgICogQHJldHVybnMgUGxhaW4gSlMgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGF0YSBjb250YWluZWQgaW4gdGhlIG1lc3NhZ2UuXG4gICAqL1xuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvbGU6IHRoaXMucm9sZSxcbiAgICAgIGNvbnRlbnQ6IFsuLi50aGlzLmNvbnRlbnRdXG4gICAgfTtcbiAgfVxufVxuY2xhc3MgR2VuZXJhdGVSZXNwb25zZSB7XG4gIGNvbnN0cnVjdG9yKHJlc3BvbnNlLCByZXF1ZXN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgY29uc3QgZ2VuZXJhdGVkTWVzc2FnZSA9IHJlc3BvbnNlLm1lc3NhZ2UgfHwgKChfYiA9IChfYSA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1lc3NhZ2UpO1xuICAgIGlmIChnZW5lcmF0ZWRNZXNzYWdlKSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBuZXcgTWVzc2FnZShnZW5lcmF0ZWRNZXNzYWdlKTtcbiAgICB9XG4gICAgdGhpcy5maW5pc2hSZWFzb24gPSByZXNwb25zZS5maW5pc2hSZWFzb24gfHwgKChfZCA9IChfYyA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09IG51bGwgPyB2b2lkIDAgOiBfY1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmZpbmlzaFJlYXNvbik7XG4gICAgdGhpcy5maW5pc2hNZXNzYWdlID0gcmVzcG9uc2UuZmluaXNoTWVzc2FnZSB8fCAoKF9mID0gKF9lID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2YuZmluaXNoTWVzc2FnZSk7XG4gICAgdGhpcy51c2FnZSA9IHJlc3BvbnNlLnVzYWdlIHx8IHt9O1xuICAgIHRoaXMuY3VzdG9tID0gcmVzcG9uc2UuY3VzdG9tIHx8IHt9O1xuICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cbiAgZ2V0IGFzc2VydE1lc3NhZ2UoKSB7XG4gICAgaWYgKCF0aGlzLm1lc3NhZ2UpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiT3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQgYmVjYXVzZSB0aGUgcmVzcG9uc2UgZG9lcyBub3QgY29udGFpbiBhIGdlbmVyYXRlZCBtZXNzYWdlLlwiXG4gICAgICApO1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gIH1cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcmVzcG9uc2UgZG9lcyBub3QgY29udGFpbiB2YWxpZCBvdXRwdXQuXG4gICAqL1xuICBhc3NlcnRWYWxpZChyZXF1ZXN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgaWYgKHRoaXMuZmluaXNoUmVhc29uID09PSBcImJsb2NrZWRcIikge1xuICAgICAgdGhyb3cgbmV3IEdlbmVyYXRpb25CbG9ja2VkRXJyb3IoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGBHZW5lcmF0aW9uIGJsb2NrZWQke3RoaXMuZmluaXNoTWVzc2FnZSA/IGA6ICR7dGhpcy5maW5pc2hNZXNzYWdlfWAgOiBcIi5cIn1gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubWVzc2FnZSkge1xuICAgICAgdGhyb3cgbmV3IEdlbmVyYXRpb25SZXNwb25zZUVycm9yKFxuICAgICAgICB0aGlzLFxuICAgICAgICBgTW9kZWwgZGlkIG5vdCBnZW5lcmF0ZSBhIG1lc3NhZ2UuIEZpbmlzaCByZWFzb246ICcke3RoaXMuZmluaXNoUmVhc29ufSc6ICR7dGhpcy5maW5pc2hNZXNzYWdlfWBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICgoKF9hID0gcmVxdWVzdCA9PSBudWxsID8gdm9pZCAwIDogcmVxdWVzdC5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zY2hlbWEpIHx8ICgoX2MgPSAoX2IgPSB0aGlzLnJlcXVlc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYi5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zY2hlbWEpKSB7XG4gICAgICBjb25zdCBvID0gdGhpcy5vdXRwdXQ7XG4gICAgICAoMCwgaW1wb3J0X3NjaGVtYS5wYXJzZVNjaGVtYSkobywge1xuICAgICAgICBqc29uU2NoZW1hOiAoKF9kID0gcmVxdWVzdCA9PSBudWxsID8gdm9pZCAwIDogcmVxdWVzdC5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5zY2hlbWEpIHx8ICgoX2YgPSAoX2UgPSB0aGlzLnJlcXVlc3QpID09IG51bGwgPyB2b2lkIDAgOiBfZS5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfZi5zY2hlbWEpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaXNWYWxpZChyZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuYXNzZXJ0VmFsaWQocmVxdWVzdCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJZiB0aGUgc2VsZWN0ZWQgY2FuZGlkYXRlJ3MgbWVzc2FnZSBjb250YWlucyBhIGBkYXRhYCBwYXJ0LCBpdCBpcyByZXR1cm5lZC4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYG91dHB1dCgpYCBtZXRob2QgZXh0cmFjdHMgdGhlIGZpcnN0IHZhbGlkIEpTT04gb2JqZWN0IG9yIGFycmF5IGZyb20gdGhlIHRleHRcbiAgICogY29udGFpbmVkIGluIHRoZSBzZWxlY3RlZCBjYW5kaWRhdGUncyBtZXNzYWdlIGFuZCByZXR1cm5zIGl0LlxuICAgKlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGNhbmRpZGF0ZSBpbmRleCBmcm9tIHdoaWNoIHRvIGV4dHJhY3Qgb3V0cHV0LiBJZiBub3QgcHJvdmlkZWQsIGZpbmRzIGZpcnN0IGNhbmRpZGF0ZSB0aGF0IGNvbmZvcm1zIHRvIG91dHB1dCBzY2hlbWEuXG4gICAqIEByZXR1cm5zIFRoZSBzdHJ1Y3R1cmVkIG91dHB1dCBjb250YWluZWQgaW4gdGhlIHNlbGVjdGVkIGNhbmRpZGF0ZS5cbiAgICovXG4gIGdldCBvdXRwdXQoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gdGhpcy5tZXNzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2Eub3V0cHV0KSB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIGB0ZXh0YCBwYXJ0cyBwcmVzZW50IGluIHRoZSBjYW5kaWRhdGUncyBtZXNzYWdlIHdpdGggbm8gZGVsaW1pdGVyLlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGNhbmRpZGF0ZSBpbmRleCBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGV4dCwgZGVmYXVsdHMgdG8gZmlyc3QgY2FuZGlkYXRlLlxuICAgKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgY29uY2F0ZW5hdGVkIHRleHQgcGFydHMuXG4gICAqL1xuICBnZXQgdGV4dCgpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICgoX2EgPSB0aGlzLm1lc3NhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfYS50ZXh0KSB8fCBcIlwiO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBkZXRlY3RlZCBtZWRpYSBwYXJ0IGluIHRoZSBzZWxlY3RlZCBjYW5kaWRhdGUncyBtZXNzYWdlLiBVc2VmdWwgZm9yXG4gICAqIGV4dHJhY3RpbmcgKGZvciBleGFtcGxlKSBhbiBpbWFnZSBmcm9tIGEgZ2VuZXJhdGlvbiBleHBlY3RlZCB0byBjcmVhdGUgb25lLlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGNhbmRpZGF0ZSBpbmRleCBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgbWVkaWEsIGRlZmF1bHRzIHRvIGZpcnN0IGNhbmRpZGF0ZS5cbiAgICogQHJldHVybnMgVGhlIGZpcnN0IGRldGVjdGVkIGBtZWRpYWAgcGFydCBpbiB0aGUgY2FuZGlkYXRlLlxuICAgKi9cbiAgZ2V0IG1lZGlhKCkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKChfYSA9IHRoaXMubWVzc2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm1lZGlhKSB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBkZXRlY3RlZCBgZGF0YWAgcGFydCBvZiB0aGUgc2VsZWN0ZWQgY2FuZGlkYXRlJ3MgbWVzc2FnZS5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBjYW5kaWRhdGUgaW5kZXggZnJvbSB3aGljaCB0byBleHRyYWN0IGRhdGEsIGRlZmF1bHRzIHRvIGZpcnN0IGNhbmRpZGF0ZS5cbiAgICogQHJldHVybnMgVGhlIGZpcnN0IGBkYXRhYCBwYXJ0IGRldGVjdGVkIGluIHRoZSBjYW5kaWRhdGUgKGlmIGFueSkuXG4gICAqL1xuICBnZXQgZGF0YSgpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICgoX2EgPSB0aGlzLm1lc3NhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfYS5kYXRhKSB8fCBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0b29sIHJlcXVlc3QgZm91bmQgaW4gdGhlIGNhbmRpZGF0ZS5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBjYW5kaWRhdGUgaW5kZXggZnJvbSB3aGljaCB0byBleHRyYWN0IHRvb2wgcmVxdWVzdHMsIGRlZmF1bHRzIHRvIGZpcnN0IGNhbmRpZGF0ZS5cbiAgICogQHJldHVybnMgQXJyYXkgb2YgYWxsIHRvb2wgcmVxdWVzdCBmb3VuZCBpbiB0aGUgY2FuZGlkYXRlLlxuICAgKi9cbiAgZ2V0IHRvb2xSZXF1ZXN0cygpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICgoX2EgPSB0aGlzLm1lc3NhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfYS50b29sUmVxdWVzdHMpIHx8IFtdO1xuICB9XG4gIC8qKlxuICAgKiBBcHBlbmRzIHRoZSBtZXNzYWdlIGdlbmVyYXRlZCBieSB0aGUgc2VsZWN0ZWQgY2FuZGlkYXRlIHRvIHRoZSBtZXNzYWdlcyBhbHJlYWR5XG4gICAqIHByZXNlbnQgaW4gdGhlIGdlbmVyYXRpb24gcmVxdWVzdC4gVGhlIHJlc3VsdCBvZiB0aGlzIG1ldGhvZCBjYW4gYmUgc2FmZWx5XG4gICAqIHNlcmlhbGl6ZWQgdG8gSlNPTiBmb3IgcGVyc2lzdGVuY2UgaW4gYSBkYXRhYmFzZS5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBjYW5kaWRhdGUgaW5kZXggdG8gdXRpbGl6ZSBkdXJpbmcgY29udmVyc2lvbiwgZGVmYXVsdHMgdG8gZmlyc3QgY2FuZGlkYXRlLlxuICAgKiBAcmV0dXJucyBBIHNlcmlhbGl6YWJsZSBsaXN0IG9mIG1lc3NhZ2VzIGNvbXBhdGlibGUgd2l0aCBgZ2VuZXJhdGUoe2hpc3Rvcnl9KWAuXG4gICAqL1xuICBnZXQgbWVzc2FnZXMoKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmICghdGhpcy5yZXF1ZXN0KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbid0IGNvbnN0cnVjdCBoaXN0b3J5IGZvciByZXNwb25zZSB3aXRob3V0IHJlcXVlc3QgcmVmZXJlbmNlLlwiXG4gICAgICApO1xuICAgIGlmICghdGhpcy5tZXNzYWdlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbid0IGNvbnN0cnVjdCBoaXN0b3J5IGZvciByZXNwb25zZSB3aXRob3V0IGdlbmVyYXRlZCBtZXNzYWdlLlwiXG4gICAgICApO1xuICAgIHJldHVybiBbLi4uKF9hID0gdGhpcy5yZXF1ZXN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EubWVzc2FnZXMsIHRoaXMubWVzc2FnZS50b0pTT04oKV07XG4gIH1cbiAgZ2V0IHJhdygpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHRoaXMucmF3KSAhPSBudWxsID8gX2EgOiB0aGlzLmN1c3RvbTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgbWVzc2FnZTogKF9hID0gdGhpcy5tZXNzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2EudG9KU09OKCksXG4gICAgICBmaW5pc2hSZWFzb246IHRoaXMuZmluaXNoUmVhc29uLFxuICAgICAgZmluaXNoTWVzc2FnZTogdGhpcy5maW5pc2hNZXNzYWdlLFxuICAgICAgdXNhZ2U6IHRoaXMudXNhZ2UsXG4gICAgICBjdXN0b206ICgoX2MgPSAoX2IgPSB0aGlzLmN1c3RvbSkudG9KU09OKSA9PSBudWxsID8gdm9pZCAwIDogX2MuY2FsbChfYikpIHx8IHRoaXMuY3VzdG9tLFxuICAgICAgcmVxdWVzdDogdGhpcy5yZXF1ZXN0XG4gICAgfTtcbiAgICBpZiAoIW91dC5maW5pc2hNZXNzYWdlKSBkZWxldGUgb3V0LmZpbmlzaE1lc3NhZ2U7XG4gICAgaWYgKCFvdXQucmVxdWVzdCkgZGVsZXRlIG91dC5yZXF1ZXN0O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbn1cbmNsYXNzIEdlbmVyYXRlUmVzcG9uc2VDaHVuayB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGFjY3VtdWxhdGVkQ2h1bmtzKSB7XG4gICAgdGhpcy5pbmRleCA9IGRhdGEuaW5kZXg7XG4gICAgdGhpcy5jb250ZW50ID0gZGF0YS5jb250ZW50IHx8IFtdO1xuICAgIHRoaXMuY3VzdG9tID0gZGF0YS5jdXN0b207XG4gICAgdGhpcy5hY2N1bXVsYXRlZENodW5rcyA9IGFjY3VtdWxhdGVkQ2h1bmtzO1xuICB9XG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIGB0ZXh0YCBwYXJ0cyBwcmVzZW50IGluIHRoZSBjaHVuayB3aXRoIG5vIGRlbGltaXRlci5cbiAgICogQHJldHVybnMgQSBzdHJpbmcgb2YgYWxsIGNvbmNhdGVuYXRlZCB0ZXh0IHBhcnRzLlxuICAgKi9cbiAgZ2V0IHRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudC5tYXAoKHBhcnQpID0+IHBhcnQudGV4dCB8fCBcIlwiKS5qb2luKFwiXCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBtZWRpYSBwYXJ0IGRldGVjdGVkIGluIHRoZSBjaHVuay4gVXNlZnVsIGZvciBleHRyYWN0aW5nXG4gICAqIChmb3IgZXhhbXBsZSkgYW4gaW1hZ2UgZnJvbSBhIGdlbmVyYXRpb24gZXhwZWN0ZWQgdG8gY3JlYXRlIG9uZS5cbiAgICogQHJldHVybnMgVGhlIGZpcnN0IGRldGVjdGVkIGBtZWRpYWAgcGFydCBpbiB0aGUgY2h1bmsuXG4gICAqL1xuICBnZXQgbWVkaWEoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gdGhpcy5jb250ZW50LmZpbmQoKHBhcnQpID0+IHBhcnQubWVkaWEpKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWVkaWEpIHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IGRldGVjdGVkIGBkYXRhYCBwYXJ0IG9mIGEgY2h1bmsuXG4gICAqIEByZXR1cm5zIFRoZSBmaXJzdCBgZGF0YWAgcGFydCBkZXRlY3RlZCBpbiB0aGUgY2h1bmsgKGlmIGFueSkuXG4gICAqL1xuICBnZXQgZGF0YSgpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHRoaXMuY29udGVudC5maW5kKChwYXJ0KSA9PiBwYXJ0LmRhdGEpKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZGF0YTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdG9vbCByZXF1ZXN0IGZvdW5kIGluIHRoaXMgY2h1bmsuXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIGFsbCB0b29sIHJlcXVlc3QgZm91bmQgaW4gdGhpcyBjaHVuay5cbiAgICovXG4gIGdldCB0b29sUmVxdWVzdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudC5maWx0ZXIoXG4gICAgICAocGFydCkgPT4gISFwYXJ0LnRvb2xSZXF1ZXN0XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gZXh0cmFjdCB0aGUgbG9uZ2VzdCB2YWxpZCBKU09OIHN1YnN0cmluZyBmcm9tIHRoZSBhY2N1bXVsYXRlZCBjaHVua3MuXG4gICAqIEByZXR1cm5zIFRoZSBsb25nZXN0IHZhbGlkIEpTT04gc3Vic3RyaW5nIGZvdW5kIGluIHRoZSBhY2N1bXVsYXRlZCBjaHVua3MuXG4gICAqL1xuICBnZXQgb3V0cHV0KCkge1xuICAgIGlmICghdGhpcy5hY2N1bXVsYXRlZENodW5rcykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYWNjdW11bGF0ZWRUZXh0ID0gdGhpcy5hY2N1bXVsYXRlZENodW5rcy5tYXAoKGNodW5rKSA9PiBjaHVuay5jb250ZW50Lm1hcCgocGFydCkgPT4gcGFydC50ZXh0IHx8IFwiXCIpLmpvaW4oXCJcIikpLmpvaW4oXCJcIik7XG4gICAgcmV0dXJuICgwLCBpbXBvcnRfZXh0cmFjdC5leHRyYWN0SnNvbikoYWNjdW11bGF0ZWRUZXh0LCBmYWxzZSk7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7IGluZGV4OiB0aGlzLmluZGV4LCBjb250ZW50OiB0aGlzLmNvbnRlbnQsIGN1c3RvbTogdGhpcy5jdXN0b20gfTtcbiAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplUGFydChpbnB1dCkge1xuICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIFt7IHRleHQ6IGlucHV0IH1dO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbaW5wdXRdO1xuICB9XG59XG5mdW5jdGlvbiB0b0dlbmVyYXRlUmVxdWVzdChyZWdpc3RyeSwgb3B0aW9ucykge1xuICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgICBpZiAob3B0aW9ucy5zeXN0ZW0pIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBub3JtYWxpemVQYXJ0KG9wdGlvbnMuc3lzdGVtKSB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubWVzc2FnZXMpIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goLi4ub3B0aW9ucy5tZXNzYWdlcyk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnByb21wdCkge1xuICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBub3JtYWxpemVQYXJ0KG9wdGlvbnMucHJvbXB0KSB9KTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXQgbGVhc3Qgb25lIG1lc3NhZ2UgaXMgcmVxdWlyZWQgaW4gZ2VuZXJhdGUgcmVxdWVzdFwiKTtcbiAgICB9XG4gICAgbGV0IHRvb2xzO1xuICAgIGlmIChvcHRpb25zLnRvb2xzKSB7XG4gICAgICB0b29scyA9IHlpZWxkICgwLCBpbXBvcnRfdG9vbC5yZXNvbHZlVG9vbHMpKHJlZ2lzdHJ5LCBvcHRpb25zLnRvb2xzKTtcbiAgICB9XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgbWVzc2FnZXMsXG4gICAgICBjb25maWc6IG9wdGlvbnMuY29uZmlnLFxuICAgICAgZG9jczogb3B0aW9ucy5kb2NzLFxuICAgICAgdG9vbHM6ICh0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMubWFwKCh0b29sKSA9PiAoMCwgaW1wb3J0X3Rvb2wudG9Ub29sRGVmaW5pdGlvbikodG9vbCkpKSB8fCBbXSxcbiAgICAgIG91dHB1dDoge1xuICAgICAgICBmb3JtYXQ6ICgoX2EgPSBvcHRpb25zLm91dHB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvcm1hdCkgfHwgKCgoX2IgPSBvcHRpb25zLm91dHB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNjaGVtYSkgfHwgKChfYyA9IG9wdGlvbnMub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2MuanNvblNjaGVtYSkgPyBcImpzb25cIiA6IFwidGV4dFwiKSxcbiAgICAgICAgc2NoZW1hOiAoMCwgaW1wb3J0X3NjaGVtYS50b0pzb25TY2hlbWEpKHtcbiAgICAgICAgICBzY2hlbWE6IChfZCA9IG9wdGlvbnMub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2Quc2NoZW1hLFxuICAgICAgICAgIGpzb25TY2hlbWE6IChfZSA9IG9wdGlvbnMub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2UuanNvblNjaGVtYVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH07XG4gICAgaWYgKCFvdXQub3V0cHV0LnNjaGVtYSkgZGVsZXRlIG91dC5vdXRwdXQuc2NoZW1hO1xuICAgIHJldHVybiBvdXQ7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVzb2x2ZU1vZGVsKHJlZ2lzdHJ5LCBvcHRpb25zKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgbGV0IG1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb2RlbCBpcyByZXF1aXJlZC5cIik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbW9kZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1vZGVsQWN0aW9uOiB5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oXG4gICAgICAgICAgYC9tb2RlbC8ke21vZGVsfWBcbiAgICAgICAgKVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKG1vZGVsLmhhc093blByb3BlcnR5KFwiX19hY3Rpb25cIikpIHtcbiAgICAgIHJldHVybiB7IG1vZGVsQWN0aW9uOiBtb2RlbCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZWYgPSBtb2RlbDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1vZGVsQWN0aW9uOiB5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oXG4gICAgICAgICAgYC9tb2RlbC8ke3JlZi5uYW1lfWBcbiAgICAgICAgKSxcbiAgICAgICAgY29uZmlnOiBfX3NwcmVhZFZhbHVlcyh7fSwgcmVmLmNvbmZpZyksXG4gICAgICAgIHZlcnNpb246IHJlZi52ZXJzaW9uXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5jbGFzcyBHZW5lcmF0aW9uUmVzcG9uc2VFcnJvciBleHRlbmRzIGltcG9ydF9jb3JlLkdlbmtpdEVycm9yIHtcbiAgY29uc3RydWN0b3IocmVzcG9uc2UsIG1lc3NhZ2UsIHN0YXR1cywgZGV0YWlsKSB7XG4gICAgc3VwZXIoe1xuICAgICAgc3RhdHVzOiBzdGF0dXMgfHwgXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gICAgICBtZXNzYWdlXG4gICAgfSk7XG4gICAgdGhpcy5kZXRhaWwgPSBfX3NwcmVhZFZhbHVlcyh7IHJlc3BvbnNlIH0sIGRldGFpbCk7XG4gIH1cbn1cbmNsYXNzIEdlbmVyYXRpb25CbG9ja2VkRXJyb3IgZXh0ZW5kcyBHZW5lcmF0aW9uUmVzcG9uc2VFcnJvciB7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZShyZWdpc3RyeSwgb3B0aW9ucykge1xuICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IHJlc29sdmVkT3B0aW9ucyA9IHlpZWxkIFByb21pc2UucmVzb2x2ZShvcHRpb25zKTtcbiAgICBjb25zdCByZXNvbHZlZE1vZGVsID0geWllbGQgcmVzb2x2ZU1vZGVsKHJlZ2lzdHJ5LCByZXNvbHZlZE9wdGlvbnMpO1xuICAgIGNvbnN0IG1vZGVsID0gcmVzb2x2ZWRNb2RlbC5tb2RlbEFjdGlvbjtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICBsZXQgbW9kZWxJZDtcbiAgICAgIGlmICh0eXBlb2YgcmVzb2x2ZWRPcHRpb25zLm1vZGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG1vZGVsSWQgPSByZXNvbHZlZE9wdGlvbnMubW9kZWw7XG4gICAgICB9IGVsc2UgaWYgKChfYiA9IChfYSA9IHJlc29sdmVkT3B0aW9ucy5tb2RlbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9fYWN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2IubmFtZSkge1xuICAgICAgICBtb2RlbElkID0gcmVzb2x2ZWRPcHRpb25zLm1vZGVsLl9fYWN0aW9uLm5hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RlbElkID0gcmVzb2x2ZWRPcHRpb25zLm1vZGVsLm5hbWU7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1vZGVsICR7bW9kZWxJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuICAgIGxldCB0b29scztcbiAgICBpZiAocmVzb2x2ZWRPcHRpb25zLnRvb2xzKSB7XG4gICAgICB0b29scyA9IFtdO1xuICAgICAgZm9yIChjb25zdCB0IG9mIHJlc29sdmVkT3B0aW9ucy50b29scykge1xuICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB0b29scy5wdXNoKHlpZWxkIHJlc29sdmVGdWxsVG9vbE5hbWUocmVnaXN0cnksIHQpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0Ll9fYWN0aW9uKSB7XG4gICAgICAgICAgdG9vbHMucHVzaChcbiAgICAgICAgICAgIGAvJHsoX2MgPSB0Ll9fYWN0aW9uLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2MudHlwZX0vJHt0Ll9fYWN0aW9uLm5hbWV9YFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHQuYXNUb29sID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBwcm9tcHRUb29sQWN0aW9uID0gdC5hc1Rvb2woKTtcbiAgICAgICAgICB0b29scy5wdXNoKGAvcHJvbXB0LyR7cHJvbXB0VG9vbEFjdGlvbi5fX2FjdGlvbi5uYW1lfWApO1xuICAgICAgICB9IGVsc2UgaWYgKHQubmFtZSkge1xuICAgICAgICAgIHRvb2xzLnB1c2goeWllbGQgcmVzb2x2ZUZ1bGxUb29sTmFtZShyZWdpc3RyeSwgdC5uYW1lKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFVuYWJsZSB0byBkZXRlcm1pbmUgdHlwZSBvZiBvZiB0b29sOiAke0pTT04uc3RyaW5naWZ5KHQpfWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2VzID0gW107XG4gICAgaWYgKHJlc29sdmVkT3B0aW9ucy5zeXN0ZW0pIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgICBjb250ZW50OiBub3JtYWxpemVQYXJ0KHJlc29sdmVkT3B0aW9ucy5zeXN0ZW0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJlc29sdmVkT3B0aW9ucy5tZXNzYWdlcykge1xuICAgICAgbWVzc2FnZXMucHVzaCguLi5yZXNvbHZlZE9wdGlvbnMubWVzc2FnZXMpO1xuICAgIH1cbiAgICBpZiAocmVzb2x2ZWRPcHRpb25zLnByb21wdCkge1xuICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICBjb250ZW50OiBub3JtYWxpemVQYXJ0KHJlc29sdmVkT3B0aW9ucy5wcm9tcHQpXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXQgbGVhc3Qgb25lIG1lc3NhZ2UgaXMgcmVxdWlyZWQgaW4gZ2VuZXJhdGUgcmVxdWVzdFwiKTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgbW9kZWw6IG1vZGVsLl9fYWN0aW9uLm5hbWUsXG4gICAgICBkb2NzOiByZXNvbHZlZE9wdGlvbnMuZG9jcyxcbiAgICAgIG1lc3NhZ2VzLFxuICAgICAgdG9vbHMsXG4gICAgICBjb25maWc6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgdmVyc2lvbjogcmVzb2x2ZWRNb2RlbC52ZXJzaW9uXG4gICAgICB9LCBzdHJpcFVuZGVmaW5lZE9wdGlvbnMocmVzb2x2ZWRNb2RlbC5jb25maWcpKSwgc3RyaXBVbmRlZmluZWRPcHRpb25zKHJlc29sdmVkT3B0aW9ucy5jb25maWcpKSxcbiAgICAgIG91dHB1dDogcmVzb2x2ZWRPcHRpb25zLm91dHB1dCAmJiB7XG4gICAgICAgIGZvcm1hdDogcmVzb2x2ZWRPcHRpb25zLm91dHB1dC5mb3JtYXQsXG4gICAgICAgIGpzb25TY2hlbWE6IHJlc29sdmVkT3B0aW9ucy5vdXRwdXQuc2NoZW1hID8gKDAsIGltcG9ydF9zY2hlbWEudG9Kc29uU2NoZW1hKSh7XG4gICAgICAgICAgc2NoZW1hOiByZXNvbHZlZE9wdGlvbnMub3V0cHV0LnNjaGVtYSxcbiAgICAgICAgICBqc29uU2NoZW1hOiByZXNvbHZlZE9wdGlvbnMub3V0cHV0Lmpzb25TY2hlbWFcbiAgICAgICAgfSkgOiByZXNvbHZlZE9wdGlvbnMub3V0cHV0Lmpzb25TY2hlbWFcbiAgICAgIH0sXG4gICAgICByZXR1cm5Ub29sUmVxdWVzdHM6IHJlc29sdmVkT3B0aW9ucy5yZXR1cm5Ub29sUmVxdWVzdHNcbiAgICB9O1xuICAgIHJldHVybiB5aWVsZCAoMCwgaW1wb3J0X2NvcmUucnVuV2l0aFN0cmVhbWluZ0NhbGxiYWNrKShcbiAgICAgIHJlc29sdmVkT3B0aW9ucy5zdHJlYW1pbmdDYWxsYmFjayxcbiAgICAgICgpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCAoMCwgaW1wb3J0X2dlbmVyYXRlQWN0aW9uLmdlbmVyYXRlSGVscGVyKShcbiAgICAgICAgICByZWdpc3RyeSxcbiAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgcmVzb2x2ZWRPcHRpb25zLnVzZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgKF9hMiA9IHJlc3BvbnNlLnJlcXVlc3QpICE9IG51bGwgPyBfYTIgOiB5aWVsZCB0b0dlbmVyYXRlUmVxdWVzdChyZWdpc3RyeSwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcmVzb2x2ZWRPcHRpb25zKSwgeyB0b29scyB9KSlcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzdHJpcFVuZGVmaW5lZE9wdGlvbnMoaW5wdXQpIHtcbiAgaWYgKCFpbnB1dCkgcmV0dXJuIGlucHV0O1xuICBjb25zdCBjb3B5ID0gX19zcHJlYWRWYWx1ZXMoe30sIGlucHV0KTtcbiAgT2JqZWN0LmtleXMoaW5wdXQpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChjb3B5W2tleV0gPT09IHZvaWQgMCkge1xuICAgICAgZGVsZXRlIGNvcHlba2V5XTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY29weTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVGdWxsVG9vbE5hbWUocmVnaXN0cnksIG5hbWUpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoeWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKGAvdG9vbC8ke25hbWV9YCkpIHtcbiAgICAgIHJldHVybiBgL3Rvb2wvJHtuYW1lfWA7XG4gICAgfSBlbHNlIGlmICh5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oYC9wcm9tcHQvJHtuYW1lfWApKSB7XG4gICAgICByZXR1cm4gYC9wcm9tcHQvJHtuYW1lfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGRldGVybWluZSB0eXBlIG9mIG9mIHRvb2w6ICR7bmFtZX1gKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlUHJvbWlzZSgpIHtcbiAgbGV0IHJlc29sdmUsIHJlamVjdDtcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IFtyZXNvbHZlLCByZWplY3RdID0gW3JlcywgcmVqXSk7XG4gIHJldHVybiB7IHJlc29sdmUsIHJlamVjdCwgcHJvbWlzZSB9O1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVTdHJlYW0ocmVnaXN0cnksIG9wdGlvbnMpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBsZXQgZmlyc3RDaHVua1NlbnQgPSBmYWxzZTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoXG4gICAgICAoaW5pdGlhbFJlc29sdmUsIGluaXRpYWxSZWplY3QpID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHJlc29sdmU6IGZpbmFsUmVzb2x2ZSxcbiAgICAgICAgICByZWplY3Q6IGZpbmFsUmVqZWN0LFxuICAgICAgICAgIHByb21pc2U6IGZpbmFsUHJvbWlzZVxuICAgICAgICB9ID0gY3JlYXRlUHJvbWlzZSgpO1xuICAgICAgICBsZXQgcHJvdmlkZU5leHRDaHVuaywgbmV4dENodW5rO1xuICAgICAgICAoeyByZXNvbHZlOiBwcm92aWRlTmV4dENodW5rLCBwcm9taXNlOiBuZXh0Q2h1bmsgfSA9IGNyZWF0ZVByb21pc2UoKSk7XG4gICAgICAgIGZ1bmN0aW9uIGNodW5rU3RyZWFtKCkge1xuICAgICAgICAgIHJldHVybiBfX2FzeW5jR2VuZXJhdG9yKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICBjb25zdCBuZXh0ID0geWllbGQgbmV3IF9fYXdhaXQobmV4dENodW5rKTtcbiAgICAgICAgICAgICAgaWYgKCFuZXh0KSBicmVhaztcbiAgICAgICAgICAgICAgeWllbGQgbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGdlbmVyYXRlKHJlZ2lzdHJ5LCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zKSwge1xuICAgICAgICAgICAgc3RyZWFtaW5nQ2FsbGJhY2s6IChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICBmaXJzdENodW5rU2VudCA9IHRydWU7XG4gICAgICAgICAgICAgIHByb3ZpZGVOZXh0Q2h1bmsoY2h1bmspO1xuICAgICAgICAgICAgICAoeyByZXNvbHZlOiBwcm92aWRlTmV4dENodW5rLCBwcm9taXNlOiBuZXh0Q2h1bmsgfSA9IGNyZWF0ZVByb21pc2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgcHJvdmlkZU5leHRDaHVuayhudWxsKTtcbiAgICAgICAgICAgIGZpbmFsUmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKCFmaXJzdENodW5rU2VudCkge1xuICAgICAgICAgICAgaW5pdGlhbFJlamVjdChlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvdmlkZU5leHRDaHVuayhudWxsKTtcbiAgICAgICAgICBmaW5hbFJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsUmVzb2x2ZSh7XG4gICAgICAgICAgZ2V0IHJlc3BvbnNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsUHJvbWlzZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldCBzdHJlYW0oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2h1bmtTdHJlYW0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdGFnQXNQcmVhbWJsZShtc2dzKSB7XG4gIGlmICghbXNncykge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIG1zZ3MubWFwKChtKSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBtKSwge1xuICAgIG1ldGFkYXRhOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBtLm1ldGFkYXRhKSwge1xuICAgICAgcHJlYW1ibGU6IHRydWVcbiAgICB9KVxuICB9KSk7XG59XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgR2VuZXJhdGVSZXNwb25zZSxcbiAgR2VuZXJhdGVSZXNwb25zZUNodW5rLFxuICBHZW5lcmF0aW9uQmxvY2tlZEVycm9yLFxuICBHZW5lcmF0aW9uUmVzcG9uc2VFcnJvcixcbiAgTWVzc2FnZSxcbiAgZ2VuZXJhdGUsXG4gIGdlbmVyYXRlU3RyZWFtLFxuICBub3JtYWxpemVQYXJ0LFxuICB0YWdBc1ByZWFtYmxlLFxuICB0b0dlbmVyYXRlUmVxdWVzdFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZW5lcmF0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generateAction.js":
/*!******************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generateAction.js ***!
  \******************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar generateAction_exports = {};\n__export(generateAction_exports, {\n  GenerateUtilParamSchema: () => GenerateUtilParamSchema,\n  generateHelper: () => generateHelper,\n  inferRoleFromParts: () => inferRoleFromParts\n});\nmodule.exports = __toCommonJS(generateAction_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_schema = __webpack_require__(/*! @genkit-ai/core/schema */ \"(rsc)/./node_modules/@genkit-ai/core/lib/schema.js\");\nvar import_tracing = __webpack_require__(/*! @genkit-ai/core/tracing */ \"(rsc)/./node_modules/@genkit-ai/core/lib/tracing.js\");\nvar clc = __toESM(__webpack_require__(/*! colorette */ \"(rsc)/./node_modules/colorette/index.cjs\"));\nvar import_document = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nvar import_generate = __webpack_require__(/*! ./generate.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generate.js\");\nvar import_model = __webpack_require__(/*! ./model.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js\");\nvar import_tool = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\");\nconst GenerateUtilParamSchema = import_core.z.object({\n  /** A model name (e.g. `vertexai/gemini-1.0-pro`). */\n  model: import_core.z.string(),\n  /** Retrieved documents to be used as context for this generation. */\n  docs: import_core.z.array(import_document.DocumentDataSchema).optional(),\n  /** Conversation history for multi-turn prompting when supported by the underlying model. */\n  messages: import_core.z.array(import_model.MessageSchema),\n  /** List of registered tool names for this generation if supported by the underlying model. */\n  tools: import_core.z.array(import_core.z.union([import_core.z.string(), import_model.ToolDefinitionSchema])).optional(),\n  /** Configuration for the generation request. */\n  config: import_core.z.any().optional(),\n  /** Configuration for the desired output of the request. Defaults to the model's default output if unspecified. */\n  output: import_core.z.object({\n    format: import_core.z.union([import_core.z.literal(\"text\"), import_core.z.literal(\"json\"), import_core.z.literal(\"media\")]).optional(),\n    jsonSchema: import_core.z.any().optional()\n  }).optional(),\n  /** When true, return tool calls for manual processing instead of automatically resolving them. */\n  returnToolRequests: import_core.z.boolean().optional()\n});\nfunction generateHelper(registry, input, middleware) {\n  return __async(this, null, function* () {\n    return yield (0, import_tracing.runInNewSpan)(\n      {\n        metadata: {\n          name: \"generate\"\n        },\n        labels: {\n          [import_tracing.SPAN_TYPE_ATTR]: \"helper\"\n        }\n      },\n      (metadata) => __async(this, null, function* () {\n        metadata.name = \"generate\";\n        metadata.input = input;\n        const output = yield generate(registry, input, middleware);\n        metadata.output = JSON.stringify(output);\n        return output;\n      })\n    );\n  });\n}\nfunction generate(registry, rawRequest, middleware) {\n  return __async(this, null, function* () {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const model = yield registry.lookupAction(\n      `/model/${rawRequest.model}`\n    );\n    if (!model) {\n      throw new Error(`Model ${rawRequest.model} not found`);\n    }\n    if (((_a = model.__action.metadata) == null ? void 0 : _a.model.stage) === \"deprecated\") {\n      console.warn(\n        `${clc.bold(clc.yellow(\"Warning:\"))} Model '${model.__action.name}' is deprecated and may be removed in a future release.`\n      );\n    }\n    let tools;\n    if ((_b = rawRequest.tools) == null ? void 0 : _b.length) {\n      if (!((_d = (_c = model.__action.metadata) == null ? void 0 : _c.model.supports) == null ? void 0 : _d.tools)) {\n        throw new Error(\n          `Model ${rawRequest.model} does not support tools, but some tools were supplied to generate(). Please call generate() without tools if you would like to use this model.`\n        );\n      }\n      tools = yield Promise.all(\n        rawRequest.tools.map((toolRef) => __async(this, null, function* () {\n          if (typeof toolRef === \"string\") {\n            return (0, import_tool.lookupToolByName)(registry, toolRef);\n          } else if (toolRef.name) {\n            return (0, import_tool.lookupToolByName)(registry, toolRef.name);\n          }\n          throw `Unable to resolve tool ${JSON.stringify(toolRef)}`;\n        }))\n      );\n    }\n    const request = yield actionToGenerateRequest(rawRequest, tools);\n    const accumulatedChunks = [];\n    const streamingCallback = (0, import_core.getStreamingCallback)();\n    const response = yield (0, import_core.runWithStreamingCallback)(\n      streamingCallback ? (chunk) => {\n        accumulatedChunks.push(chunk);\n        if (streamingCallback) {\n          streamingCallback(\n            new import_generate.GenerateResponseChunk(chunk, accumulatedChunks)\n          );\n        }\n      } : void 0,\n      () => __async(this, null, function* () {\n        const dispatch = (index, req) => __async(this, null, function* () {\n          if (!middleware || index === middleware.length) {\n            return yield model(req);\n          }\n          const currentMiddleware = middleware[index];\n          return currentMiddleware(\n            req,\n            (modifiedReq) => __async(this, null, function* () {\n              return dispatch(index + 1, modifiedReq || req);\n            })\n          );\n        });\n        return new import_generate.GenerateResponse(yield dispatch(0, request), request);\n      })\n    );\n    response.assertValid(request);\n    const message = response.message;\n    const toolCalls = message.content.filter((part) => !!part.toolRequest);\n    if (rawRequest.returnToolRequests || toolCalls.length === 0) {\n      return response.toJSON();\n    }\n    const toolResponses = [];\n    let messages = [...request.messages, message];\n    let newTools = rawRequest.tools;\n    for (const part of toolCalls) {\n      if (!part.toolRequest) {\n        throw Error(\n          \"Tool request expected but not provided in tool request part\"\n        );\n      }\n      const tool = tools == null ? void 0 : tools.find(\n        (tool2) => {\n          var _a2;\n          return tool2.__action.name === ((_a2 = part.toolRequest) == null ? void 0 : _a2.name);\n        }\n      );\n      if (!tool) {\n        throw Error(`Tool ${(_e = part.toolRequest) == null ? void 0 : _e.name} not found`);\n      }\n      if (tool.__action.metadata.type === \"prompt\") {\n        const newPreamble = yield tool((_f = part.toolRequest) == null ? void 0 : _f.input);\n        toolResponses.push({\n          toolResponse: {\n            name: part.toolRequest.name,\n            ref: part.toolRequest.ref,\n            output: `transferred to ${part.toolRequest.name}`\n          }\n        });\n        messages = [\n          ...(0, import_generate.tagAsPreamble)(newPreamble.messages),\n          ...messages.filter((m) => {\n            var _a2;\n            return !((_a2 = m == null ? void 0 : m.metadata) == null ? void 0 : _a2.preamble);\n          })\n        ];\n        newTools = newPreamble.tools;\n      } else {\n        toolResponses.push({\n          toolResponse: {\n            name: part.toolRequest.name,\n            ref: part.toolRequest.ref,\n            output: yield tool((_g = part.toolRequest) == null ? void 0 : _g.input)\n          }\n        });\n      }\n    }\n    const nextRequest = __spreadProps(__spreadValues({}, rawRequest), {\n      messages: [\n        ...messages,\n        {\n          role: \"tool\",\n          content: toolResponses\n        }\n      ],\n      tools: newTools\n    });\n    return yield generateHelper(registry, nextRequest, middleware);\n  });\n}\nfunction actionToGenerateRequest(options, resolvedTools) {\n  return __async(this, null, function* () {\n    var _a, _b, _c;\n    const out = {\n      messages: options.messages,\n      config: options.config,\n      docs: options.docs,\n      tools: (resolvedTools == null ? void 0 : resolvedTools.map((tool) => (0, import_tool.toToolDefinition)(tool))) || [],\n      output: {\n        format: ((_a = options.output) == null ? void 0 : _a.format) || (((_b = options.output) == null ? void 0 : _b.jsonSchema) ? \"json\" : \"text\"),\n        schema: (0, import_schema.toJsonSchema)({\n          jsonSchema: (_c = options.output) == null ? void 0 : _c.jsonSchema\n        })\n      }\n    };\n    if (!out.output.schema) delete out.output.schema;\n    return out;\n  });\n}\nfunction inferRoleFromParts(parts) {\n  const uniqueRoles = /* @__PURE__ */ new Set();\n  for (const part of parts) {\n    const role = getRoleFromPart(part);\n    uniqueRoles.add(role);\n    if (uniqueRoles.size > 1) {\n      throw new Error(\"Contents contain mixed roles\");\n    }\n  }\n  return Array.from(uniqueRoles)[0];\n}\nfunction getRoleFromPart(part) {\n  if (part.toolRequest !== void 0) return \"model\";\n  if (part.toolResponse !== void 0) return \"tool\";\n  if (part.text !== void 0) return \"user\";\n  if (part.media !== void 0) return \"user\";\n  if (part.data !== void 0) return \"user\";\n  throw new Error(\"No recognized fields in content\");\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=generateAction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9nZW5lcmF0ZUFjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLDBFQUFpQjtBQUMzQyxvQkFBb0IsbUJBQU8sQ0FBQyxrRkFBd0I7QUFDcEQscUJBQXFCLG1CQUFPLENBQUMsb0ZBQXlCO0FBQ3RELGtCQUFrQixtQkFBTyxDQUFDLDJEQUFXO0FBQ3JDLHNCQUFzQixtQkFBTyxDQUFDLDZGQUFlO0FBQzdDLHNCQUFzQixtQkFBTyxDQUFDLDZGQUFlO0FBQzdDLG1CQUFtQixtQkFBTyxDQUFDLHVGQUFZO0FBQ3ZDLGtCQUFrQixtQkFBTyxDQUFDLHFGQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUJBQWlCO0FBQ2pDO0FBQ0E7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0NBQWtDLFNBQVMsb0JBQW9CO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSwwQ0FBMEMsd0JBQXdCO0FBQ2xFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9EQUFvRDtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxzQkFBc0I7QUFDNUQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQUlMO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL2dlbmVyYXRlQWN0aW9uLmpzP2YzNGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldCkgPT4gKHRhcmdldCA9IG1vZCAhPSBudWxsID8gX19jcmVhdGUoX19nZXRQcm90b09mKG1vZCkpIDoge30sIF9fY29weVByb3BzKFxuICAvLyBJZiB0aGUgaW1wb3J0ZXIgaXMgaW4gbm9kZSBjb21wYXRpYmlsaXR5IG1vZGUgb3IgdGhpcyBpcyBub3QgYW4gRVNNXG4gIC8vIGZpbGUgdGhhdCBoYXMgYmVlbiBjb252ZXJ0ZWQgdG8gYSBDb21tb25KUyBmaWxlIHVzaW5nIGEgQmFiZWwtXG4gIC8vIGNvbXBhdGlibGUgdHJhbnNmb3JtIChpLmUuIFwiX19lc01vZHVsZVwiIGhhcyBub3QgYmVlbiBzZXQpLCB0aGVuIHNldFxuICAvLyBcImRlZmF1bHRcIiB0byB0aGUgQ29tbW9uSlMgXCJtb2R1bGUuZXhwb3J0c1wiIGZvciBub2RlIGNvbXBhdGliaWxpdHkuXG4gIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0LFxuICBtb2RcbikpO1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xudmFyIGdlbmVyYXRlQWN0aW9uX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGdlbmVyYXRlQWN0aW9uX2V4cG9ydHMsIHtcbiAgR2VuZXJhdGVVdGlsUGFyYW1TY2hlbWE6ICgpID0+IEdlbmVyYXRlVXRpbFBhcmFtU2NoZW1hLFxuICBnZW5lcmF0ZUhlbHBlcjogKCkgPT4gZ2VuZXJhdGVIZWxwZXIsXG4gIGluZmVyUm9sZUZyb21QYXJ0czogKCkgPT4gaW5mZXJSb2xlRnJvbVBhcnRzXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKGdlbmVyYXRlQWN0aW9uX2V4cG9ydHMpO1xudmFyIGltcG9ydF9jb3JlID0gcmVxdWlyZShcIkBnZW5raXQtYWkvY29yZVwiKTtcbnZhciBpbXBvcnRfc2NoZW1hID0gcmVxdWlyZShcIkBnZW5raXQtYWkvY29yZS9zY2hlbWFcIik7XG52YXIgaW1wb3J0X3RyYWNpbmcgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlL3RyYWNpbmdcIik7XG52YXIgY2xjID0gX190b0VTTShyZXF1aXJlKFwiY29sb3JldHRlXCIpKTtcbnZhciBpbXBvcnRfZG9jdW1lbnQgPSByZXF1aXJlKFwiLi9kb2N1bWVudC5qc1wiKTtcbnZhciBpbXBvcnRfZ2VuZXJhdGUgPSByZXF1aXJlKFwiLi9nZW5lcmF0ZS5qc1wiKTtcbnZhciBpbXBvcnRfbW9kZWwgPSByZXF1aXJlKFwiLi9tb2RlbC5qc1wiKTtcbnZhciBpbXBvcnRfdG9vbCA9IHJlcXVpcmUoXCIuL3Rvb2wuanNcIik7XG5jb25zdCBHZW5lcmF0ZVV0aWxQYXJhbVNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgLyoqIEEgbW9kZWwgbmFtZSAoZS5nLiBgdmVydGV4YWkvZ2VtaW5pLTEuMC1wcm9gKS4gKi9cbiAgbW9kZWw6IGltcG9ydF9jb3JlLnouc3RyaW5nKCksXG4gIC8qKiBSZXRyaWV2ZWQgZG9jdW1lbnRzIHRvIGJlIHVzZWQgYXMgY29udGV4dCBmb3IgdGhpcyBnZW5lcmF0aW9uLiAqL1xuICBkb2NzOiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9kb2N1bWVudC5Eb2N1bWVudERhdGFTY2hlbWEpLm9wdGlvbmFsKCksXG4gIC8qKiBDb252ZXJzYXRpb24gaGlzdG9yeSBmb3IgbXVsdGktdHVybiBwcm9tcHRpbmcgd2hlbiBzdXBwb3J0ZWQgYnkgdGhlIHVuZGVybHlpbmcgbW9kZWwuICovXG4gIG1lc3NhZ2VzOiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9tb2RlbC5NZXNzYWdlU2NoZW1hKSxcbiAgLyoqIExpc3Qgb2YgcmVnaXN0ZXJlZCB0b29sIG5hbWVzIGZvciB0aGlzIGdlbmVyYXRpb24gaWYgc3VwcG9ydGVkIGJ5IHRoZSB1bmRlcmx5aW5nIG1vZGVsLiAqL1xuICB0b29sczogaW1wb3J0X2NvcmUuei5hcnJheShpbXBvcnRfY29yZS56LnVuaW9uKFtpbXBvcnRfY29yZS56LnN0cmluZygpLCBpbXBvcnRfbW9kZWwuVG9vbERlZmluaXRpb25TY2hlbWFdKSkub3B0aW9uYWwoKSxcbiAgLyoqIENvbmZpZ3VyYXRpb24gZm9yIHRoZSBnZW5lcmF0aW9uIHJlcXVlc3QuICovXG4gIGNvbmZpZzogaW1wb3J0X2NvcmUuei5hbnkoKS5vcHRpb25hbCgpLFxuICAvKiogQ29uZmlndXJhdGlvbiBmb3IgdGhlIGRlc2lyZWQgb3V0cHV0IG9mIHRoZSByZXF1ZXN0LiBEZWZhdWx0cyB0byB0aGUgbW9kZWwncyBkZWZhdWx0IG91dHB1dCBpZiB1bnNwZWNpZmllZC4gKi9cbiAgb3V0cHV0OiBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gICAgZm9ybWF0OiBpbXBvcnRfY29yZS56LnVuaW9uKFtpbXBvcnRfY29yZS56LmxpdGVyYWwoXCJ0ZXh0XCIpLCBpbXBvcnRfY29yZS56LmxpdGVyYWwoXCJqc29uXCIpLCBpbXBvcnRfY29yZS56LmxpdGVyYWwoXCJtZWRpYVwiKV0pLm9wdGlvbmFsKCksXG4gICAganNvblNjaGVtYTogaW1wb3J0X2NvcmUuei5hbnkoKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKCksXG4gIC8qKiBXaGVuIHRydWUsIHJldHVybiB0b29sIGNhbGxzIGZvciBtYW51YWwgcHJvY2Vzc2luZyBpbnN0ZWFkIG9mIGF1dG9tYXRpY2FsbHkgcmVzb2x2aW5nIHRoZW0uICovXG4gIHJldHVyblRvb2xSZXF1ZXN0czogaW1wb3J0X2NvcmUuei5ib29sZWFuKCkub3B0aW9uYWwoKVxufSk7XG5mdW5jdGlvbiBnZW5lcmF0ZUhlbHBlcihyZWdpc3RyeSwgaW5wdXQsIG1pZGRsZXdhcmUpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4geWllbGQgKDAsIGltcG9ydF90cmFjaW5nLnJ1bkluTmV3U3BhbikoXG4gICAgICB7XG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgbmFtZTogXCJnZW5lcmF0ZVwiXG4gICAgICAgIH0sXG4gICAgICAgIGxhYmVsczoge1xuICAgICAgICAgIFtpbXBvcnRfdHJhY2luZy5TUEFOX1RZUEVfQVRUUl06IFwiaGVscGVyXCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIChtZXRhZGF0YSkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBtZXRhZGF0YS5uYW1lID0gXCJnZW5lcmF0ZVwiO1xuICAgICAgICBtZXRhZGF0YS5pbnB1dCA9IGlucHV0O1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB5aWVsZCBnZW5lcmF0ZShyZWdpc3RyeSwgaW5wdXQsIG1pZGRsZXdhcmUpO1xuICAgICAgICBtZXRhZGF0YS5vdXRwdXQgPSBKU09OLnN0cmluZ2lmeShvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlKHJlZ2lzdHJ5LCByYXdSZXF1ZXN0LCBtaWRkbGV3YXJlKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgIGNvbnN0IG1vZGVsID0geWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKFxuICAgICAgYC9tb2RlbC8ke3Jhd1JlcXVlc3QubW9kZWx9YFxuICAgICk7XG4gICAgaWYgKCFtb2RlbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2RlbCAke3Jhd1JlcXVlc3QubW9kZWx9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICBpZiAoKChfYSA9IG1vZGVsLl9fYWN0aW9uLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2EubW9kZWwuc3RhZ2UpID09PSBcImRlcHJlY2F0ZWRcIikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgJHtjbGMuYm9sZChjbGMueWVsbG93KFwiV2FybmluZzpcIikpfSBNb2RlbCAnJHttb2RlbC5fX2FjdGlvbi5uYW1lfScgaXMgZGVwcmVjYXRlZCBhbmQgbWF5IGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS5gXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgdG9vbHM7XG4gICAgaWYgKChfYiA9IHJhd1JlcXVlc3QudG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5sZW5ndGgpIHtcbiAgICAgIGlmICghKChfZCA9IChfYyA9IG1vZGVsLl9fYWN0aW9uLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2MubW9kZWwuc3VwcG9ydHMpID09IG51bGwgPyB2b2lkIDAgOiBfZC50b29scykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBNb2RlbCAke3Jhd1JlcXVlc3QubW9kZWx9IGRvZXMgbm90IHN1cHBvcnQgdG9vbHMsIGJ1dCBzb21lIHRvb2xzIHdlcmUgc3VwcGxpZWQgdG8gZ2VuZXJhdGUoKS4gUGxlYXNlIGNhbGwgZ2VuZXJhdGUoKSB3aXRob3V0IHRvb2xzIGlmIHlvdSB3b3VsZCBsaWtlIHRvIHVzZSB0aGlzIG1vZGVsLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRvb2xzID0geWllbGQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJhd1JlcXVlc3QudG9vbHMubWFwKCh0b29sUmVmKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0b29sUmVmID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gKDAsIGltcG9ydF90b29sLmxvb2t1cFRvb2xCeU5hbWUpKHJlZ2lzdHJ5LCB0b29sUmVmKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRvb2xSZWYubmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBpbXBvcnRfdG9vbC5sb29rdXBUb29sQnlOYW1lKShyZWdpc3RyeSwgdG9vbFJlZi5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgYFVuYWJsZSB0byByZXNvbHZlIHRvb2wgJHtKU09OLnN0cmluZ2lmeSh0b29sUmVmKX1gO1xuICAgICAgICB9KSlcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3QgPSB5aWVsZCBhY3Rpb25Ub0dlbmVyYXRlUmVxdWVzdChyYXdSZXF1ZXN0LCB0b29scyk7XG4gICAgY29uc3QgYWNjdW11bGF0ZWRDaHVua3MgPSBbXTtcbiAgICBjb25zdCBzdHJlYW1pbmdDYWxsYmFjayA9ICgwLCBpbXBvcnRfY29yZS5nZXRTdHJlYW1pbmdDYWxsYmFjaykoKTtcbiAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkICgwLCBpbXBvcnRfY29yZS5ydW5XaXRoU3RyZWFtaW5nQ2FsbGJhY2spKFxuICAgICAgc3RyZWFtaW5nQ2FsbGJhY2sgPyAoY2h1bmspID0+IHtcbiAgICAgICAgYWNjdW11bGF0ZWRDaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgIGlmIChzdHJlYW1pbmdDYWxsYmFjaykge1xuICAgICAgICAgIHN0cmVhbWluZ0NhbGxiYWNrKFxuICAgICAgICAgICAgbmV3IGltcG9ydF9nZW5lcmF0ZS5HZW5lcmF0ZVJlc3BvbnNlQ2h1bmsoY2h1bmssIGFjY3VtdWxhdGVkQ2h1bmtzKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gOiB2b2lkIDAsXG4gICAgICAoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGRpc3BhdGNoID0gKGluZGV4LCByZXEpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICBpZiAoIW1pZGRsZXdhcmUgfHwgaW5kZXggPT09IG1pZGRsZXdhcmUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgbW9kZWwocmVxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY3VycmVudE1pZGRsZXdhcmUgPSBtaWRkbGV3YXJlW2luZGV4XTtcbiAgICAgICAgICByZXR1cm4gY3VycmVudE1pZGRsZXdhcmUoXG4gICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAobW9kaWZpZWRSZXEpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKGluZGV4ICsgMSwgbW9kaWZpZWRSZXEgfHwgcmVxKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgaW1wb3J0X2dlbmVyYXRlLkdlbmVyYXRlUmVzcG9uc2UoeWllbGQgZGlzcGF0Y2goMCwgcmVxdWVzdCksIHJlcXVlc3QpO1xuICAgICAgfSlcbiAgICApO1xuICAgIHJlc3BvbnNlLmFzc2VydFZhbGlkKHJlcXVlc3QpO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5tZXNzYWdlO1xuICAgIGNvbnN0IHRvb2xDYWxscyA9IG1lc3NhZ2UuY29udGVudC5maWx0ZXIoKHBhcnQpID0+ICEhcGFydC50b29sUmVxdWVzdCk7XG4gICAgaWYgKHJhd1JlcXVlc3QucmV0dXJuVG9vbFJlcXVlc3RzIHx8IHRvb2xDYWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXNwb25zZS50b0pTT04oKTtcbiAgICB9XG4gICAgY29uc3QgdG9vbFJlc3BvbnNlcyA9IFtdO1xuICAgIGxldCBtZXNzYWdlcyA9IFsuLi5yZXF1ZXN0Lm1lc3NhZ2VzLCBtZXNzYWdlXTtcbiAgICBsZXQgbmV3VG9vbHMgPSByYXdSZXF1ZXN0LnRvb2xzO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiB0b29sQ2FsbHMpIHtcbiAgICAgIGlmICghcGFydC50b29sUmVxdWVzdCkge1xuICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICBcIlRvb2wgcmVxdWVzdCBleHBlY3RlZCBidXQgbm90IHByb3ZpZGVkIGluIHRvb2wgcmVxdWVzdCBwYXJ0XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRvb2wgPSB0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMuZmluZChcbiAgICAgICAgKHRvb2wyKSA9PiB7XG4gICAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgICByZXR1cm4gdG9vbDIuX19hY3Rpb24ubmFtZSA9PT0gKChfYTIgPSBwYXJ0LnRvb2xSZXF1ZXN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKCF0b29sKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBUb29sICR7KF9lID0gcGFydC50b29sUmVxdWVzdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgfVxuICAgICAgaWYgKHRvb2wuX19hY3Rpb24ubWV0YWRhdGEudHlwZSA9PT0gXCJwcm9tcHRcIikge1xuICAgICAgICBjb25zdCBuZXdQcmVhbWJsZSA9IHlpZWxkIHRvb2woKF9mID0gcGFydC50b29sUmVxdWVzdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmlucHV0KTtcbiAgICAgICAgdG9vbFJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgICB0b29sUmVzcG9uc2U6IHtcbiAgICAgICAgICAgIG5hbWU6IHBhcnQudG9vbFJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgIHJlZjogcGFydC50b29sUmVxdWVzdC5yZWYsXG4gICAgICAgICAgICBvdXRwdXQ6IGB0cmFuc2ZlcnJlZCB0byAke3BhcnQudG9vbFJlcXVlc3QubmFtZX1gXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbWVzc2FnZXMgPSBbXG4gICAgICAgICAgLi4uKDAsIGltcG9ydF9nZW5lcmF0ZS50YWdBc1ByZWFtYmxlKShuZXdQcmVhbWJsZS5tZXNzYWdlcyksXG4gICAgICAgICAgLi4ubWVzc2FnZXMuZmlsdGVyKChtKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgICAgcmV0dXJuICEoKF9hMiA9IG0gPT0gbnVsbCA/IHZvaWQgMCA6IG0ubWV0YWRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucHJlYW1ibGUpO1xuICAgICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgICAgIG5ld1Rvb2xzID0gbmV3UHJlYW1ibGUudG9vbHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b29sUmVzcG9uc2VzLnB1c2goe1xuICAgICAgICAgIHRvb2xSZXNwb25zZToge1xuICAgICAgICAgICAgbmFtZTogcGFydC50b29sUmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgcmVmOiBwYXJ0LnRvb2xSZXF1ZXN0LnJlZixcbiAgICAgICAgICAgIG91dHB1dDogeWllbGQgdG9vbCgoX2cgPSBwYXJ0LnRvb2xSZXF1ZXN0KSA9PSBudWxsID8gdm9pZCAwIDogX2cuaW5wdXQpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV4dFJlcXVlc3QgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCByYXdSZXF1ZXN0KSwge1xuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInRvb2xcIixcbiAgICAgICAgICBjb250ZW50OiB0b29sUmVzcG9uc2VzXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0b29sczogbmV3VG9vbHNcbiAgICB9KTtcbiAgICByZXR1cm4geWllbGQgZ2VuZXJhdGVIZWxwZXIocmVnaXN0cnksIG5leHRSZXF1ZXN0LCBtaWRkbGV3YXJlKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhY3Rpb25Ub0dlbmVyYXRlUmVxdWVzdChvcHRpb25zLCByZXNvbHZlZFRvb2xzKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgbWVzc2FnZXM6IG9wdGlvbnMubWVzc2FnZXMsXG4gICAgICBjb25maWc6IG9wdGlvbnMuY29uZmlnLFxuICAgICAgZG9jczogb3B0aW9ucy5kb2NzLFxuICAgICAgdG9vbHM6IChyZXNvbHZlZFRvb2xzID09IG51bGwgPyB2b2lkIDAgOiByZXNvbHZlZFRvb2xzLm1hcCgodG9vbCkgPT4gKDAsIGltcG9ydF90b29sLnRvVG9vbERlZmluaXRpb24pKHRvb2wpKSkgfHwgW10sXG4gICAgICBvdXRwdXQ6IHtcbiAgICAgICAgZm9ybWF0OiAoKF9hID0gb3B0aW9ucy5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5mb3JtYXQpIHx8ICgoKF9iID0gb3B0aW9ucy5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5qc29uU2NoZW1hKSA/IFwianNvblwiIDogXCJ0ZXh0XCIpLFxuICAgICAgICBzY2hlbWE6ICgwLCBpbXBvcnRfc2NoZW1hLnRvSnNvblNjaGVtYSkoe1xuICAgICAgICAgIGpzb25TY2hlbWE6IChfYyA9IG9wdGlvbnMub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2MuanNvblNjaGVtYVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH07XG4gICAgaWYgKCFvdXQub3V0cHV0LnNjaGVtYSkgZGVsZXRlIG91dC5vdXRwdXQuc2NoZW1hO1xuICAgIHJldHVybiBvdXQ7XG4gIH0pO1xufVxuZnVuY3Rpb24gaW5mZXJSb2xlRnJvbVBhcnRzKHBhcnRzKSB7XG4gIGNvbnN0IHVuaXF1ZVJvbGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgY29uc3Qgcm9sZSA9IGdldFJvbGVGcm9tUGFydChwYXJ0KTtcbiAgICB1bmlxdWVSb2xlcy5hZGQocm9sZSk7XG4gICAgaWYgKHVuaXF1ZVJvbGVzLnNpemUgPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250ZW50cyBjb250YWluIG1peGVkIHJvbGVzXCIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbSh1bmlxdWVSb2xlcylbMF07XG59XG5mdW5jdGlvbiBnZXRSb2xlRnJvbVBhcnQocGFydCkge1xuICBpZiAocGFydC50b29sUmVxdWVzdCAhPT0gdm9pZCAwKSByZXR1cm4gXCJtb2RlbFwiO1xuICBpZiAocGFydC50b29sUmVzcG9uc2UgIT09IHZvaWQgMCkgcmV0dXJuIFwidG9vbFwiO1xuICBpZiAocGFydC50ZXh0ICE9PSB2b2lkIDApIHJldHVybiBcInVzZXJcIjtcbiAgaWYgKHBhcnQubWVkaWEgIT09IHZvaWQgMCkgcmV0dXJuIFwidXNlclwiO1xuICBpZiAocGFydC5kYXRhICE9PSB2b2lkIDApIHJldHVybiBcInVzZXJcIjtcbiAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVjb2duaXplZCBmaWVsZHMgaW4gY29udGVudFwiKTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBHZW5lcmF0ZVV0aWxQYXJhbVNjaGVtYSxcbiAgZ2VuZXJhdGVIZWxwZXIsXG4gIGluZmVyUm9sZUZyb21QYXJ0c1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZW5lcmF0ZUFjdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generateAction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar src_exports = {};\n__export(src_exports, {\n  BaseDataPointSchema: () => import_evaluator.BaseDataPointSchema,\n  Document: () => import_document.Document,\n  DocumentDataSchema: () => import_document.DocumentDataSchema,\n  GenerateResponse: () => import_generate.GenerateResponse,\n  GenerationBlockedError: () => import_generate.GenerationBlockedError,\n  GenerationCommonConfigSchema: () => import_model.GenerationCommonConfigSchema,\n  GenerationResponseError: () => import_generate.GenerationResponseError,\n  Message: () => import_generate.Message,\n  MessageSchema: () => import_model.MessageSchema,\n  ModelRequestSchema: () => import_model.ModelRequestSchema,\n  ModelResponseSchema: () => import_model.ModelResponseSchema,\n  PartSchema: () => import_model.PartSchema,\n  RoleSchema: () => import_model.RoleSchema,\n  asTool: () => import_tool.asTool,\n  definePrompt: () => import_prompt.definePrompt,\n  defineTool: () => import_tool.defineTool,\n  embed: () => import_embedder.embed,\n  embedderRef: () => import_embedder.embedderRef,\n  evaluate: () => import_evaluator.evaluate,\n  evaluatorRef: () => import_evaluator.evaluatorRef,\n  generate: () => import_generate.generate,\n  generateStream: () => import_generate.generateStream,\n  index: () => import_retriever.index,\n  indexerRef: () => import_retriever.indexerRef,\n  normalizePart: () => import_generate.normalizePart,\n  renderPrompt: () => import_prompt.renderPrompt,\n  rerank: () => import_reranker.rerank,\n  rerankerRef: () => import_reranker.rerankerRef,\n  retrieve: () => import_retriever.retrieve,\n  retrieverRef: () => import_retriever.retrieverRef,\n  tagAsPreamble: () => import_generate.tagAsPreamble,\n  toGenerateRequest: () => import_generate.toGenerateRequest\n});\nmodule.exports = __toCommonJS(src_exports);\nvar import_document = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nvar import_embedder = __webpack_require__(/*! ./embedder.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js\");\nvar import_evaluator = __webpack_require__(/*! ./evaluator.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/evaluator.js\");\nvar import_generate = __webpack_require__(/*! ./generate.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generate.js\");\nvar import_model = __webpack_require__(/*! ./model.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js\");\nvar import_prompt = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/prompt.js\");\nvar import_reranker = __webpack_require__(/*! ./reranker.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/reranker.js\");\nvar import_retriever = __webpack_require__(/*! ./retriever.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js\");\nvar import_tool = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\");\n__reExport(src_exports, __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/types.js\"), module.exports);\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxzQkFBc0IsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3QyxzQkFBc0IsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3Qyx1QkFBdUIsbUJBQU8sQ0FBQywrRkFBZ0I7QUFDL0Msc0JBQXNCLG1CQUFPLENBQUMsNkZBQWU7QUFDN0MsbUJBQW1CLG1CQUFPLENBQUMsdUZBQVk7QUFDdkMsb0JBQW9CLG1CQUFPLENBQUMseUZBQWE7QUFDekMsc0JBQXNCLG1CQUFPLENBQUMsNkZBQWU7QUFDN0MsdUJBQXVCLG1CQUFPLENBQUMsK0ZBQWdCO0FBQy9DLGtCQUFrQixtQkFBTyxDQUFDLHFGQUFXO0FBQ3JDLHdCQUF3QixtQkFBTyxDQUFDLHVGQUFZO0FBQzVDO0FBQ0EsTUFBTSxDQWtDTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9pbmRleC5qcz9iNDg4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX19yZUV4cG9ydCA9ICh0YXJnZXQsIG1vZCwgc2Vjb25kVGFyZ2V0KSA9PiAoX19jb3B5UHJvcHModGFyZ2V0LCBtb2QsIFwiZGVmYXVsdFwiKSwgc2Vjb25kVGFyZ2V0ICYmIF9fY29weVByb3BzKHNlY29uZFRhcmdldCwgbW9kLCBcImRlZmF1bHRcIikpO1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgc3JjX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHNyY19leHBvcnRzLCB7XG4gIEJhc2VEYXRhUG9pbnRTY2hlbWE6ICgpID0+IGltcG9ydF9ldmFsdWF0b3IuQmFzZURhdGFQb2ludFNjaGVtYSxcbiAgRG9jdW1lbnQ6ICgpID0+IGltcG9ydF9kb2N1bWVudC5Eb2N1bWVudCxcbiAgRG9jdW1lbnREYXRhU2NoZW1hOiAoKSA9PiBpbXBvcnRfZG9jdW1lbnQuRG9jdW1lbnREYXRhU2NoZW1hLFxuICBHZW5lcmF0ZVJlc3BvbnNlOiAoKSA9PiBpbXBvcnRfZ2VuZXJhdGUuR2VuZXJhdGVSZXNwb25zZSxcbiAgR2VuZXJhdGlvbkJsb2NrZWRFcnJvcjogKCkgPT4gaW1wb3J0X2dlbmVyYXRlLkdlbmVyYXRpb25CbG9ja2VkRXJyb3IsXG4gIEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWE6ICgpID0+IGltcG9ydF9tb2RlbC5HZW5lcmF0aW9uQ29tbW9uQ29uZmlnU2NoZW1hLFxuICBHZW5lcmF0aW9uUmVzcG9uc2VFcnJvcjogKCkgPT4gaW1wb3J0X2dlbmVyYXRlLkdlbmVyYXRpb25SZXNwb25zZUVycm9yLFxuICBNZXNzYWdlOiAoKSA9PiBpbXBvcnRfZ2VuZXJhdGUuTWVzc2FnZSxcbiAgTWVzc2FnZVNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLk1lc3NhZ2VTY2hlbWEsXG4gIE1vZGVsUmVxdWVzdFNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLk1vZGVsUmVxdWVzdFNjaGVtYSxcbiAgTW9kZWxSZXNwb25zZVNjaGVtYTogKCkgPT4gaW1wb3J0X21vZGVsLk1vZGVsUmVzcG9uc2VTY2hlbWEsXG4gIFBhcnRTY2hlbWE6ICgpID0+IGltcG9ydF9tb2RlbC5QYXJ0U2NoZW1hLFxuICBSb2xlU2NoZW1hOiAoKSA9PiBpbXBvcnRfbW9kZWwuUm9sZVNjaGVtYSxcbiAgYXNUb29sOiAoKSA9PiBpbXBvcnRfdG9vbC5hc1Rvb2wsXG4gIGRlZmluZVByb21wdDogKCkgPT4gaW1wb3J0X3Byb21wdC5kZWZpbmVQcm9tcHQsXG4gIGRlZmluZVRvb2w6ICgpID0+IGltcG9ydF90b29sLmRlZmluZVRvb2wsXG4gIGVtYmVkOiAoKSA9PiBpbXBvcnRfZW1iZWRkZXIuZW1iZWQsXG4gIGVtYmVkZGVyUmVmOiAoKSA9PiBpbXBvcnRfZW1iZWRkZXIuZW1iZWRkZXJSZWYsXG4gIGV2YWx1YXRlOiAoKSA9PiBpbXBvcnRfZXZhbHVhdG9yLmV2YWx1YXRlLFxuICBldmFsdWF0b3JSZWY6ICgpID0+IGltcG9ydF9ldmFsdWF0b3IuZXZhbHVhdG9yUmVmLFxuICBnZW5lcmF0ZTogKCkgPT4gaW1wb3J0X2dlbmVyYXRlLmdlbmVyYXRlLFxuICBnZW5lcmF0ZVN0cmVhbTogKCkgPT4gaW1wb3J0X2dlbmVyYXRlLmdlbmVyYXRlU3RyZWFtLFxuICBpbmRleDogKCkgPT4gaW1wb3J0X3JldHJpZXZlci5pbmRleCxcbiAgaW5kZXhlclJlZjogKCkgPT4gaW1wb3J0X3JldHJpZXZlci5pbmRleGVyUmVmLFxuICBub3JtYWxpemVQYXJ0OiAoKSA9PiBpbXBvcnRfZ2VuZXJhdGUubm9ybWFsaXplUGFydCxcbiAgcmVuZGVyUHJvbXB0OiAoKSA9PiBpbXBvcnRfcHJvbXB0LnJlbmRlclByb21wdCxcbiAgcmVyYW5rOiAoKSA9PiBpbXBvcnRfcmVyYW5rZXIucmVyYW5rLFxuICByZXJhbmtlclJlZjogKCkgPT4gaW1wb3J0X3JlcmFua2VyLnJlcmFua2VyUmVmLFxuICByZXRyaWV2ZTogKCkgPT4gaW1wb3J0X3JldHJpZXZlci5yZXRyaWV2ZSxcbiAgcmV0cmlldmVyUmVmOiAoKSA9PiBpbXBvcnRfcmV0cmlldmVyLnJldHJpZXZlclJlZixcbiAgdGFnQXNQcmVhbWJsZTogKCkgPT4gaW1wb3J0X2dlbmVyYXRlLnRhZ0FzUHJlYW1ibGUsXG4gIHRvR2VuZXJhdGVSZXF1ZXN0OiAoKSA9PiBpbXBvcnRfZ2VuZXJhdGUudG9HZW5lcmF0ZVJlcXVlc3Rcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoc3JjX2V4cG9ydHMpO1xudmFyIGltcG9ydF9kb2N1bWVudCA9IHJlcXVpcmUoXCIuL2RvY3VtZW50LmpzXCIpO1xudmFyIGltcG9ydF9lbWJlZGRlciA9IHJlcXVpcmUoXCIuL2VtYmVkZGVyLmpzXCIpO1xudmFyIGltcG9ydF9ldmFsdWF0b3IgPSByZXF1aXJlKFwiLi9ldmFsdWF0b3IuanNcIik7XG52YXIgaW1wb3J0X2dlbmVyYXRlID0gcmVxdWlyZShcIi4vZ2VuZXJhdGUuanNcIik7XG52YXIgaW1wb3J0X21vZGVsID0gcmVxdWlyZShcIi4vbW9kZWwuanNcIik7XG52YXIgaW1wb3J0X3Byb21wdCA9IHJlcXVpcmUoXCIuL3Byb21wdC5qc1wiKTtcbnZhciBpbXBvcnRfcmVyYW5rZXIgPSByZXF1aXJlKFwiLi9yZXJhbmtlci5qc1wiKTtcbnZhciBpbXBvcnRfcmV0cmlldmVyID0gcmVxdWlyZShcIi4vcmV0cmlldmVyLmpzXCIpO1xudmFyIGltcG9ydF90b29sID0gcmVxdWlyZShcIi4vdG9vbC5qc1wiKTtcbl9fcmVFeHBvcnQoc3JjX2V4cG9ydHMsIHJlcXVpcmUoXCIuL3R5cGVzLmpzXCIpLCBtb2R1bGUuZXhwb3J0cyk7XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgQmFzZURhdGFQb2ludFNjaGVtYSxcbiAgRG9jdW1lbnQsXG4gIERvY3VtZW50RGF0YVNjaGVtYSxcbiAgR2VuZXJhdGVSZXNwb25zZSxcbiAgR2VuZXJhdGlvbkJsb2NrZWRFcnJvcixcbiAgR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYSxcbiAgR2VuZXJhdGlvblJlc3BvbnNlRXJyb3IsXG4gIE1lc3NhZ2UsXG4gIE1lc3NhZ2VTY2hlbWEsXG4gIE1vZGVsUmVxdWVzdFNjaGVtYSxcbiAgTW9kZWxSZXNwb25zZVNjaGVtYSxcbiAgUGFydFNjaGVtYSxcbiAgUm9sZVNjaGVtYSxcbiAgYXNUb29sLFxuICBkZWZpbmVQcm9tcHQsXG4gIGRlZmluZVRvb2wsXG4gIGVtYmVkLFxuICBlbWJlZGRlclJlZixcbiAgZXZhbHVhdGUsXG4gIGV2YWx1YXRvclJlZixcbiAgZ2VuZXJhdGUsXG4gIGdlbmVyYXRlU3RyZWFtLFxuICBpbmRleCxcbiAgaW5kZXhlclJlZixcbiAgbm9ybWFsaXplUGFydCxcbiAgcmVuZGVyUHJvbXB0LFxuICByZXJhbmssXG4gIHJlcmFua2VyUmVmLFxuICByZXRyaWV2ZSxcbiAgcmV0cmlldmVyUmVmLFxuICB0YWdBc1ByZWFtYmxlLFxuICB0b0dlbmVyYXRlUmVxdWVzdCxcbiAgLi4ucmVxdWlyZShcIi4vdHlwZXMuanNcIilcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js":
/*!*********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar model_exports = {};\n__export(model_exports, {\n  CandidateErrorSchema: () => CandidateErrorSchema,\n  CandidateSchema: () => CandidateSchema,\n  CustomPartSchema: () => CustomPartSchema,\n  DataPartSchema: () => DataPartSchema,\n  GenerateRequestSchema: () => GenerateRequestSchema,\n  GenerateResponseChunkSchema: () => GenerateResponseChunkSchema,\n  GenerateResponseSchema: () => GenerateResponseSchema,\n  GenerationCommonConfigSchema: () => GenerationCommonConfigSchema,\n  GenerationUsageSchema: () => GenerationUsageSchema,\n  MediaPartSchema: () => MediaPartSchema,\n  MessageSchema: () => MessageSchema,\n  ModelInfoSchema: () => ModelInfoSchema,\n  ModelRequestSchema: () => ModelRequestSchema,\n  ModelResponseChunkSchema: () => ModelResponseChunkSchema,\n  ModelResponseSchema: () => ModelResponseSchema,\n  PartSchema: () => PartSchema,\n  RoleSchema: () => RoleSchema,\n  TextPartSchema: () => TextPartSchema,\n  ToolDefinitionSchema: () => ToolDefinitionSchema,\n  ToolRequestPartSchema: () => ToolRequestPartSchema,\n  ToolResponsePartSchema: () => ToolResponsePartSchema,\n  defineModel: () => defineModel,\n  getBasicUsageStats: () => getBasicUsageStats,\n  modelRef: () => modelRef\n});\nmodule.exports = __toCommonJS(model_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_schema = __webpack_require__(/*! @genkit-ai/core/schema */ \"(rsc)/./node_modules/@genkit-ai/core/lib/schema.js\");\nvar import_node_perf_hooks = __webpack_require__(/*! node:perf_hooks */ \"node:perf_hooks\");\nvar import_document = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nvar import_middleware = __webpack_require__(/*! ./model/middleware.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model/middleware.js\");\nconst EmptyPartSchema = import_core.z.object({\n  text: import_core.z.never().optional(),\n  media: import_core.z.never().optional(),\n  toolRequest: import_core.z.never().optional(),\n  toolResponse: import_core.z.never().optional(),\n  data: import_core.z.unknown().optional(),\n  metadata: import_core.z.record(import_core.z.unknown()).optional(),\n  custom: import_core.z.record(import_core.z.unknown()).optional()\n});\nconst TextPartSchema = EmptyPartSchema.extend({\n  /** The text of the message. */\n  text: import_core.z.string()\n});\nconst MediaPartSchema = EmptyPartSchema.extend({\n  media: import_core.z.object({\n    /** The media content type. Inferred from data uri if not provided. */\n    contentType: import_core.z.string().optional(),\n    /** A `data:` or `https:` uri containing the media content.  */\n    url: import_core.z.string()\n  })\n});\nconst ToolRequestPartSchema = EmptyPartSchema.extend({\n  /** A request for a tool to be executed, usually provided by a model. */\n  toolRequest: import_core.z.object({\n    /** The call id or reference for a specific request. */\n    ref: import_core.z.string().optional(),\n    /** The name of the tool to call. */\n    name: import_core.z.string(),\n    /** The input parameters for the tool, usually a JSON object. */\n    input: import_core.z.unknown().optional()\n  })\n});\nconst ToolResponsePartSchema = EmptyPartSchema.extend({\n  /** A provided response to a tool call. */\n  toolResponse: import_core.z.object({\n    /** The call id or reference for a specific request. */\n    ref: import_core.z.string().optional(),\n    /** The name of the tool. */\n    name: import_core.z.string(),\n    /** The output data returned from the tool, usually a JSON object. */\n    output: import_core.z.unknown().optional()\n  })\n});\nconst DataPartSchema = EmptyPartSchema.extend({\n  data: import_core.z.unknown()\n});\nconst CustomPartSchema = EmptyPartSchema.extend({\n  custom: import_core.z.record(import_core.z.any())\n});\nconst PartSchema = import_core.z.union([\n  TextPartSchema,\n  MediaPartSchema,\n  ToolRequestPartSchema,\n  ToolResponsePartSchema,\n  DataPartSchema,\n  CustomPartSchema\n]);\nconst RoleSchema = import_core.z.enum([\"system\", \"user\", \"model\", \"tool\"]);\nconst MessageSchema = import_core.z.object({\n  role: RoleSchema,\n  content: import_core.z.array(PartSchema),\n  metadata: import_core.z.record(import_core.z.unknown()).optional()\n});\nconst OutputFormatSchema = import_core.z.enum([\"json\", \"text\", \"media\"]);\nconst ModelInfoSchema = import_core.z.object({\n  /** Acceptable names for this model (e.g. different versions). */\n  versions: import_core.z.array(import_core.z.string()).optional(),\n  /** Friendly label for this model (e.g. \"Google AI - Gemini Pro\") */\n  label: import_core.z.string().optional(),\n  /** Supported model capabilities. */\n  supports: import_core.z.object({\n    /** Model can process historical messages passed with a prompt. */\n    multiturn: import_core.z.boolean().optional(),\n    /** Model can process media as part of the prompt (multimodal input). */\n    media: import_core.z.boolean().optional(),\n    /** Model can perform tool calls. */\n    tools: import_core.z.boolean().optional(),\n    /** Model can accept messages with role \"system\". */\n    systemRole: import_core.z.boolean().optional(),\n    /** Model can output this type of data. */\n    output: import_core.z.array(OutputFormatSchema).optional(),\n    /** Model can natively support document-based context grounding. */\n    context: import_core.z.boolean().optional()\n  }).optional(),\n  /** At which stage of development this model is.\n   * - `featured` models are recommended for general use.\n   * - `stable` models are well-tested and reliable.\n   * - `unstable` models are experimental and may change.\n   * - `legacy` models are no longer recommended for new projects.\n   * - `deprecated` models are deprecated by the provider and may be removed in future versions.\n   */\n  stage: import_core.z.enum([\"featured\", \"stable\", \"unstable\", \"legacy\", \"deprecated\"]).optional()\n});\nconst ToolDefinitionSchema = import_core.z.object({\n  name: import_core.z.string(),\n  description: import_core.z.string(),\n  inputSchema: import_core.z.record(import_core.z.any()).describe(\"Valid JSON Schema representing the input of the tool.\").nullish(),\n  outputSchema: import_core.z.record(import_core.z.any()).describe(\"Valid JSON Schema describing the output of the tool.\").nullish()\n});\nconst GenerationCommonConfigSchema = import_core.z.object({\n  /** A specific version of a model family, e.g. `gemini-1.0-pro-001` for the `gemini-1.0-pro` family. */\n  version: import_core.z.string().optional(),\n  temperature: import_core.z.number().optional(),\n  maxOutputTokens: import_core.z.number().optional(),\n  topK: import_core.z.number().optional(),\n  topP: import_core.z.number().optional(),\n  stopSequences: import_core.z.array(import_core.z.string()).optional()\n});\nconst OutputConfigSchema = import_core.z.object({\n  format: OutputFormatSchema.optional(),\n  schema: import_core.z.record(import_core.z.any()).optional()\n});\nconst ModelRequestSchema = import_core.z.object({\n  messages: import_core.z.array(MessageSchema),\n  config: import_core.z.any().optional(),\n  tools: import_core.z.array(ToolDefinitionSchema).optional(),\n  output: OutputConfigSchema.optional(),\n  docs: import_core.z.array(import_document.DocumentDataSchema).optional()\n});\nconst GenerateRequestSchema = ModelRequestSchema.extend({\n  /** @deprecated All responses now return a single candidate. This will always be `undefined`. */\n  candidates: import_core.z.number().optional()\n});\nconst GenerationUsageSchema = import_core.z.object({\n  inputTokens: import_core.z.number().optional(),\n  outputTokens: import_core.z.number().optional(),\n  totalTokens: import_core.z.number().optional(),\n  inputCharacters: import_core.z.number().optional(),\n  outputCharacters: import_core.z.number().optional(),\n  inputImages: import_core.z.number().optional(),\n  outputImages: import_core.z.number().optional(),\n  inputVideos: import_core.z.number().optional(),\n  outputVideos: import_core.z.number().optional(),\n  inputAudioFiles: import_core.z.number().optional(),\n  outputAudioFiles: import_core.z.number().optional(),\n  custom: import_core.z.record(import_core.z.number()).optional()\n});\nconst CandidateSchema = import_core.z.object({\n  index: import_core.z.number(),\n  message: MessageSchema,\n  usage: GenerationUsageSchema.optional(),\n  finishReason: import_core.z.enum([\"stop\", \"length\", \"blocked\", \"other\", \"unknown\"]),\n  finishMessage: import_core.z.string().optional(),\n  custom: import_core.z.unknown()\n});\nconst CandidateErrorSchema = import_core.z.object({\n  index: import_core.z.number(),\n  code: import_core.z.enum([\"blocked\", \"other\", \"unknown\"]),\n  message: import_core.z.string().optional()\n});\nconst ModelResponseSchema = import_core.z.object({\n  message: MessageSchema.optional(),\n  finishReason: import_core.z.enum([\"stop\", \"length\", \"blocked\", \"other\", \"unknown\"]),\n  finishMessage: import_core.z.string().optional(),\n  latencyMs: import_core.z.number().optional(),\n  usage: GenerationUsageSchema.optional(),\n  /** @deprecated use `raw` instead */\n  custom: import_core.z.unknown(),\n  raw: import_core.z.unknown(),\n  request: GenerateRequestSchema.optional()\n});\nconst GenerateResponseSchema = ModelResponseSchema.extend({\n  /** @deprecated All responses now return a single candidate. Only the first candidate will be used if supplied. Return `message`, `finishReason`, and `finishMessage` instead. */\n  candidates: import_core.z.array(CandidateSchema).optional(),\n  finishReason: import_core.z.enum([\"stop\", \"length\", \"blocked\", \"other\", \"unknown\"]).optional()\n});\nconst ModelResponseChunkSchema = import_core.z.object({\n  /** The chunk of content to stream right now. */\n  content: import_core.z.array(PartSchema),\n  /** Model-specific extra information attached to this chunk. */\n  custom: import_core.z.unknown().optional(),\n  /** If true, the chunk includes all data from previous chunks. Otherwise, considered to be incremental. */\n  aggregated: import_core.z.boolean().optional()\n});\nconst GenerateResponseChunkSchema = ModelResponseChunkSchema.extend({\n  /** @deprecated The index of the candidate this chunk belongs to. Always 0. */\n  index: import_core.z.number().optional()\n});\nfunction defineModel(registry, options, runner) {\n  var _a;\n  const label = options.label || options.name;\n  const middleware = [\n    ...options.use || [],\n    (0, import_middleware.validateSupport)(options)\n  ];\n  if (!((_a = options == null ? void 0 : options.supports) == null ? void 0 : _a.context)) middleware.push((0, import_middleware.augmentWithContext)());\n  middleware.push((0, import_middleware.conformOutput)());\n  const act = (0, import_core.defineAction)(\n    registry,\n    {\n      actionType: \"model\",\n      name: options.name,\n      description: label,\n      inputSchema: GenerateRequestSchema,\n      outputSchema: GenerateResponseSchema,\n      metadata: {\n        model: {\n          label,\n          customOptions: options.configSchema ? (0, import_schema.toJsonSchema)({ schema: options.configSchema }) : void 0,\n          versions: options.versions,\n          supports: options.supports\n        }\n      },\n      use: middleware\n    },\n    (input) => {\n      const startTimeMs = import_node_perf_hooks.performance.now();\n      return runner(input, (0, import_core.getStreamingCallback)()).then((response) => {\n        const timedResponse = __spreadProps(__spreadValues({}, response), {\n          latencyMs: import_node_perf_hooks.performance.now() - startTimeMs\n        });\n        return timedResponse;\n      });\n    }\n  );\n  Object.assign(act, {\n    __configSchema: options.configSchema || import_core.z.unknown()\n  });\n  return act;\n}\nfunction modelRef(options) {\n  const ref = __spreadValues({}, options);\n  ref.withConfig = (cfg) => {\n    return modelRef(__spreadProps(__spreadValues({}, options), {\n      config: cfg\n    }));\n  };\n  ref.withVersion = (version) => {\n    return modelRef(__spreadProps(__spreadValues({}, options), {\n      version\n    }));\n  };\n  return ref;\n}\nfunction getBasicUsageStats(input, response) {\n  const inputCounts = getPartCounts(input.flatMap((md) => md.content));\n  const outputCounts = getPartCounts(\n    Array.isArray(response) ? response.flatMap((c) => c.message.content) : response.content\n  );\n  return {\n    inputCharacters: inputCounts.characters,\n    inputImages: inputCounts.images,\n    inputVideos: inputCounts.videos,\n    inputAudioFiles: inputCounts.audio,\n    outputCharacters: outputCounts.characters,\n    outputImages: outputCounts.images,\n    outputVideos: outputCounts.videos,\n    outputAudioFiles: outputCounts.audio\n  };\n}\nfunction getPartCounts(parts) {\n  return parts.reduce(\n    (counts, part) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m;\n      const isImage = ((_b = (_a = part.media) == null ? void 0 : _a.contentType) == null ? void 0 : _b.startsWith(\"image\")) || ((_d = (_c = part.media) == null ? void 0 : _c.url) == null ? void 0 : _d.startsWith(\"data:image\"));\n      const isVideo = ((_f = (_e = part.media) == null ? void 0 : _e.contentType) == null ? void 0 : _f.startsWith(\"video\")) || ((_h = (_g = part.media) == null ? void 0 : _g.url) == null ? void 0 : _h.startsWith(\"data:video\"));\n      const isAudio = ((_j = (_i = part.media) == null ? void 0 : _i.contentType) == null ? void 0 : _j.startsWith(\"audio\")) || ((_l = (_k = part.media) == null ? void 0 : _k.url) == null ? void 0 : _l.startsWith(\"data:audio\"));\n      return {\n        characters: counts.characters + (((_m = part.text) == null ? void 0 : _m.length) || 0),\n        images: counts.images + (isImage ? 1 : 0),\n        videos: counts.videos + (isVideo ? 1 : 0),\n        audio: counts.audio + (isAudio ? 1 : 0)\n      };\n    },\n    { characters: 0, images: 0, videos: 0, audio: 0 }\n  );\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=model.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9tb2RlbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxrQkFBa0IsbUJBQU8sQ0FBQywwRUFBaUI7QUFDM0Msb0JBQW9CLG1CQUFPLENBQUMsa0ZBQXdCO0FBQ3BELDZCQUE2QixtQkFBTyxDQUFDLHdDQUFpQjtBQUN0RCxzQkFBc0IsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3Qyx3QkFBd0IsbUJBQU8sQ0FBQyw2R0FBdUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRkFBa0YsOEJBQThCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQXlCTDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9tb2RlbC5qcz84ZTNhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyA9IChhLCBiKSA9PiBfX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIG1vZGVsX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KG1vZGVsX2V4cG9ydHMsIHtcbiAgQ2FuZGlkYXRlRXJyb3JTY2hlbWE6ICgpID0+IENhbmRpZGF0ZUVycm9yU2NoZW1hLFxuICBDYW5kaWRhdGVTY2hlbWE6ICgpID0+IENhbmRpZGF0ZVNjaGVtYSxcbiAgQ3VzdG9tUGFydFNjaGVtYTogKCkgPT4gQ3VzdG9tUGFydFNjaGVtYSxcbiAgRGF0YVBhcnRTY2hlbWE6ICgpID0+IERhdGFQYXJ0U2NoZW1hLFxuICBHZW5lcmF0ZVJlcXVlc3RTY2hlbWE6ICgpID0+IEdlbmVyYXRlUmVxdWVzdFNjaGVtYSxcbiAgR2VuZXJhdGVSZXNwb25zZUNodW5rU2NoZW1hOiAoKSA9PiBHZW5lcmF0ZVJlc3BvbnNlQ2h1bmtTY2hlbWEsXG4gIEdlbmVyYXRlUmVzcG9uc2VTY2hlbWE6ICgpID0+IEdlbmVyYXRlUmVzcG9uc2VTY2hlbWEsXG4gIEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWE6ICgpID0+IEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWEsXG4gIEdlbmVyYXRpb25Vc2FnZVNjaGVtYTogKCkgPT4gR2VuZXJhdGlvblVzYWdlU2NoZW1hLFxuICBNZWRpYVBhcnRTY2hlbWE6ICgpID0+IE1lZGlhUGFydFNjaGVtYSxcbiAgTWVzc2FnZVNjaGVtYTogKCkgPT4gTWVzc2FnZVNjaGVtYSxcbiAgTW9kZWxJbmZvU2NoZW1hOiAoKSA9PiBNb2RlbEluZm9TY2hlbWEsXG4gIE1vZGVsUmVxdWVzdFNjaGVtYTogKCkgPT4gTW9kZWxSZXF1ZXN0U2NoZW1hLFxuICBNb2RlbFJlc3BvbnNlQ2h1bmtTY2hlbWE6ICgpID0+IE1vZGVsUmVzcG9uc2VDaHVua1NjaGVtYSxcbiAgTW9kZWxSZXNwb25zZVNjaGVtYTogKCkgPT4gTW9kZWxSZXNwb25zZVNjaGVtYSxcbiAgUGFydFNjaGVtYTogKCkgPT4gUGFydFNjaGVtYSxcbiAgUm9sZVNjaGVtYTogKCkgPT4gUm9sZVNjaGVtYSxcbiAgVGV4dFBhcnRTY2hlbWE6ICgpID0+IFRleHRQYXJ0U2NoZW1hLFxuICBUb29sRGVmaW5pdGlvblNjaGVtYTogKCkgPT4gVG9vbERlZmluaXRpb25TY2hlbWEsXG4gIFRvb2xSZXF1ZXN0UGFydFNjaGVtYTogKCkgPT4gVG9vbFJlcXVlc3RQYXJ0U2NoZW1hLFxuICBUb29sUmVzcG9uc2VQYXJ0U2NoZW1hOiAoKSA9PiBUb29sUmVzcG9uc2VQYXJ0U2NoZW1hLFxuICBkZWZpbmVNb2RlbDogKCkgPT4gZGVmaW5lTW9kZWwsXG4gIGdldEJhc2ljVXNhZ2VTdGF0czogKCkgPT4gZ2V0QmFzaWNVc2FnZVN0YXRzLFxuICBtb2RlbFJlZjogKCkgPT4gbW9kZWxSZWZcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMobW9kZWxfZXhwb3J0cyk7XG52YXIgaW1wb3J0X2NvcmUgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlXCIpO1xudmFyIGltcG9ydF9zY2hlbWEgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlL3NjaGVtYVwiKTtcbnZhciBpbXBvcnRfbm9kZV9wZXJmX2hvb2tzID0gcmVxdWlyZShcIm5vZGU6cGVyZl9ob29rc1wiKTtcbnZhciBpbXBvcnRfZG9jdW1lbnQgPSByZXF1aXJlKFwiLi9kb2N1bWVudC5qc1wiKTtcbnZhciBpbXBvcnRfbWlkZGxld2FyZSA9IHJlcXVpcmUoXCIuL21vZGVsL21pZGRsZXdhcmUuanNcIik7XG5jb25zdCBFbXB0eVBhcnRTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIHRleHQ6IGltcG9ydF9jb3JlLnoubmV2ZXIoKS5vcHRpb25hbCgpLFxuICBtZWRpYTogaW1wb3J0X2NvcmUuei5uZXZlcigpLm9wdGlvbmFsKCksXG4gIHRvb2xSZXF1ZXN0OiBpbXBvcnRfY29yZS56Lm5ldmVyKCkub3B0aW9uYWwoKSxcbiAgdG9vbFJlc3BvbnNlOiBpbXBvcnRfY29yZS56Lm5ldmVyKCkub3B0aW9uYWwoKSxcbiAgZGF0YTogaW1wb3J0X2NvcmUuei51bmtub3duKCkub3B0aW9uYWwoKSxcbiAgbWV0YWRhdGE6IGltcG9ydF9jb3JlLnoucmVjb3JkKGltcG9ydF9jb3JlLnoudW5rbm93bigpKS5vcHRpb25hbCgpLFxuICBjdXN0b206IGltcG9ydF9jb3JlLnoucmVjb3JkKGltcG9ydF9jb3JlLnoudW5rbm93bigpKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IFRleHRQYXJ0U2NoZW1hID0gRW1wdHlQYXJ0U2NoZW1hLmV4dGVuZCh7XG4gIC8qKiBUaGUgdGV4dCBvZiB0aGUgbWVzc2FnZS4gKi9cbiAgdGV4dDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKVxufSk7XG5jb25zdCBNZWRpYVBhcnRTY2hlbWEgPSBFbXB0eVBhcnRTY2hlbWEuZXh0ZW5kKHtcbiAgbWVkaWE6IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgICAvKiogVGhlIG1lZGlhIGNvbnRlbnQgdHlwZS4gSW5mZXJyZWQgZnJvbSBkYXRhIHVyaSBpZiBub3QgcHJvdmlkZWQuICovXG4gICAgY29udGVudFR5cGU6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKiogQSBgZGF0YTpgIG9yIGBodHRwczpgIHVyaSBjb250YWluaW5nIHRoZSBtZWRpYSBjb250ZW50LiAgKi9cbiAgICB1cmw6IGltcG9ydF9jb3JlLnouc3RyaW5nKClcbiAgfSlcbn0pO1xuY29uc3QgVG9vbFJlcXVlc3RQYXJ0U2NoZW1hID0gRW1wdHlQYXJ0U2NoZW1hLmV4dGVuZCh7XG4gIC8qKiBBIHJlcXVlc3QgZm9yIGEgdG9vbCB0byBiZSBleGVjdXRlZCwgdXN1YWxseSBwcm92aWRlZCBieSBhIG1vZGVsLiAqL1xuICB0b29sUmVxdWVzdDogaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICAgIC8qKiBUaGUgY2FsbCBpZCBvciByZWZlcmVuY2UgZm9yIGEgc3BlY2lmaWMgcmVxdWVzdC4gKi9cbiAgICByZWY6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdG8gY2FsbC4gKi9cbiAgICBuYW1lOiBpbXBvcnRfY29yZS56LnN0cmluZygpLFxuICAgIC8qKiBUaGUgaW5wdXQgcGFyYW1ldGVycyBmb3IgdGhlIHRvb2wsIHVzdWFsbHkgYSBKU09OIG9iamVjdC4gKi9cbiAgICBpbnB1dDogaW1wb3J0X2NvcmUuei51bmtub3duKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5jb25zdCBUb29sUmVzcG9uc2VQYXJ0U2NoZW1hID0gRW1wdHlQYXJ0U2NoZW1hLmV4dGVuZCh7XG4gIC8qKiBBIHByb3ZpZGVkIHJlc3BvbnNlIHRvIGEgdG9vbCBjYWxsLiAqL1xuICB0b29sUmVzcG9uc2U6IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgICAvKiogVGhlIGNhbGwgaWQgb3IgcmVmZXJlbmNlIGZvciBhIHNwZWNpZmljIHJlcXVlc3QuICovXG4gICAgcmVmOiBpbXBvcnRfY29yZS56LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSB0b29sLiAqL1xuICAgIG5hbWU6IGltcG9ydF9jb3JlLnouc3RyaW5nKCksXG4gICAgLyoqIFRoZSBvdXRwdXQgZGF0YSByZXR1cm5lZCBmcm9tIHRoZSB0b29sLCB1c3VhbGx5IGEgSlNPTiBvYmplY3QuICovXG4gICAgb3V0cHV0OiBpbXBvcnRfY29yZS56LnVua25vd24oKS5vcHRpb25hbCgpXG4gIH0pXG59KTtcbmNvbnN0IERhdGFQYXJ0U2NoZW1hID0gRW1wdHlQYXJ0U2NoZW1hLmV4dGVuZCh7XG4gIGRhdGE6IGltcG9ydF9jb3JlLnoudW5rbm93bigpXG59KTtcbmNvbnN0IEN1c3RvbVBhcnRTY2hlbWEgPSBFbXB0eVBhcnRTY2hlbWEuZXh0ZW5kKHtcbiAgY3VzdG9tOiBpbXBvcnRfY29yZS56LnJlY29yZChpbXBvcnRfY29yZS56LmFueSgpKVxufSk7XG5jb25zdCBQYXJ0U2NoZW1hID0gaW1wb3J0X2NvcmUuei51bmlvbihbXG4gIFRleHRQYXJ0U2NoZW1hLFxuICBNZWRpYVBhcnRTY2hlbWEsXG4gIFRvb2xSZXF1ZXN0UGFydFNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlUGFydFNjaGVtYSxcbiAgRGF0YVBhcnRTY2hlbWEsXG4gIEN1c3RvbVBhcnRTY2hlbWFcbl0pO1xuY29uc3QgUm9sZVNjaGVtYSA9IGltcG9ydF9jb3JlLnouZW51bShbXCJzeXN0ZW1cIiwgXCJ1c2VyXCIsIFwibW9kZWxcIiwgXCJ0b29sXCJdKTtcbmNvbnN0IE1lc3NhZ2VTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIHJvbGU6IFJvbGVTY2hlbWEsXG4gIGNvbnRlbnQ6IGltcG9ydF9jb3JlLnouYXJyYXkoUGFydFNjaGVtYSksXG4gIG1ldGFkYXRhOiBpbXBvcnRfY29yZS56LnJlY29yZChpbXBvcnRfY29yZS56LnVua25vd24oKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBPdXRwdXRGb3JtYXRTY2hlbWEgPSBpbXBvcnRfY29yZS56LmVudW0oW1wianNvblwiLCBcInRleHRcIiwgXCJtZWRpYVwiXSk7XG5jb25zdCBNb2RlbEluZm9TY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIC8qKiBBY2NlcHRhYmxlIG5hbWVzIGZvciB0aGlzIG1vZGVsIChlLmcuIGRpZmZlcmVudCB2ZXJzaW9ucykuICovXG4gIHZlcnNpb25zOiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9jb3JlLnouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIC8qKiBGcmllbmRseSBsYWJlbCBmb3IgdGhpcyBtb2RlbCAoZS5nLiBcIkdvb2dsZSBBSSAtIEdlbWluaSBQcm9cIikgKi9cbiAgbGFiZWw6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqIFN1cHBvcnRlZCBtb2RlbCBjYXBhYmlsaXRpZXMuICovXG4gIHN1cHBvcnRzOiBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gICAgLyoqIE1vZGVsIGNhbiBwcm9jZXNzIGhpc3RvcmljYWwgbWVzc2FnZXMgcGFzc2VkIHdpdGggYSBwcm9tcHQuICovXG4gICAgbXVsdGl0dXJuOiBpbXBvcnRfY29yZS56LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgIC8qKiBNb2RlbCBjYW4gcHJvY2VzcyBtZWRpYSBhcyBwYXJ0IG9mIHRoZSBwcm9tcHQgKG11bHRpbW9kYWwgaW5wdXQpLiAqL1xuICAgIG1lZGlhOiBpbXBvcnRfY29yZS56LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgIC8qKiBNb2RlbCBjYW4gcGVyZm9ybSB0b29sIGNhbGxzLiAqL1xuICAgIHRvb2xzOiBpbXBvcnRfY29yZS56LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgIC8qKiBNb2RlbCBjYW4gYWNjZXB0IG1lc3NhZ2VzIHdpdGggcm9sZSBcInN5c3RlbVwiLiAqL1xuICAgIHN5c3RlbVJvbGU6IGltcG9ydF9jb3JlLnouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgLyoqIE1vZGVsIGNhbiBvdXRwdXQgdGhpcyB0eXBlIG9mIGRhdGEuICovXG4gICAgb3V0cHV0OiBpbXBvcnRfY29yZS56LmFycmF5KE91dHB1dEZvcm1hdFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICAvKiogTW9kZWwgY2FuIG5hdGl2ZWx5IHN1cHBvcnQgZG9jdW1lbnQtYmFzZWQgY29udGV4dCBncm91bmRpbmcuICovXG4gICAgY29udGV4dDogaW1wb3J0X2NvcmUuei5ib29sZWFuKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpLFxuICAvKiogQXQgd2hpY2ggc3RhZ2Ugb2YgZGV2ZWxvcG1lbnQgdGhpcyBtb2RlbCBpcy5cbiAgICogLSBgZmVhdHVyZWRgIG1vZGVscyBhcmUgcmVjb21tZW5kZWQgZm9yIGdlbmVyYWwgdXNlLlxuICAgKiAtIGBzdGFibGVgIG1vZGVscyBhcmUgd2VsbC10ZXN0ZWQgYW5kIHJlbGlhYmxlLlxuICAgKiAtIGB1bnN0YWJsZWAgbW9kZWxzIGFyZSBleHBlcmltZW50YWwgYW5kIG1heSBjaGFuZ2UuXG4gICAqIC0gYGxlZ2FjeWAgbW9kZWxzIGFyZSBubyBsb25nZXIgcmVjb21tZW5kZWQgZm9yIG5ldyBwcm9qZWN0cy5cbiAgICogLSBgZGVwcmVjYXRlZGAgbW9kZWxzIGFyZSBkZXByZWNhdGVkIGJ5IHRoZSBwcm92aWRlciBhbmQgbWF5IGJlIHJlbW92ZWQgaW4gZnV0dXJlIHZlcnNpb25zLlxuICAgKi9cbiAgc3RhZ2U6IGltcG9ydF9jb3JlLnouZW51bShbXCJmZWF0dXJlZFwiLCBcInN0YWJsZVwiLCBcInVuc3RhYmxlXCIsIFwibGVnYWN5XCIsIFwiZGVwcmVjYXRlZFwiXSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBUb29sRGVmaW5pdGlvblNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgbmFtZTogaW1wb3J0X2NvcmUuei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IGltcG9ydF9jb3JlLnouc3RyaW5nKCksXG4gIGlucHV0U2NoZW1hOiBpbXBvcnRfY29yZS56LnJlY29yZChpbXBvcnRfY29yZS56LmFueSgpKS5kZXNjcmliZShcIlZhbGlkIEpTT04gU2NoZW1hIHJlcHJlc2VudGluZyB0aGUgaW5wdXQgb2YgdGhlIHRvb2wuXCIpLm51bGxpc2goKSxcbiAgb3V0cHV0U2NoZW1hOiBpbXBvcnRfY29yZS56LnJlY29yZChpbXBvcnRfY29yZS56LmFueSgpKS5kZXNjcmliZShcIlZhbGlkIEpTT04gU2NoZW1hIGRlc2NyaWJpbmcgdGhlIG91dHB1dCBvZiB0aGUgdG9vbC5cIikubnVsbGlzaCgpXG59KTtcbmNvbnN0IEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIC8qKiBBIHNwZWNpZmljIHZlcnNpb24gb2YgYSBtb2RlbCBmYW1pbHksIGUuZy4gYGdlbWluaS0xLjAtcHJvLTAwMWAgZm9yIHRoZSBgZ2VtaW5pLTEuMC1wcm9gIGZhbWlseS4gKi9cbiAgdmVyc2lvbjogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0ZW1wZXJhdHVyZTogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBtYXhPdXRwdXRUb2tlbnM6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdG9wSzogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICB0b3BQOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIHN0b3BTZXF1ZW5jZXM6IGltcG9ydF9jb3JlLnouYXJyYXkoaW1wb3J0X2NvcmUuei5zdHJpbmcoKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBPdXRwdXRDb25maWdTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGZvcm1hdDogT3V0cHV0Rm9ybWF0U2NoZW1hLm9wdGlvbmFsKCksXG4gIHNjaGVtYTogaW1wb3J0X2NvcmUuei5yZWNvcmQoaW1wb3J0X2NvcmUuei5hbnkoKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBNb2RlbFJlcXVlc3RTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIG1lc3NhZ2VzOiBpbXBvcnRfY29yZS56LmFycmF5KE1lc3NhZ2VTY2hlbWEpLFxuICBjb25maWc6IGltcG9ydF9jb3JlLnouYW55KCkub3B0aW9uYWwoKSxcbiAgdG9vbHM6IGltcG9ydF9jb3JlLnouYXJyYXkoVG9vbERlZmluaXRpb25TY2hlbWEpLm9wdGlvbmFsKCksXG4gIG91dHB1dDogT3V0cHV0Q29uZmlnU2NoZW1hLm9wdGlvbmFsKCksXG4gIGRvY3M6IGltcG9ydF9jb3JlLnouYXJyYXkoaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50RGF0YVNjaGVtYSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBHZW5lcmF0ZVJlcXVlc3RTY2hlbWEgPSBNb2RlbFJlcXVlc3RTY2hlbWEuZXh0ZW5kKHtcbiAgLyoqIEBkZXByZWNhdGVkIEFsbCByZXNwb25zZXMgbm93IHJldHVybiBhIHNpbmdsZSBjYW5kaWRhdGUuIFRoaXMgd2lsbCBhbHdheXMgYmUgYHVuZGVmaW5lZGAuICovXG4gIGNhbmRpZGF0ZXM6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBHZW5lcmF0aW9uVXNhZ2VTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGlucHV0VG9rZW5zOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIG91dHB1dFRva2VuczogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICB0b3RhbFRva2VuczogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBpbnB1dENoYXJhY3RlcnM6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgb3V0cHV0Q2hhcmFjdGVyczogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBpbnB1dEltYWdlczogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBvdXRwdXRJbWFnZXM6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgaW5wdXRWaWRlb3M6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgb3V0cHV0VmlkZW9zOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGlucHV0QXVkaW9GaWxlczogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBvdXRwdXRBdWRpb0ZpbGVzOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGN1c3RvbTogaW1wb3J0X2NvcmUuei5yZWNvcmQoaW1wb3J0X2NvcmUuei5udW1iZXIoKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBDYW5kaWRhdGVTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGluZGV4OiBpbXBvcnRfY29yZS56Lm51bWJlcigpLFxuICBtZXNzYWdlOiBNZXNzYWdlU2NoZW1hLFxuICB1c2FnZTogR2VuZXJhdGlvblVzYWdlU2NoZW1hLm9wdGlvbmFsKCksXG4gIGZpbmlzaFJlYXNvbjogaW1wb3J0X2NvcmUuei5lbnVtKFtcInN0b3BcIiwgXCJsZW5ndGhcIiwgXCJibG9ja2VkXCIsIFwib3RoZXJcIiwgXCJ1bmtub3duXCJdKSxcbiAgZmluaXNoTWVzc2FnZTogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBjdXN0b206IGltcG9ydF9jb3JlLnoudW5rbm93bigpXG59KTtcbmNvbnN0IENhbmRpZGF0ZUVycm9yU2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBpbmRleDogaW1wb3J0X2NvcmUuei5udW1iZXIoKSxcbiAgY29kZTogaW1wb3J0X2NvcmUuei5lbnVtKFtcImJsb2NrZWRcIiwgXCJvdGhlclwiLCBcInVua25vd25cIl0pLFxuICBtZXNzYWdlOiBpbXBvcnRfY29yZS56LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgTW9kZWxSZXNwb25zZVNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgbWVzc2FnZTogTWVzc2FnZVNjaGVtYS5vcHRpb25hbCgpLFxuICBmaW5pc2hSZWFzb246IGltcG9ydF9jb3JlLnouZW51bShbXCJzdG9wXCIsIFwibGVuZ3RoXCIsIFwiYmxvY2tlZFwiLCBcIm90aGVyXCIsIFwidW5rbm93blwiXSksXG4gIGZpbmlzaE1lc3NhZ2U6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbGF0ZW5jeU1zOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIHVzYWdlOiBHZW5lcmF0aW9uVXNhZ2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBgcmF3YCBpbnN0ZWFkICovXG4gIGN1c3RvbTogaW1wb3J0X2NvcmUuei51bmtub3duKCksXG4gIHJhdzogaW1wb3J0X2NvcmUuei51bmtub3duKCksXG4gIHJlcXVlc3Q6IEdlbmVyYXRlUmVxdWVzdFNjaGVtYS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IEdlbmVyYXRlUmVzcG9uc2VTY2hlbWEgPSBNb2RlbFJlc3BvbnNlU2NoZW1hLmV4dGVuZCh7XG4gIC8qKiBAZGVwcmVjYXRlZCBBbGwgcmVzcG9uc2VzIG5vdyByZXR1cm4gYSBzaW5nbGUgY2FuZGlkYXRlLiBPbmx5IHRoZSBmaXJzdCBjYW5kaWRhdGUgd2lsbCBiZSB1c2VkIGlmIHN1cHBsaWVkLiBSZXR1cm4gYG1lc3NhZ2VgLCBgZmluaXNoUmVhc29uYCwgYW5kIGBmaW5pc2hNZXNzYWdlYCBpbnN0ZWFkLiAqL1xuICBjYW5kaWRhdGVzOiBpbXBvcnRfY29yZS56LmFycmF5KENhbmRpZGF0ZVNjaGVtYSkub3B0aW9uYWwoKSxcbiAgZmluaXNoUmVhc29uOiBpbXBvcnRfY29yZS56LmVudW0oW1wic3RvcFwiLCBcImxlbmd0aFwiLCBcImJsb2NrZWRcIiwgXCJvdGhlclwiLCBcInVua25vd25cIl0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgTW9kZWxSZXNwb25zZUNodW5rU2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICAvKiogVGhlIGNodW5rIG9mIGNvbnRlbnQgdG8gc3RyZWFtIHJpZ2h0IG5vdy4gKi9cbiAgY29udGVudDogaW1wb3J0X2NvcmUuei5hcnJheShQYXJ0U2NoZW1hKSxcbiAgLyoqIE1vZGVsLXNwZWNpZmljIGV4dHJhIGluZm9ybWF0aW9uIGF0dGFjaGVkIHRvIHRoaXMgY2h1bmsuICovXG4gIGN1c3RvbTogaW1wb3J0X2NvcmUuei51bmtub3duKCkub3B0aW9uYWwoKSxcbiAgLyoqIElmIHRydWUsIHRoZSBjaHVuayBpbmNsdWRlcyBhbGwgZGF0YSBmcm9tIHByZXZpb3VzIGNodW5rcy4gT3RoZXJ3aXNlLCBjb25zaWRlcmVkIHRvIGJlIGluY3JlbWVudGFsLiAqL1xuICBhZ2dyZWdhdGVkOiBpbXBvcnRfY29yZS56LmJvb2xlYW4oKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IEdlbmVyYXRlUmVzcG9uc2VDaHVua1NjaGVtYSA9IE1vZGVsUmVzcG9uc2VDaHVua1NjaGVtYS5leHRlbmQoe1xuICAvKiogQGRlcHJlY2F0ZWQgVGhlIGluZGV4IG9mIHRoZSBjYW5kaWRhdGUgdGhpcyBjaHVuayBiZWxvbmdzIHRvLiBBbHdheXMgMC4gKi9cbiAgaW5kZXg6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKVxufSk7XG5mdW5jdGlvbiBkZWZpbmVNb2RlbChyZWdpc3RyeSwgb3B0aW9ucywgcnVubmVyKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgbGFiZWwgPSBvcHRpb25zLmxhYmVsIHx8IG9wdGlvbnMubmFtZTtcbiAgY29uc3QgbWlkZGxld2FyZSA9IFtcbiAgICAuLi5vcHRpb25zLnVzZSB8fCBbXSxcbiAgICAoMCwgaW1wb3J0X21pZGRsZXdhcmUudmFsaWRhdGVTdXBwb3J0KShvcHRpb25zKVxuICBdO1xuICBpZiAoISgoX2EgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnN1cHBvcnRzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY29udGV4dCkpIG1pZGRsZXdhcmUucHVzaCgoMCwgaW1wb3J0X21pZGRsZXdhcmUuYXVnbWVudFdpdGhDb250ZXh0KSgpKTtcbiAgbWlkZGxld2FyZS5wdXNoKCgwLCBpbXBvcnRfbWlkZGxld2FyZS5jb25mb3JtT3V0cHV0KSgpKTtcbiAgY29uc3QgYWN0ID0gKDAsIGltcG9ydF9jb3JlLmRlZmluZUFjdGlvbikoXG4gICAgcmVnaXN0cnksXG4gICAge1xuICAgICAgYWN0aW9uVHlwZTogXCJtb2RlbFwiLFxuICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGxhYmVsLFxuICAgICAgaW5wdXRTY2hlbWE6IEdlbmVyYXRlUmVxdWVzdFNjaGVtYSxcbiAgICAgIG91dHB1dFNjaGVtYTogR2VuZXJhdGVSZXNwb25zZVNjaGVtYSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgY3VzdG9tT3B0aW9uczogb3B0aW9ucy5jb25maWdTY2hlbWEgPyAoMCwgaW1wb3J0X3NjaGVtYS50b0pzb25TY2hlbWEpKHsgc2NoZW1hOiBvcHRpb25zLmNvbmZpZ1NjaGVtYSB9KSA6IHZvaWQgMCxcbiAgICAgICAgICB2ZXJzaW9uczogb3B0aW9ucy52ZXJzaW9ucyxcbiAgICAgICAgICBzdXBwb3J0czogb3B0aW9ucy5zdXBwb3J0c1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlOiBtaWRkbGV3YXJlXG4gICAgfSxcbiAgICAoaW5wdXQpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZU1zID0gaW1wb3J0X25vZGVfcGVyZl9ob29rcy5wZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIHJldHVybiBydW5uZXIoaW5wdXQsICgwLCBpbXBvcnRfY29yZS5nZXRTdHJlYW1pbmdDYWxsYmFjaykoKSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc3QgdGltZWRSZXNwb25zZSA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHJlc3BvbnNlKSwge1xuICAgICAgICAgIGxhdGVuY3lNczogaW1wb3J0X25vZGVfcGVyZl9ob29rcy5wZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZU1zXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGltZWRSZXNwb25zZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgKTtcbiAgT2JqZWN0LmFzc2lnbihhY3QsIHtcbiAgICBfX2NvbmZpZ1NjaGVtYTogb3B0aW9ucy5jb25maWdTY2hlbWEgfHwgaW1wb3J0X2NvcmUuei51bmtub3duKClcbiAgfSk7XG4gIHJldHVybiBhY3Q7XG59XG5mdW5jdGlvbiBtb2RlbFJlZihvcHRpb25zKSB7XG4gIGNvbnN0IHJlZiA9IF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zKTtcbiAgcmVmLndpdGhDb25maWcgPSAoY2ZnKSA9PiB7XG4gICAgcmV0dXJuIG1vZGVsUmVmKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG9wdGlvbnMpLCB7XG4gICAgICBjb25maWc6IGNmZ1xuICAgIH0pKTtcbiAgfTtcbiAgcmVmLndpdGhWZXJzaW9uID0gKHZlcnNpb24pID0+IHtcbiAgICByZXR1cm4gbW9kZWxSZWYoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucyksIHtcbiAgICAgIHZlcnNpb25cbiAgICB9KSk7XG4gIH07XG4gIHJldHVybiByZWY7XG59XG5mdW5jdGlvbiBnZXRCYXNpY1VzYWdlU3RhdHMoaW5wdXQsIHJlc3BvbnNlKSB7XG4gIGNvbnN0IGlucHV0Q291bnRzID0gZ2V0UGFydENvdW50cyhpbnB1dC5mbGF0TWFwKChtZCkgPT4gbWQuY29udGVudCkpO1xuICBjb25zdCBvdXRwdXRDb3VudHMgPSBnZXRQYXJ0Q291bnRzKFxuICAgIEFycmF5LmlzQXJyYXkocmVzcG9uc2UpID8gcmVzcG9uc2UuZmxhdE1hcCgoYykgPT4gYy5tZXNzYWdlLmNvbnRlbnQpIDogcmVzcG9uc2UuY29udGVudFxuICApO1xuICByZXR1cm4ge1xuICAgIGlucHV0Q2hhcmFjdGVyczogaW5wdXRDb3VudHMuY2hhcmFjdGVycyxcbiAgICBpbnB1dEltYWdlczogaW5wdXRDb3VudHMuaW1hZ2VzLFxuICAgIGlucHV0VmlkZW9zOiBpbnB1dENvdW50cy52aWRlb3MsXG4gICAgaW5wdXRBdWRpb0ZpbGVzOiBpbnB1dENvdW50cy5hdWRpbyxcbiAgICBvdXRwdXRDaGFyYWN0ZXJzOiBvdXRwdXRDb3VudHMuY2hhcmFjdGVycyxcbiAgICBvdXRwdXRJbWFnZXM6IG91dHB1dENvdW50cy5pbWFnZXMsXG4gICAgb3V0cHV0VmlkZW9zOiBvdXRwdXRDb3VudHMudmlkZW9zLFxuICAgIG91dHB1dEF1ZGlvRmlsZXM6IG91dHB1dENvdW50cy5hdWRpb1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0UGFydENvdW50cyhwYXJ0cykge1xuICByZXR1cm4gcGFydHMucmVkdWNlKFxuICAgIChjb3VudHMsIHBhcnQpID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2ssIF9sLCBfbTtcbiAgICAgIGNvbnN0IGlzSW1hZ2UgPSAoKF9iID0gKF9hID0gcGFydC5tZWRpYSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNvbnRlbnRUeXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3RhcnRzV2l0aChcImltYWdlXCIpKSB8fCAoKF9kID0gKF9jID0gcGFydC5tZWRpYSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnVybCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnN0YXJ0c1dpdGgoXCJkYXRhOmltYWdlXCIpKTtcbiAgICAgIGNvbnN0IGlzVmlkZW8gPSAoKF9mID0gKF9lID0gcGFydC5tZWRpYSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLmNvbnRlbnRUeXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2Yuc3RhcnRzV2l0aChcInZpZGVvXCIpKSB8fCAoKF9oID0gKF9nID0gcGFydC5tZWRpYSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLnVybCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLnN0YXJ0c1dpdGgoXCJkYXRhOnZpZGVvXCIpKTtcbiAgICAgIGNvbnN0IGlzQXVkaW8gPSAoKF9qID0gKF9pID0gcGFydC5tZWRpYSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pLmNvbnRlbnRUeXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2ouc3RhcnRzV2l0aChcImF1ZGlvXCIpKSB8fCAoKF9sID0gKF9rID0gcGFydC5tZWRpYSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9rLnVybCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLnN0YXJ0c1dpdGgoXCJkYXRhOmF1ZGlvXCIpKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNoYXJhY3RlcnM6IGNvdW50cy5jaGFyYWN0ZXJzICsgKCgoX20gPSBwYXJ0LnRleHQpID09IG51bGwgPyB2b2lkIDAgOiBfbS5sZW5ndGgpIHx8IDApLFxuICAgICAgICBpbWFnZXM6IGNvdW50cy5pbWFnZXMgKyAoaXNJbWFnZSA/IDEgOiAwKSxcbiAgICAgICAgdmlkZW9zOiBjb3VudHMudmlkZW9zICsgKGlzVmlkZW8gPyAxIDogMCksXG4gICAgICAgIGF1ZGlvOiBjb3VudHMuYXVkaW8gKyAoaXNBdWRpbyA/IDEgOiAwKVxuICAgICAgfTtcbiAgICB9LFxuICAgIHsgY2hhcmFjdGVyczogMCwgaW1hZ2VzOiAwLCB2aWRlb3M6IDAsIGF1ZGlvOiAwIH1cbiAgKTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBDYW5kaWRhdGVFcnJvclNjaGVtYSxcbiAgQ2FuZGlkYXRlU2NoZW1hLFxuICBDdXN0b21QYXJ0U2NoZW1hLFxuICBEYXRhUGFydFNjaGVtYSxcbiAgR2VuZXJhdGVSZXF1ZXN0U2NoZW1hLFxuICBHZW5lcmF0ZVJlc3BvbnNlQ2h1bmtTY2hlbWEsXG4gIEdlbmVyYXRlUmVzcG9uc2VTY2hlbWEsXG4gIEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWEsXG4gIEdlbmVyYXRpb25Vc2FnZVNjaGVtYSxcbiAgTWVkaWFQYXJ0U2NoZW1hLFxuICBNZXNzYWdlU2NoZW1hLFxuICBNb2RlbEluZm9TY2hlbWEsXG4gIE1vZGVsUmVxdWVzdFNjaGVtYSxcbiAgTW9kZWxSZXNwb25zZUNodW5rU2NoZW1hLFxuICBNb2RlbFJlc3BvbnNlU2NoZW1hLFxuICBQYXJ0U2NoZW1hLFxuICBSb2xlU2NoZW1hLFxuICBUZXh0UGFydFNjaGVtYSxcbiAgVG9vbERlZmluaXRpb25TY2hlbWEsXG4gIFRvb2xSZXF1ZXN0UGFydFNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlUGFydFNjaGVtYSxcbiAgZGVmaW5lTW9kZWwsXG4gIGdldEJhc2ljVXNhZ2VTdGF0cyxcbiAgbW9kZWxSZWZcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kZWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model/middleware.js":
/*!********************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model/middleware.js ***!
  \********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar middleware_exports = {};\n__export(middleware_exports, {\n  CONTEXT_PREFACE: () => CONTEXT_PREFACE,\n  augmentWithContext: () => augmentWithContext,\n  conformOutput: () => conformOutput,\n  downloadRequestMedia: () => downloadRequestMedia,\n  simulateSystemPrompt: () => simulateSystemPrompt,\n  validateSupport: () => validateSupport\n});\nmodule.exports = __toCommonJS(middleware_exports);\nvar import_document = __webpack_require__(/*! ../document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nfunction downloadRequestMedia(options) {\n  return (req, next) => __async(this, null, function* () {\n    const { default: fetch } = yield Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/genkit\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/fetch-blob\"), __webpack_require__.e(\"vendor-chunks/formdata-polyfill\"), __webpack_require__.e(\"vendor-chunks/data-uri-to-buffer\"), __webpack_require__.e(\"vendor-chunks/node-domexception\")]).then(__webpack_require__.bind(__webpack_require__, /*! node-fetch */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/index.js\"));\n    const newReq = __spreadProps(__spreadValues({}, req), {\n      messages: yield Promise.all(\n        req.messages.map((message) => __async(this, null, function* () {\n          const content = yield Promise.all(\n            message.content.map((part) => __async(this, null, function* () {\n              if (!part.media || !part.media.url.startsWith(\"http\") || (options == null ? void 0 : options.filter) && !(options == null ? void 0 : options.filter(part))) {\n                return part;\n              }\n              const response = yield fetch(part.media.url, {\n                size: options == null ? void 0 : options.maxBytes\n              });\n              if (response.status !== 200)\n                throw new Error(\n                  `HTTP error downloading media '${part.media.url}': ${yield response.text()}`\n                );\n              const contentType = part.media.contentType || response.headers.get(\"content-type\") || \"\";\n              return {\n                media: {\n                  contentType,\n                  url: `data:${contentType};base64,${Buffer.from(\n                    yield response.arrayBuffer()\n                  ).toString(\"base64\")}`\n                }\n              };\n            }))\n          );\n          return __spreadProps(__spreadValues({}, message), {\n            content\n          });\n        }))\n      )\n    });\n    return next(newReq);\n  });\n}\nfunction validateSupport(options) {\n  const supports = options.supports || {};\n  return (req, next) => __async(this, null, function* () {\n    var _a, _b, _c, _d;\n    function invalid(message) {\n      throw new Error(\n        `Model '${options.name}' does not support ${message}. Request: ${JSON.stringify(\n          req,\n          null,\n          2\n        )}`\n      );\n    }\n    if (supports.media === false && req.messages.some((message) => message.content.some((part) => part.media)))\n      invalid(\"media, but media was provided\");\n    if (supports.tools === false && ((_a = req.tools) == null ? void 0 : _a.length))\n      invalid(\"tool use, but tools were provided\");\n    if (supports.multiturn === false && req.messages.length > 1)\n      invalid(`multiple messages, but ${req.messages.length} were provided`);\n    if (typeof supports.output !== \"undefined\" && ((_b = req.output) == null ? void 0 : _b.format) && !supports.output.includes((_c = req.output) == null ? void 0 : _c.format))\n      invalid(`requested output format '${(_d = req.output) == null ? void 0 : _d.format}'`);\n    return next();\n  });\n}\nfunction lastUserMessage(messages) {\n  for (let i = messages.length - 1; i >= 0; i--) {\n    if (messages[i].role === \"user\") {\n      return messages[i];\n    }\n  }\n}\nfunction conformOutput() {\n  return (req, next) => __async(this, null, function* () {\n    var _a, _b;\n    const lastMessage = lastUserMessage(req.messages);\n    if (!lastMessage) return next(req);\n    const outputPartIndex = lastMessage.content.findIndex(\n      (p) => {\n        var _a2;\n        return ((_a2 = p.metadata) == null ? void 0 : _a2.purpose) === \"output\";\n      }\n    );\n    const outputPart = outputPartIndex >= 0 ? lastMessage.content[outputPartIndex] : void 0;\n    if (!((_a = req.output) == null ? void 0 : _a.schema) || outputPart && !((_b = outputPart == null ? void 0 : outputPart.metadata) == null ? void 0 : _b.pending)) {\n      return next(req);\n    }\n    const instructions = `\n\nOutput should be in JSON format and conform to the following schema:\n\n\\`\\`\\`\n${JSON.stringify(req.output.schema)}\n\\`\\`\\`\n`;\n    if (outputPart) {\n      lastMessage.content[outputPartIndex] = __spreadProps(__spreadValues({}, outputPart), {\n        metadata: {\n          purpose: \"output\",\n          source: \"default\"\n        },\n        text: instructions\n      });\n    } else {\n      lastMessage == null ? void 0 : lastMessage.content.push({\n        text: instructions,\n        metadata: { purpose: \"output\", source: \"default\" }\n      });\n    }\n    return next(req);\n  });\n}\nfunction simulateSystemPrompt(options) {\n  const preface = (options == null ? void 0 : options.preface) || \"SYSTEM INSTRUCTIONS:\\n\";\n  const acknowledgement = (options == null ? void 0 : options.acknowledgement) || \"Understood.\";\n  return (req, next) => {\n    const messages = [...req.messages];\n    for (let i = 0; i < messages.length; i++) {\n      if (req.messages[i].role === \"system\") {\n        const systemPrompt = messages[i].content;\n        messages.splice(\n          i,\n          1,\n          { role: \"user\", content: [{ text: preface }, ...systemPrompt] },\n          { role: \"model\", content: [{ text: acknowledgement }] }\n        );\n        break;\n      }\n    }\n    return next(__spreadProps(__spreadValues({}, req), { messages }));\n  };\n}\nconst CONTEXT_PREFACE = \"\\n\\nUse the following information to complete your task:\\n\\n\";\nconst CONTEXT_ITEM_TEMPLATE = (d, index, options) => {\n  var _a, _b;\n  let out = \"- \";\n  if (options == null ? void 0 : options.citationKey) {\n    out += `[${d.metadata[options.citationKey]}]: `;\n  } else if ((options == null ? void 0 : options.citationKey) === void 0) {\n    out += `[${((_a = d.metadata) == null ? void 0 : _a[\"ref\"]) || ((_b = d.metadata) == null ? void 0 : _b[\"id\"]) || index}]: `;\n  }\n  out += d.text + \"\\n\";\n  return out;\n};\nfunction augmentWithContext(options) {\n  const preface = typeof (options == null ? void 0 : options.preface) === \"undefined\" ? CONTEXT_PREFACE : options.preface;\n  const itemTemplate = (options == null ? void 0 : options.itemTemplate) || CONTEXT_ITEM_TEMPLATE;\n  return (req, next) => {\n    var _a, _b, _c;\n    if (!((_a = req.docs) == null ? void 0 : _a.length)) return next(req);\n    const userMessage = lastUserMessage(req.messages);\n    if (!userMessage) return next(req);\n    const contextPartIndex = userMessage == null ? void 0 : userMessage.content.findIndex(\n      (p) => {\n        var _a2;\n        return ((_a2 = p.metadata) == null ? void 0 : _a2.purpose) === \"context\";\n      }\n    );\n    const contextPart = contextPartIndex >= 0 && userMessage.content[contextPartIndex];\n    if (contextPart && !((_b = contextPart.metadata) == null ? void 0 : _b.pending)) {\n      return next(req);\n    }\n    let out = `${preface || \"\"}`;\n    (_c = req.docs) == null ? void 0 : _c.forEach((d, i) => {\n      out += itemTemplate(new import_document.Document(d), i, options);\n    });\n    out += \"\\n\";\n    if (contextPartIndex >= 0) {\n      userMessage.content[contextPartIndex] = __spreadProps(__spreadValues({}, contextPart), {\n        text: out,\n        metadata: { purpose: \"context\" }\n      });\n    } else {\n      userMessage.content.push({ text: out, metadata: { purpose: \"context\" } });\n    }\n    return next(req);\n  };\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=middleware.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9tb2RlbC9taWRkbGV3YXJlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLDhCQUE4QjtBQUN2RztBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esc0JBQXNCLG1CQUFPLENBQUMsOEZBQWdCO0FBQzlDO0FBQ0E7QUFDQSxZQUFZLGlCQUFpQixRQUFRLG9mQUFvQjtBQUN6RCxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxtREFBbUQsZUFBZSxLQUFLLHNCQUFzQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGFBQWEsU0FBUztBQUNyRDtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhLHFCQUFxQixRQUFRLGFBQWE7QUFDekU7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHFCQUFxQjtBQUM3RDtBQUNBLDBDQUEwQywrQ0FBK0M7QUFDekY7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG9DQUFvQyxRQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxQkFBcUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEJBQTBCLGVBQWUsb0JBQW9CO0FBQ3pFLFlBQVksMkJBQTJCLHVCQUF1QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxVQUFVLFVBQVU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdDQUFnQztBQUMvQyxJQUFJO0FBQ0osZUFBZSw2R0FBNkc7QUFDNUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsY0FBYztBQUMvQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQSxvQkFBb0I7QUFDcEIsT0FBTztBQUNQLE1BQU07QUFDTixpQ0FBaUMsdUJBQXVCLHNCQUFzQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQU9MO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL21vZGVsL21pZGRsZXdhcmUuanM/NTlhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyA9IChhLCBiKSA9PiBfX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIC8vIElmIHRoZSBpbXBvcnRlciBpcyBpbiBub2RlIGNvbXBhdGliaWxpdHkgbW9kZSBvciB0aGlzIGlzIG5vdCBhbiBFU01cbiAgLy8gZmlsZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIENvbW1vbkpTIGZpbGUgdXNpbmcgYSBCYWJlbC1cbiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gXCJfX2VzTW9kdWxlXCIgaGFzIG5vdCBiZWVuIHNldCksIHRoZW4gc2V0XG4gIC8vIFwiZGVmYXVsdFwiIHRvIHRoZSBDb21tb25KUyBcIm1vZHVsZS5leHBvcnRzXCIgZm9yIG5vZGUgY29tcGF0aWJpbGl0eS5cbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQsIFwiZGVmYXVsdFwiLCB7IHZhbHVlOiBtb2QsIGVudW1lcmFibGU6IHRydWUgfSkgOiB0YXJnZXQsXG4gIG1vZFxuKSk7XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG52YXIgbWlkZGxld2FyZV9leHBvcnRzID0ge307XG5fX2V4cG9ydChtaWRkbGV3YXJlX2V4cG9ydHMsIHtcbiAgQ09OVEVYVF9QUkVGQUNFOiAoKSA9PiBDT05URVhUX1BSRUZBQ0UsXG4gIGF1Z21lbnRXaXRoQ29udGV4dDogKCkgPT4gYXVnbWVudFdpdGhDb250ZXh0LFxuICBjb25mb3JtT3V0cHV0OiAoKSA9PiBjb25mb3JtT3V0cHV0LFxuICBkb3dubG9hZFJlcXVlc3RNZWRpYTogKCkgPT4gZG93bmxvYWRSZXF1ZXN0TWVkaWEsXG4gIHNpbXVsYXRlU3lzdGVtUHJvbXB0OiAoKSA9PiBzaW11bGF0ZVN5c3RlbVByb21wdCxcbiAgdmFsaWRhdGVTdXBwb3J0OiAoKSA9PiB2YWxpZGF0ZVN1cHBvcnRcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMobWlkZGxld2FyZV9leHBvcnRzKTtcbnZhciBpbXBvcnRfZG9jdW1lbnQgPSByZXF1aXJlKFwiLi4vZG9jdW1lbnQuanNcIik7XG5mdW5jdGlvbiBkb3dubG9hZFJlcXVlc3RNZWRpYShvcHRpb25zKSB7XG4gIHJldHVybiAocmVxLCBuZXh0KSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgeyBkZWZhdWx0OiBmZXRjaCB9ID0geWllbGQgaW1wb3J0KFwibm9kZS1mZXRjaFwiKTtcbiAgICBjb25zdCBuZXdSZXEgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCByZXEpLCB7XG4gICAgICBtZXNzYWdlczogeWllbGQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJlcS5tZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0geWllbGQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQubWFwKChwYXJ0KSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgIGlmICghcGFydC5tZWRpYSB8fCAhcGFydC5tZWRpYS51cmwuc3RhcnRzV2l0aChcImh0dHBcIikgfHwgKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZmlsdGVyKSAmJiAhKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZmlsdGVyKHBhcnQpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgZmV0Y2gocGFydC5tZWRpYS51cmwsIHtcbiAgICAgICAgICAgICAgICBzaXplOiBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLm1heEJ5dGVzXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgYEhUVFAgZXJyb3IgZG93bmxvYWRpbmcgbWVkaWEgJyR7cGFydC5tZWRpYS51cmx9JzogJHt5aWVsZCByZXNwb25zZS50ZXh0KCl9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcGFydC5tZWRpYS5jb250ZW50VHlwZSB8fCByZXNwb25zZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKSB8fCBcIlwiO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lZGlhOiB7XG4gICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgIHVybDogYGRhdGE6JHtjb250ZW50VHlwZX07YmFzZTY0LCR7QnVmZmVyLmZyb20oXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJlc3BvbnNlLmFycmF5QnVmZmVyKClcbiAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoXCJiYXNlNjRcIil9YFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG1lc3NhZ2UpLCB7XG4gICAgICAgICAgICBjb250ZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKVxuICAgICAgKVxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0KG5ld1JlcSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVTdXBwb3J0KG9wdGlvbnMpIHtcbiAgY29uc3Qgc3VwcG9ydHMgPSBvcHRpb25zLnN1cHBvcnRzIHx8IHt9O1xuICByZXR1cm4gKHJlcSwgbmV4dCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBmdW5jdGlvbiBpbnZhbGlkKG1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE1vZGVsICcke29wdGlvbnMubmFtZX0nIGRvZXMgbm90IHN1cHBvcnQgJHttZXNzYWdlfS4gUmVxdWVzdDogJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICByZXEsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICAyXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHN1cHBvcnRzLm1lZGlhID09PSBmYWxzZSAmJiByZXEubWVzc2FnZXMuc29tZSgobWVzc2FnZSkgPT4gbWVzc2FnZS5jb250ZW50LnNvbWUoKHBhcnQpID0+IHBhcnQubWVkaWEpKSlcbiAgICAgIGludmFsaWQoXCJtZWRpYSwgYnV0IG1lZGlhIHdhcyBwcm92aWRlZFwiKTtcbiAgICBpZiAoc3VwcG9ydHMudG9vbHMgPT09IGZhbHNlICYmICgoX2EgPSByZXEudG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5sZW5ndGgpKVxuICAgICAgaW52YWxpZChcInRvb2wgdXNlLCBidXQgdG9vbHMgd2VyZSBwcm92aWRlZFwiKTtcbiAgICBpZiAoc3VwcG9ydHMubXVsdGl0dXJuID09PSBmYWxzZSAmJiByZXEubWVzc2FnZXMubGVuZ3RoID4gMSlcbiAgICAgIGludmFsaWQoYG11bHRpcGxlIG1lc3NhZ2VzLCBidXQgJHtyZXEubWVzc2FnZXMubGVuZ3RofSB3ZXJlIHByb3ZpZGVkYCk7XG4gICAgaWYgKHR5cGVvZiBzdXBwb3J0cy5vdXRwdXQgIT09IFwidW5kZWZpbmVkXCIgJiYgKChfYiA9IHJlcS5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5mb3JtYXQpICYmICFzdXBwb3J0cy5vdXRwdXQuaW5jbHVkZXMoKF9jID0gcmVxLm91dHB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmZvcm1hdCkpXG4gICAgICBpbnZhbGlkKGByZXF1ZXN0ZWQgb3V0cHV0IGZvcm1hdCAnJHsoX2QgPSByZXEub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2QuZm9ybWF0fSdgKTtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxhc3RVc2VyTWVzc2FnZShtZXNzYWdlcykge1xuICBmb3IgKGxldCBpID0gbWVzc2FnZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAobWVzc2FnZXNbaV0ucm9sZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlc1tpXTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNvbmZvcm1PdXRwdXQoKSB7XG4gIHJldHVybiAocmVxLCBuZXh0KSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGxhc3RVc2VyTWVzc2FnZShyZXEubWVzc2FnZXMpO1xuICAgIGlmICghbGFzdE1lc3NhZ2UpIHJldHVybiBuZXh0KHJlcSk7XG4gICAgY29uc3Qgb3V0cHV0UGFydEluZGV4ID0gbGFzdE1lc3NhZ2UuY29udGVudC5maW5kSW5kZXgoXG4gICAgICAocCkgPT4ge1xuICAgICAgICB2YXIgX2EyO1xuICAgICAgICByZXR1cm4gKChfYTIgPSBwLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnB1cnBvc2UpID09PSBcIm91dHB1dFwiO1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3Qgb3V0cHV0UGFydCA9IG91dHB1dFBhcnRJbmRleCA+PSAwID8gbGFzdE1lc3NhZ2UuY29udGVudFtvdXRwdXRQYXJ0SW5kZXhdIDogdm9pZCAwO1xuICAgIGlmICghKChfYSA9IHJlcS5vdXRwdXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zY2hlbWEpIHx8IG91dHB1dFBhcnQgJiYgISgoX2IgPSBvdXRwdXRQYXJ0ID09IG51bGwgPyB2b2lkIDAgOiBvdXRwdXRQYXJ0Lm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2IucGVuZGluZykpIHtcbiAgICAgIHJldHVybiBuZXh0KHJlcSk7XG4gICAgfVxuICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGBcblxuT3V0cHV0IHNob3VsZCBiZSBpbiBKU09OIGZvcm1hdCBhbmQgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIHNjaGVtYTpcblxuXFxgXFxgXFxgXG4ke0pTT04uc3RyaW5naWZ5KHJlcS5vdXRwdXQuc2NoZW1hKX1cblxcYFxcYFxcYFxuYDtcbiAgICBpZiAob3V0cHV0UGFydCkge1xuICAgICAgbGFzdE1lc3NhZ2UuY29udGVudFtvdXRwdXRQYXJ0SW5kZXhdID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgb3V0cHV0UGFydCksIHtcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBwdXJwb3NlOiBcIm91dHB1dFwiLFxuICAgICAgICAgIHNvdXJjZTogXCJkZWZhdWx0XCJcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dDogaW5zdHJ1Y3Rpb25zXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdE1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IGxhc3RNZXNzYWdlLmNvbnRlbnQucHVzaCh7XG4gICAgICAgIHRleHQ6IGluc3RydWN0aW9ucyxcbiAgICAgICAgbWV0YWRhdGE6IHsgcHVycG9zZTogXCJvdXRwdXRcIiwgc291cmNlOiBcImRlZmF1bHRcIiB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQocmVxKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzaW11bGF0ZVN5c3RlbVByb21wdChvcHRpb25zKSB7XG4gIGNvbnN0IHByZWZhY2UgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5wcmVmYWNlKSB8fCBcIlNZU1RFTSBJTlNUUlVDVElPTlM6XFxuXCI7XG4gIGNvbnN0IGFja25vd2xlZGdlbWVudCA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmFja25vd2xlZGdlbWVudCkgfHwgXCJVbmRlcnN0b29kLlwiO1xuICByZXR1cm4gKHJlcSwgbmV4dCkgPT4ge1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gWy4uLnJlcS5tZXNzYWdlc107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlcS5tZXNzYWdlc1tpXS5yb2xlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IG1lc3NhZ2VzW2ldLmNvbnRlbnQ7XG4gICAgICAgIG1lc3NhZ2VzLnNwbGljZShcbiAgICAgICAgICBpLFxuICAgICAgICAgIDEsXG4gICAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogW3sgdGV4dDogcHJlZmFjZSB9LCAuLi5zeXN0ZW1Qcm9tcHRdIH0sXG4gICAgICAgICAgeyByb2xlOiBcIm1vZGVsXCIsIGNvbnRlbnQ6IFt7IHRleHQ6IGFja25vd2xlZGdlbWVudCB9XSB9XG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV4dChfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCByZXEpLCB7IG1lc3NhZ2VzIH0pKTtcbiAgfTtcbn1cbmNvbnN0IENPTlRFWFRfUFJFRkFDRSA9IFwiXFxuXFxuVXNlIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb24gdG8gY29tcGxldGUgeW91ciB0YXNrOlxcblxcblwiO1xuY29uc3QgQ09OVEVYVF9JVEVNX1RFTVBMQVRFID0gKGQsIGluZGV4LCBvcHRpb25zKSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGxldCBvdXQgPSBcIi0gXCI7XG4gIGlmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmNpdGF0aW9uS2V5KSB7XG4gICAgb3V0ICs9IGBbJHtkLm1ldGFkYXRhW29wdGlvbnMuY2l0YXRpb25LZXldfV06IGA7XG4gIH0gZWxzZSBpZiAoKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuY2l0YXRpb25LZXkpID09PSB2b2lkIDApIHtcbiAgICBvdXQgKz0gYFskeygoX2EgPSBkLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2FbXCJyZWZcIl0pIHx8ICgoX2IgPSBkLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2JbXCJpZFwiXSkgfHwgaW5kZXh9XTogYDtcbiAgfVxuICBvdXQgKz0gZC50ZXh0ICsgXCJcXG5cIjtcbiAgcmV0dXJuIG91dDtcbn07XG5mdW5jdGlvbiBhdWdtZW50V2l0aENvbnRleHQob3B0aW9ucykge1xuICBjb25zdCBwcmVmYWNlID0gdHlwZW9mIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnByZWZhY2UpID09PSBcInVuZGVmaW5lZFwiID8gQ09OVEVYVF9QUkVGQUNFIDogb3B0aW9ucy5wcmVmYWNlO1xuICBjb25zdCBpdGVtVGVtcGxhdGUgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pdGVtVGVtcGxhdGUpIHx8IENPTlRFWFRfSVRFTV9URU1QTEFURTtcbiAgcmV0dXJuIChyZXEsIG5leHQpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBpZiAoISgoX2EgPSByZXEuZG9jcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkpIHJldHVybiBuZXh0KHJlcSk7XG4gICAgY29uc3QgdXNlck1lc3NhZ2UgPSBsYXN0VXNlck1lc3NhZ2UocmVxLm1lc3NhZ2VzKTtcbiAgICBpZiAoIXVzZXJNZXNzYWdlKSByZXR1cm4gbmV4dChyZXEpO1xuICAgIGNvbnN0IGNvbnRleHRQYXJ0SW5kZXggPSB1c2VyTWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogdXNlck1lc3NhZ2UuY29udGVudC5maW5kSW5kZXgoXG4gICAgICAocCkgPT4ge1xuICAgICAgICB2YXIgX2EyO1xuICAgICAgICByZXR1cm4gKChfYTIgPSBwLm1ldGFkYXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnB1cnBvc2UpID09PSBcImNvbnRleHRcIjtcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IGNvbnRleHRQYXJ0ID0gY29udGV4dFBhcnRJbmRleCA+PSAwICYmIHVzZXJNZXNzYWdlLmNvbnRlbnRbY29udGV4dFBhcnRJbmRleF07XG4gICAgaWYgKGNvbnRleHRQYXJ0ICYmICEoKF9iID0gY29udGV4dFBhcnQubWV0YWRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wZW5kaW5nKSkge1xuICAgICAgcmV0dXJuIG5leHQocmVxKTtcbiAgICB9XG4gICAgbGV0IG91dCA9IGAke3ByZWZhY2UgfHwgXCJcIn1gO1xuICAgIChfYyA9IHJlcS5kb2NzKSA9PSBudWxsID8gdm9pZCAwIDogX2MuZm9yRWFjaCgoZCwgaSkgPT4ge1xuICAgICAgb3V0ICs9IGl0ZW1UZW1wbGF0ZShuZXcgaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50KGQpLCBpLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgICBvdXQgKz0gXCJcXG5cIjtcbiAgICBpZiAoY29udGV4dFBhcnRJbmRleCA+PSAwKSB7XG4gICAgICB1c2VyTWVzc2FnZS5jb250ZW50W2NvbnRleHRQYXJ0SW5kZXhdID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29udGV4dFBhcnQpLCB7XG4gICAgICAgIHRleHQ6IG91dCxcbiAgICAgICAgbWV0YWRhdGE6IHsgcHVycG9zZTogXCJjb250ZXh0XCIgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXJNZXNzYWdlLmNvbnRlbnQucHVzaCh7IHRleHQ6IG91dCwgbWV0YWRhdGE6IHsgcHVycG9zZTogXCJjb250ZXh0XCIgfSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQocmVxKTtcbiAgfTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBDT05URVhUX1BSRUZBQ0UsXG4gIGF1Z21lbnRXaXRoQ29udGV4dCxcbiAgY29uZm9ybU91dHB1dCxcbiAgZG93bmxvYWRSZXF1ZXN0TWVkaWEsXG4gIHNpbXVsYXRlU3lzdGVtUHJvbXB0LFxuICB2YWxpZGF0ZVN1cHBvcnRcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlkZGxld2FyZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model/middleware.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/prompt.js":
/*!**********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/prompt.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar prompt_exports = {};\n__export(prompt_exports, {\n  definePrompt: () => definePrompt,\n  isPrompt: () => isPrompt,\n  renderPrompt: () => renderPrompt\n});\nmodule.exports = __toCommonJS(prompt_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nfunction isPrompt(arg) {\n  var _a, _b;\n  return typeof arg === \"function\" && ((_b = (_a = arg.__action) == null ? void 0 : _a.metadata) == null ? void 0 : _b.type) === \"prompt\";\n}\nfunction definePrompt(registry, config, fn) {\n  const a = (0, import_core.defineAction)(\n    registry,\n    __spreadProps(__spreadValues({}, config), {\n      actionType: \"prompt\",\n      metadata: __spreadProps(__spreadValues({}, config.metadata || { prompt: {} }), { type: \"prompt\" })\n    }),\n    fn\n  );\n  return a;\n}\nfunction renderPrompt(registry, params) {\n  return __async(this, null, function* () {\n    var _a, _b;\n    let prompt;\n    if (typeof params.prompt === \"string\") {\n      prompt = yield registry.lookupAction(`/prompt/${params.prompt}`);\n    } else {\n      prompt = params.prompt;\n    }\n    const rendered = yield prompt(\n      params.input\n    );\n    return {\n      model: params.model,\n      config: __spreadValues(__spreadValues({}, rendered.config || {}), params.config),\n      messages: rendered.messages.slice(0, rendered.messages.length - 1),\n      prompt: rendered.messages[rendered.messages.length - 1].content,\n      docs: params.docs,\n      output: {\n        format: (_a = rendered.output) == null ? void 0 : _a.format,\n        schema: (_b = rendered.output) == null ? void 0 : _b.schema\n      },\n      tools: rendered.tools || []\n    };\n  });\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=prompt.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9wcm9tcHQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLDBFQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBLCtDQUErQyx1QkFBdUIsWUFBWSxLQUFLLGdCQUFnQjtBQUN2RyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGNBQWM7QUFDcEUsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHVCQUF1QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTSxDQUlMO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL3Byb21wdC5qcz84ZGRmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyA9IChhLCBiKSA9PiBfX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIF9fYXN5bmMgPSAoX190aGlzLCBfX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdmFyIGZ1bGZpbGxlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgcmVqZWN0ZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLnRocm93KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzdGVwID0gKHgpID0+IHguZG9uZSA/IHJlc29sdmUoeC52YWx1ZSkgOiBQcm9taXNlLnJlc29sdmUoeC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTtcbiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkoX190aGlzLCBfX2FyZ3VtZW50cykpLm5leHQoKSk7XG4gIH0pO1xufTtcbnZhciBwcm9tcHRfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQocHJvbXB0X2V4cG9ydHMsIHtcbiAgZGVmaW5lUHJvbXB0OiAoKSA9PiBkZWZpbmVQcm9tcHQsXG4gIGlzUHJvbXB0OiAoKSA9PiBpc1Byb21wdCxcbiAgcmVuZGVyUHJvbXB0OiAoKSA9PiByZW5kZXJQcm9tcHRcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMocHJvbXB0X2V4cG9ydHMpO1xudmFyIGltcG9ydF9jb3JlID0gcmVxdWlyZShcIkBnZW5raXQtYWkvY29yZVwiKTtcbmZ1bmN0aW9uIGlzUHJvbXB0KGFyZykge1xuICB2YXIgX2EsIF9iO1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gXCJmdW5jdGlvblwiICYmICgoX2IgPSAoX2EgPSBhcmcuX19hY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS5tZXRhZGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnR5cGUpID09PSBcInByb21wdFwiO1xufVxuZnVuY3Rpb24gZGVmaW5lUHJvbXB0KHJlZ2lzdHJ5LCBjb25maWcsIGZuKSB7XG4gIGNvbnN0IGEgPSAoMCwgaW1wb3J0X2NvcmUuZGVmaW5lQWN0aW9uKShcbiAgICByZWdpc3RyeSxcbiAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjb25maWcpLCB7XG4gICAgICBhY3Rpb25UeXBlOiBcInByb21wdFwiLFxuICAgICAgbWV0YWRhdGE6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGNvbmZpZy5tZXRhZGF0YSB8fCB7IHByb21wdDoge30gfSksIHsgdHlwZTogXCJwcm9tcHRcIiB9KVxuICAgIH0pLFxuICAgIGZuXG4gICk7XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gcmVuZGVyUHJvbXB0KHJlZ2lzdHJ5LCBwYXJhbXMpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGxldCBwcm9tcHQ7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMucHJvbXB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBwcm9tcHQgPSB5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oYC9wcm9tcHQvJHtwYXJhbXMucHJvbXB0fWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9tcHQgPSBwYXJhbXMucHJvbXB0O1xuICAgIH1cbiAgICBjb25zdCByZW5kZXJlZCA9IHlpZWxkIHByb21wdChcbiAgICAgIHBhcmFtcy5pbnB1dFxuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZGVsOiBwYXJhbXMubW9kZWwsXG4gICAgICBjb25maWc6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCByZW5kZXJlZC5jb25maWcgfHwge30pLCBwYXJhbXMuY29uZmlnKSxcbiAgICAgIG1lc3NhZ2VzOiByZW5kZXJlZC5tZXNzYWdlcy5zbGljZSgwLCByZW5kZXJlZC5tZXNzYWdlcy5sZW5ndGggLSAxKSxcbiAgICAgIHByb21wdDogcmVuZGVyZWQubWVzc2FnZXNbcmVuZGVyZWQubWVzc2FnZXMubGVuZ3RoIC0gMV0uY29udGVudCxcbiAgICAgIGRvY3M6IHBhcmFtcy5kb2NzLFxuICAgICAgb3V0cHV0OiB7XG4gICAgICAgIGZvcm1hdDogKF9hID0gcmVuZGVyZWQub3V0cHV0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZm9ybWF0LFxuICAgICAgICBzY2hlbWE6IChfYiA9IHJlbmRlcmVkLm91dHB1dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNjaGVtYVxuICAgICAgfSxcbiAgICAgIHRvb2xzOiByZW5kZXJlZC50b29scyB8fCBbXVxuICAgIH07XG4gIH0pO1xufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlZmluZVByb21wdCxcbiAgaXNQcm9tcHQsXG4gIHJlbmRlclByb21wdFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9tcHQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/prompt.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/reranker.js":
/*!************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/reranker.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar reranker_exports = {};\n__export(reranker_exports, {\n  CommonRerankerOptionsSchema: () => CommonRerankerOptionsSchema,\n  RankedDocument: () => RankedDocument,\n  RankedDocumentDataSchema: () => RankedDocumentDataSchema,\n  RerankerInfoSchema: () => RerankerInfoSchema,\n  defineReranker: () => defineReranker,\n  rerank: () => rerank,\n  rerankerRef: () => rerankerRef\n});\nmodule.exports = __toCommonJS(reranker_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_document = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nvar import_retriever = __webpack_require__(/*! ./retriever.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js\");\nconst RankedDocumentDataSchema = import_core.z.object({\n  content: import_core.z.array(import_document.PartSchema),\n  metadata: import_core.z.object({\n    score: import_core.z.number()\n    // Enforces that 'score' must be a number\n  }).passthrough()\n  // Allows other properties in 'metadata' with any type\n});\nclass RankedDocument extends import_retriever.Document {\n  constructor(data) {\n    super(data);\n    this.content = data.content;\n    this.metadata = data.metadata;\n  }\n  /**\n   * Returns the score of the document.\n   * @returns The score of the document.\n   */\n  score() {\n    return this.metadata.score;\n  }\n}\nconst RerankerRequestSchema = import_core.z.object({\n  query: import_retriever.DocumentDataSchema,\n  documents: import_core.z.array(import_retriever.DocumentDataSchema),\n  options: import_core.z.any().optional()\n});\nconst RerankerResponseSchema = import_core.z.object({\n  documents: import_core.z.array(RankedDocumentDataSchema)\n});\nconst RerankerInfoSchema = import_core.z.object({\n  label: import_core.z.string().optional(),\n  /** Supported model capabilities. */\n  supports: import_core.z.object({\n    /** Model can process media as part of the prompt (multimodal input). */\n    media: import_core.z.boolean().optional()\n  }).optional()\n});\nfunction rerankerWithMetadata(reranker, configSchema) {\n  const withMeta = reranker;\n  withMeta.__configSchema = configSchema;\n  return withMeta;\n}\nfunction defineReranker(registry, options, runner) {\n  const reranker = (0, import_core.defineAction)(\n    registry,\n    {\n      actionType: \"reranker\",\n      name: options.name,\n      inputSchema: options.configSchema ? RerankerRequestSchema.extend({\n        options: options.configSchema.optional()\n      }) : RerankerRequestSchema,\n      outputSchema: RerankerResponseSchema,\n      metadata: {\n        type: \"reranker\",\n        info: options.info\n      }\n    },\n    (i) => runner(\n      new import_retriever.Document(i.query),\n      i.documents.map((d) => new import_retriever.Document(d)),\n      i.options\n    )\n  );\n  const rwm = rerankerWithMetadata(\n    reranker,\n    options.configSchema\n  );\n  return rwm;\n}\nfunction rerank(registry, params) {\n  return __async(this, null, function* () {\n    let reranker;\n    if (typeof params.reranker === \"string\") {\n      reranker = yield registry.lookupAction(`/reranker/${params.reranker}`);\n    } else if (Object.hasOwnProperty.call(params.reranker, \"info\")) {\n      reranker = yield registry.lookupAction(`/reranker/${params.reranker.name}`);\n    } else {\n      reranker = params.reranker;\n    }\n    if (!reranker) {\n      throw new Error(\"Unable to resolve the reranker\");\n    }\n    const response = yield reranker({\n      query: typeof params.query === \"string\" ? import_retriever.Document.fromText(params.query) : params.query,\n      documents: params.documents,\n      options: params.options\n    });\n    return response.documents.map((d) => new RankedDocument(d));\n  });\n}\nconst CommonRerankerOptionsSchema = import_core.z.object({\n  k: import_core.z.number().describe(\"Number of documents to rerank\").optional()\n});\nfunction rerankerRef(options) {\n  return __spreadValues({}, options);\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=reranker.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9yZXJhbmtlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxrQkFBa0IsbUJBQU8sQ0FBQywwRUFBaUI7QUFDM0Msc0JBQXNCLG1CQUFPLENBQUMsNkZBQWU7QUFDN0MsdUJBQXVCLG1CQUFPLENBQUMsK0ZBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGdCQUFnQjtBQUMxRSxNQUFNO0FBQ04sMERBQTBELHFCQUFxQjtBQUMvRSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0EsTUFBTSxDQVFMO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL3JlcmFua2VyLmpzP2I2NzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIF9fYXN5bmMgPSAoX190aGlzLCBfX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdmFyIGZ1bGZpbGxlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgcmVqZWN0ZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLnRocm93KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzdGVwID0gKHgpID0+IHguZG9uZSA/IHJlc29sdmUoeC52YWx1ZSkgOiBQcm9taXNlLnJlc29sdmUoeC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTtcbiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkoX190aGlzLCBfX2FyZ3VtZW50cykpLm5leHQoKSk7XG4gIH0pO1xufTtcbnZhciByZXJhbmtlcl9leHBvcnRzID0ge307XG5fX2V4cG9ydChyZXJhbmtlcl9leHBvcnRzLCB7XG4gIENvbW1vblJlcmFua2VyT3B0aW9uc1NjaGVtYTogKCkgPT4gQ29tbW9uUmVyYW5rZXJPcHRpb25zU2NoZW1hLFxuICBSYW5rZWREb2N1bWVudDogKCkgPT4gUmFua2VkRG9jdW1lbnQsXG4gIFJhbmtlZERvY3VtZW50RGF0YVNjaGVtYTogKCkgPT4gUmFua2VkRG9jdW1lbnREYXRhU2NoZW1hLFxuICBSZXJhbmtlckluZm9TY2hlbWE6ICgpID0+IFJlcmFua2VySW5mb1NjaGVtYSxcbiAgZGVmaW5lUmVyYW5rZXI6ICgpID0+IGRlZmluZVJlcmFua2VyLFxuICByZXJhbms6ICgpID0+IHJlcmFuayxcbiAgcmVyYW5rZXJSZWY6ICgpID0+IHJlcmFua2VyUmVmXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHJlcmFua2VyX2V4cG9ydHMpO1xudmFyIGltcG9ydF9jb3JlID0gcmVxdWlyZShcIkBnZW5raXQtYWkvY29yZVwiKTtcbnZhciBpbXBvcnRfZG9jdW1lbnQgPSByZXF1aXJlKFwiLi9kb2N1bWVudC5qc1wiKTtcbnZhciBpbXBvcnRfcmV0cmlldmVyID0gcmVxdWlyZShcIi4vcmV0cmlldmVyLmpzXCIpO1xuY29uc3QgUmFua2VkRG9jdW1lbnREYXRhU2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBjb250ZW50OiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9kb2N1bWVudC5QYXJ0U2NoZW1hKSxcbiAgbWV0YWRhdGE6IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgICBzY29yZTogaW1wb3J0X2NvcmUuei5udW1iZXIoKVxuICAgIC8vIEVuZm9yY2VzIHRoYXQgJ3Njb3JlJyBtdXN0IGJlIGEgbnVtYmVyXG4gIH0pLnBhc3N0aHJvdWdoKClcbiAgLy8gQWxsb3dzIG90aGVyIHByb3BlcnRpZXMgaW4gJ21ldGFkYXRhJyB3aXRoIGFueSB0eXBlXG59KTtcbmNsYXNzIFJhbmtlZERvY3VtZW50IGV4dGVuZHMgaW1wb3J0X3JldHJpZXZlci5Eb2N1bWVudCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcihkYXRhKTtcbiAgICB0aGlzLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQ7XG4gICAgdGhpcy5tZXRhZGF0YSA9IGRhdGEubWV0YWRhdGE7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNjb3JlIG9mIHRoZSBkb2N1bWVudC5cbiAgICogQHJldHVybnMgVGhlIHNjb3JlIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIHNjb3JlKCkge1xuICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnNjb3JlO1xuICB9XG59XG5jb25zdCBSZXJhbmtlclJlcXVlc3RTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIHF1ZXJ5OiBpbXBvcnRfcmV0cmlldmVyLkRvY3VtZW50RGF0YVNjaGVtYSxcbiAgZG9jdW1lbnRzOiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9yZXRyaWV2ZXIuRG9jdW1lbnREYXRhU2NoZW1hKSxcbiAgb3B0aW9uczogaW1wb3J0X2NvcmUuei5hbnkoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IFJlcmFua2VyUmVzcG9uc2VTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGRvY3VtZW50czogaW1wb3J0X2NvcmUuei5hcnJheShSYW5rZWREb2N1bWVudERhdGFTY2hlbWEpXG59KTtcbmNvbnN0IFJlcmFua2VySW5mb1NjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgbGFiZWw6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqIFN1cHBvcnRlZCBtb2RlbCBjYXBhYmlsaXRpZXMuICovXG4gIHN1cHBvcnRzOiBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gICAgLyoqIE1vZGVsIGNhbiBwcm9jZXNzIG1lZGlhIGFzIHBhcnQgb2YgdGhlIHByb21wdCAobXVsdGltb2RhbCBpbnB1dCkuICovXG4gICAgbWVkaWE6IGltcG9ydF9jb3JlLnouYm9vbGVhbigpLm9wdGlvbmFsKClcbiAgfSkub3B0aW9uYWwoKVxufSk7XG5mdW5jdGlvbiByZXJhbmtlcldpdGhNZXRhZGF0YShyZXJhbmtlciwgY29uZmlnU2NoZW1hKSB7XG4gIGNvbnN0IHdpdGhNZXRhID0gcmVyYW5rZXI7XG4gIHdpdGhNZXRhLl9fY29uZmlnU2NoZW1hID0gY29uZmlnU2NoZW1hO1xuICByZXR1cm4gd2l0aE1ldGE7XG59XG5mdW5jdGlvbiBkZWZpbmVSZXJhbmtlcihyZWdpc3RyeSwgb3B0aW9ucywgcnVubmVyKSB7XG4gIGNvbnN0IHJlcmFua2VyID0gKDAsIGltcG9ydF9jb3JlLmRlZmluZUFjdGlvbikoXG4gICAgcmVnaXN0cnksXG4gICAge1xuICAgICAgYWN0aW9uVHlwZTogXCJyZXJhbmtlclwiLFxuICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgaW5wdXRTY2hlbWE6IG9wdGlvbnMuY29uZmlnU2NoZW1hID8gUmVyYW5rZXJSZXF1ZXN0U2NoZW1hLmV4dGVuZCh7XG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMuY29uZmlnU2NoZW1hLm9wdGlvbmFsKClcbiAgICAgIH0pIDogUmVyYW5rZXJSZXF1ZXN0U2NoZW1hLFxuICAgICAgb3V0cHV0U2NoZW1hOiBSZXJhbmtlclJlc3BvbnNlU2NoZW1hLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgdHlwZTogXCJyZXJhbmtlclwiLFxuICAgICAgICBpbmZvOiBvcHRpb25zLmluZm9cbiAgICAgIH1cbiAgICB9LFxuICAgIChpKSA9PiBydW5uZXIoXG4gICAgICBuZXcgaW1wb3J0X3JldHJpZXZlci5Eb2N1bWVudChpLnF1ZXJ5KSxcbiAgICAgIGkuZG9jdW1lbnRzLm1hcCgoZCkgPT4gbmV3IGltcG9ydF9yZXRyaWV2ZXIuRG9jdW1lbnQoZCkpLFxuICAgICAgaS5vcHRpb25zXG4gICAgKVxuICApO1xuICBjb25zdCByd20gPSByZXJhbmtlcldpdGhNZXRhZGF0YShcbiAgICByZXJhbmtlcixcbiAgICBvcHRpb25zLmNvbmZpZ1NjaGVtYVxuICApO1xuICByZXR1cm4gcndtO1xufVxuZnVuY3Rpb24gcmVyYW5rKHJlZ2lzdHJ5LCBwYXJhbXMpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBsZXQgcmVyYW5rZXI7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMucmVyYW5rZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJlcmFua2VyID0geWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKGAvcmVyYW5rZXIvJHtwYXJhbXMucmVyYW5rZXJ9YCk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChwYXJhbXMucmVyYW5rZXIsIFwiaW5mb1wiKSkge1xuICAgICAgcmVyYW5rZXIgPSB5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oYC9yZXJhbmtlci8ke3BhcmFtcy5yZXJhbmtlci5uYW1lfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXJhbmtlciA9IHBhcmFtcy5yZXJhbmtlcjtcbiAgICB9XG4gICAgaWYgKCFyZXJhbmtlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHJlc29sdmUgdGhlIHJlcmFua2VyXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHJlcmFua2VyKHtcbiAgICAgIHF1ZXJ5OiB0eXBlb2YgcGFyYW1zLnF1ZXJ5ID09PSBcInN0cmluZ1wiID8gaW1wb3J0X3JldHJpZXZlci5Eb2N1bWVudC5mcm9tVGV4dChwYXJhbXMucXVlcnkpIDogcGFyYW1zLnF1ZXJ5LFxuICAgICAgZG9jdW1lbnRzOiBwYXJhbXMuZG9jdW1lbnRzLFxuICAgICAgb3B0aW9uczogcGFyYW1zLm9wdGlvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZG9jdW1lbnRzLm1hcCgoZCkgPT4gbmV3IFJhbmtlZERvY3VtZW50KGQpKTtcbiAgfSk7XG59XG5jb25zdCBDb21tb25SZXJhbmtlck9wdGlvbnNTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGs6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkuZGVzY3JpYmUoXCJOdW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJlcmFua1wiKS5vcHRpb25hbCgpXG59KTtcbmZ1bmN0aW9uIHJlcmFua2VyUmVmKG9wdGlvbnMpIHtcbiAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zKTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBDb21tb25SZXJhbmtlck9wdGlvbnNTY2hlbWEsXG4gIFJhbmtlZERvY3VtZW50LFxuICBSYW5rZWREb2N1bWVudERhdGFTY2hlbWEsXG4gIFJlcmFua2VySW5mb1NjaGVtYSxcbiAgZGVmaW5lUmVyYW5rZXIsXG4gIHJlcmFuayxcbiAgcmVyYW5rZXJSZWZcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVyYW5rZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/reranker.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js":
/*!*************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar retriever_exports = {};\n__export(retriever_exports, {\n  CommonRetrieverOptionsSchema: () => CommonRetrieverOptionsSchema,\n  Document: () => import_document2.Document,\n  DocumentDataSchema: () => import_document2.DocumentDataSchema,\n  IndexerInfoSchema: () => IndexerInfoSchema,\n  RetrieverInfoSchema: () => RetrieverInfoSchema,\n  defineIndexer: () => defineIndexer,\n  defineRetriever: () => defineRetriever,\n  defineSimpleRetriever: () => defineSimpleRetriever,\n  index: () => index,\n  indexerRef: () => indexerRef,\n  retrieve: () => retrieve,\n  retrieverRef: () => retrieverRef\n});\nmodule.exports = __toCommonJS(retriever_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_document = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nvar import_document2 = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\nconst RetrieverRequestSchema = import_core.z.object({\n  query: import_document.DocumentDataSchema,\n  options: import_core.z.any().optional()\n});\nconst RetrieverResponseSchema = import_core.z.object({\n  documents: import_core.z.array(import_document.DocumentDataSchema)\n  // TODO: stats, etc.\n});\nconst IndexerRequestSchema = import_core.z.object({\n  documents: import_core.z.array(import_document.DocumentDataSchema),\n  options: import_core.z.any().optional()\n});\nconst RetrieverInfoSchema = import_core.z.object({\n  label: import_core.z.string().optional(),\n  /** Supported model capabilities. */\n  supports: import_core.z.object({\n    /** Model can process media as part of the prompt (multimodal input). */\n    media: import_core.z.boolean().optional()\n  }).optional()\n});\nfunction retrieverWithMetadata(retriever, configSchema) {\n  const withMeta = retriever;\n  withMeta.__configSchema = configSchema;\n  return withMeta;\n}\nfunction indexerWithMetadata(indexer, configSchema) {\n  const withMeta = indexer;\n  withMeta.__configSchema = configSchema;\n  return withMeta;\n}\nfunction defineRetriever(registry, options, runner) {\n  const retriever = (0, import_core.defineAction)(\n    registry,\n    {\n      actionType: \"retriever\",\n      name: options.name,\n      inputSchema: options.configSchema ? RetrieverRequestSchema.extend({\n        options: options.configSchema.optional()\n      }) : RetrieverRequestSchema,\n      outputSchema: RetrieverResponseSchema,\n      metadata: {\n        type: \"retriever\",\n        info: options.info\n      }\n    },\n    (i) => runner(new import_document.Document(i.query), i.options)\n  );\n  const rwm = retrieverWithMetadata(\n    retriever,\n    options.configSchema\n  );\n  return rwm;\n}\nfunction defineIndexer(registry, options, runner) {\n  const indexer = (0, import_core.defineAction)(\n    registry,\n    {\n      actionType: \"indexer\",\n      name: options.name,\n      inputSchema: options.configSchema ? IndexerRequestSchema.extend({\n        options: options.configSchema.optional()\n      }) : IndexerRequestSchema,\n      outputSchema: import_core.z.void(),\n      metadata: {\n        type: \"indexer\",\n        embedderInfo: options.embedderInfo\n      }\n    },\n    (i) => runner(\n      i.documents.map((dd) => new import_document.Document(dd)),\n      i.options\n    )\n  );\n  const iwm = indexerWithMetadata(\n    indexer,\n    options.configSchema\n  );\n  return iwm;\n}\nfunction retrieve(registry, params) {\n  return __async(this, null, function* () {\n    let retriever;\n    if (typeof params.retriever === \"string\") {\n      retriever = yield registry.lookupAction(`/retriever/${params.retriever}`);\n    } else if (Object.hasOwnProperty.call(params.retriever, \"info\")) {\n      retriever = yield registry.lookupAction(\n        `/retriever/${params.retriever.name}`\n      );\n    } else {\n      retriever = params.retriever;\n    }\n    if (!retriever) {\n      throw new Error(\"Unable to resolve the retriever\");\n    }\n    const response = yield retriever({\n      query: typeof params.query === \"string\" ? import_document.Document.fromText(params.query) : params.query,\n      options: params.options\n    });\n    return response.documents.map((d) => new import_document.Document(d));\n  });\n}\nfunction index(registry, params) {\n  return __async(this, null, function* () {\n    let indexer;\n    if (typeof params.indexer === \"string\") {\n      indexer = yield registry.lookupAction(`/indexer/${params.indexer}`);\n    } else if (Object.hasOwnProperty.call(params.indexer, \"info\")) {\n      indexer = yield registry.lookupAction(`/indexer/${params.indexer.name}`);\n    } else {\n      indexer = params.indexer;\n    }\n    if (!indexer) {\n      throw new Error(\"Unable to utilize the provided indexer\");\n    }\n    return yield indexer({\n      documents: params.documents,\n      options: params.options\n    });\n  });\n}\nconst CommonRetrieverOptionsSchema = import_core.z.object({\n  k: import_core.z.number().describe(\"Number of documents to retrieve\").optional()\n});\nfunction retrieverRef(options) {\n  return __spreadValues({}, options);\n}\nconst IndexerInfoSchema = RetrieverInfoSchema;\nfunction indexerRef(options) {\n  return __spreadValues({}, options);\n}\nfunction itemToDocument(item, options) {\n  if (!item)\n    throw new import_core.GenkitError({\n      status: \"INVALID_ARGUMENT\",\n      message: `Items returned from simple retriever must be non-null.`\n    });\n  if (typeof item === \"string\") return import_document.Document.fromText(item);\n  if (typeof options.content === \"function\") {\n    const transformed = options.content(item);\n    return typeof transformed === \"string\" ? import_document.Document.fromText(transformed) : new import_document.Document({ content: transformed });\n  }\n  if (typeof options.content === \"string\" && typeof item === \"object\")\n    return import_document.Document.fromText(item[options.content]);\n  throw new import_core.GenkitError({\n    status: \"INVALID_ARGUMENT\",\n    message: `Cannot convert item to document without content option. Item: ${JSON.stringify(item)}`\n  });\n}\nfunction itemToMetadata(item, options) {\n  if (typeof item === \"string\") return void 0;\n  if (Array.isArray(options.metadata) && typeof item === \"object\") {\n    const out = {};\n    options.metadata.forEach((key) => out[key] = item[key]);\n  }\n  if (typeof options.metadata === \"function\") return options.metadata(item);\n  if (!options.metadata && typeof item === \"object\") {\n    const out = __spreadValues({}, item);\n    if (typeof options.content === \"string\") delete out[options.content];\n    return out;\n  }\n  throw new import_core.GenkitError({\n    status: \"INVALID_ARGUMENT\",\n    message: `Unable to extract metadata from item with supplied options. Item: ${JSON.stringify(item)}`\n  });\n}\nfunction defineSimpleRetriever(registry, options, handler) {\n  return defineRetriever(\n    registry,\n    {\n      name: options.name,\n      configSchema: options.configSchema\n    },\n    (query, config) => __async(this, null, function* () {\n      const result = yield handler(query, config);\n      return {\n        documents: result.map((item) => {\n          const doc = itemToDocument(item, options);\n          if (typeof item !== \"string\")\n            doc.metadata = itemToMetadata(item, options);\n          return doc;\n        })\n      };\n    })\n  );\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=retriever.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9yZXRyaWV2ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLDBFQUFpQjtBQUMzQyxzQkFBc0IsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3Qyx1QkFBdUIsbUJBQU8sQ0FBQyw2RkFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlCQUFpQjtBQUM3RSxNQUFNO0FBQ047QUFDQSxzQkFBc0Isc0JBQXNCO0FBQzVDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxlQUFlO0FBQ3ZFLE1BQU07QUFDTix3REFBd0Qsb0JBQW9CO0FBQzVFLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw2SEFBNkgsc0JBQXNCO0FBQ25KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUscUJBQXFCO0FBQ25HLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRixxQkFBcUI7QUFDdkcsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQWFMO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL3JldHJpZXZlci5qcz9hMGEwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG52YXIgcmV0cmlldmVyX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHJldHJpZXZlcl9leHBvcnRzLCB7XG4gIENvbW1vblJldHJpZXZlck9wdGlvbnNTY2hlbWE6ICgpID0+IENvbW1vblJldHJpZXZlck9wdGlvbnNTY2hlbWEsXG4gIERvY3VtZW50OiAoKSA9PiBpbXBvcnRfZG9jdW1lbnQyLkRvY3VtZW50LFxuICBEb2N1bWVudERhdGFTY2hlbWE6ICgpID0+IGltcG9ydF9kb2N1bWVudDIuRG9jdW1lbnREYXRhU2NoZW1hLFxuICBJbmRleGVySW5mb1NjaGVtYTogKCkgPT4gSW5kZXhlckluZm9TY2hlbWEsXG4gIFJldHJpZXZlckluZm9TY2hlbWE6ICgpID0+IFJldHJpZXZlckluZm9TY2hlbWEsXG4gIGRlZmluZUluZGV4ZXI6ICgpID0+IGRlZmluZUluZGV4ZXIsXG4gIGRlZmluZVJldHJpZXZlcjogKCkgPT4gZGVmaW5lUmV0cmlldmVyLFxuICBkZWZpbmVTaW1wbGVSZXRyaWV2ZXI6ICgpID0+IGRlZmluZVNpbXBsZVJldHJpZXZlcixcbiAgaW5kZXg6ICgpID0+IGluZGV4LFxuICBpbmRleGVyUmVmOiAoKSA9PiBpbmRleGVyUmVmLFxuICByZXRyaWV2ZTogKCkgPT4gcmV0cmlldmUsXG4gIHJldHJpZXZlclJlZjogKCkgPT4gcmV0cmlldmVyUmVmXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHJldHJpZXZlcl9leHBvcnRzKTtcbnZhciBpbXBvcnRfY29yZSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmVcIik7XG52YXIgaW1wb3J0X2RvY3VtZW50ID0gcmVxdWlyZShcIi4vZG9jdW1lbnQuanNcIik7XG52YXIgaW1wb3J0X2RvY3VtZW50MiA9IHJlcXVpcmUoXCIuL2RvY3VtZW50LmpzXCIpO1xuY29uc3QgUmV0cmlldmVyUmVxdWVzdFNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgcXVlcnk6IGltcG9ydF9kb2N1bWVudC5Eb2N1bWVudERhdGFTY2hlbWEsXG4gIG9wdGlvbnM6IGltcG9ydF9jb3JlLnouYW55KCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBSZXRyaWV2ZXJSZXNwb25zZVNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgZG9jdW1lbnRzOiBpbXBvcnRfY29yZS56LmFycmF5KGltcG9ydF9kb2N1bWVudC5Eb2N1bWVudERhdGFTY2hlbWEpXG4gIC8vIFRPRE86IHN0YXRzLCBldGMuXG59KTtcbmNvbnN0IEluZGV4ZXJSZXF1ZXN0U2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBkb2N1bWVudHM6IGltcG9ydF9jb3JlLnouYXJyYXkoaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50RGF0YVNjaGVtYSksXG4gIG9wdGlvbnM6IGltcG9ydF9jb3JlLnouYW55KCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBSZXRyaWV2ZXJJbmZvU2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBsYWJlbDogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKiogU3VwcG9ydGVkIG1vZGVsIGNhcGFiaWxpdGllcy4gKi9cbiAgc3VwcG9ydHM6IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgICAvKiogTW9kZWwgY2FuIHByb2Nlc3MgbWVkaWEgYXMgcGFydCBvZiB0aGUgcHJvbXB0IChtdWx0aW1vZGFsIGlucHV0KS4gKi9cbiAgICBtZWRpYTogaW1wb3J0X2NvcmUuei5ib29sZWFuKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbmZ1bmN0aW9uIHJldHJpZXZlcldpdGhNZXRhZGF0YShyZXRyaWV2ZXIsIGNvbmZpZ1NjaGVtYSkge1xuICBjb25zdCB3aXRoTWV0YSA9IHJldHJpZXZlcjtcbiAgd2l0aE1ldGEuX19jb25maWdTY2hlbWEgPSBjb25maWdTY2hlbWE7XG4gIHJldHVybiB3aXRoTWV0YTtcbn1cbmZ1bmN0aW9uIGluZGV4ZXJXaXRoTWV0YWRhdGEoaW5kZXhlciwgY29uZmlnU2NoZW1hKSB7XG4gIGNvbnN0IHdpdGhNZXRhID0gaW5kZXhlcjtcbiAgd2l0aE1ldGEuX19jb25maWdTY2hlbWEgPSBjb25maWdTY2hlbWE7XG4gIHJldHVybiB3aXRoTWV0YTtcbn1cbmZ1bmN0aW9uIGRlZmluZVJldHJpZXZlcihyZWdpc3RyeSwgb3B0aW9ucywgcnVubmVyKSB7XG4gIGNvbnN0IHJldHJpZXZlciA9ICgwLCBpbXBvcnRfY29yZS5kZWZpbmVBY3Rpb24pKFxuICAgIHJlZ2lzdHJ5LFxuICAgIHtcbiAgICAgIGFjdGlvblR5cGU6IFwicmV0cmlldmVyXCIsXG4gICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICBpbnB1dFNjaGVtYTogb3B0aW9ucy5jb25maWdTY2hlbWEgPyBSZXRyaWV2ZXJSZXF1ZXN0U2NoZW1hLmV4dGVuZCh7XG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMuY29uZmlnU2NoZW1hLm9wdGlvbmFsKClcbiAgICAgIH0pIDogUmV0cmlldmVyUmVxdWVzdFNjaGVtYSxcbiAgICAgIG91dHB1dFNjaGVtYTogUmV0cmlldmVyUmVzcG9uc2VTY2hlbWEsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0eXBlOiBcInJldHJpZXZlclwiLFxuICAgICAgICBpbmZvOiBvcHRpb25zLmluZm9cbiAgICAgIH1cbiAgICB9LFxuICAgIChpKSA9PiBydW5uZXIobmV3IGltcG9ydF9kb2N1bWVudC5Eb2N1bWVudChpLnF1ZXJ5KSwgaS5vcHRpb25zKVxuICApO1xuICBjb25zdCByd20gPSByZXRyaWV2ZXJXaXRoTWV0YWRhdGEoXG4gICAgcmV0cmlldmVyLFxuICAgIG9wdGlvbnMuY29uZmlnU2NoZW1hXG4gICk7XG4gIHJldHVybiByd207XG59XG5mdW5jdGlvbiBkZWZpbmVJbmRleGVyKHJlZ2lzdHJ5LCBvcHRpb25zLCBydW5uZXIpIHtcbiAgY29uc3QgaW5kZXhlciA9ICgwLCBpbXBvcnRfY29yZS5kZWZpbmVBY3Rpb24pKFxuICAgIHJlZ2lzdHJ5LFxuICAgIHtcbiAgICAgIGFjdGlvblR5cGU6IFwiaW5kZXhlclwiLFxuICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgaW5wdXRTY2hlbWE6IG9wdGlvbnMuY29uZmlnU2NoZW1hID8gSW5kZXhlclJlcXVlc3RTY2hlbWEuZXh0ZW5kKHtcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucy5jb25maWdTY2hlbWEub3B0aW9uYWwoKVxuICAgICAgfSkgOiBJbmRleGVyUmVxdWVzdFNjaGVtYSxcbiAgICAgIG91dHB1dFNjaGVtYTogaW1wb3J0X2NvcmUuei52b2lkKCksXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0eXBlOiBcImluZGV4ZXJcIixcbiAgICAgICAgZW1iZWRkZXJJbmZvOiBvcHRpb25zLmVtYmVkZGVySW5mb1xuICAgICAgfVxuICAgIH0sXG4gICAgKGkpID0+IHJ1bm5lcihcbiAgICAgIGkuZG9jdW1lbnRzLm1hcCgoZGQpID0+IG5ldyBpbXBvcnRfZG9jdW1lbnQuRG9jdW1lbnQoZGQpKSxcbiAgICAgIGkub3B0aW9uc1xuICAgIClcbiAgKTtcbiAgY29uc3QgaXdtID0gaW5kZXhlcldpdGhNZXRhZGF0YShcbiAgICBpbmRleGVyLFxuICAgIG9wdGlvbnMuY29uZmlnU2NoZW1hXG4gICk7XG4gIHJldHVybiBpd207XG59XG5mdW5jdGlvbiByZXRyaWV2ZShyZWdpc3RyeSwgcGFyYW1zKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgbGV0IHJldHJpZXZlcjtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5yZXRyaWV2ZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHJpZXZlciA9IHlpZWxkIHJlZ2lzdHJ5Lmxvb2t1cEFjdGlvbihgL3JldHJpZXZlci8ke3BhcmFtcy5yZXRyaWV2ZXJ9YCk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChwYXJhbXMucmV0cmlldmVyLCBcImluZm9cIikpIHtcbiAgICAgIHJldHJpZXZlciA9IHlpZWxkIHJlZ2lzdHJ5Lmxvb2t1cEFjdGlvbihcbiAgICAgICAgYC9yZXRyaWV2ZXIvJHtwYXJhbXMucmV0cmlldmVyLm5hbWV9YFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0cmlldmVyID0gcGFyYW1zLnJldHJpZXZlcjtcbiAgICB9XG4gICAgaWYgKCFyZXRyaWV2ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byByZXNvbHZlIHRoZSByZXRyaWV2ZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgcmV0cmlldmVyKHtcbiAgICAgIHF1ZXJ5OiB0eXBlb2YgcGFyYW1zLnF1ZXJ5ID09PSBcInN0cmluZ1wiID8gaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50LmZyb21UZXh0KHBhcmFtcy5xdWVyeSkgOiBwYXJhbXMucXVlcnksXG4gICAgICBvcHRpb25zOiBwYXJhbXMub3B0aW9uc1xuICAgIH0pO1xuICAgIHJldHVybiByZXNwb25zZS5kb2N1bWVudHMubWFwKChkKSA9PiBuZXcgaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50KGQpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBpbmRleChyZWdpc3RyeSwgcGFyYW1zKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgbGV0IGluZGV4ZXI7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuaW5kZXhlciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaW5kZXhlciA9IHlpZWxkIHJlZ2lzdHJ5Lmxvb2t1cEFjdGlvbihgL2luZGV4ZXIvJHtwYXJhbXMuaW5kZXhlcn1gKTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtcy5pbmRleGVyLCBcImluZm9cIikpIHtcbiAgICAgIGluZGV4ZXIgPSB5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oYC9pbmRleGVyLyR7cGFyYW1zLmluZGV4ZXIubmFtZX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXhlciA9IHBhcmFtcy5pbmRleGVyO1xuICAgIH1cbiAgICBpZiAoIWluZGV4ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB1dGlsaXplIHRoZSBwcm92aWRlZCBpbmRleGVyXCIpO1xuICAgIH1cbiAgICByZXR1cm4geWllbGQgaW5kZXhlcih7XG4gICAgICBkb2N1bWVudHM6IHBhcmFtcy5kb2N1bWVudHMsXG4gICAgICBvcHRpb25zOiBwYXJhbXMub3B0aW9uc1xuICAgIH0pO1xuICB9KTtcbn1cbmNvbnN0IENvbW1vblJldHJpZXZlck9wdGlvbnNTY2hlbWEgPSBpbXBvcnRfY29yZS56Lm9iamVjdCh7XG4gIGs6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkuZGVzY3JpYmUoXCJOdW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHJpZXZlXCIpLm9wdGlvbmFsKClcbn0pO1xuZnVuY3Rpb24gcmV0cmlldmVyUmVmKG9wdGlvbnMpIHtcbiAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zKTtcbn1cbmNvbnN0IEluZGV4ZXJJbmZvU2NoZW1hID0gUmV0cmlldmVySW5mb1NjaGVtYTtcbmZ1bmN0aW9uIGluZGV4ZXJSZWYob3B0aW9ucykge1xuICByZXR1cm4gX19zcHJlYWRWYWx1ZXMoe30sIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gaXRlbVRvRG9jdW1lbnQoaXRlbSwgb3B0aW9ucykge1xuICBpZiAoIWl0ZW0pXG4gICAgdGhyb3cgbmV3IGltcG9ydF9jb3JlLkdlbmtpdEVycm9yKHtcbiAgICAgIHN0YXR1czogXCJJTlZBTElEX0FSR1VNRU5UXCIsXG4gICAgICBtZXNzYWdlOiBgSXRlbXMgcmV0dXJuZWQgZnJvbSBzaW1wbGUgcmV0cmlldmVyIG11c3QgYmUgbm9uLW51bGwuYFxuICAgIH0pO1xuICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHJldHVybiBpbXBvcnRfZG9jdW1lbnQuRG9jdW1lbnQuZnJvbVRleHQoaXRlbSk7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5jb250ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IG9wdGlvbnMuY29udGVudChpdGVtKTtcbiAgICByZXR1cm4gdHlwZW9mIHRyYW5zZm9ybWVkID09PSBcInN0cmluZ1wiID8gaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50LmZyb21UZXh0KHRyYW5zZm9ybWVkKSA6IG5ldyBpbXBvcnRfZG9jdW1lbnQuRG9jdW1lbnQoeyBjb250ZW50OiB0cmFuc2Zvcm1lZCB9KTtcbiAgfVxuICBpZiAodHlwZW9mIG9wdGlvbnMuY29udGVudCA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIilcbiAgICByZXR1cm4gaW1wb3J0X2RvY3VtZW50LkRvY3VtZW50LmZyb21UZXh0KGl0ZW1bb3B0aW9ucy5jb250ZW50XSk7XG4gIHRocm93IG5ldyBpbXBvcnRfY29yZS5HZW5raXRFcnJvcih7XG4gICAgc3RhdHVzOiBcIklOVkFMSURfQVJHVU1FTlRcIixcbiAgICBtZXNzYWdlOiBgQ2Fubm90IGNvbnZlcnQgaXRlbSB0byBkb2N1bWVudCB3aXRob3V0IGNvbnRlbnQgb3B0aW9uLiBJdGVtOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWBcbiAgfSk7XG59XG5mdW5jdGlvbiBpdGVtVG9NZXRhZGF0YShpdGVtLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHZvaWQgMDtcbiAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5tZXRhZGF0YSkgJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBvdXQgPSB7fTtcbiAgICBvcHRpb25zLm1ldGFkYXRhLmZvckVhY2goKGtleSkgPT4gb3V0W2tleV0gPSBpdGVtW2tleV0pO1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gb3B0aW9ucy5tZXRhZGF0YShpdGVtKTtcbiAgaWYgKCFvcHRpb25zLm1ldGFkYXRhICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3Qgb3V0ID0gX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0pO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb250ZW50ID09PSBcInN0cmluZ1wiKSBkZWxldGUgb3V0W29wdGlvbnMuY29udGVudF07XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICB0aHJvdyBuZXcgaW1wb3J0X2NvcmUuR2Vua2l0RXJyb3Ioe1xuICAgIHN0YXR1czogXCJJTlZBTElEX0FSR1VNRU5UXCIsXG4gICAgbWVzc2FnZTogYFVuYWJsZSB0byBleHRyYWN0IG1ldGFkYXRhIGZyb20gaXRlbSB3aXRoIHN1cHBsaWVkIG9wdGlvbnMuIEl0ZW06ICR7SlNPTi5zdHJpbmdpZnkoaXRlbSl9YFxuICB9KTtcbn1cbmZ1bmN0aW9uIGRlZmluZVNpbXBsZVJldHJpZXZlcihyZWdpc3RyeSwgb3B0aW9ucywgaGFuZGxlcikge1xuICByZXR1cm4gZGVmaW5lUmV0cmlldmVyKFxuICAgIHJlZ2lzdHJ5LFxuICAgIHtcbiAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgIGNvbmZpZ1NjaGVtYTogb3B0aW9ucy5jb25maWdTY2hlbWFcbiAgICB9LFxuICAgIChxdWVyeSwgY29uZmlnKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBoYW5kbGVyKHF1ZXJ5LCBjb25maWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiByZXN1bHQubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgZG9jID0gaXRlbVRvRG9jdW1lbnQoaXRlbSwgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgZG9jLm1ldGFkYXRhID0gaXRlbVRvTWV0YWRhdGEoaXRlbSwgb3B0aW9ucyk7XG4gICAgICAgICAgcmV0dXJuIGRvYztcbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgfSlcbiAgKTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBDb21tb25SZXRyaWV2ZXJPcHRpb25zU2NoZW1hLFxuICBEb2N1bWVudCxcbiAgRG9jdW1lbnREYXRhU2NoZW1hLFxuICBJbmRleGVySW5mb1NjaGVtYSxcbiAgUmV0cmlldmVySW5mb1NjaGVtYSxcbiAgZGVmaW5lSW5kZXhlcixcbiAgZGVmaW5lUmV0cmlldmVyLFxuICBkZWZpbmVTaW1wbGVSZXRyaWV2ZXIsXG4gIGluZGV4LFxuICBpbmRleGVyUmVmLFxuICByZXRyaWV2ZSxcbiAgcmV0cmlldmVyUmVmXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJpZXZlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js":
/*!********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar tool_exports = {};\n__export(tool_exports, {\n  asTool: () => asTool,\n  defineTool: () => defineTool,\n  lookupToolByName: () => lookupToolByName,\n  resolveTools: () => resolveTools,\n  toToolDefinition: () => toToolDefinition\n});\nmodule.exports = __toCommonJS(tool_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_schema = __webpack_require__(/*! @genkit-ai/core/schema */ \"(rsc)/./node_modules/@genkit-ai/core/lib/schema.js\");\nvar import_tracing = __webpack_require__(/*! @genkit-ai/core/tracing */ \"(rsc)/./node_modules/@genkit-ai/core/lib/tracing.js\");\nfunction asTool(action) {\n  var _a, _b;\n  if (((_b = (_a = action.__action) == null ? void 0 : _a.metadata) == null ? void 0 : _b.type) === \"tool\") {\n    return action;\n  }\n  const fn = (input) => {\n    (0, import_tracing.setCustomMetadataAttributes)({ subtype: \"tool\" });\n    return action(input);\n  };\n  fn.__action = __spreadProps(__spreadValues({}, action.__action), {\n    metadata: __spreadProps(__spreadValues({}, action.__action.metadata), { type: \"tool\" })\n  });\n  return fn;\n}\nfunction resolveTools(_0) {\n  return __async(this, arguments, function* (registry, tools = []) {\n    return yield Promise.all(\n      tools.map((ref) => __async(this, null, function* () {\n        if (typeof ref === \"string\") {\n          return yield lookupToolByName(registry, ref);\n        } else if (ref.__action) {\n          return asTool(ref);\n        } else if (typeof ref.asTool === \"function\") {\n          return ref.asTool();\n        } else if (ref.name) {\n          return yield lookupToolByName(registry, ref.name);\n        }\n        throw new Error(\"Tools must be strings, tool definitions, or actions.\");\n      }))\n    );\n  });\n}\nfunction lookupToolByName(registry, name) {\n  return __async(this, null, function* () {\n    let tool = (yield registry.lookupAction(name)) || (yield registry.lookupAction(`/tool/${name}`)) || (yield registry.lookupAction(`/prompt/${name}`));\n    if (!tool) {\n      throw new Error(`Tool ${name} not found`);\n    }\n    return tool;\n  });\n}\nfunction toToolDefinition(tool) {\n  var _a, _b;\n  return {\n    name: tool.__action.name,\n    description: tool.__action.description || \"\",\n    outputSchema: (0, import_schema.toJsonSchema)({\n      schema: (_a = tool.__action.outputSchema) != null ? _a : import_core.z.void(),\n      jsonSchema: tool.__action.outputJsonSchema\n    }),\n    inputSchema: (0, import_schema.toJsonSchema)({\n      schema: (_b = tool.__action.inputSchema) != null ? _b : import_core.z.void(),\n      jsonSchema: tool.__action.inputJsonSchema\n    })\n  };\n}\nfunction defineTool(registry, config, fn) {\n  const a = (0, import_core.defineAction)(\n    registry,\n    __spreadProps(__spreadValues({}, config), {\n      actionType: \"tool\",\n      metadata: __spreadProps(__spreadValues({}, config.metadata || {}), { type: \"tool\" })\n    }),\n    (i) => fn(i)\n  );\n  return a;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=tool.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi90b29sLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0JBQWtCLG1CQUFPLENBQUMsMEVBQWlCO0FBQzNDLG9CQUFvQixtQkFBTyxDQUFDLGtGQUF3QjtBQUNwRCxxQkFBcUIsbUJBQU8sQ0FBQyxvRkFBeUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGlCQUFpQjtBQUN2RTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DLDZDQUE2QywrQkFBK0IsY0FBYztBQUMxRixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNEZBQTRGLEtBQUssK0NBQStDLEtBQUs7QUFDcko7QUFDQSw4QkFBOEIsTUFBTTtBQUNwQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBLCtDQUErQyx1QkFBdUIsS0FBSyxjQUFjO0FBQ3pGLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQU1MO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL3Rvb2wuanM/MGMwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG52YXIgdG9vbF9leHBvcnRzID0ge307XG5fX2V4cG9ydCh0b29sX2V4cG9ydHMsIHtcbiAgYXNUb29sOiAoKSA9PiBhc1Rvb2wsXG4gIGRlZmluZVRvb2w6ICgpID0+IGRlZmluZVRvb2wsXG4gIGxvb2t1cFRvb2xCeU5hbWU6ICgpID0+IGxvb2t1cFRvb2xCeU5hbWUsXG4gIHJlc29sdmVUb29sczogKCkgPT4gcmVzb2x2ZVRvb2xzLFxuICB0b1Rvb2xEZWZpbml0aW9uOiAoKSA9PiB0b1Rvb2xEZWZpbml0aW9uXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHRvb2xfZXhwb3J0cyk7XG52YXIgaW1wb3J0X2NvcmUgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlXCIpO1xudmFyIGltcG9ydF9zY2hlbWEgPSByZXF1aXJlKFwiQGdlbmtpdC1haS9jb3JlL3NjaGVtYVwiKTtcbnZhciBpbXBvcnRfdHJhY2luZyA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvdHJhY2luZ1wiKTtcbmZ1bmN0aW9uIGFzVG9vbChhY3Rpb24pIHtcbiAgdmFyIF9hLCBfYjtcbiAgaWYgKCgoX2IgPSAoX2EgPSBhY3Rpb24uX19hY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS5tZXRhZGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnR5cGUpID09PSBcInRvb2xcIikge1xuICAgIHJldHVybiBhY3Rpb247XG4gIH1cbiAgY29uc3QgZm4gPSAoaW5wdXQpID0+IHtcbiAgICAoMCwgaW1wb3J0X3RyYWNpbmcuc2V0Q3VzdG9tTWV0YWRhdGFBdHRyaWJ1dGVzKSh7IHN1YnR5cGU6IFwidG9vbFwiIH0pO1xuICAgIHJldHVybiBhY3Rpb24oaW5wdXQpO1xuICB9O1xuICBmbi5fX2FjdGlvbiA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGFjdGlvbi5fX2FjdGlvbiksIHtcbiAgICBtZXRhZGF0YTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgYWN0aW9uLl9fYWN0aW9uLm1ldGFkYXRhKSwgeyB0eXBlOiBcInRvb2xcIiB9KVxuICB9KTtcbiAgcmV0dXJuIGZuO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVRvb2xzKF8wKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24qIChyZWdpc3RyeSwgdG9vbHMgPSBbXSkge1xuICAgIHJldHVybiB5aWVsZCBQcm9taXNlLmFsbChcbiAgICAgIHRvb2xzLm1hcCgocmVmKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVmID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIGxvb2t1cFRvb2xCeU5hbWUocmVnaXN0cnksIHJlZik7XG4gICAgICAgIH0gZWxzZSBpZiAocmVmLl9fYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGFzVG9vbChyZWYpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWYuYXNUb29sID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICByZXR1cm4gcmVmLmFzVG9vbCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZi5uYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIGxvb2t1cFRvb2xCeU5hbWUocmVnaXN0cnksIHJlZi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb29scyBtdXN0IGJlIHN0cmluZ3MsIHRvb2wgZGVmaW5pdGlvbnMsIG9yIGFjdGlvbnMuXCIpO1xuICAgICAgfSkpXG4gICAgKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBsb29rdXBUb29sQnlOYW1lKHJlZ2lzdHJ5LCBuYW1lKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgbGV0IHRvb2wgPSAoeWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKG5hbWUpKSB8fCAoeWllbGQgcmVnaXN0cnkubG9va3VwQWN0aW9uKGAvdG9vbC8ke25hbWV9YCkpIHx8ICh5aWVsZCByZWdpc3RyeS5sb29rdXBBY3Rpb24oYC9wcm9tcHQvJHtuYW1lfWApKTtcbiAgICBpZiAoIXRvb2wpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVG9vbCAke25hbWV9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICByZXR1cm4gdG9vbDtcbiAgfSk7XG59XG5mdW5jdGlvbiB0b1Rvb2xEZWZpbml0aW9uKHRvb2wpIHtcbiAgdmFyIF9hLCBfYjtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiB0b29sLl9fYWN0aW9uLm5hbWUsXG4gICAgZGVzY3JpcHRpb246IHRvb2wuX19hY3Rpb24uZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICBvdXRwdXRTY2hlbWE6ICgwLCBpbXBvcnRfc2NoZW1hLnRvSnNvblNjaGVtYSkoe1xuICAgICAgc2NoZW1hOiAoX2EgPSB0b29sLl9fYWN0aW9uLm91dHB1dFNjaGVtYSkgIT0gbnVsbCA/IF9hIDogaW1wb3J0X2NvcmUuei52b2lkKCksXG4gICAgICBqc29uU2NoZW1hOiB0b29sLl9fYWN0aW9uLm91dHB1dEpzb25TY2hlbWFcbiAgICB9KSxcbiAgICBpbnB1dFNjaGVtYTogKDAsIGltcG9ydF9zY2hlbWEudG9Kc29uU2NoZW1hKSh7XG4gICAgICBzY2hlbWE6IChfYiA9IHRvb2wuX19hY3Rpb24uaW5wdXRTY2hlbWEpICE9IG51bGwgPyBfYiA6IGltcG9ydF9jb3JlLnoudm9pZCgpLFxuICAgICAganNvblNjaGVtYTogdG9vbC5fX2FjdGlvbi5pbnB1dEpzb25TY2hlbWFcbiAgICB9KVxuICB9O1xufVxuZnVuY3Rpb24gZGVmaW5lVG9vbChyZWdpc3RyeSwgY29uZmlnLCBmbikge1xuICBjb25zdCBhID0gKDAsIGltcG9ydF9jb3JlLmRlZmluZUFjdGlvbikoXG4gICAgcmVnaXN0cnksXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29uZmlnKSwge1xuICAgICAgYWN0aW9uVHlwZTogXCJ0b29sXCIsXG4gICAgICBtZXRhZGF0YTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29uZmlnLm1ldGFkYXRhIHx8IHt9KSwgeyB0eXBlOiBcInRvb2xcIiB9KVxuICAgIH0pLFxuICAgIChpKSA9PiBmbihpKVxuICApO1xuICByZXR1cm4gYTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBhc1Rvb2wsXG4gIGRlZmluZVRvb2wsXG4gIGxvb2t1cFRvb2xCeU5hbWUsXG4gIHJlc29sdmVUb29scyxcbiAgdG9Ub29sRGVmaW5pdGlvblxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/types.js":
/*!*********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/types.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar types_exports = {};\n__export(types_exports, {\n  CommonLlmOptions: () => CommonLlmOptions,\n  LlmResponseSchema: () => LlmResponseSchema,\n  LlmStatsSchema: () => LlmStatsSchema,\n  ModelIdSchema: () => ModelIdSchema,\n  ToolCallSchema: () => ToolCallSchema,\n  ToolSchema: () => ToolSchema,\n  toToolWireFormat: () => toToolWireFormat\n});\nmodule.exports = __toCommonJS(types_exports);\nvar import_core = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.js\");\nvar import_schema = __webpack_require__(/*! @genkit-ai/core/schema */ \"(rsc)/./node_modules/@genkit-ai/core/lib/schema.js\");\nconst ModelIdSchema = import_core.z.object({\n  modelProvider: import_core.z.string().readonly(),\n  modelName: import_core.z.string().readonly()\n});\nconst LlmStatsSchema = import_core.z.object({\n  latencyMs: import_core.z.number().optional(),\n  inputTokenCount: import_core.z.number().optional(),\n  outputTokenCount: import_core.z.number().optional()\n});\nconst ToolSchema = import_core.z.object({\n  name: import_core.z.string(),\n  description: import_core.z.string().optional(),\n  schema: import_core.z.any()\n});\nconst ToolCallSchema = import_core.z.object({\n  toolName: import_core.z.string(),\n  arguments: import_core.z.any()\n});\nconst LlmResponseSchema = import_core.z.object({\n  completion: import_core.z.string(),\n  toolCalls: import_core.z.array(ToolCallSchema).optional(),\n  stats: LlmStatsSchema\n});\nfunction toToolWireFormat(actions) {\n  if (!actions) return void 0;\n  return actions.map((a) => {\n    return {\n      name: a.__action.name,\n      description: a.__action.description,\n      schema: {\n        input: (0, import_schema.toJsonSchema)({\n          schema: a.__action.inputSchema,\n          jsonSchema: a.__action.inputJsonSchema\n        }),\n        output: (0, import_schema.toJsonSchema)({\n          schema: a.__action.outputSchema,\n          jsonSchema: a.__action.outputJsonSchema\n        })\n      }\n    };\n  });\n}\nconst CommonLlmOptions = import_core.z.object({\n  temperature: import_core.z.number().optional(),\n  topK: import_core.z.number().optional(),\n  topP: import_core.z.number().optional()\n});\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLDBFQUFpQjtBQUMzQyxvQkFBb0IsbUJBQU8sQ0FBQyxrRkFBd0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsTUFBTSxDQVFMO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL3R5cGVzLmpzPzJiZWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIHR5cGVzX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHR5cGVzX2V4cG9ydHMsIHtcbiAgQ29tbW9uTGxtT3B0aW9uczogKCkgPT4gQ29tbW9uTGxtT3B0aW9ucyxcbiAgTGxtUmVzcG9uc2VTY2hlbWE6ICgpID0+IExsbVJlc3BvbnNlU2NoZW1hLFxuICBMbG1TdGF0c1NjaGVtYTogKCkgPT4gTGxtU3RhdHNTY2hlbWEsXG4gIE1vZGVsSWRTY2hlbWE6ICgpID0+IE1vZGVsSWRTY2hlbWEsXG4gIFRvb2xDYWxsU2NoZW1hOiAoKSA9PiBUb29sQ2FsbFNjaGVtYSxcbiAgVG9vbFNjaGVtYTogKCkgPT4gVG9vbFNjaGVtYSxcbiAgdG9Ub29sV2lyZUZvcm1hdDogKCkgPT4gdG9Ub29sV2lyZUZvcm1hdFxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyh0eXBlc19leHBvcnRzKTtcbnZhciBpbXBvcnRfY29yZSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmVcIik7XG52YXIgaW1wb3J0X3NjaGVtYSA9IHJlcXVpcmUoXCJAZ2Vua2l0LWFpL2NvcmUvc2NoZW1hXCIpO1xuY29uc3QgTW9kZWxJZFNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgbW9kZWxQcm92aWRlcjogaW1wb3J0X2NvcmUuei5zdHJpbmcoKS5yZWFkb25seSgpLFxuICBtb2RlbE5hbWU6IGltcG9ydF9jb3JlLnouc3RyaW5nKCkucmVhZG9ubHkoKVxufSk7XG5jb25zdCBMbG1TdGF0c1NjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgbGF0ZW5jeU1zOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGlucHV0VG9rZW5Db3VudDogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBvdXRwdXRUb2tlbkNvdW50OiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgVG9vbFNjaGVtYSA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgbmFtZTogaW1wb3J0X2NvcmUuei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IGltcG9ydF9jb3JlLnouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc2NoZW1hOiBpbXBvcnRfY29yZS56LmFueSgpXG59KTtcbmNvbnN0IFRvb2xDYWxsU2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICB0b29sTmFtZTogaW1wb3J0X2NvcmUuei5zdHJpbmcoKSxcbiAgYXJndW1lbnRzOiBpbXBvcnRfY29yZS56LmFueSgpXG59KTtcbmNvbnN0IExsbVJlc3BvbnNlU2NoZW1hID0gaW1wb3J0X2NvcmUuei5vYmplY3Qoe1xuICBjb21wbGV0aW9uOiBpbXBvcnRfY29yZS56LnN0cmluZygpLFxuICB0b29sQ2FsbHM6IGltcG9ydF9jb3JlLnouYXJyYXkoVG9vbENhbGxTY2hlbWEpLm9wdGlvbmFsKCksXG4gIHN0YXRzOiBMbG1TdGF0c1NjaGVtYVxufSk7XG5mdW5jdGlvbiB0b1Rvb2xXaXJlRm9ybWF0KGFjdGlvbnMpIHtcbiAgaWYgKCFhY3Rpb25zKSByZXR1cm4gdm9pZCAwO1xuICByZXR1cm4gYWN0aW9ucy5tYXAoKGEpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogYS5fX2FjdGlvbi5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGEuX19hY3Rpb24uZGVzY3JpcHRpb24sXG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgaW5wdXQ6ICgwLCBpbXBvcnRfc2NoZW1hLnRvSnNvblNjaGVtYSkoe1xuICAgICAgICAgIHNjaGVtYTogYS5fX2FjdGlvbi5pbnB1dFNjaGVtYSxcbiAgICAgICAgICBqc29uU2NoZW1hOiBhLl9fYWN0aW9uLmlucHV0SnNvblNjaGVtYVxuICAgICAgICB9KSxcbiAgICAgICAgb3V0cHV0OiAoMCwgaW1wb3J0X3NjaGVtYS50b0pzb25TY2hlbWEpKHtcbiAgICAgICAgICBzY2hlbWE6IGEuX19hY3Rpb24ub3V0cHV0U2NoZW1hLFxuICAgICAgICAgIGpzb25TY2hlbWE6IGEuX19hY3Rpb24ub3V0cHV0SnNvblNjaGVtYVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuY29uc3QgQ29tbW9uTGxtT3B0aW9ucyA9IGltcG9ydF9jb3JlLnoub2JqZWN0KHtcbiAgdGVtcGVyYXR1cmU6IGltcG9ydF9jb3JlLnoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdG9wSzogaW1wb3J0X2NvcmUuei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICB0b3BQOiBpbXBvcnRfY29yZS56Lm51bWJlcigpLm9wdGlvbmFsKClcbn0pO1xuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIENvbW1vbkxsbU9wdGlvbnMsXG4gIExsbVJlc3BvbnNlU2NoZW1hLFxuICBMbG1TdGF0c1NjaGVtYSxcbiAgTW9kZWxJZFNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xTY2hlbWEsXG4gIHRvVG9vbFdpcmVGb3JtYXRcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/chunk-DJRN6NKF.mjs":
/*!****************************************************!*\
  !*** ./node_modules/genkit/lib/chunk-DJRN6NKF.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __async: () => (/* binding */ __async),\n/* harmony export */   __spreadProps: () => (/* binding */ __spreadProps),\n/* harmony export */   __spreadValues: () => (/* binding */ __spreadValues)\n/* harmony export */ });\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n\n//# sourceMappingURL=chunk-DJRN6NKF.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9jaHVuay1ESlJONk5LRi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9saWIvY2h1bmstREpSTjZOS0YubWpzPzczYjgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBfX3NwcmVhZFZhbHVlcyxcbiAgX19zcHJlYWRQcm9wcyxcbiAgX19hc3luY1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLURKUk42TktGLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/chunk-DJRN6NKF.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/index.mjs":
/*!*******************************************!*\
  !*** ./node_modules/genkit/lib/index.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.Document),\n/* harmony export */   DocumentDataSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.DocumentDataSchema),\n/* harmony export */   FlowActionInputSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.FlowActionInputSchema),\n/* harmony export */   FlowErrorSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.FlowErrorSchema),\n/* harmony export */   FlowInvokeEnvelopeMessageSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.FlowInvokeEnvelopeMessageSchema),\n/* harmony export */   FlowServer: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.FlowServer),\n/* harmony export */   GENKIT_CLIENT_HEADER: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.GENKIT_CLIENT_HEADER),\n/* harmony export */   GENKIT_VERSION: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.GENKIT_VERSION),\n/* harmony export */   GenerationBlockedError: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.GenerationBlockedError),\n/* harmony export */   GenerationCommonConfigSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.GenerationCommonConfigSchema),\n/* harmony export */   GenerationResponseError: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.GenerationResponseError),\n/* harmony export */   GenkitError: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.GenkitError),\n/* harmony export */   LlmResponseSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.LlmResponseSchema),\n/* harmony export */   LlmStatsSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.LlmStatsSchema),\n/* harmony export */   Message: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.Message),\n/* harmony export */   MessageSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.MessageSchema),\n/* harmony export */   ModelIdSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.ModelIdSchema),\n/* harmony export */   ModelRequestSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.ModelRequestSchema),\n/* harmony export */   ModelResponseSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.ModelResponseSchema),\n/* harmony export */   PartSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.PartSchema),\n/* harmony export */   ReflectionServer: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.ReflectionServer),\n/* harmony export */   RoleSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.RoleSchema),\n/* harmony export */   RunActionResponseSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.RunActionResponseSchema),\n/* harmony export */   StatusCodes: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.StatusCodes),\n/* harmony export */   StatusSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.StatusSchema),\n/* harmony export */   ToolCallSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.ToolCallSchema),\n/* harmony export */   ToolSchema: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.ToolSchema),\n/* harmony export */   asTool: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.asTool),\n/* harmony export */   defineFlow: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.defineFlow),\n/* harmony export */   defineJsonSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.defineJsonSchema),\n/* harmony export */   defineSchema: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.defineSchema),\n/* harmony export */   defineStreamingFlow: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.defineStreamingFlow),\n/* harmony export */   deleteUndefinedProps: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.deleteUndefinedProps),\n/* harmony export */   embedderRef: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.embedderRef),\n/* harmony export */   evaluatorRef: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.evaluatorRef),\n/* harmony export */   flowMetadataPrefix: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.flowMetadataPrefix),\n/* harmony export */   getCurrentEnv: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.getCurrentEnv),\n/* harmony export */   getFlowAuth: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.getFlowAuth),\n/* harmony export */   getStreamingCallback: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.getStreamingCallback),\n/* harmony export */   indexerRef: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.indexerRef),\n/* harmony export */   isDevEnv: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.isDevEnv),\n/* harmony export */   loadPromptFile: () => (/* reexport safe */ _genkit_ai_dotprompt__WEBPACK_IMPORTED_MODULE_3__.loadPromptFile),\n/* harmony export */   rerankerRef: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.rerankerRef),\n/* harmony export */   retrieverRef: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.retrieverRef),\n/* harmony export */   run: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.run),\n/* harmony export */   runWithStreamingCallback: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.runWithStreamingCallback),\n/* harmony export */   toGenerateRequest: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.toGenerateRequest),\n/* harmony export */   toToolWireFormat: () => (/* reexport safe */ _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__.toToolWireFormat),\n/* harmony export */   z: () => (/* reexport safe */ _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__.z)\n/* harmony export */ });\n/* harmony import */ var _chunk_DJRN6NKF_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-DJRN6NKF.mjs */ \"(rsc)/./node_modules/genkit/lib/chunk-DJRN6NKF.mjs\");\n/* harmony import */ var _genkit_ai_ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @genkit-ai/ai */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.mjs\");\n/* harmony import */ var _genkit_ai_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @genkit-ai/core */ \"(rsc)/./node_modules/@genkit-ai/core/lib/index.mjs\");\n/* harmony import */ var _genkit_ai_dotprompt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @genkit-ai/dotprompt */ \"(rsc)/./node_modules/@genkit-ai/dotprompt/lib/index.mjs\");\n/* harmony import */ var _genkit_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./genkit.js */ \"(rsc)/./node_modules/genkit/lib/genkit.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _genkit_js__WEBPACK_IMPORTED_MODULE_4__) if([\"default\",\"Document\",\"DocumentDataSchema\",\"FlowActionInputSchema\",\"FlowErrorSchema\",\"FlowInvokeEnvelopeMessageSchema\",\"FlowServer\",\"GENKIT_CLIENT_HEADER\",\"GENKIT_VERSION\",\"GenerationBlockedError\",\"GenerationCommonConfigSchema\",\"GenerationResponseError\",\"GenkitError\",\"LlmResponseSchema\",\"LlmStatsSchema\",\"Message\",\"MessageSchema\",\"ModelIdSchema\",\"ModelRequestSchema\",\"ModelResponseSchema\",\"PartSchema\",\"ReflectionServer\",\"RoleSchema\",\"RunActionResponseSchema\",\"StatusCodes\",\"StatusSchema\",\"ToolCallSchema\",\"ToolSchema\",\"asTool\",\"defineFlow\",\"defineJsonSchema\",\"defineSchema\",\"defineStreamingFlow\",\"deleteUndefinedProps\",\"embedderRef\",\"evaluatorRef\",\"flowMetadataPrefix\",\"getCurrentEnv\",\"getFlowAuth\",\"getStreamingCallback\",\"indexerRef\",\"isDevEnv\",\"loadPromptFile\",\"rerankerRef\",\"retrieverRef\",\"run\",\"runWithStreamingCallback\",\"toGenerateRequest\",\"toToolWireFormat\",\"z\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _genkit_js__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThCO0FBMEJQO0FBMEJFO0FBQzZCO0FBQzFCO0FBbUQxQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9pbmRleC5tanM/MDdiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuL2NodW5rLURKUk42TktGLm1qc1wiO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnQsXG4gIERvY3VtZW50RGF0YVNjaGVtYSxcbiAgR2VuZXJhdGlvbkJsb2NrZWRFcnJvcixcbiAgR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYSxcbiAgR2VuZXJhdGlvblJlc3BvbnNlRXJyb3IsXG4gIExsbVJlc3BvbnNlU2NoZW1hLFxuICBMbG1TdGF0c1NjaGVtYSxcbiAgTWVzc2FnZSxcbiAgTWVzc2FnZVNjaGVtYSxcbiAgTW9kZWxJZFNjaGVtYSxcbiAgTW9kZWxSZXF1ZXN0U2NoZW1hLFxuICBNb2RlbFJlc3BvbnNlU2NoZW1hLFxuICBQYXJ0U2NoZW1hLFxuICBSb2xlU2NoZW1hLFxuICBUb29sQ2FsbFNjaGVtYSxcbiAgVG9vbFNjaGVtYSxcbiAgYXNUb29sLFxuICBlbWJlZGRlclJlZixcbiAgZXZhbHVhdG9yUmVmLFxuICBpbmRleGVyUmVmLFxuICByZXJhbmtlclJlZixcbiAgcmV0cmlldmVyUmVmLFxuICB0b0dlbmVyYXRlUmVxdWVzdCxcbiAgdG9Ub29sV2lyZUZvcm1hdFxufSBmcm9tIFwiQGdlbmtpdC1haS9haVwiO1xuaW1wb3J0IHtcbiAgRmxvd0FjdGlvbklucHV0U2NoZW1hLFxuICBGbG93RXJyb3JTY2hlbWEsXG4gIEZsb3dJbnZva2VFbnZlbG9wZU1lc3NhZ2VTY2hlbWEsXG4gIEZsb3dTZXJ2ZXIsXG4gIEdFTktJVF9DTElFTlRfSEVBREVSLFxuICBHRU5LSVRfVkVSU0lPTixcbiAgR2Vua2l0RXJyb3IsXG4gIFJlZmxlY3Rpb25TZXJ2ZXIsXG4gIFJ1bkFjdGlvblJlc3BvbnNlU2NoZW1hLFxuICBTdGF0dXNDb2RlcyxcbiAgU3RhdHVzU2NoZW1hLFxuICBkZWZpbmVGbG93LFxuICBkZWZpbmVKc29uU2NoZW1hLFxuICBkZWZpbmVTY2hlbWEsXG4gIGRlZmluZVN0cmVhbWluZ0Zsb3csXG4gIGRlbGV0ZVVuZGVmaW5lZFByb3BzLFxuICBmbG93TWV0YWRhdGFQcmVmaXgsXG4gIGdldEN1cnJlbnRFbnYsXG4gIGdldEZsb3dBdXRoLFxuICBnZXRTdHJlYW1pbmdDYWxsYmFjayxcbiAgaXNEZXZFbnYsXG4gIHJ1bixcbiAgcnVuV2l0aFN0cmVhbWluZ0NhbGxiYWNrLFxuICB6XG59IGZyb20gXCJAZ2Vua2l0LWFpL2NvcmVcIjtcbmltcG9ydCB7IGxvYWRQcm9tcHRGaWxlIH0gZnJvbSBcIkBnZW5raXQtYWkvZG90cHJvbXB0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZW5raXQuanNcIjtcbmV4cG9ydCB7XG4gIERvY3VtZW50LFxuICBEb2N1bWVudERhdGFTY2hlbWEsXG4gIEZsb3dBY3Rpb25JbnB1dFNjaGVtYSxcbiAgRmxvd0Vycm9yU2NoZW1hLFxuICBGbG93SW52b2tlRW52ZWxvcGVNZXNzYWdlU2NoZW1hLFxuICBGbG93U2VydmVyLFxuICBHRU5LSVRfQ0xJRU5UX0hFQURFUixcbiAgR0VOS0lUX1ZFUlNJT04sXG4gIEdlbmVyYXRpb25CbG9ja2VkRXJyb3IsXG4gIEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWEsXG4gIEdlbmVyYXRpb25SZXNwb25zZUVycm9yLFxuICBHZW5raXRFcnJvcixcbiAgTGxtUmVzcG9uc2VTY2hlbWEsXG4gIExsbVN0YXRzU2NoZW1hLFxuICBNZXNzYWdlLFxuICBNZXNzYWdlU2NoZW1hLFxuICBNb2RlbElkU2NoZW1hLFxuICBNb2RlbFJlcXVlc3RTY2hlbWEsXG4gIE1vZGVsUmVzcG9uc2VTY2hlbWEsXG4gIFBhcnRTY2hlbWEsXG4gIFJlZmxlY3Rpb25TZXJ2ZXIsXG4gIFJvbGVTY2hlbWEsXG4gIFJ1bkFjdGlvblJlc3BvbnNlU2NoZW1hLFxuICBTdGF0dXNDb2RlcyxcbiAgU3RhdHVzU2NoZW1hLFxuICBUb29sQ2FsbFNjaGVtYSxcbiAgVG9vbFNjaGVtYSxcbiAgYXNUb29sLFxuICBkZWZpbmVGbG93LFxuICBkZWZpbmVKc29uU2NoZW1hLFxuICBkZWZpbmVTY2hlbWEsXG4gIGRlZmluZVN0cmVhbWluZ0Zsb3csXG4gIGRlbGV0ZVVuZGVmaW5lZFByb3BzLFxuICBlbWJlZGRlclJlZixcbiAgZXZhbHVhdG9yUmVmLFxuICBmbG93TWV0YWRhdGFQcmVmaXgsXG4gIGdldEN1cnJlbnRFbnYsXG4gIGdldEZsb3dBdXRoLFxuICBnZXRTdHJlYW1pbmdDYWxsYmFjayxcbiAgaW5kZXhlclJlZixcbiAgaXNEZXZFbnYsXG4gIGxvYWRQcm9tcHRGaWxlLFxuICByZXJhbmtlclJlZixcbiAgcmV0cmlldmVyUmVmLFxuICBydW4sXG4gIHJ1bldpdGhTdHJlYW1pbmdDYWxsYmFjayxcbiAgdG9HZW5lcmF0ZVJlcXVlc3QsXG4gIHRvVG9vbFdpcmVGb3JtYXQsXG4gIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/lib/plugin.mjs":
/*!********************************************!*\
  !*** ./node_modules/genkit/lib/plugin.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   genkitPlugin: () => (/* binding */ genkitPlugin)\n/* harmony export */ });\n/* harmony import */ var _chunk_DJRN6NKF_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-DJRN6NKF.mjs */ \"(rsc)/./node_modules/genkit/lib/chunk-DJRN6NKF.mjs\");\n\nfunction genkitPlugin(pluginName, initFn) {\n  return (genkit) => ({\n    name: pluginName,\n    initializer: () => (0,_chunk_DJRN6NKF_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(this, null, function* () {\n      yield initFn(genkit);\n    })\n  });\n}\n\n//# sourceMappingURL=plugin.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9wbHVnaW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw0REFBTztBQUM5QjtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L2xpYi9wbHVnaW4ubWpzP2NiODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgX19hc3luY1xufSBmcm9tIFwiLi9jaHVuay1ESlJONk5LRi5tanNcIjtcbmZ1bmN0aW9uIGdlbmtpdFBsdWdpbihwbHVnaW5OYW1lLCBpbml0Rm4pIHtcbiAgcmV0dXJuIChnZW5raXQpID0+ICh7XG4gICAgbmFtZTogcGx1Z2luTmFtZSxcbiAgICBpbml0aWFsaXplcjogKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgeWllbGQgaW5pdEZuKGdlbmtpdCk7XG4gICAgfSlcbiAgfSk7XG59XG5leHBvcnQge1xuICBnZW5raXRQbHVnaW5cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbHVnaW4ubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/lib/plugin.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/chunk-CUDQQW6G.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/chunk-CUDQQW6G.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __async: () => (/* binding */ __async),\n/* harmony export */   __asyncGenerator: () => (/* binding */ __asyncGenerator),\n/* harmony export */   __await: () => (/* binding */ __await),\n/* harmony export */   __spreadProps: () => (/* binding */ __spreadProps),\n/* harmony export */   __spreadValues: () => (/* binding */ __spreadValues)\n/* harmony export */ });\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nvar __await = function(promise, isYieldStar) {\n  this[0] = promise;\n  this[1] = isYieldStar;\n};\nvar __asyncGenerator = (__this, __arguments, generator) => {\n  var resume = (k, v, yes, no) => {\n    try {\n      var x = generator[k](v), isAwait = (v = x.value) instanceof __await, done = x.done;\n      Promise.resolve(isAwait ? v[0] : v).then((y) => isAwait ? resume(k === \"return\" ? k : \"next\", v[1] ? { done: y.done, value: y.value } : y, yes, no) : yes({ value: y, done })).catch((e) => resume(\"throw\", e, yes, no));\n    } catch (e) {\n      no(e);\n    }\n  }, method = (k) => it[k] = (x) => new Promise((yes, no) => resume(k, x, yes, no)), it = {};\n  return generator = generator.apply(__this, __arguments), it[__knownSymbol(\"asyncIterator\")] = () => it, method(\"next\"), method(\"throw\"), method(\"return\"), it;\n};\n\n\n//# sourceMappingURL=chunk-CUDQQW6G.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9jaHVuay1DVURRUVc2Ry5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZHQUE2RywrQkFBK0Isc0JBQXNCLGdCQUFnQjtBQUNsTCxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQVFFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL2NodW5rLUNVRFFRVzZHLm1qcz84OTM1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fa25vd25TeW1ib2wgPSAobmFtZSwgc3ltYm9sKSA9PiAoc3ltYm9sID0gU3ltYm9sW25hbWVdKSA/IHN5bWJvbCA6IFN5bWJvbC5mb3IoXCJTeW1ib2wuXCIgKyBuYW1lKTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyA9IChhLCBiKSA9PiBfX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG52YXIgX19hd2FpdCA9IGZ1bmN0aW9uKHByb21pc2UsIGlzWWllbGRTdGFyKSB7XG4gIHRoaXNbMF0gPSBwcm9taXNlO1xuICB0aGlzWzFdID0gaXNZaWVsZFN0YXI7XG59O1xudmFyIF9fYXN5bmNHZW5lcmF0b3IgPSAoX190aGlzLCBfX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSA9PiB7XG4gIHZhciByZXN1bWUgPSAoaywgdiwgeWVzLCBubykgPT4ge1xuICAgIHRyeSB7XG4gICAgICB2YXIgeCA9IGdlbmVyYXRvcltrXSh2KSwgaXNBd2FpdCA9ICh2ID0geC52YWx1ZSkgaW5zdGFuY2VvZiBfX2F3YWl0LCBkb25lID0geC5kb25lO1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKGlzQXdhaXQgPyB2WzBdIDogdikudGhlbigoeSkgPT4gaXNBd2FpdCA/IHJlc3VtZShrID09PSBcInJldHVyblwiID8gayA6IFwibmV4dFwiLCB2WzFdID8geyBkb25lOiB5LmRvbmUsIHZhbHVlOiB5LnZhbHVlIH0gOiB5LCB5ZXMsIG5vKSA6IHllcyh7IHZhbHVlOiB5LCBkb25lIH0pKS5jYXRjaCgoZSkgPT4gcmVzdW1lKFwidGhyb3dcIiwgZSwgeWVzLCBubykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG5vKGUpO1xuICAgIH1cbiAgfSwgbWV0aG9kID0gKGspID0+IGl0W2tdID0gKHgpID0+IG5ldyBQcm9taXNlKCh5ZXMsIG5vKSA9PiByZXN1bWUoaywgeCwgeWVzLCBubykpLCBpdCA9IHt9O1xuICByZXR1cm4gZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpLCBpdFtfX2tub3duU3ltYm9sKFwiYXN5bmNJdGVyYXRvclwiKV0gPSAoKSA9PiBpdCwgbWV0aG9kKFwibmV4dFwiKSwgbWV0aG9kKFwidGhyb3dcIiksIG1ldGhvZChcInJldHVyblwiKSwgaXQ7XG59O1xuXG5leHBvcnQge1xuICBfX3NwcmVhZFZhbHVlcyxcbiAgX19zcHJlYWRQcm9wcyxcbiAgX19hc3luYyxcbiAgX19hd2FpdCxcbiAgX19hc3luY0dlbmVyYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUNVRFFRVzZHLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/chunk-CUDQQW6G.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDataPointSchema: () => (/* reexport safe */ _evaluator_js__WEBPACK_IMPORTED_MODULE_3__.BaseDataPointSchema),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_1__.Document),\n/* harmony export */   DocumentDataSchema: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_1__.DocumentDataSchema),\n/* harmony export */   GenerateResponse: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.GenerateResponse),\n/* harmony export */   GenerationBlockedError: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.GenerationBlockedError),\n/* harmony export */   GenerationCommonConfigSchema: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_5__.GenerationCommonConfigSchema),\n/* harmony export */   GenerationResponseError: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.GenerationResponseError),\n/* harmony export */   Message: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.Message),\n/* harmony export */   MessageSchema: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_5__.MessageSchema),\n/* harmony export */   ModelRequestSchema: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_5__.ModelRequestSchema),\n/* harmony export */   ModelResponseSchema: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_5__.ModelResponseSchema),\n/* harmony export */   PartSchema: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_5__.PartSchema),\n/* harmony export */   RoleSchema: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_5__.RoleSchema),\n/* harmony export */   asTool: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_9__.asTool),\n/* harmony export */   definePrompt: () => (/* reexport safe */ _prompt_js__WEBPACK_IMPORTED_MODULE_6__.definePrompt),\n/* harmony export */   defineTool: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_9__.defineTool),\n/* harmony export */   embed: () => (/* reexport safe */ _embedder_js__WEBPACK_IMPORTED_MODULE_2__.embed),\n/* harmony export */   embedderRef: () => (/* reexport safe */ _embedder_js__WEBPACK_IMPORTED_MODULE_2__.embedderRef),\n/* harmony export */   evaluate: () => (/* reexport safe */ _evaluator_js__WEBPACK_IMPORTED_MODULE_3__.evaluate),\n/* harmony export */   evaluatorRef: () => (/* reexport safe */ _evaluator_js__WEBPACK_IMPORTED_MODULE_3__.evaluatorRef),\n/* harmony export */   generate: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.generate),\n/* harmony export */   generateStream: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.generateStream),\n/* harmony export */   index: () => (/* reexport safe */ _retriever_js__WEBPACK_IMPORTED_MODULE_8__.index),\n/* harmony export */   indexerRef: () => (/* reexport safe */ _retriever_js__WEBPACK_IMPORTED_MODULE_8__.indexerRef),\n/* harmony export */   normalizePart: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.normalizePart),\n/* harmony export */   renderPrompt: () => (/* reexport safe */ _prompt_js__WEBPACK_IMPORTED_MODULE_6__.renderPrompt),\n/* harmony export */   rerank: () => (/* reexport safe */ _reranker_js__WEBPACK_IMPORTED_MODULE_7__.rerank),\n/* harmony export */   rerankerRef: () => (/* reexport safe */ _reranker_js__WEBPACK_IMPORTED_MODULE_7__.rerankerRef),\n/* harmony export */   retrieve: () => (/* reexport safe */ _retriever_js__WEBPACK_IMPORTED_MODULE_8__.retrieve),\n/* harmony export */   retrieverRef: () => (/* reexport safe */ _retriever_js__WEBPACK_IMPORTED_MODULE_8__.retrieverRef),\n/* harmony export */   tagAsPreamble: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.tagAsPreamble),\n/* harmony export */   toGenerateRequest: () => (/* reexport safe */ _generate_js__WEBPACK_IMPORTED_MODULE_4__.toGenerateRequest)\n/* harmony export */ });\n/* harmony import */ var _chunk_CUDQQW6G_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-CUDQQW6G.mjs */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/chunk-CUDQQW6G.mjs\");\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/document.js\");\n/* harmony import */ var _embedder_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./embedder.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/embedder.js\");\n/* harmony import */ var _evaluator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./evaluator.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/evaluator.js\");\n/* harmony import */ var _generate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./generate.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/generate.js\");\n/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./model.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/model.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/prompt.js\");\n/* harmony import */ var _reranker_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./reranker.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/reranker.js\");\n/* harmony import */ var _retriever_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./retriever.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/retriever.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/tool.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/types.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types_js__WEBPACK_IMPORTED_MODULE_10__) if([\"default\",\"BaseDataPointSchema\",\"Document\",\"DocumentDataSchema\",\"GenerateResponse\",\"GenerationBlockedError\",\"GenerationCommonConfigSchema\",\"GenerationResponseError\",\"Message\",\"MessageSchema\",\"ModelRequestSchema\",\"ModelResponseSchema\",\"PartSchema\",\"RoleSchema\",\"asTool\",\"definePrompt\",\"defineTool\",\"embed\",\"embedderRef\",\"evaluate\",\"evaluatorRef\",\"generate\",\"generateStream\",\"index\",\"indexerRef\",\"normalizePart\",\"renderPrompt\",\"rerank\",\"rerankerRef\",\"retrieve\",\"retrieverRef\",\"tagAsPreamble\",\"toGenerateRequest\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types_js__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2FpL2xpYi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QjtBQUMrQjtBQUl0QztBQUtDO0FBV0Q7QUFRSDtBQUlDO0FBSUU7QUFNQztBQUlMO0FBQ1E7QUFrQ3pCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvYWkvbGliL2luZGV4Lm1qcz9kM2ZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4vY2h1bmstQ1VEUVFXNkcubWpzXCI7XG5pbXBvcnQgeyBEb2N1bWVudCwgRG9jdW1lbnREYXRhU2NoZW1hIH0gZnJvbSBcIi4vZG9jdW1lbnQuanNcIjtcbmltcG9ydCB7XG4gIGVtYmVkLFxuICBlbWJlZGRlclJlZlxufSBmcm9tIFwiLi9lbWJlZGRlci5qc1wiO1xuaW1wb3J0IHtcbiAgQmFzZURhdGFQb2ludFNjaGVtYSxcbiAgZXZhbHVhdGUsXG4gIGV2YWx1YXRvclJlZlxufSBmcm9tIFwiLi9ldmFsdWF0b3IuanNcIjtcbmltcG9ydCB7XG4gIEdlbmVyYXRlUmVzcG9uc2UsXG4gIEdlbmVyYXRpb25CbG9ja2VkRXJyb3IsXG4gIEdlbmVyYXRpb25SZXNwb25zZUVycm9yLFxuICBNZXNzYWdlLFxuICBnZW5lcmF0ZSxcbiAgZ2VuZXJhdGVTdHJlYW0sXG4gIG5vcm1hbGl6ZVBhcnQsXG4gIHRhZ0FzUHJlYW1ibGUsXG4gIHRvR2VuZXJhdGVSZXF1ZXN0XG59IGZyb20gXCIuL2dlbmVyYXRlLmpzXCI7XG5pbXBvcnQge1xuICBHZW5lcmF0aW9uQ29tbW9uQ29uZmlnU2NoZW1hLFxuICBNZXNzYWdlU2NoZW1hLFxuICBNb2RlbFJlcXVlc3RTY2hlbWEsXG4gIE1vZGVsUmVzcG9uc2VTY2hlbWEsXG4gIFBhcnRTY2hlbWEsXG4gIFJvbGVTY2hlbWFcbn0gZnJvbSBcIi4vbW9kZWwuanNcIjtcbmltcG9ydCB7XG4gIGRlZmluZVByb21wdCxcbiAgcmVuZGVyUHJvbXB0XG59IGZyb20gXCIuL3Byb21wdC5qc1wiO1xuaW1wb3J0IHtcbiAgcmVyYW5rLFxuICByZXJhbmtlclJlZlxufSBmcm9tIFwiLi9yZXJhbmtlci5qc1wiO1xuaW1wb3J0IHtcbiAgaW5kZXgsXG4gIGluZGV4ZXJSZWYsXG4gIHJldHJpZXZlLFxuICByZXRyaWV2ZXJSZWZcbn0gZnJvbSBcIi4vcmV0cmlldmVyLmpzXCI7XG5pbXBvcnQge1xuICBhc1Rvb2wsXG4gIGRlZmluZVRvb2xcbn0gZnJvbSBcIi4vdG9vbC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHlwZXMuanNcIjtcbmV4cG9ydCB7XG4gIEJhc2VEYXRhUG9pbnRTY2hlbWEsXG4gIERvY3VtZW50LFxuICBEb2N1bWVudERhdGFTY2hlbWEsXG4gIEdlbmVyYXRlUmVzcG9uc2UsXG4gIEdlbmVyYXRpb25CbG9ja2VkRXJyb3IsXG4gIEdlbmVyYXRpb25Db21tb25Db25maWdTY2hlbWEsXG4gIEdlbmVyYXRpb25SZXNwb25zZUVycm9yLFxuICBNZXNzYWdlLFxuICBNZXNzYWdlU2NoZW1hLFxuICBNb2RlbFJlcXVlc3RTY2hlbWEsXG4gIE1vZGVsUmVzcG9uc2VTY2hlbWEsXG4gIFBhcnRTY2hlbWEsXG4gIFJvbGVTY2hlbWEsXG4gIGFzVG9vbCxcbiAgZGVmaW5lUHJvbXB0LFxuICBkZWZpbmVUb29sLFxuICBlbWJlZCxcbiAgZW1iZWRkZXJSZWYsXG4gIGV2YWx1YXRlLFxuICBldmFsdWF0b3JSZWYsXG4gIGdlbmVyYXRlLFxuICBnZW5lcmF0ZVN0cmVhbSxcbiAgaW5kZXgsXG4gIGluZGV4ZXJSZWYsXG4gIG5vcm1hbGl6ZVBhcnQsXG4gIHJlbmRlclByb21wdCxcbiAgcmVyYW5rLFxuICByZXJhbmtlclJlZixcbiAgcmV0cmlldmUsXG4gIHJldHJpZXZlclJlZixcbiAgdGFnQXNQcmVhbWJsZSxcbiAgdG9HZW5lcmF0ZVJlcXVlc3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/@genkit-ai/ai/lib/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/body.js":
/*!*****************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/body.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clone: () => (/* binding */ clone),\n/* harmony export */   \"default\": () => (/* binding */ Body),\n/* harmony export */   extractContentType: () => (/* binding */ extractContentType),\n/* harmony export */   getTotalBytes: () => (/* binding */ getTotalBytes),\n/* harmony export */   writeToStream: () => (/* binding */ writeToStream)\n/* harmony export */ });\n/* harmony import */ var node_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:stream */ \"node:stream\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:util */ \"node:util\");\n/* harmony import */ var node_buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:buffer */ \"node:buffer\");\n/* harmony import */ var fetch_blob__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fetch-blob */ \"(rsc)/./node_modules/fetch-blob/index.js\");\n/* harmony import */ var formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! formdata-polyfill/esm.min.js */ \"(rsc)/./node_modules/formdata-polyfill/esm.min.js\");\n/* harmony import */ var _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./errors/fetch-error.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/fetch-error.js\");\n/* harmony import */ var _errors_base_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./errors/base.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/base.js\");\n/* harmony import */ var _utils_is_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/is.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is.js\");\n\n/**\n * Body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\n\n\n\n\n\n\n\n\n\n\n\nconst pipeline = (0,node_util__WEBPACK_IMPORTED_MODULE_1__.promisify)(node_stream__WEBPACK_IMPORTED_MODULE_0__.pipeline);\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Body {\n\tconstructor(body, {\n\t\tsize = 0\n\t} = {}) {\n\t\tlet boundary = null;\n\n\t\tif (body === null) {\n\t\t\t// Body is undefined or null\n\t\t\tbody = null;\n\t\t} else if ((0,_utils_is_js__WEBPACK_IMPORTED_MODULE_5__.isURLSearchParameters)(body)) {\n\t\t\t// Body is a URLSearchParams\n\t\t\tbody = node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(body.toString());\n\t\t} else if ((0,_utils_is_js__WEBPACK_IMPORTED_MODULE_5__.isBlob)(body)) {\n\t\t\t// Body is blob\n\t\t} else if (node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.isBuffer(body)) {\n\t\t\t// Body is Buffer\n\t\t} else if (node_util__WEBPACK_IMPORTED_MODULE_1__.types.isAnyArrayBuffer(body)) {\n\t\t\t// Body is ArrayBuffer\n\t\t\tbody = node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(body);\n\t\t} else if (ArrayBuffer.isView(body)) {\n\t\t\t// Body is ArrayBufferView\n\t\t\tbody = node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t\t} else if (body instanceof node_stream__WEBPACK_IMPORTED_MODULE_0__) {\n\t\t\t// Body is stream\n\t\t} else if (body instanceof formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_4__.FormData) {\n\t\t\t// Body is FormData\n\t\t\tbody = (0,formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_4__.formDataToBlob)(body);\n\t\t\tboundary = body.type.split('=')[1];\n\t\t} else {\n\t\t\t// None of the above\n\t\t\t// coerce to string then buffer\n\t\t\tbody = node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(String(body));\n\t\t}\n\n\t\tlet stream = body;\n\n\t\tif (node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.isBuffer(body)) {\n\t\t\tstream = node_stream__WEBPACK_IMPORTED_MODULE_0__.Readable.from(body);\n\t\t} else if ((0,_utils_is_js__WEBPACK_IMPORTED_MODULE_5__.isBlob)(body)) {\n\t\t\tstream = node_stream__WEBPACK_IMPORTED_MODULE_0__.Readable.from(body.stream());\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tbody,\n\t\t\tstream,\n\t\t\tboundary,\n\t\t\tdisturbed: false,\n\t\t\terror: null\n\t\t};\n\t\tthis.size = size;\n\n\t\tif (body instanceof node_stream__WEBPACK_IMPORTED_MODULE_0__) {\n\t\t\tbody.on('error', error_ => {\n\t\t\t\tconst error = error_ instanceof _errors_base_js__WEBPACK_IMPORTED_MODULE_6__.FetchBaseError ?\n\t\t\t\t\terror_ :\n\t\t\t\t\tnew _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_7__.FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, 'system', error_);\n\t\t\t\tthis[INTERNALS].error = error;\n\t\t\t});\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this[INTERNALS].stream;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t}\n\n\t/**\n\t * Decode response as ArrayBuffer\n\t *\n\t * @return  Promise\n\t */\n\tasync arrayBuffer() {\n\t\tconst {buffer, byteOffset, byteLength} = await consumeBody(this);\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t}\n\n\tasync formData() {\n\t\tconst ct = this.headers.get('content-type');\n\n\t\tif (ct.startsWith('application/x-www-form-urlencoded')) {\n\t\t\tconst formData = new formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_4__.FormData();\n\t\t\tconst parameters = new URLSearchParams(await this.text());\n\n\t\t\tfor (const [name, value] of parameters) {\n\t\t\t\tformData.append(name, value);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\tconst {toFormData} = await __webpack_require__.e(/*! import() */ \"vendor-chunks/genkit\").then(__webpack_require__.bind(__webpack_require__, /*! ./utils/multipart-parser.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/multipart-parser.js\"));\n\t\treturn toFormData(this.body, ct);\n\t}\n\n\t/**\n\t * Return raw response as Blob\n\t *\n\t * @return Promise\n\t */\n\tasync blob() {\n\t\tconst ct = (this.headers && this.headers.get('content-type')) || (this[INTERNALS].body && this[INTERNALS].body.type) || '';\n\t\tconst buf = await this.arrayBuffer();\n\n\t\treturn new fetch_blob__WEBPACK_IMPORTED_MODULE_3__[\"default\"]([buf], {\n\t\t\ttype: ct\n\t\t});\n\t}\n\n\t/**\n\t * Decode response as json\n\t *\n\t * @return  Promise\n\t */\n\tasync json() {\n\t\tconst text = await this.text();\n\t\treturn JSON.parse(text);\n\t}\n\n\t/**\n\t * Decode response as text\n\t *\n\t * @return  Promise\n\t */\n\tasync text() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn new TextDecoder().decode(buffer);\n\t}\n\n\t/**\n\t * Decode response as buffer (non-spec api)\n\t *\n\t * @return  Promise\n\t */\n\tbuffer() {\n\t\treturn consumeBody(this);\n\t}\n}\n\nBody.prototype.buffer = (0,node_util__WEBPACK_IMPORTED_MODULE_1__.deprecate)(Body.prototype.buffer, 'Please use \\'response.arrayBuffer()\\' instead of \\'response.buffer()\\'', 'node-fetch#buffer');\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: {enumerable: true},\n\tbodyUsed: {enumerable: true},\n\tarrayBuffer: {enumerable: true},\n\tblob: {enumerable: true},\n\tjson: {enumerable: true},\n\ttext: {enumerable: true},\n\tdata: {get: (0,node_util__WEBPACK_IMPORTED_MODULE_1__.deprecate)(() => {},\n\t\t'data doesn\\'t exist, use json(), text(), arrayBuffer(), or body instead',\n\t\t'https://github.com/node-fetch/node-fetch/issues/1000 (response)')}\n});\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return Promise\n */\nasync function consumeBody(data) {\n\tif (data[INTERNALS].disturbed) {\n\t\tthrow new TypeError(`body used already for: ${data.url}`);\n\t}\n\n\tdata[INTERNALS].disturbed = true;\n\n\tif (data[INTERNALS].error) {\n\t\tthrow data[INTERNALS].error;\n\t}\n\n\tconst {body} = data;\n\n\t// Body is null\n\tif (body === null) {\n\t\treturn node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.alloc(0);\n\t}\n\n\t/* c8 ignore next 3 */\n\tif (!(body instanceof node_stream__WEBPACK_IMPORTED_MODULE_0__)) {\n\t\treturn node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.alloc(0);\n\t}\n\n\t// Body is stream\n\t// get ready to actually consume the body\n\tconst accum = [];\n\tlet accumBytes = 0;\n\n\ttry {\n\t\tfor await (const chunk of body) {\n\t\t\tif (data.size > 0 && accumBytes + chunk.length > data.size) {\n\t\t\t\tconst error = new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_7__.FetchError(`content size at ${data.url} over limit: ${data.size}`, 'max-size');\n\t\t\t\tbody.destroy(error);\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t}\n\t} catch (error) {\n\t\tconst error_ = error instanceof _errors_base_js__WEBPACK_IMPORTED_MODULE_6__.FetchBaseError ? error : new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_7__.FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, 'system', error);\n\t\tthrow error_;\n\t}\n\n\tif (body.readableEnded === true || body._readableState.ended === true) {\n\t\ttry {\n\t\t\tif (accum.every(c => typeof c === 'string')) {\n\t\t\t\treturn node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(accum.join(''));\n\t\t\t}\n\n\t\t\treturn node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.concat(accum, accumBytes);\n\t\t} catch (error) {\n\t\t\tthrow new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_7__.FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, 'system', error);\n\t\t}\n\t} else {\n\t\tthrow new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_7__.FetchError(`Premature close of server response while trying to fetch ${data.url}`);\n\t}\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed   instance       Response or Request instance\n * @param   String  highWaterMark  highWaterMark for both PassThrough body streams\n * @return  Mixed\n */\nconst clone = (instance, highWaterMark) => {\n\tlet p1;\n\tlet p2;\n\tlet {body} = instance[INTERNALS];\n\n\t// Don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// Check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif ((body instanceof node_stream__WEBPACK_IMPORTED_MODULE_0__) && (typeof body.getBoundary !== 'function')) {\n\t\t// Tee instance body\n\t\tp1 = new node_stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough({highWaterMark});\n\t\tp2 = new node_stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough({highWaterMark});\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// Set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].stream = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n};\n\nconst getNonSpecFormDataBoundary = (0,node_util__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n\tbody => body.getBoundary(),\n\t'form-data doesn\\'t follow the spec and requires special treatment. Use alternative package',\n\t'https://github.com/node-fetch/node-fetch/issues/1167'\n);\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param {any} body Any options.body input\n * @returns {string | null}\n */\nconst extractContentType = (body, request) => {\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn null;\n\t}\n\n\t// Body is string\n\tif (typeof body === 'string') {\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n\n\t// Body is a URLSearchParams\n\tif ((0,_utils_is_js__WEBPACK_IMPORTED_MODULE_5__.isURLSearchParameters)(body)) {\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t}\n\n\t// Body is blob\n\tif ((0,_utils_is_js__WEBPACK_IMPORTED_MODULE_5__.isBlob)(body)) {\n\t\treturn body.type || null;\n\t}\n\n\t// Body is a Buffer (Buffer, ArrayBuffer or ArrayBufferView)\n\tif (node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.isBuffer(body) || node_util__WEBPACK_IMPORTED_MODULE_1__.types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {\n\t\treturn null;\n\t}\n\n\tif (body instanceof formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_4__.FormData) {\n\t\treturn `multipart/form-data; boundary=${request[INTERNALS].boundary}`;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getBoundary === 'function') {\n\t\treturn `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;\n\t}\n\n\t// Body is stream - can't really do much about this\n\tif (body instanceof node_stream__WEBPACK_IMPORTED_MODULE_0__) {\n\t\treturn null;\n\t}\n\n\t// Body constructor defaults other things to string\n\treturn 'text/plain;charset=UTF-8';\n};\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param {any} obj.body Body object from the Body instance.\n * @returns {number | null}\n */\nconst getTotalBytes = request => {\n\tconst {body} = request[INTERNALS];\n\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn 0;\n\t}\n\n\t// Body is Blob\n\tif ((0,_utils_is_js__WEBPACK_IMPORTED_MODULE_5__.isBlob)(body)) {\n\t\treturn body.size;\n\t}\n\n\t// Body is Buffer\n\tif (node_buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.isBuffer(body)) {\n\t\treturn body.length;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getLengthSync === 'function') {\n\t\treturn body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;\n\t}\n\n\t// Body is stream\n\treturn null;\n};\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param {Stream.Writable} dest The stream to write to.\n * @param obj.body Body object from the Body instance.\n * @returns {Promise<void>}\n */\nconst writeToStream = async (dest, {body}) => {\n\tif (body === null) {\n\t\t// Body is null\n\t\tdest.end();\n\t} else {\n\t\t// Body is stream\n\t\tawait pipeline(body, dest);\n\t}\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9ib2R5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0Q7QUFDTTtBQUNuQjs7QUFFTDtBQUN3Qzs7QUFFbkI7QUFDSDtBQUNZOztBQUU1RCxpQkFBaUIsb0RBQVMsQ0FBQyxpREFBZTtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQSxHQUFHLElBQUk7QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLFNBQVMsbUVBQXFCO0FBQ2xDO0FBQ0EsVUFBVSwrQ0FBTTtBQUNoQixJQUFJLFNBQVMsb0RBQU07QUFDbkI7QUFDQSxJQUFJLFNBQVMsK0NBQU07QUFDbkI7QUFDQSxJQUFJLFNBQVMsNENBQUs7QUFDbEI7QUFDQSxVQUFVLCtDQUFNO0FBQ2hCLElBQUk7QUFDSjtBQUNBLFVBQVUsK0NBQU07QUFDaEIsSUFBSSx5QkFBeUIsd0NBQU07QUFDbkM7QUFDQSxJQUFJLHlCQUF5QixrRUFBUTtBQUNyQztBQUNBLFVBQVUsNEVBQWM7QUFDeEI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLFVBQVUsK0NBQU07QUFDaEI7O0FBRUE7O0FBRUEsTUFBTSwrQ0FBTTtBQUNaLFlBQVksaURBQWU7QUFDM0IsSUFBSSxTQUFTLG9EQUFNO0FBQ25CLFlBQVksaURBQWU7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0Isd0NBQU07QUFDNUI7QUFDQSxvQ0FBb0MsMkRBQWM7QUFDbEQ7QUFDQSxTQUFTLDhEQUFVLGdEQUFnRCxTQUFTLElBQUksZUFBZTtBQUMvRjtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQ0FBZ0M7QUFDekM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLGtFQUFRO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFNBQVMsWUFBWSxRQUFRLHlPQUFxQztBQUNsRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYSxrREFBSTtBQUNqQjtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3QkFBd0Isb0RBQVM7O0FBRWpDO0FBQ0E7QUFDQSxRQUFRLGlCQUFpQjtBQUN6QixZQUFZLGlCQUFpQjtBQUM3QixlQUFlLGlCQUFpQjtBQUNoQyxRQUFRLGlCQUFpQjtBQUN6QixRQUFRLGlCQUFpQjtBQUN6QixRQUFRLGlCQUFpQjtBQUN6QixRQUFRLEtBQUssb0RBQVMsU0FBUztBQUMvQjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsU0FBUztBQUN6RDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxNQUFNOztBQUVkO0FBQ0E7QUFDQSxTQUFTLCtDQUFNO0FBQ2Y7O0FBRUE7QUFDQSx1QkFBdUIsd0NBQU07QUFDN0IsU0FBUywrQ0FBTTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBVSxvQkFBb0IsVUFBVSxjQUFjLFVBQVU7QUFDdEY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxrQ0FBa0MsMkRBQWMsZUFBZSw4REFBVSxnREFBZ0QsU0FBUyxJQUFJLGNBQWM7QUFDcEo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtDQUFNO0FBQ2pCOztBQUVBLFVBQVUsK0NBQU07QUFDaEIsSUFBSTtBQUNKLGFBQWEsOERBQVUsbURBQW1ELFNBQVMsSUFBSSxjQUFjO0FBQ3JHO0FBQ0EsR0FBRztBQUNILFlBQVksOERBQVUsNkRBQTZELFNBQVM7QUFDNUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLE1BQU0sTUFBTTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0JBQXNCLHdDQUFNO0FBQzVCO0FBQ0EsV0FBVyxvREFBVyxFQUFFLGNBQWM7QUFDdEMsV0FBVyxvREFBVyxFQUFFLGNBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsbUNBQW1DLG9EQUFTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxLQUFLO0FBQ2hCLGFBQWE7QUFDYjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBLEtBQUssbUVBQXFCO0FBQzFCLDRDQUE0QztBQUM1Qzs7QUFFQTtBQUNBLEtBQUssb0RBQU07QUFDWDtBQUNBOztBQUVBO0FBQ0EsS0FBSywrQ0FBTSxtQkFBbUIsNENBQUs7QUFDbkM7QUFDQTs7QUFFQSxxQkFBcUIsa0VBQVE7QUFDN0IsK0JBQStCLFdBQVcsNEJBQTRCO0FBQ3RFOztBQUVBO0FBQ0E7QUFDQSw4QkFBOEIsV0FBVyxpQ0FBaUM7QUFDMUU7O0FBRUE7QUFDQSxxQkFBcUIsd0NBQU07QUFDM0I7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEtBQUs7QUFDaEIsYUFBYTtBQUNiO0FBQ087QUFDUCxRQUFRLE1BQU07O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLLG9EQUFNO0FBQ1g7QUFDQTs7QUFFQTtBQUNBLEtBQUssK0NBQU07QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QjtBQUNBLGFBQWE7QUFDYjtBQUNPLG9DQUFvQyxLQUFLO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvYm9keS5qcz9lNjI0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBCb2R5LmpzXG4gKlxuICogQm9keSBpbnRlcmZhY2UgcHJvdmlkZXMgY29tbW9uIG1ldGhvZHMgZm9yIFJlcXVlc3QgYW5kIFJlc3BvbnNlXG4gKi9cblxuaW1wb3J0IFN0cmVhbSwge1Bhc3NUaHJvdWdofSBmcm9tICdub2RlOnN0cmVhbSc7XG5pbXBvcnQge3R5cGVzLCBkZXByZWNhdGUsIHByb21pc2lmeX0gZnJvbSAnbm9kZTp1dGlsJztcbmltcG9ydCB7QnVmZmVyfSBmcm9tICdub2RlOmJ1ZmZlcic7XG5cbmltcG9ydCBCbG9iIGZyb20gJ2ZldGNoLWJsb2InO1xuaW1wb3J0IHtGb3JtRGF0YSwgZm9ybURhdGFUb0Jsb2J9IGZyb20gJ2Zvcm1kYXRhLXBvbHlmaWxsL2VzbS5taW4uanMnO1xuXG5pbXBvcnQge0ZldGNoRXJyb3J9IGZyb20gJy4vZXJyb3JzL2ZldGNoLWVycm9yLmpzJztcbmltcG9ydCB7RmV0Y2hCYXNlRXJyb3J9IGZyb20gJy4vZXJyb3JzL2Jhc2UuanMnO1xuaW1wb3J0IHtpc0Jsb2IsIGlzVVJMU2VhcmNoUGFyYW1ldGVyc30gZnJvbSAnLi91dGlscy9pcy5qcyc7XG5cbmNvbnN0IHBpcGVsaW5lID0gcHJvbWlzaWZ5KFN0cmVhbS5waXBlbGluZSk7XG5jb25zdCBJTlRFUk5BTFMgPSBTeW1ib2woJ0JvZHkgaW50ZXJuYWxzJyk7XG5cbi8qKlxuICogQm9keSBtaXhpblxuICpcbiAqIFJlZjogaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2JvZHlcbiAqXG4gKiBAcGFyYW0gICBTdHJlYW0gIGJvZHkgIFJlYWRhYmxlIHN0cmVhbVxuICogQHBhcmFtICAgT2JqZWN0ICBvcHRzICBSZXNwb25zZSBvcHRpb25zXG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvZHkge1xuXHRjb25zdHJ1Y3Rvcihib2R5LCB7XG5cdFx0c2l6ZSA9IDBcblx0fSA9IHt9KSB7XG5cdFx0bGV0IGJvdW5kYXJ5ID0gbnVsbDtcblxuXHRcdGlmIChib2R5ID09PSBudWxsKSB7XG5cdFx0XHQvLyBCb2R5IGlzIHVuZGVmaW5lZCBvciBudWxsXG5cdFx0XHRib2R5ID0gbnVsbDtcblx0XHR9IGVsc2UgaWYgKGlzVVJMU2VhcmNoUGFyYW1ldGVycyhib2R5KSkge1xuXHRcdFx0Ly8gQm9keSBpcyBhIFVSTFNlYXJjaFBhcmFtc1xuXHRcdFx0Ym9keSA9IEJ1ZmZlci5mcm9tKGJvZHkudG9TdHJpbmcoKSk7XG5cdFx0fSBlbHNlIGlmIChpc0Jsb2IoYm9keSkpIHtcblx0XHRcdC8vIEJvZHkgaXMgYmxvYlxuXHRcdH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKGJvZHkpKSB7XG5cdFx0XHQvLyBCb2R5IGlzIEJ1ZmZlclxuXHRcdH0gZWxzZSBpZiAodHlwZXMuaXNBbnlBcnJheUJ1ZmZlcihib2R5KSkge1xuXHRcdFx0Ly8gQm9keSBpcyBBcnJheUJ1ZmZlclxuXHRcdFx0Ym9keSA9IEJ1ZmZlci5mcm9tKGJvZHkpO1xuXHRcdH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGJvZHkpKSB7XG5cdFx0XHQvLyBCb2R5IGlzIEFycmF5QnVmZmVyVmlld1xuXHRcdFx0Ym9keSA9IEJ1ZmZlci5mcm9tKGJvZHkuYnVmZmVyLCBib2R5LmJ5dGVPZmZzZXQsIGJvZHkuYnl0ZUxlbmd0aCk7XG5cdFx0fSBlbHNlIGlmIChib2R5IGluc3RhbmNlb2YgU3RyZWFtKSB7XG5cdFx0XHQvLyBCb2R5IGlzIHN0cmVhbVxuXHRcdH0gZWxzZSBpZiAoYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKSB7XG5cdFx0XHQvLyBCb2R5IGlzIEZvcm1EYXRhXG5cdFx0XHRib2R5ID0gZm9ybURhdGFUb0Jsb2IoYm9keSk7XG5cdFx0XHRib3VuZGFyeSA9IGJvZHkudHlwZS5zcGxpdCgnPScpWzFdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBOb25lIG9mIHRoZSBhYm92ZVxuXHRcdFx0Ly8gY29lcmNlIHRvIHN0cmluZyB0aGVuIGJ1ZmZlclxuXHRcdFx0Ym9keSA9IEJ1ZmZlci5mcm9tKFN0cmluZyhib2R5KSk7XG5cdFx0fVxuXG5cdFx0bGV0IHN0cmVhbSA9IGJvZHk7XG5cblx0XHRpZiAoQnVmZmVyLmlzQnVmZmVyKGJvZHkpKSB7XG5cdFx0XHRzdHJlYW0gPSBTdHJlYW0uUmVhZGFibGUuZnJvbShib2R5KTtcblx0XHR9IGVsc2UgaWYgKGlzQmxvYihib2R5KSkge1xuXHRcdFx0c3RyZWFtID0gU3RyZWFtLlJlYWRhYmxlLmZyb20oYm9keS5zdHJlYW0oKSk7XG5cdFx0fVxuXG5cdFx0dGhpc1tJTlRFUk5BTFNdID0ge1xuXHRcdFx0Ym9keSxcblx0XHRcdHN0cmVhbSxcblx0XHRcdGJvdW5kYXJ5LFxuXHRcdFx0ZGlzdHVyYmVkOiBmYWxzZSxcblx0XHRcdGVycm9yOiBudWxsXG5cdFx0fTtcblx0XHR0aGlzLnNpemUgPSBzaXplO1xuXG5cdFx0aWYgKGJvZHkgaW5zdGFuY2VvZiBTdHJlYW0pIHtcblx0XHRcdGJvZHkub24oJ2Vycm9yJywgZXJyb3JfID0+IHtcblx0XHRcdFx0Y29uc3QgZXJyb3IgPSBlcnJvcl8gaW5zdGFuY2VvZiBGZXRjaEJhc2VFcnJvciA/XG5cdFx0XHRcdFx0ZXJyb3JfIDpcblx0XHRcdFx0XHRuZXcgRmV0Y2hFcnJvcihgSW52YWxpZCByZXNwb25zZSBib2R5IHdoaWxlIHRyeWluZyB0byBmZXRjaCAke3RoaXMudXJsfTogJHtlcnJvcl8ubWVzc2FnZX1gLCAnc3lzdGVtJywgZXJyb3JfKTtcblx0XHRcdFx0dGhpc1tJTlRFUk5BTFNdLmVycm9yID0gZXJyb3I7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRnZXQgYm9keSgpIHtcblx0XHRyZXR1cm4gdGhpc1tJTlRFUk5BTFNdLnN0cmVhbTtcblx0fVxuXG5cdGdldCBib2R5VXNlZCgpIHtcblx0XHRyZXR1cm4gdGhpc1tJTlRFUk5BTFNdLmRpc3R1cmJlZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWNvZGUgcmVzcG9uc2UgYXMgQXJyYXlCdWZmZXJcblx0ICpcblx0ICogQHJldHVybiAgUHJvbWlzZVxuXHQgKi9cblx0YXN5bmMgYXJyYXlCdWZmZXIoKSB7XG5cdFx0Y29uc3Qge2J1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aH0gPSBhd2FpdCBjb25zdW1lQm9keSh0aGlzKTtcblx0XHRyZXR1cm4gYnVmZmVyLnNsaWNlKGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoKTtcblx0fVxuXG5cdGFzeW5jIGZvcm1EYXRhKCkge1xuXHRcdGNvbnN0IGN0ID0gdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG5cblx0XHRpZiAoY3Quc3RhcnRzV2l0aCgnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJykpIHtcblx0XHRcdGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cdFx0XHRjb25zdCBwYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhhd2FpdCB0aGlzLnRleHQoKSk7XG5cblx0XHRcdGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBwYXJhbWV0ZXJzKSB7XG5cdFx0XHRcdGZvcm1EYXRhLmFwcGVuZChuYW1lLCB2YWx1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmb3JtRGF0YTtcblx0XHR9XG5cblx0XHRjb25zdCB7dG9Gb3JtRGF0YX0gPSBhd2FpdCBpbXBvcnQoJy4vdXRpbHMvbXVsdGlwYXJ0LXBhcnNlci5qcycpO1xuXHRcdHJldHVybiB0b0Zvcm1EYXRhKHRoaXMuYm9keSwgY3QpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybiByYXcgcmVzcG9uc2UgYXMgQmxvYlxuXHQgKlxuXHQgKiBAcmV0dXJuIFByb21pc2Vcblx0ICovXG5cdGFzeW5jIGJsb2IoKSB7XG5cdFx0Y29uc3QgY3QgPSAodGhpcy5oZWFkZXJzICYmIHRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB8fCAodGhpc1tJTlRFUk5BTFNdLmJvZHkgJiYgdGhpc1tJTlRFUk5BTFNdLmJvZHkudHlwZSkgfHwgJyc7XG5cdFx0Y29uc3QgYnVmID0gYXdhaXQgdGhpcy5hcnJheUJ1ZmZlcigpO1xuXG5cdFx0cmV0dXJuIG5ldyBCbG9iKFtidWZdLCB7XG5cdFx0XHR0eXBlOiBjdFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlY29kZSByZXNwb25zZSBhcyBqc29uXG5cdCAqXG5cdCAqIEByZXR1cm4gIFByb21pc2Vcblx0ICovXG5cdGFzeW5jIGpzb24oKSB7XG5cdFx0Y29uc3QgdGV4dCA9IGF3YWl0IHRoaXMudGV4dCgpO1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlY29kZSByZXNwb25zZSBhcyB0ZXh0XG5cdCAqXG5cdCAqIEByZXR1cm4gIFByb21pc2Vcblx0ICovXG5cdGFzeW5jIHRleHQoKSB7XG5cdFx0Y29uc3QgYnVmZmVyID0gYXdhaXQgY29uc3VtZUJvZHkodGhpcyk7XG5cdFx0cmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShidWZmZXIpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlY29kZSByZXNwb25zZSBhcyBidWZmZXIgKG5vbi1zcGVjIGFwaSlcblx0ICpcblx0ICogQHJldHVybiAgUHJvbWlzZVxuXHQgKi9cblx0YnVmZmVyKCkge1xuXHRcdHJldHVybiBjb25zdW1lQm9keSh0aGlzKTtcblx0fVxufVxuXG5Cb2R5LnByb3RvdHlwZS5idWZmZXIgPSBkZXByZWNhdGUoQm9keS5wcm90b3R5cGUuYnVmZmVyLCAnUGxlYXNlIHVzZSBcXCdyZXNwb25zZS5hcnJheUJ1ZmZlcigpXFwnIGluc3RlYWQgb2YgXFwncmVzcG9uc2UuYnVmZmVyKClcXCcnLCAnbm9kZS1mZXRjaCNidWZmZXInKTtcblxuLy8gSW4gYnJvd3NlcnMsIGFsbCBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhYmxlLlxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQm9keS5wcm90b3R5cGUsIHtcblx0Ym9keToge2VudW1lcmFibGU6IHRydWV9LFxuXHRib2R5VXNlZDoge2VudW1lcmFibGU6IHRydWV9LFxuXHRhcnJheUJ1ZmZlcjoge2VudW1lcmFibGU6IHRydWV9LFxuXHRibG9iOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGpzb246IHtlbnVtZXJhYmxlOiB0cnVlfSxcblx0dGV4dDoge2VudW1lcmFibGU6IHRydWV9LFxuXHRkYXRhOiB7Z2V0OiBkZXByZWNhdGUoKCkgPT4ge30sXG5cdFx0J2RhdGEgZG9lc25cXCd0IGV4aXN0LCB1c2UganNvbigpLCB0ZXh0KCksIGFycmF5QnVmZmVyKCksIG9yIGJvZHkgaW5zdGVhZCcsXG5cdFx0J2h0dHBzOi8vZ2l0aHViLmNvbS9ub2RlLWZldGNoL25vZGUtZmV0Y2gvaXNzdWVzLzEwMDAgKHJlc3BvbnNlKScpfVxufSk7XG5cbi8qKlxuICogQ29uc3VtZSBhbmQgY29udmVydCBhbiBlbnRpcmUgQm9keSB0byBhIEJ1ZmZlci5cbiAqXG4gKiBSZWY6IGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LWJvZHktY29uc3VtZS1ib2R5XG4gKlxuICogQHJldHVybiBQcm9taXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVCb2R5KGRhdGEpIHtcblx0aWYgKGRhdGFbSU5URVJOQUxTXS5kaXN0dXJiZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBib2R5IHVzZWQgYWxyZWFkeSBmb3I6ICR7ZGF0YS51cmx9YCk7XG5cdH1cblxuXHRkYXRhW0lOVEVSTkFMU10uZGlzdHVyYmVkID0gdHJ1ZTtcblxuXHRpZiAoZGF0YVtJTlRFUk5BTFNdLmVycm9yKSB7XG5cdFx0dGhyb3cgZGF0YVtJTlRFUk5BTFNdLmVycm9yO1xuXHR9XG5cblx0Y29uc3Qge2JvZHl9ID0gZGF0YTtcblxuXHQvLyBCb2R5IGlzIG51bGxcblx0aWYgKGJvZHkgPT09IG51bGwpIHtcblx0XHRyZXR1cm4gQnVmZmVyLmFsbG9jKDApO1xuXHR9XG5cblx0LyogYzggaWdub3JlIG5leHQgMyAqL1xuXHRpZiAoIShib2R5IGluc3RhbmNlb2YgU3RyZWFtKSkge1xuXHRcdHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG5cdH1cblxuXHQvLyBCb2R5IGlzIHN0cmVhbVxuXHQvLyBnZXQgcmVhZHkgdG8gYWN0dWFsbHkgY29uc3VtZSB0aGUgYm9keVxuXHRjb25zdCBhY2N1bSA9IFtdO1xuXHRsZXQgYWNjdW1CeXRlcyA9IDA7XG5cblx0dHJ5IHtcblx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGJvZHkpIHtcblx0XHRcdGlmIChkYXRhLnNpemUgPiAwICYmIGFjY3VtQnl0ZXMgKyBjaHVuay5sZW5ndGggPiBkYXRhLnNpemUpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgRmV0Y2hFcnJvcihgY29udGVudCBzaXplIGF0ICR7ZGF0YS51cmx9IG92ZXIgbGltaXQ6ICR7ZGF0YS5zaXplfWAsICdtYXgtc2l6ZScpO1xuXHRcdFx0XHRib2R5LmRlc3Ryb3koZXJyb3IpO1xuXHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdH1cblxuXHRcdFx0YWNjdW1CeXRlcyArPSBjaHVuay5sZW5ndGg7XG5cdFx0XHRhY2N1bS5wdXNoKGNodW5rKTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc3QgZXJyb3JfID0gZXJyb3IgaW5zdGFuY2VvZiBGZXRjaEJhc2VFcnJvciA/IGVycm9yIDogbmV3IEZldGNoRXJyb3IoYEludmFsaWQgcmVzcG9uc2UgYm9keSB3aGlsZSB0cnlpbmcgdG8gZmV0Y2ggJHtkYXRhLnVybH06ICR7ZXJyb3IubWVzc2FnZX1gLCAnc3lzdGVtJywgZXJyb3IpO1xuXHRcdHRocm93IGVycm9yXztcblx0fVxuXG5cdGlmIChib2R5LnJlYWRhYmxlRW5kZWQgPT09IHRydWUgfHwgYm9keS5fcmVhZGFibGVTdGF0ZS5lbmRlZCA9PT0gdHJ1ZSkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoYWNjdW0uZXZlcnkoYyA9PiB0eXBlb2YgYyA9PT0gJ3N0cmluZycpKSB7XG5cdFx0XHRcdHJldHVybiBCdWZmZXIuZnJvbShhY2N1bS5qb2luKCcnKSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBCdWZmZXIuY29uY2F0KGFjY3VtLCBhY2N1bUJ5dGVzKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEZldGNoRXJyb3IoYENvdWxkIG5vdCBjcmVhdGUgQnVmZmVyIGZyb20gcmVzcG9uc2UgYm9keSBmb3IgJHtkYXRhLnVybH06ICR7ZXJyb3IubWVzc2FnZX1gLCAnc3lzdGVtJywgZXJyb3IpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRmV0Y2hFcnJvcihgUHJlbWF0dXJlIGNsb3NlIG9mIHNlcnZlciByZXNwb25zZSB3aGlsZSB0cnlpbmcgdG8gZmV0Y2ggJHtkYXRhLnVybH1gKTtcblx0fVxufVxuXG4vKipcbiAqIENsb25lIGJvZHkgZ2l2ZW4gUmVzL1JlcSBpbnN0YW5jZVxuICpcbiAqIEBwYXJhbSAgIE1peGVkICAgaW5zdGFuY2UgICAgICAgUmVzcG9uc2Ugb3IgUmVxdWVzdCBpbnN0YW5jZVxuICogQHBhcmFtICAgU3RyaW5nICBoaWdoV2F0ZXJNYXJrICBoaWdoV2F0ZXJNYXJrIGZvciBib3RoIFBhc3NUaHJvdWdoIGJvZHkgc3RyZWFtc1xuICogQHJldHVybiAgTWl4ZWRcbiAqL1xuZXhwb3J0IGNvbnN0IGNsb25lID0gKGluc3RhbmNlLCBoaWdoV2F0ZXJNYXJrKSA9PiB7XG5cdGxldCBwMTtcblx0bGV0IHAyO1xuXHRsZXQge2JvZHl9ID0gaW5zdGFuY2VbSU5URVJOQUxTXTtcblxuXHQvLyBEb24ndCBhbGxvdyBjbG9uaW5nIGEgdXNlZCBib2R5XG5cdGlmIChpbnN0YW5jZS5ib2R5VXNlZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignY2Fubm90IGNsb25lIGJvZHkgYWZ0ZXIgaXQgaXMgdXNlZCcpO1xuXHR9XG5cblx0Ly8gQ2hlY2sgdGhhdCBib2R5IGlzIGEgc3RyZWFtIGFuZCBub3QgZm9ybS1kYXRhIG9iamVjdFxuXHQvLyBub3RlOiB3ZSBjYW4ndCBjbG9uZSB0aGUgZm9ybS1kYXRhIG9iamVjdCB3aXRob3V0IGhhdmluZyBpdCBhcyBhIGRlcGVuZGVuY3lcblx0aWYgKChib2R5IGluc3RhbmNlb2YgU3RyZWFtKSAmJiAodHlwZW9mIGJvZHkuZ2V0Qm91bmRhcnkgIT09ICdmdW5jdGlvbicpKSB7XG5cdFx0Ly8gVGVlIGluc3RhbmNlIGJvZHlcblx0XHRwMSA9IG5ldyBQYXNzVGhyb3VnaCh7aGlnaFdhdGVyTWFya30pO1xuXHRcdHAyID0gbmV3IFBhc3NUaHJvdWdoKHtoaWdoV2F0ZXJNYXJrfSk7XG5cdFx0Ym9keS5waXBlKHAxKTtcblx0XHRib2R5LnBpcGUocDIpO1xuXHRcdC8vIFNldCBpbnN0YW5jZSBib2R5IHRvIHRlZWQgYm9keSBhbmQgcmV0dXJuIHRoZSBvdGhlciB0ZWVkIGJvZHlcblx0XHRpbnN0YW5jZVtJTlRFUk5BTFNdLnN0cmVhbSA9IHAxO1xuXHRcdGJvZHkgPSBwMjtcblx0fVxuXG5cdHJldHVybiBib2R5O1xufTtcblxuY29uc3QgZ2V0Tm9uU3BlY0Zvcm1EYXRhQm91bmRhcnkgPSBkZXByZWNhdGUoXG5cdGJvZHkgPT4gYm9keS5nZXRCb3VuZGFyeSgpLFxuXHQnZm9ybS1kYXRhIGRvZXNuXFwndCBmb2xsb3cgdGhlIHNwZWMgYW5kIHJlcXVpcmVzIHNwZWNpYWwgdHJlYXRtZW50LiBVc2UgYWx0ZXJuYXRpdmUgcGFja2FnZScsXG5cdCdodHRwczovL2dpdGh1Yi5jb20vbm9kZS1mZXRjaC9ub2RlLWZldGNoL2lzc3Vlcy8xMTY3J1xuKTtcblxuLyoqXG4gKiBQZXJmb3JtcyB0aGUgb3BlcmF0aW9uIFwiZXh0cmFjdCBhIGBDb250ZW50LVR5cGVgIHZhbHVlIGZyb20gfG9iamVjdHxcIiBhc1xuICogc3BlY2lmaWVkIGluIHRoZSBzcGVjaWZpY2F0aW9uOlxuICogaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtYm9keWluaXQtZXh0cmFjdFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gYXNzdW1lcyB0aGF0IGluc3RhbmNlLmJvZHkgaXMgcHJlc2VudC5cbiAqXG4gKiBAcGFyYW0ge2FueX0gYm9keSBBbnkgb3B0aW9ucy5ib2R5IGlucHV0XG4gKiBAcmV0dXJucyB7c3RyaW5nIHwgbnVsbH1cbiAqL1xuZXhwb3J0IGNvbnN0IGV4dHJhY3RDb250ZW50VHlwZSA9IChib2R5LCByZXF1ZXN0KSA9PiB7XG5cdC8vIEJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWRcblx0aWYgKGJvZHkgPT09IG51bGwpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIEJvZHkgaXMgc3RyaW5nXG5cdGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCc7XG5cdH1cblxuXHQvLyBCb2R5IGlzIGEgVVJMU2VhcmNoUGFyYW1zXG5cdGlmIChpc1VSTFNlYXJjaFBhcmFtZXRlcnMoYm9keSkpIHtcblx0XHRyZXR1cm4gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04Jztcblx0fVxuXG5cdC8vIEJvZHkgaXMgYmxvYlxuXHRpZiAoaXNCbG9iKGJvZHkpKSB7XG5cdFx0cmV0dXJuIGJvZHkudHlwZSB8fCBudWxsO1xuXHR9XG5cblx0Ly8gQm9keSBpcyBhIEJ1ZmZlciAoQnVmZmVyLCBBcnJheUJ1ZmZlciBvciBBcnJheUJ1ZmZlclZpZXcpXG5cdGlmIChCdWZmZXIuaXNCdWZmZXIoYm9keSkgfHwgdHlwZXMuaXNBbnlBcnJheUJ1ZmZlcihib2R5KSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoYm9keSkpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGlmIChib2R5IGluc3RhbmNlb2YgRm9ybURhdGEpIHtcblx0XHRyZXR1cm4gYG11bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PSR7cmVxdWVzdFtJTlRFUk5BTFNdLmJvdW5kYXJ5fWA7XG5cdH1cblxuXHQvLyBEZXRlY3QgZm9ybSBkYXRhIGlucHV0IGZyb20gZm9ybS1kYXRhIG1vZHVsZVxuXHRpZiAoYm9keSAmJiB0eXBlb2YgYm9keS5nZXRCb3VuZGFyeSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiBgbXVsdGlwYXJ0L2Zvcm0tZGF0YTtib3VuZGFyeT0ke2dldE5vblNwZWNGb3JtRGF0YUJvdW5kYXJ5KGJvZHkpfWA7XG5cdH1cblxuXHQvLyBCb2R5IGlzIHN0cmVhbSAtIGNhbid0IHJlYWxseSBkbyBtdWNoIGFib3V0IHRoaXNcblx0aWYgKGJvZHkgaW5zdGFuY2VvZiBTdHJlYW0pIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIEJvZHkgY29uc3RydWN0b3IgZGVmYXVsdHMgb3RoZXIgdGhpbmdzIHRvIHN0cmluZ1xuXHRyZXR1cm4gJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCc7XG59O1xuXG4vKipcbiAqIFRoZSBGZXRjaCBTdGFuZGFyZCB0cmVhdHMgdGhpcyBhcyBpZiBcInRvdGFsIGJ5dGVzXCIgaXMgYSBwcm9wZXJ0eSBvbiB0aGUgYm9keS5cbiAqIEZvciB1cywgd2UgaGF2ZSB0byBleHBsaWNpdGx5IGdldCBpdCB3aXRoIGEgZnVuY3Rpb24uXG4gKlxuICogcmVmOiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1ib2R5LXRvdGFsLWJ5dGVzXG4gKlxuICogQHBhcmFtIHthbnl9IG9iai5ib2R5IEJvZHkgb2JqZWN0IGZyb20gdGhlIEJvZHkgaW5zdGFuY2UuXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgbnVsbH1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFRvdGFsQnl0ZXMgPSByZXF1ZXN0ID0+IHtcblx0Y29uc3Qge2JvZHl9ID0gcmVxdWVzdFtJTlRFUk5BTFNdO1xuXG5cdC8vIEJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWRcblx0aWYgKGJvZHkgPT09IG51bGwpIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdC8vIEJvZHkgaXMgQmxvYlxuXHRpZiAoaXNCbG9iKGJvZHkpKSB7XG5cdFx0cmV0dXJuIGJvZHkuc2l6ZTtcblx0fVxuXG5cdC8vIEJvZHkgaXMgQnVmZmVyXG5cdGlmIChCdWZmZXIuaXNCdWZmZXIoYm9keSkpIHtcblx0XHRyZXR1cm4gYm9keS5sZW5ndGg7XG5cdH1cblxuXHQvLyBEZXRlY3QgZm9ybSBkYXRhIGlucHV0IGZyb20gZm9ybS1kYXRhIG1vZHVsZVxuXHRpZiAoYm9keSAmJiB0eXBlb2YgYm9keS5nZXRMZW5ndGhTeW5jID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGJvZHkuaGFzS25vd25MZW5ndGggJiYgYm9keS5oYXNLbm93bkxlbmd0aCgpID8gYm9keS5nZXRMZW5ndGhTeW5jKCkgOiBudWxsO1xuXHR9XG5cblx0Ly8gQm9keSBpcyBzdHJlYW1cblx0cmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIFdyaXRlIGEgQm9keSB0byBhIE5vZGUuanMgV3JpdGFibGVTdHJlYW0gKGUuZy4gaHR0cC5SZXF1ZXN0KSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtTdHJlYW0uV3JpdGFibGV9IGRlc3QgVGhlIHN0cmVhbSB0byB3cml0ZSB0by5cbiAqIEBwYXJhbSBvYmouYm9keSBCb2R5IG9iamVjdCBmcm9tIHRoZSBCb2R5IGluc3RhbmNlLlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmV4cG9ydCBjb25zdCB3cml0ZVRvU3RyZWFtID0gYXN5bmMgKGRlc3QsIHtib2R5fSkgPT4ge1xuXHRpZiAoYm9keSA9PT0gbnVsbCkge1xuXHRcdC8vIEJvZHkgaXMgbnVsbFxuXHRcdGRlc3QuZW5kKCk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gQm9keSBpcyBzdHJlYW1cblx0XHRhd2FpdCBwaXBlbGluZShib2R5LCBkZXN0KTtcblx0fVxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/body.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/abort-error.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/errors/abort-error.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortError: () => (/* binding */ AbortError)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/base.js\");\n\n\n/**\n * AbortError interface for cancelled requests\n */\nclass AbortError extends _base_js__WEBPACK_IMPORTED_MODULE_0__.FetchBaseError {\n\tconstructor(message, type = 'aborted') {\n\t\tsuper(message, type);\n\t}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9lcnJvcnMvYWJvcnQtZXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNPLHlCQUF5QixvREFBYztBQUM5QztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvZXJyb3JzL2Fib3J0LWVycm9yLmpzP2Y0YzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGZXRjaEJhc2VFcnJvcn0gZnJvbSAnLi9iYXNlLmpzJztcblxuLyoqXG4gKiBBYm9ydEVycm9yIGludGVyZmFjZSBmb3IgY2FuY2VsbGVkIHJlcXVlc3RzXG4gKi9cbmV4cG9ydCBjbGFzcyBBYm9ydEVycm9yIGV4dGVuZHMgRmV0Y2hCYXNlRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCB0eXBlID0gJ2Fib3J0ZWQnKSB7XG5cdFx0c3VwZXIobWVzc2FnZSwgdHlwZSk7XG5cdH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/abort-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/base.js":
/*!************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/errors/base.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchBaseError: () => (/* binding */ FetchBaseError)\n/* harmony export */ });\nclass FetchBaseError extends Error {\n\tconstructor(message, type) {\n\t\tsuper(message);\n\t\t// Hide custom error implementation details from end-users\n\t\tError.captureStackTrace(this, this.constructor);\n\n\t\tthis.type = type;\n\t}\n\n\tget name() {\n\t\treturn this.constructor.name;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9lcnJvcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvZXJyb3JzL2Jhc2UuanM/MjE2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRmV0Y2hCYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHR5cGUpIHtcblx0XHRzdXBlcihtZXNzYWdlKTtcblx0XHQvLyBIaWRlIGN1c3RvbSBlcnJvciBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIGZyb20gZW5kLXVzZXJzXG5cdFx0RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG5cblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHR9XG5cblx0Z2V0IG5hbWUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZTtcblx0fVxuXG5cdGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXHR9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/fetch-error.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/errors/fetch-error.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchError: () => (/* binding */ FetchError)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/base.js\");\n\n\n\n/**\n * @typedef {{ address?: string, code: string, dest?: string, errno: number, info?: object, message: string, path?: string, port?: number, syscall: string}} SystemError\n*/\n\n/**\n * FetchError interface for operational errors\n */\nclass FetchError extends _base_js__WEBPACK_IMPORTED_MODULE_0__.FetchBaseError {\n\t/**\n\t * @param  {string} message -      Error message for human\n\t * @param  {string} [type] -        Error type for machine\n\t * @param  {SystemError} [systemError] - For Node.js system error\n\t */\n\tconstructor(message, type, systemError) {\n\t\tsuper(message, type);\n\t\t// When err.type is `system`, err.erroredSysCall contains system error and err.code contains system error code\n\t\tif (systemError) {\n\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\tthis.code = this.errno = systemError.code;\n\t\t\tthis.erroredSysCall = systemError.syscall;\n\t\t}\n\t}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9lcnJvcnMvZmV0Y2gtZXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3lDOztBQUV6QztBQUNBLGVBQWUsOElBQThJO0FBQzdKOztBQUVBO0FBQ0E7QUFDQTtBQUNPLHlCQUF5QixvREFBYztBQUM5QztBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL2Vycm9ycy9mZXRjaC1lcnJvci5qcz83NTc3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHtGZXRjaEJhc2VFcnJvcn0gZnJvbSAnLi9iYXNlLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7eyBhZGRyZXNzPzogc3RyaW5nLCBjb2RlOiBzdHJpbmcsIGRlc3Q/OiBzdHJpbmcsIGVycm5vOiBudW1iZXIsIGluZm8/OiBvYmplY3QsIG1lc3NhZ2U6IHN0cmluZywgcGF0aD86IHN0cmluZywgcG9ydD86IG51bWJlciwgc3lzY2FsbDogc3RyaW5nfX0gU3lzdGVtRXJyb3JcbiovXG5cbi8qKlxuICogRmV0Y2hFcnJvciBpbnRlcmZhY2UgZm9yIG9wZXJhdGlvbmFsIGVycm9yc1xuICovXG5leHBvcnQgY2xhc3MgRmV0Y2hFcnJvciBleHRlbmRzIEZldGNoQmFzZUVycm9yIHtcblx0LyoqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gbWVzc2FnZSAtICAgICAgRXJyb3IgbWVzc2FnZSBmb3IgaHVtYW5cblx0ICogQHBhcmFtICB7c3RyaW5nfSBbdHlwZV0gLSAgICAgICAgRXJyb3IgdHlwZSBmb3IgbWFjaGluZVxuXHQgKiBAcGFyYW0gIHtTeXN0ZW1FcnJvcn0gW3N5c3RlbUVycm9yXSAtIEZvciBOb2RlLmpzIHN5c3RlbSBlcnJvclxuXHQgKi9cblx0Y29uc3RydWN0b3IobWVzc2FnZSwgdHlwZSwgc3lzdGVtRXJyb3IpIHtcblx0XHRzdXBlcihtZXNzYWdlLCB0eXBlKTtcblx0XHQvLyBXaGVuIGVyci50eXBlIGlzIGBzeXN0ZW1gLCBlcnIuZXJyb3JlZFN5c0NhbGwgY29udGFpbnMgc3lzdGVtIGVycm9yIGFuZCBlcnIuY29kZSBjb250YWlucyBzeXN0ZW0gZXJyb3IgY29kZVxuXHRcdGlmIChzeXN0ZW1FcnJvcikge1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW11bHRpLWFzc2lnblxuXHRcdFx0dGhpcy5jb2RlID0gdGhpcy5lcnJubyA9IHN5c3RlbUVycm9yLmNvZGU7XG5cdFx0XHR0aGlzLmVycm9yZWRTeXNDYWxsID0gc3lzdGVtRXJyb3Iuc3lzY2FsbDtcblx0XHR9XG5cdH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/fetch-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/headers.js":
/*!********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/headers.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Headers),\n/* harmony export */   fromRawHeaders: () => (/* binding */ fromRawHeaders)\n/* harmony export */ });\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:util */ \"node:util\");\n/* harmony import */ var node_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:http */ \"node:http\");\n/**\n * Headers.js\n *\n * Headers class offers convenient helpers\n */\n\n\n\n\n/* c8 ignore next 9 */\nconst validateHeaderName = typeof node_http__WEBPACK_IMPORTED_MODULE_1__.validateHeaderName === 'function' ?\n\tnode_http__WEBPACK_IMPORTED_MODULE_1__.validateHeaderName :\n\tname => {\n\t\tif (!/^[\\^`\\-\\w!#$%&'*+.|~]+$/.test(name)) {\n\t\t\tconst error = new TypeError(`Header name must be a valid HTTP token [${name}]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_HTTP_TOKEN'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/* c8 ignore next 9 */\nconst validateHeaderValue = typeof node_http__WEBPACK_IMPORTED_MODULE_1__.validateHeaderValue === 'function' ?\n\tnode_http__WEBPACK_IMPORTED_MODULE_1__.validateHeaderValue :\n\t(name, value) => {\n\t\tif (/[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/.test(value)) {\n\t\t\tconst error = new TypeError(`Invalid character in header content [\"${name}\"]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_CHAR'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/**\n * @typedef {Headers | Record<string, string> | Iterable<readonly [string, string]> | Iterable<Iterable<string>>} HeadersInit\n */\n\n/**\n * This Fetch API interface allows you to perform various actions on HTTP request and response headers.\n * These actions include retrieving, setting, adding to, and removing.\n * A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.\n * You can add to this using methods like append() (see Examples.)\n * In all methods of this interface, header names are matched by case-insensitive byte sequence.\n *\n */\nclass Headers extends URLSearchParams {\n\t/**\n\t * Headers class\n\t *\n\t * @constructor\n\t * @param {HeadersInit} [init] - Response headers\n\t */\n\tconstructor(init) {\n\t\t// Validate and normalize init object in [name, value(s)][]\n\t\t/** @type {string[][]} */\n\t\tlet result = [];\n\t\tif (init instanceof Headers) {\n\t\t\tconst raw = init.raw();\n\t\t\tfor (const [name, values] of Object.entries(raw)) {\n\t\t\t\tresult.push(...values.map(value => [name, value]));\n\t\t\t}\n\t\t} else if (init == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\t\t// No op\n\t\t} else if (typeof init === 'object' && !node_util__WEBPACK_IMPORTED_MODULE_0__.types.isBoxedPrimitive(init)) {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\t\tif (method == null) {\n\t\t\t\t// Record<ByteString, ByteString>\n\t\t\t\tresult.push(...Object.entries(init));\n\t\t\t} else {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// Sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tresult = [...init]\n\t\t\t\t\t.map(pair => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof pair !== 'object' || node_util__WEBPACK_IMPORTED_MODULE_0__.types.isBoxedPrimitive(pair)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be an iterable object');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t}).map(pair => {\n\t\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Failed to construct \\'Headers\\': The provided value is not of type \\'(sequence<sequence<ByteString>> or record<ByteString, ByteString>)');\n\t\t}\n\n\t\t// Validate and lowercase\n\t\tresult =\n\t\t\tresult.length > 0 ?\n\t\t\t\tresult.map(([name, value]) => {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn [String(name).toLowerCase(), String(value)];\n\t\t\t\t}) :\n\t\t\t\tundefined;\n\n\t\tsuper(result);\n\n\t\t// Returning a Proxy that will lowercase key names, validate parameters and sort keys\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn new Proxy(this, {\n\t\t\tget(target, p, receiver) {\n\t\t\t\tswitch (p) {\n\t\t\t\t\tcase 'append':\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\treturn (name, value) => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase(),\n\t\t\t\t\t\t\t\tString(value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\tcase 'has':\n\t\t\t\t\tcase 'getAll':\n\t\t\t\t\t\treturn name => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'keys':\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\ttarget.sort();\n\t\t\t\t\t\t\treturn new Set(URLSearchParams.prototype.keys.call(target)).keys();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Reflect.get(target, p, receiver);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t/* c8 ignore next */\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n\n\ttoString() {\n\t\treturn Object.prototype.toString.call(this);\n\t}\n\n\tget(name) {\n\t\tconst values = this.getAll(name);\n\t\tif (values.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet value = values.join(', ');\n\t\tif (/^content-encoding$/i.test(name)) {\n\t\t\tvalue = value.toLowerCase();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tforEach(callback, thisArg = undefined) {\n\t\tfor (const name of this.keys()) {\n\t\t\tReflect.apply(callback, thisArg, [this.get(name), name, this]);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield this.get(name);\n\t\t}\n\t}\n\n\t/**\n\t * @type {() => IterableIterator<[string, string]>}\n\t */\n\t* entries() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield [name, this.get(name)];\n\t\t}\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\t/**\n\t * Node-fetch non-spec method\n\t * returning all headers and their values as array\n\t * @returns {Record<string, string[]>}\n\t */\n\traw() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tresult[key] = this.getAll(key);\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\t/**\n\t * For better console.log(headers) and also to convert Headers into Node.js Request compatible format\n\t */\n\t[Symbol.for('nodejs.util.inspect.custom')]() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tconst values = this.getAll(key);\n\t\t\t// Http.request() only supports string as Host header.\n\t\t\t// This hack makes specifying custom Host header possible.\n\t\t\tif (key === 'host') {\n\t\t\t\tresult[key] = values[0];\n\t\t\t} else {\n\t\t\t\tresult[key] = values.length > 1 ? values : values[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\n/**\n * Re-shaping object for Web IDL tests\n * Only need to do it for overridden methods\n */\nObject.defineProperties(\n\tHeaders.prototype,\n\t['get', 'entries', 'forEach', 'values'].reduce((result, property) => {\n\t\tresult[property] = {enumerable: true};\n\t\treturn result;\n\t}, {})\n);\n\n/**\n * Create a Headers object from an http.IncomingMessage.rawHeaders, ignoring those that do\n * not conform to HTTP grammar productions.\n * @param {import('http').IncomingMessage['rawHeaders']} headers\n */\nfunction fromRawHeaders(headers = []) {\n\treturn new Headers(\n\t\theaders\n\t\t\t// Split into pairs\n\t\t\t.reduce((result, value, index, array) => {\n\t\t\t\tif (index % 2 === 0) {\n\t\t\t\t\tresult.push(array.slice(index, index + 2));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t\t.filter(([name, value]) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\n\t);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9oZWFkZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVnQztBQUNIOztBQUU3QjtBQUNBLGtDQUFrQyx5REFBdUI7QUFDekQsQ0FBQyx5REFBdUI7QUFDeEI7QUFDQTtBQUNBLDBFQUEwRSxLQUFLO0FBQy9FLHlDQUF5QyxnQ0FBZ0M7QUFDekU7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUNBQW1DLDBEQUF3QjtBQUMzRCxDQUFDLDBEQUF3QjtBQUN6QjtBQUNBO0FBQ0Esd0VBQXdFLEtBQUs7QUFDN0UseUNBQXlDLDBCQUEwQjtBQUNuRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLHFHQUFxRztBQUNsSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx5QkFBeUI7QUFDN0I7QUFDQSxJQUFJLHNDQUFzQyw0Q0FBSztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDRDQUFLO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLElBQUk7QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLEVBQUUsSUFBSTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOENBQThDO0FBQ3pEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL2hlYWRlcnMuanM/OWVhNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhlYWRlcnMuanNcbiAqXG4gKiBIZWFkZXJzIGNsYXNzIG9mZmVycyBjb252ZW5pZW50IGhlbHBlcnNcbiAqL1xuXG5pbXBvcnQge3R5cGVzfSBmcm9tICdub2RlOnV0aWwnO1xuaW1wb3J0IGh0dHAgZnJvbSAnbm9kZTpodHRwJztcblxuLyogYzggaWdub3JlIG5leHQgOSAqL1xuY29uc3QgdmFsaWRhdGVIZWFkZXJOYW1lID0gdHlwZW9mIGh0dHAudmFsaWRhdGVIZWFkZXJOYW1lID09PSAnZnVuY3Rpb24nID9cblx0aHR0cC52YWxpZGF0ZUhlYWRlck5hbWUgOlxuXHRuYW1lID0+IHtcblx0XHRpZiAoIS9eW1xcXmBcXC1cXHchIyQlJicqKy58fl0rJC8udGVzdChuYW1lKSkge1xuXHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgVHlwZUVycm9yKGBIZWFkZXIgbmFtZSBtdXN0IGJlIGEgdmFsaWQgSFRUUCB0b2tlbiBbJHtuYW1lfV1gKTtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlcnJvciwgJ2NvZGUnLCB7dmFsdWU6ICdFUlJfSU5WQUxJRF9IVFRQX1RPS0VOJ30pO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9O1xuXG4vKiBjOCBpZ25vcmUgbmV4dCA5ICovXG5jb25zdCB2YWxpZGF0ZUhlYWRlclZhbHVlID0gdHlwZW9mIGh0dHAudmFsaWRhdGVIZWFkZXJWYWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/XG5cdGh0dHAudmFsaWRhdGVIZWFkZXJWYWx1ZSA6XG5cdChuYW1lLCB2YWx1ZSkgPT4ge1xuXHRcdGlmICgvW15cXHRcXHUwMDIwLVxcdTAwN0VcXHUwMDgwLVxcdTAwRkZdLy50ZXN0KHZhbHVlKSkge1xuXHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgY29udGVudCBbXCIke25hbWV9XCJdYCk7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXJyb3IsICdjb2RlJywge3ZhbHVlOiAnRVJSX0lOVkFMSURfQ0hBUid9KTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7SGVhZGVycyB8IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfCBJdGVyYWJsZTxyZWFkb25seSBbc3RyaW5nLCBzdHJpbmddPiB8IEl0ZXJhYmxlPEl0ZXJhYmxlPHN0cmluZz4+fSBIZWFkZXJzSW5pdFxuICovXG5cbi8qKlxuICogVGhpcyBGZXRjaCBBUEkgaW50ZXJmYWNlIGFsbG93cyB5b3UgdG8gcGVyZm9ybSB2YXJpb3VzIGFjdGlvbnMgb24gSFRUUCByZXF1ZXN0IGFuZCByZXNwb25zZSBoZWFkZXJzLlxuICogVGhlc2UgYWN0aW9ucyBpbmNsdWRlIHJldHJpZXZpbmcsIHNldHRpbmcsIGFkZGluZyB0bywgYW5kIHJlbW92aW5nLlxuICogQSBIZWFkZXJzIG9iamVjdCBoYXMgYW4gYXNzb2NpYXRlZCBoZWFkZXIgbGlzdCwgd2hpY2ggaXMgaW5pdGlhbGx5IGVtcHR5IGFuZCBjb25zaXN0cyBvZiB6ZXJvIG9yIG1vcmUgbmFtZSBhbmQgdmFsdWUgcGFpcnMuXG4gKiBZb3UgY2FuIGFkZCB0byB0aGlzIHVzaW5nIG1ldGhvZHMgbGlrZSBhcHBlbmQoKSAoc2VlIEV4YW1wbGVzLilcbiAqIEluIGFsbCBtZXRob2RzIG9mIHRoaXMgaW50ZXJmYWNlLCBoZWFkZXIgbmFtZXMgYXJlIG1hdGNoZWQgYnkgY2FzZS1pbnNlbnNpdGl2ZSBieXRlIHNlcXVlbmNlLlxuICpcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVhZGVycyBleHRlbmRzIFVSTFNlYXJjaFBhcmFtcyB7XG5cdC8qKlxuXHQgKiBIZWFkZXJzIGNsYXNzXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0hlYWRlcnNJbml0fSBbaW5pdF0gLSBSZXNwb25zZSBoZWFkZXJzXG5cdCAqL1xuXHRjb25zdHJ1Y3Rvcihpbml0KSB7XG5cdFx0Ly8gVmFsaWRhdGUgYW5kIG5vcm1hbGl6ZSBpbml0IG9iamVjdCBpbiBbbmFtZSwgdmFsdWUocyldW11cblx0XHQvKiogQHR5cGUge3N0cmluZ1tdW119ICovXG5cdFx0bGV0IHJlc3VsdCA9IFtdO1xuXHRcdGlmIChpbml0IGluc3RhbmNlb2YgSGVhZGVycykge1xuXHRcdFx0Y29uc3QgcmF3ID0gaW5pdC5yYXcoKTtcblx0XHRcdGZvciAoY29uc3QgW25hbWUsIHZhbHVlc10gb2YgT2JqZWN0LmVudHJpZXMocmF3KSkge1xuXHRcdFx0XHRyZXN1bHQucHVzaCguLi52YWx1ZXMubWFwKHZhbHVlID0+IFtuYW1lLCB2YWx1ZV0pKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGluaXQgPT0gbnVsbCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVxLW51bGwsIGVxZXFlcVxuXHRcdFx0Ly8gTm8gb3Bcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBpbml0ID09PSAnb2JqZWN0JyAmJiAhdHlwZXMuaXNCb3hlZFByaW1pdGl2ZShpbml0KSkge1xuXHRcdFx0Y29uc3QgbWV0aG9kID0gaW5pdFtTeW1ib2wuaXRlcmF0b3JdO1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsIGVxZXFlcVxuXHRcdFx0aWYgKG1ldGhvZCA9PSBudWxsKSB7XG5cdFx0XHRcdC8vIFJlY29yZDxCeXRlU3RyaW5nLCBCeXRlU3RyaW5nPlxuXHRcdFx0XHRyZXN1bHQucHVzaCguLi5PYmplY3QuZW50cmllcyhpbml0KSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodHlwZW9mIG1ldGhvZCAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0hlYWRlciBwYWlycyBtdXN0IGJlIGl0ZXJhYmxlJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXF1ZW5jZTxzZXF1ZW5jZTxCeXRlU3RyaW5nPj5cblx0XHRcdFx0Ly8gTm90ZTogcGVyIHNwZWMgd2UgaGF2ZSB0byBmaXJzdCBleGhhdXN0IHRoZSBsaXN0cyB0aGVuIHByb2Nlc3MgdGhlbVxuXHRcdFx0XHRyZXN1bHQgPSBbLi4uaW5pdF1cblx0XHRcdFx0XHQubWFwKHBhaXIgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHR0eXBlb2YgcGFpciAhPT0gJ29iamVjdCcgfHwgdHlwZXMuaXNCb3hlZFByaW1pdGl2ZShwYWlyKVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0VhY2ggaGVhZGVyIHBhaXIgbXVzdCBiZSBhbiBpdGVyYWJsZSBvYmplY3QnKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIFsuLi5wYWlyXTtcblx0XHRcdFx0XHR9KS5tYXAocGFpciA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocGFpci5sZW5ndGggIT09IDIpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRWFjaCBoZWFkZXIgcGFpciBtdXN0IGJlIGEgbmFtZS92YWx1ZSB0dXBsZScpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gWy4uLnBhaXJdO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdGYWlsZWQgdG8gY29uc3RydWN0IFxcJ0hlYWRlcnNcXCc6IFRoZSBwcm92aWRlZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBcXCcoc2VxdWVuY2U8c2VxdWVuY2U8Qnl0ZVN0cmluZz4+IG9yIHJlY29yZDxCeXRlU3RyaW5nLCBCeXRlU3RyaW5nPiknKTtcblx0XHR9XG5cblx0XHQvLyBWYWxpZGF0ZSBhbmQgbG93ZXJjYXNlXG5cdFx0cmVzdWx0ID1cblx0XHRcdHJlc3VsdC5sZW5ndGggPiAwID9cblx0XHRcdFx0cmVzdWx0Lm1hcCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuXHRcdFx0XHRcdHZhbGlkYXRlSGVhZGVyTmFtZShuYW1lKTtcblx0XHRcdFx0XHR2YWxpZGF0ZUhlYWRlclZhbHVlKG5hbWUsIFN0cmluZyh2YWx1ZSkpO1xuXHRcdFx0XHRcdHJldHVybiBbU3RyaW5nKG5hbWUpLnRvTG93ZXJDYXNlKCksIFN0cmluZyh2YWx1ZSldO1xuXHRcdFx0XHR9KSA6XG5cdFx0XHRcdHVuZGVmaW5lZDtcblxuXHRcdHN1cGVyKHJlc3VsdCk7XG5cblx0XHQvLyBSZXR1cm5pbmcgYSBQcm94eSB0aGF0IHdpbGwgbG93ZXJjYXNlIGtleSBuYW1lcywgdmFsaWRhdGUgcGFyYW1ldGVycyBhbmQgc29ydCBrZXlzXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0cnVjdG9yLXJldHVyblxuXHRcdHJldHVybiBuZXcgUHJveHkodGhpcywge1xuXHRcdFx0Z2V0KHRhcmdldCwgcCwgcmVjZWl2ZXIpIHtcblx0XHRcdFx0c3dpdGNoIChwKSB7XG5cdFx0XHRcdFx0Y2FzZSAnYXBwZW5kJzpcblx0XHRcdFx0XHRjYXNlICdzZXQnOlxuXHRcdFx0XHRcdFx0cmV0dXJuIChuYW1lLCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR2YWxpZGF0ZUhlYWRlck5hbWUobmFtZSk7XG5cdFx0XHRcdFx0XHRcdHZhbGlkYXRlSGVhZGVyVmFsdWUobmFtZSwgU3RyaW5nKHZhbHVlKSk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlW3BdLmNhbGwoXG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0LFxuXHRcdFx0XHRcdFx0XHRcdFN0cmluZyhuYW1lKS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0XHRcdFN0cmluZyh2YWx1ZSlcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRjYXNlICdkZWxldGUnOlxuXHRcdFx0XHRcdGNhc2UgJ2hhcyc6XG5cdFx0XHRcdFx0Y2FzZSAnZ2V0QWxsJzpcblx0XHRcdFx0XHRcdHJldHVybiBuYW1lID0+IHtcblx0XHRcdFx0XHRcdFx0dmFsaWRhdGVIZWFkZXJOYW1lKG5hbWUpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZVtwXS5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldCxcblx0XHRcdFx0XHRcdFx0XHRTdHJpbmcobmFtZSkudG9Mb3dlckNhc2UoKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGNhc2UgJ2tleXMnOlxuXHRcdFx0XHRcdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnNvcnQoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBTZXQoVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5rZXlzLmNhbGwodGFyZ2V0KSkua2V5cygpO1xuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRyZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwLCByZWNlaXZlcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHQvKiBjOCBpZ25vcmUgbmV4dCAqL1xuXHR9XG5cblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cdH1cblxuXHR0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpO1xuXHR9XG5cblx0Z2V0KG5hbWUpIHtcblx0XHRjb25zdCB2YWx1ZXMgPSB0aGlzLmdldEFsbChuYW1lKTtcblx0XHRpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0bGV0IHZhbHVlID0gdmFsdWVzLmpvaW4oJywgJyk7XG5cdFx0aWYgKC9eY29udGVudC1lbmNvZGluZyQvaS50ZXN0KG5hbWUpKSB7XG5cdFx0XHR2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cblx0Zm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyA9IHVuZGVmaW5lZCkge1xuXHRcdGZvciAoY29uc3QgbmFtZSBvZiB0aGlzLmtleXMoKSkge1xuXHRcdFx0UmVmbGVjdC5hcHBseShjYWxsYmFjaywgdGhpc0FyZywgW3RoaXMuZ2V0KG5hbWUpLCBuYW1lLCB0aGlzXSk7XG5cdFx0fVxuXHR9XG5cblx0KiB2YWx1ZXMoKSB7XG5cdFx0Zm9yIChjb25zdCBuYW1lIG9mIHRoaXMua2V5cygpKSB7XG5cdFx0XHR5aWVsZCB0aGlzLmdldChuYW1lKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUgeygpID0+IEl0ZXJhYmxlSXRlcmF0b3I8W3N0cmluZywgc3RyaW5nXT59XG5cdCAqL1xuXHQqIGVudHJpZXMoKSB7XG5cdFx0Zm9yIChjb25zdCBuYW1lIG9mIHRoaXMua2V5cygpKSB7XG5cdFx0XHR5aWVsZCBbbmFtZSwgdGhpcy5nZXQobmFtZSldO1xuXHRcdH1cblx0fVxuXG5cdFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuXHRcdHJldHVybiB0aGlzLmVudHJpZXMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBOb2RlLWZldGNoIG5vbi1zcGVjIG1ldGhvZFxuXHQgKiByZXR1cm5pbmcgYWxsIGhlYWRlcnMgYW5kIHRoZWlyIHZhbHVlcyBhcyBhcnJheVxuXHQgKiBAcmV0dXJucyB7UmVjb3JkPHN0cmluZywgc3RyaW5nW10+fVxuXHQgKi9cblx0cmF3KCkge1xuXHRcdHJldHVybiBbLi4udGhpcy5rZXlzKCldLnJlZHVjZSgocmVzdWx0LCBrZXkpID0+IHtcblx0XHRcdHJlc3VsdFtrZXldID0gdGhpcy5nZXRBbGwoa2V5KTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSwge30pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZvciBiZXR0ZXIgY29uc29sZS5sb2coaGVhZGVycykgYW5kIGFsc28gdG8gY29udmVydCBIZWFkZXJzIGludG8gTm9kZS5qcyBSZXF1ZXN0IGNvbXBhdGlibGUgZm9ybWF0XG5cdCAqL1xuXHRbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0oKSB7XG5cdFx0cmV0dXJuIFsuLi50aGlzLmtleXMoKV0ucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xuXHRcdFx0Y29uc3QgdmFsdWVzID0gdGhpcy5nZXRBbGwoa2V5KTtcblx0XHRcdC8vIEh0dHAucmVxdWVzdCgpIG9ubHkgc3VwcG9ydHMgc3RyaW5nIGFzIEhvc3QgaGVhZGVyLlxuXHRcdFx0Ly8gVGhpcyBoYWNrIG1ha2VzIHNwZWNpZnlpbmcgY3VzdG9tIEhvc3QgaGVhZGVyIHBvc3NpYmxlLlxuXHRcdFx0aWYgKGtleSA9PT0gJ2hvc3QnKSB7XG5cdFx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWVzWzBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0W2tleV0gPSB2YWx1ZXMubGVuZ3RoID4gMSA/IHZhbHVlcyA6IHZhbHVlc1swXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LCB7fSk7XG5cdH1cbn1cblxuLyoqXG4gKiBSZS1zaGFwaW5nIG9iamVjdCBmb3IgV2ViIElETCB0ZXN0c1xuICogT25seSBuZWVkIHRvIGRvIGl0IGZvciBvdmVycmlkZGVuIG1ldGhvZHNcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXG5cdEhlYWRlcnMucHJvdG90eXBlLFxuXHRbJ2dldCcsICdlbnRyaWVzJywgJ2ZvckVhY2gnLCAndmFsdWVzJ10ucmVkdWNlKChyZXN1bHQsIHByb3BlcnR5KSA9PiB7XG5cdFx0cmVzdWx0W3Byb3BlcnR5XSA9IHtlbnVtZXJhYmxlOiB0cnVlfTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LCB7fSlcbik7XG5cbi8qKlxuICogQ3JlYXRlIGEgSGVhZGVycyBvYmplY3QgZnJvbSBhbiBodHRwLkluY29taW5nTWVzc2FnZS5yYXdIZWFkZXJzLCBpZ25vcmluZyB0aG9zZSB0aGF0IGRvXG4gKiBub3QgY29uZm9ybSB0byBIVFRQIGdyYW1tYXIgcHJvZHVjdGlvbnMuXG4gKiBAcGFyYW0ge2ltcG9ydCgnaHR0cCcpLkluY29taW5nTWVzc2FnZVsncmF3SGVhZGVycyddfSBoZWFkZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUmF3SGVhZGVycyhoZWFkZXJzID0gW10pIHtcblx0cmV0dXJuIG5ldyBIZWFkZXJzKFxuXHRcdGhlYWRlcnNcblx0XHRcdC8vIFNwbGl0IGludG8gcGFpcnNcblx0XHRcdC5yZWR1Y2UoKHJlc3VsdCwgdmFsdWUsIGluZGV4LCBhcnJheSkgPT4ge1xuXHRcdFx0XHRpZiAoaW5kZXggJSAyID09PSAwKSB7XG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goYXJyYXkuc2xpY2UoaW5kZXgsIGluZGV4ICsgMikpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0sIFtdKVxuXHRcdFx0LmZpbHRlcigoW25hbWUsIHZhbHVlXSkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHZhbGlkYXRlSGVhZGVyTmFtZShuYW1lKTtcblx0XHRcdFx0XHR2YWxpZGF0ZUhlYWRlclZhbHVlKG5hbWUsIFN0cmluZyh2YWx1ZSkpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/headers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortError: () => (/* reexport safe */ _errors_abort_error_js__WEBPACK_IMPORTED_MODULE_12__.AbortError),\n/* harmony export */   Blob: () => (/* reexport safe */ fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__.Blob),\n/* harmony export */   FetchError: () => (/* reexport safe */ _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__.FetchError),\n/* harmony export */   File: () => (/* reexport safe */ fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__.File),\n/* harmony export */   FormData: () => (/* reexport safe */ formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_6__.FormData),\n/* harmony export */   Headers: () => (/* reexport safe */ _headers_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]),\n/* harmony export */   Request: () => (/* reexport safe */ _request_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]),\n/* harmony export */   Response: () => (/* reexport safe */ _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"]),\n/* harmony export */   blobFrom: () => (/* reexport safe */ fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__.blobFrom),\n/* harmony export */   blobFromSync: () => (/* reexport safe */ fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__.blobFromSync),\n/* harmony export */   \"default\": () => (/* binding */ fetch),\n/* harmony export */   fileFrom: () => (/* reexport safe */ fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__.fileFrom),\n/* harmony export */   fileFromSync: () => (/* reexport safe */ fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__.fileFromSync),\n/* harmony export */   isRedirect: () => (/* reexport safe */ _utils_is_redirect_js__WEBPACK_IMPORTED_MODULE_13__.isRedirect)\n/* harmony export */ });\n/* harmony import */ var node_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:http */ \"node:http\");\n/* harmony import */ var node_https__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:https */ \"node:https\");\n/* harmony import */ var node_zlib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:zlib */ \"node:zlib\");\n/* harmony import */ var node_stream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:stream */ \"node:stream\");\n/* harmony import */ var node_buffer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node:buffer */ \"node:buffer\");\n/* harmony import */ var data_uri_to_buffer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! data-uri-to-buffer */ \"(rsc)/./node_modules/data-uri-to-buffer/dist/index.js\");\n/* harmony import */ var _body_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./body.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/body.js\");\n/* harmony import */ var _response_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./response.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/response.js\");\n/* harmony import */ var _headers_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./headers.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/headers.js\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./request.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/request.js\");\n/* harmony import */ var _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./errors/fetch-error.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/fetch-error.js\");\n/* harmony import */ var _errors_abort_error_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./errors/abort-error.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/errors/abort-error.js\");\n/* harmony import */ var _utils_is_redirect_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils/is-redirect.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is-redirect.js\");\n/* harmony import */ var formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! formdata-polyfill/esm.min.js */ \"(rsc)/./node_modules/formdata-polyfill/esm.min.js\");\n/* harmony import */ var _utils_is_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/is.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is.js\");\n/* harmony import */ var _utils_referrer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/referrer.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/referrer.js\");\n/* harmony import */ var fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! fetch-blob/from.js */ \"(rsc)/./node_modules/fetch-blob/from.js\");\n/**\n * Index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst supportedSchemas = new Set(['data:', 'http:', 'https:']);\n\n/**\n * Fetch function\n *\n * @param   {string | URL | import('./request').default} url - Absolute url or Request instance\n * @param   {*} [options_] - Fetch options\n * @return  {Promise<import('./response').default>}\n */\nasync function fetch(url, options_) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Build request object\n\t\tconst request = new _request_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"](url, options_);\n\t\tconst {parsedURL, options} = (0,_request_js__WEBPACK_IMPORTED_MODULE_9__.getNodeRequestOptions)(request);\n\t\tif (!supportedSchemas.has(parsedURL.protocol)) {\n\t\t\tthrow new TypeError(`node-fetch cannot load ${url}. URL scheme \"${parsedURL.protocol.replace(/:$/, '')}\" is not supported.`);\n\t\t}\n\n\t\tif (parsedURL.protocol === 'data:') {\n\t\t\tconst data = (0,data_uri_to_buffer__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(request.url);\n\t\t\tconst response = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](data, {headers: {'Content-Type': data.typeFull}});\n\t\t\tresolve(response);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wrap http.request into fetch\n\t\tconst send = (parsedURL.protocol === 'https:' ? node_https__WEBPACK_IMPORTED_MODULE_1__ : node_http__WEBPACK_IMPORTED_MODULE_0__).request;\n\t\tconst {signal} = request;\n\t\tlet response = null;\n\n\t\tconst abort = () => {\n\t\t\tconst error = new _errors_abort_error_js__WEBPACK_IMPORTED_MODULE_12__.AbortError('The operation was aborted.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof node_stream__WEBPACK_IMPORTED_MODULE_3__.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\n\t\t\tif (!response || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = () => {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// Send request\n\t\tconst request_ = send(parsedURL.toString(), options);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tconst finalize = () => {\n\t\t\trequest_.abort();\n\t\t\tif (signal) {\n\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t}\n\t\t};\n\n\t\trequest_.on('error', error => {\n\t\t\treject(new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__.FetchError(`request to ${request.url} failed, reason: ${error.message}`, 'system', error));\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(request_, error => {\n\t\t\tif (response && response.body) {\n\t\t\t\tresponse.body.destroy(error);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (process.version < 'v14') {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\trequest_.on('socket', s => {\n\t\t\t\tlet endedWithEventsCount;\n\t\t\t\ts.prependListener('end', () => {\n\t\t\t\t\tendedWithEventsCount = s._eventsCount;\n\t\t\t\t});\n\t\t\t\ts.prependListener('close', hadError => {\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && endedWithEventsCount < s._eventsCount && !hadError) {\n\t\t\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\trequest_.on('response', response_ => {\n\t\t\trequest_.setTimeout(0);\n\t\t\tconst headers = (0,_headers_js__WEBPACK_IMPORTED_MODULE_8__.fromRawHeaders)(response_.rawHeaders);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif ((0,_utils_is_redirect_js__WEBPACK_IMPORTED_MODULE_13__.isRedirect)(response_.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL(location, request.url);\n\t\t\t\t} catch {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__.FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__.FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// Nothing to do\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow': {\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__.FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\t\theaders: new _headers_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"](request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: (0,_body_js__WEBPACK_IMPORTED_MODULE_14__.clone)(request),\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\tsize: request.size,\n\t\t\t\t\t\t\treferrer: request.referrer,\n\t\t\t\t\t\t\treferrerPolicy: request.referrerPolicy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// when forwarding sensitive headers like \"Authorization\",\n\t\t\t\t\t\t// \"WWW-Authenticate\", and \"Cookie\" to untrusted targets,\n\t\t\t\t\t\t// headers will be ignored when following a redirect to a domain\n\t\t\t\t\t\t// that is not a subdomain match or exact match of the initial domain.\n\t\t\t\t\t\t// For example, a redirect from \"foo.com\" to either \"foo.com\" or \"sub.foo.com\"\n\t\t\t\t\t\t// will forward the sensitive headers, but a redirect to \"bar.com\" will not.\n\t\t\t\t\t\t// headers will also be ignored when following a redirect to a domain using\n\t\t\t\t\t\t// a different protocol. For example, a redirect from \"https://foo.com\" to \"http://foo.com\"\n\t\t\t\t\t\t// will not forward the sensitive headers\n\t\t\t\t\t\tif (!(0,_utils_is_js__WEBPACK_IMPORTED_MODULE_15__.isDomainOrSubdomain)(request.url, locationURL) || !(0,_utils_is_js__WEBPACK_IMPORTED_MODULE_15__.isSameProtocol)(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOptions.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (response_.statusCode !== 303 && request.body && options_.body instanceof node_stream__WEBPACK_IMPORTED_MODULE_3__.Readable) {\n\t\t\t\t\t\t\treject(new _errors_fetch_error_js__WEBPACK_IMPORTED_MODULE_11__.FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (response_.statusCode === 303 || ((response_.statusCode === 301 || response_.statusCode === 302) && request.method === 'POST')) {\n\t\t\t\t\t\t\trequestOptions.method = 'GET';\n\t\t\t\t\t\t\trequestOptions.body = undefined;\n\t\t\t\t\t\t\trequestOptions.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 14\n\t\t\t\t\t\tconst responseReferrerPolicy = (0,_utils_referrer_js__WEBPACK_IMPORTED_MODULE_16__.parseReferrerPolicyFromHeader)(headers);\n\t\t\t\t\t\tif (responseReferrerPolicy) {\n\t\t\t\t\t\t\trequestOptions.referrerPolicy = responseReferrerPolicy;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new _request_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"](locationURL, requestOptions)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepare response\n\t\t\tif (signal) {\n\t\t\t\tresponse_.once('end', () => {\n\t\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet body = (0,node_stream__WEBPACK_IMPORTED_MODULE_3__.pipeline)(response_, new node_stream__WEBPACK_IMPORTED_MODULE_3__.PassThrough(), error => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// see https://github.com/nodejs/node/pull/29376\n\t\t\t/* c8 ignore next 3 */\n\t\t\tif (process.version < 'v12.10') {\n\t\t\t\tresponse_.on('aborted', abortAndFinalize);\n\t\t\t}\n\n\t\t\tconst responseOptions = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: response_.statusCode,\n\t\t\t\tstatusText: response_.statusMessage,\n\t\t\t\theaders,\n\t\t\t\tsize: request.size,\n\t\t\t\tcounter: request.counter,\n\t\t\t\thighWaterMark: request.highWaterMark\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {\n\t\t\t\tresponse = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: node_zlib__WEBPACK_IMPORTED_MODULE_2__.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: node_zlib__WEBPACK_IMPORTED_MODULE_2__.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// For gzip\n\t\t\tif (codings === 'gzip' || codings === 'x-gzip') {\n\t\t\t\tbody = (0,node_stream__WEBPACK_IMPORTED_MODULE_3__.pipeline)(body, node_zlib__WEBPACK_IMPORTED_MODULE_2__.createGunzip(zlibOptions), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For deflate\n\t\t\tif (codings === 'deflate' || codings === 'x-deflate') {\n\t\t\t\t// Handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = (0,node_stream__WEBPACK_IMPORTED_MODULE_3__.pipeline)(response_, new node_stream__WEBPACK_IMPORTED_MODULE_3__.PassThrough(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\traw.once('data', chunk => {\n\t\t\t\t\t// See http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = (0,node_stream__WEBPACK_IMPORTED_MODULE_3__.pipeline)(body, node_zlib__WEBPACK_IMPORTED_MODULE_2__.createInflate(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = (0,node_stream__WEBPACK_IMPORTED_MODULE_3__.pipeline)(body, node_zlib__WEBPACK_IMPORTED_MODULE_2__.createInflateRaw(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](body, responseOptions);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.once('end', () => {\n\t\t\t\t\t// Some old IIS servers return zero-length OK deflate responses, so\n\t\t\t\t\t// 'data' is never emitted. See https://github.com/node-fetch/node-fetch/pull/903\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](body, responseOptions);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For br\n\t\t\tif (codings === 'br') {\n\t\t\t\tbody = (0,node_stream__WEBPACK_IMPORTED_MODULE_3__.pipeline)(body, node_zlib__WEBPACK_IMPORTED_MODULE_2__.createBrotliDecompress(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise, use response as-is\n\t\t\tresponse = new _response_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](body, responseOptions);\n\t\t\tresolve(response);\n\t\t});\n\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\t(0,_body_js__WEBPACK_IMPORTED_MODULE_14__.writeToStream)(request_, request).catch(reject);\n\t});\n}\n\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tconst LAST_CHUNK = node_buffer__WEBPACK_IMPORTED_MODULE_4__.Buffer.from('0\\r\\n\\r\\n');\n\n\tlet isChunkedTransfer = false;\n\tlet properLastChunkReceived = false;\n\tlet previousChunk;\n\n\trequest.on('response', response => {\n\t\tconst {headers} = response;\n\t\tisChunkedTransfer = headers['transfer-encoding'] === 'chunked' && !headers['content-length'];\n\t});\n\n\trequest.on('socket', socket => {\n\t\tconst onSocketClose = () => {\n\t\t\tif (isChunkedTransfer && !properLastChunkReceived) {\n\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\terrorCallback(error);\n\t\t\t}\n\t\t};\n\n\t\tconst onData = buf => {\n\t\t\tproperLastChunkReceived = node_buffer__WEBPACK_IMPORTED_MODULE_4__.Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;\n\n\t\t\t// Sometimes final 0-length chunk and end of message code are in separate packets\n\t\t\tif (!properLastChunkReceived && previousChunk) {\n\t\t\t\tproperLastChunkReceived = (\n\t\t\t\t\tnode_buffer__WEBPACK_IMPORTED_MODULE_4__.Buffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 &&\n\t\t\t\t\tnode_buffer__WEBPACK_IMPORTED_MODULE_4__.Buffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tpreviousChunk = buf;\n\t\t};\n\n\t\tsocket.prependListener('close', onSocketClose);\n\t\tsocket.on('data', onData);\n\n\t\trequest.on('close', () => {\n\t\t\tsocket.removeListener('close', onSocketClose);\n\t\t\tsocket.removeListener('data', onData);\n\t\t});\n\t});\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZCO0FBQ0U7QUFDRjtBQUNxQztBQUMvQjs7QUFFYzs7QUFFRjtBQUNWO0FBQ2dCO0FBQ087QUFDVDtBQUNBO0FBQ0Q7QUFDSTtBQUNZO0FBQ0E7QUFRdEM7O0FBRXNEO0FBQ2Q7O0FBRXBFOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNENBQTRDO0FBQ3pELGFBQWEsR0FBRztBQUNoQixhQUFhO0FBQ2I7QUFDZTtBQUNmO0FBQ0E7QUFDQSxzQkFBc0IsbURBQU87QUFDN0IsU0FBUyxvQkFBb0IsRUFBRSxrRUFBcUI7QUFDcEQ7QUFDQSxpREFBaUQsSUFBSSxnQkFBZ0IscUNBQXFDO0FBQzFHOztBQUVBO0FBQ0EsZ0JBQWdCLDhEQUFlO0FBQy9CLHdCQUF3QixxREFBUSxRQUFRLFVBQVUsK0JBQStCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtEQUFrRCx1Q0FBSyxHQUFHLHNDQUFJO0FBQzlELFNBQVMsUUFBUTtBQUNqQjs7QUFFQTtBQUNBLHFCQUFxQiwrREFBVTtBQUMvQjtBQUNBLCtDQUErQyxpREFBZTtBQUM5RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWMsK0RBQVUsZUFBZSxhQUFhLGtCQUFrQixjQUFjO0FBQ3BGO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQiwyREFBYzs7QUFFakM7QUFDQSxPQUFPLGtFQUFVO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVUseURBQXlELFNBQVM7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFVLDJFQUEyRSxZQUFZO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsK0RBQVUsaUNBQWlDLFlBQVk7QUFDekU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnREFBSztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0VBQW1CLCtCQUErQiw2REFBYztBQUMzRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1GQUFtRixpREFBZTtBQUNsRyxrQkFBa0IsK0RBQVU7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQyxrRkFBNkI7QUFDbEU7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLG1EQUFPO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNEQUFzRCxpQkFBaUI7QUFDdkU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSxjQUFjLHFEQUFJLGdCQUFnQixvREFBVztBQUM3QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxREFBUTtBQUMzQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtREFBaUI7QUFDNUIsaUJBQWlCLG1EQUFpQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxxREFBSSxPQUFPLG1EQUFpQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLHFEQUFRO0FBQzNCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxREFBSSxnQkFBZ0Isb0RBQVc7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEscURBQUksT0FBTyxvREFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE9BQU87QUFDUCxhQUFhLHFEQUFJLE9BQU8sdURBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxvQkFBb0IscURBQVE7QUFDNUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQVE7QUFDN0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHFEQUFJLE9BQU8sNkRBQTJCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIscURBQVE7QUFDM0I7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHFEQUFRO0FBQzFCO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUUsd0RBQWE7QUFDZixFQUFFO0FBQ0Y7O0FBRUE7QUFDQSxvQkFBb0IsK0NBQU07O0FBRTFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVMsU0FBUztBQUNsQjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QiwrQ0FBTTs7QUFFbkM7QUFDQTtBQUNBO0FBQ0EsS0FBSywrQ0FBTTtBQUNYLEtBQUssK0NBQU07QUFDWDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9pbmRleC5qcz8xZTZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW5kZXguanNcbiAqXG4gKiBhIHJlcXVlc3QgQVBJIGNvbXBhdGlibGUgd2l0aCB3aW5kb3cuZmV0Y2hcbiAqXG4gKiBBbGwgc3BlYyBhbGdvcml0aG0gc3RlcCBudW1iZXJzIGFyZSBiYXNlZCBvbiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy9jb21taXQtc25hcHNob3RzL2FlNzE2ODIyY2IzYTYxODQzMjI2Y2QwOTBlZWZjNjU4OTQ0NmMxZDIvLlxuICovXG5cbmltcG9ydCBodHRwIGZyb20gJ25vZGU6aHR0cCc7XG5pbXBvcnQgaHR0cHMgZnJvbSAnbm9kZTpodHRwcyc7XG5pbXBvcnQgemxpYiBmcm9tICdub2RlOnpsaWInO1xuaW1wb3J0IFN0cmVhbSwge1Bhc3NUaHJvdWdoLCBwaXBlbGluZSBhcyBwdW1wfSBmcm9tICdub2RlOnN0cmVhbSc7XG5pbXBvcnQge0J1ZmZlcn0gZnJvbSAnbm9kZTpidWZmZXInO1xuXG5pbXBvcnQgZGF0YVVyaVRvQnVmZmVyIGZyb20gJ2RhdGEtdXJpLXRvLWJ1ZmZlcic7XG5cbmltcG9ydCB7d3JpdGVUb1N0cmVhbSwgY2xvbmV9IGZyb20gJy4vYm9keS5qcyc7XG5pbXBvcnQgUmVzcG9uc2UgZnJvbSAnLi9yZXNwb25zZS5qcyc7XG5pbXBvcnQgSGVhZGVycywge2Zyb21SYXdIZWFkZXJzfSBmcm9tICcuL2hlYWRlcnMuanMnO1xuaW1wb3J0IFJlcXVlc3QsIHtnZXROb2RlUmVxdWVzdE9wdGlvbnN9IGZyb20gJy4vcmVxdWVzdC5qcyc7XG5pbXBvcnQge0ZldGNoRXJyb3J9IGZyb20gJy4vZXJyb3JzL2ZldGNoLWVycm9yLmpzJztcbmltcG9ydCB7QWJvcnRFcnJvcn0gZnJvbSAnLi9lcnJvcnMvYWJvcnQtZXJyb3IuanMnO1xuaW1wb3J0IHtpc1JlZGlyZWN0fSBmcm9tICcuL3V0aWxzL2lzLXJlZGlyZWN0LmpzJztcbmltcG9ydCB7Rm9ybURhdGF9IGZyb20gJ2Zvcm1kYXRhLXBvbHlmaWxsL2VzbS5taW4uanMnO1xuaW1wb3J0IHtpc0RvbWFpbk9yU3ViZG9tYWluLCBpc1NhbWVQcm90b2NvbH0gZnJvbSAnLi91dGlscy9pcy5qcyc7XG5pbXBvcnQge3BhcnNlUmVmZXJyZXJQb2xpY3lGcm9tSGVhZGVyfSBmcm9tICcuL3V0aWxzL3JlZmVycmVyLmpzJztcbmltcG9ydCB7XG5cdEJsb2IsXG5cdEZpbGUsXG5cdGZpbGVGcm9tU3luYyxcblx0ZmlsZUZyb20sXG5cdGJsb2JGcm9tU3luYyxcblx0YmxvYkZyb21cbn0gZnJvbSAnZmV0Y2gtYmxvYi9mcm9tLmpzJztcblxuZXhwb3J0IHtGb3JtRGF0YSwgSGVhZGVycywgUmVxdWVzdCwgUmVzcG9uc2UsIEZldGNoRXJyb3IsIEFib3J0RXJyb3IsIGlzUmVkaXJlY3R9O1xuZXhwb3J0IHtCbG9iLCBGaWxlLCBmaWxlRnJvbVN5bmMsIGZpbGVGcm9tLCBibG9iRnJvbVN5bmMsIGJsb2JGcm9tfTtcblxuY29uc3Qgc3VwcG9ydGVkU2NoZW1hcyA9IG5ldyBTZXQoWydkYXRhOicsICdodHRwOicsICdodHRwczonXSk7XG5cbi8qKlxuICogRmV0Y2ggZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0gICB7c3RyaW5nIHwgVVJMIHwgaW1wb3J0KCcuL3JlcXVlc3QnKS5kZWZhdWx0fSB1cmwgLSBBYnNvbHV0ZSB1cmwgb3IgUmVxdWVzdCBpbnN0YW5jZVxuICogQHBhcmFtICAgeyp9IFtvcHRpb25zX10gLSBGZXRjaCBvcHRpb25zXG4gKiBAcmV0dXJuICB7UHJvbWlzZTxpbXBvcnQoJy4vcmVzcG9uc2UnKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gZmV0Y2godXJsLCBvcHRpb25zXykge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdC8vIEJ1aWxkIHJlcXVlc3Qgb2JqZWN0XG5cdFx0Y29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwgb3B0aW9uc18pO1xuXHRcdGNvbnN0IHtwYXJzZWRVUkwsIG9wdGlvbnN9ID0gZ2V0Tm9kZVJlcXVlc3RPcHRpb25zKHJlcXVlc3QpO1xuXHRcdGlmICghc3VwcG9ydGVkU2NoZW1hcy5oYXMocGFyc2VkVVJMLnByb3RvY29sKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgbm9kZS1mZXRjaCBjYW5ub3QgbG9hZCAke3VybH0uIFVSTCBzY2hlbWUgXCIke3BhcnNlZFVSTC5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKX1cIiBpcyBub3Qgc3VwcG9ydGVkLmApO1xuXHRcdH1cblxuXHRcdGlmIChwYXJzZWRVUkwucHJvdG9jb2wgPT09ICdkYXRhOicpIHtcblx0XHRcdGNvbnN0IGRhdGEgPSBkYXRhVXJpVG9CdWZmZXIocmVxdWVzdC51cmwpO1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoZGF0YSwge2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogZGF0YS50eXBlRnVsbH19KTtcblx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFdyYXAgaHR0cC5yZXF1ZXN0IGludG8gZmV0Y2hcblx0XHRjb25zdCBzZW5kID0gKHBhcnNlZFVSTC5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyBodHRwcyA6IGh0dHApLnJlcXVlc3Q7XG5cdFx0Y29uc3Qge3NpZ25hbH0gPSByZXF1ZXN0O1xuXHRcdGxldCByZXNwb25zZSA9IG51bGw7XG5cblx0XHRjb25zdCBhYm9ydCA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGVycm9yID0gbmV3IEFib3J0RXJyb3IoJ1RoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQuJyk7XG5cdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0aWYgKHJlcXVlc3QuYm9keSAmJiByZXF1ZXN0LmJvZHkgaW5zdGFuY2VvZiBTdHJlYW0uUmVhZGFibGUpIHtcblx0XHRcdFx0cmVxdWVzdC5ib2R5LmRlc3Ryb3koZXJyb3IpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5ib2R5KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0cmVzcG9uc2UuYm9keS5lbWl0KCdlcnJvcicsIGVycm9yKTtcblx0XHR9O1xuXG5cdFx0aWYgKHNpZ25hbCAmJiBzaWduYWwuYWJvcnRlZCkge1xuXHRcdFx0YWJvcnQoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBhYm9ydEFuZEZpbmFsaXplID0gKCkgPT4ge1xuXHRcdFx0YWJvcnQoKTtcblx0XHRcdGZpbmFsaXplKCk7XG5cdFx0fTtcblxuXHRcdC8vIFNlbmQgcmVxdWVzdFxuXHRcdGNvbnN0IHJlcXVlc3RfID0gc2VuZChwYXJzZWRVUkwudG9TdHJpbmcoKSwgb3B0aW9ucyk7XG5cblx0XHRpZiAoc2lnbmFsKSB7XG5cdFx0XHRzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydEFuZEZpbmFsaXplKTtcblx0XHR9XG5cblx0XHRjb25zdCBmaW5hbGl6ZSA9ICgpID0+IHtcblx0XHRcdHJlcXVlc3RfLmFib3J0KCk7XG5cdFx0XHRpZiAoc2lnbmFsKSB7XG5cdFx0XHRcdHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0QW5kRmluYWxpemUpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRyZXF1ZXN0Xy5vbignZXJyb3InLCBlcnJvciA9PiB7XG5cdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYHJlcXVlc3QgdG8gJHtyZXF1ZXN0LnVybH0gZmFpbGVkLCByZWFzb246ICR7ZXJyb3IubWVzc2FnZX1gLCAnc3lzdGVtJywgZXJyb3IpKTtcblx0XHRcdGZpbmFsaXplKCk7XG5cdFx0fSk7XG5cblx0XHRmaXhSZXNwb25zZUNodW5rZWRUcmFuc2ZlckJhZEVuZGluZyhyZXF1ZXN0XywgZXJyb3IgPT4ge1xuXHRcdFx0aWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmJvZHkpIHtcblx0XHRcdFx0cmVzcG9uc2UuYm9keS5kZXN0cm95KGVycm9yKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8qIGM4IGlnbm9yZSBuZXh0IDE4ICovXG5cdFx0aWYgKHByb2Nlc3MudmVyc2lvbiA8ICd2MTQnKSB7XG5cdFx0XHQvLyBCZWZvcmUgTm9kZS5qcyAxNCwgcGlwZWxpbmUoKSBkb2VzIG5vdCBmdWxseSBzdXBwb3J0IGFzeW5jIGl0ZXJhdG9ycyBhbmQgZG9lcyBub3QgYWx3YXlzXG5cdFx0XHQvLyBwcm9wZXJseSBoYW5kbGUgd2hlbiB0aGUgc29ja2V0IGNsb3NlL2VuZCBldmVudHMgYXJlIG91dCBvZiBvcmRlci5cblx0XHRcdHJlcXVlc3RfLm9uKCdzb2NrZXQnLCBzID0+IHtcblx0XHRcdFx0bGV0IGVuZGVkV2l0aEV2ZW50c0NvdW50O1xuXHRcdFx0XHRzLnByZXBlbmRMaXN0ZW5lcignZW5kJywgKCkgPT4ge1xuXHRcdFx0XHRcdGVuZGVkV2l0aEV2ZW50c0NvdW50ID0gcy5fZXZlbnRzQ291bnQ7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzLnByZXBlbmRMaXN0ZW5lcignY2xvc2UnLCBoYWRFcnJvciA9PiB7XG5cdFx0XHRcdFx0Ly8gaWYgZW5kIGhhcHBlbmVkIGJlZm9yZSBjbG9zZSBidXQgdGhlIHNvY2tldCBkaWRuJ3QgZW1pdCBhbiBlcnJvciwgZG8gaXQgbm93XG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlICYmIGVuZGVkV2l0aEV2ZW50c0NvdW50IDwgcy5fZXZlbnRzQ291bnQgJiYgIWhhZEVycm9yKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUHJlbWF0dXJlIGNsb3NlJyk7XG5cdFx0XHRcdFx0XHRlcnJvci5jb2RlID0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJztcblx0XHRcdFx0XHRcdHJlc3BvbnNlLmJvZHkuZW1pdCgnZXJyb3InLCBlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJlcXVlc3RfLm9uKCdyZXNwb25zZScsIHJlc3BvbnNlXyA9PiB7XG5cdFx0XHRyZXF1ZXN0Xy5zZXRUaW1lb3V0KDApO1xuXHRcdFx0Y29uc3QgaGVhZGVycyA9IGZyb21SYXdIZWFkZXJzKHJlc3BvbnNlXy5yYXdIZWFkZXJzKTtcblxuXHRcdFx0Ly8gSFRUUCBmZXRjaCBzdGVwIDVcblx0XHRcdGlmIChpc1JlZGlyZWN0KHJlc3BvbnNlXy5zdGF0dXNDb2RlKSkge1xuXHRcdFx0XHQvLyBIVFRQIGZldGNoIHN0ZXAgNS4yXG5cdFx0XHRcdGNvbnN0IGxvY2F0aW9uID0gaGVhZGVycy5nZXQoJ0xvY2F0aW9uJyk7XG5cblx0XHRcdFx0Ly8gSFRUUCBmZXRjaCBzdGVwIDUuM1xuXHRcdFx0XHRsZXQgbG9jYXRpb25VUkwgPSBudWxsO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGxvY2F0aW9uVVJMID0gbG9jYXRpb24gPT09IG51bGwgPyBudWxsIDogbmV3IFVSTChsb2NhdGlvbiwgcmVxdWVzdC51cmwpO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBlcnJvciBoZXJlIGNhbiBvbmx5IGJlIGludmFsaWQgVVJMIGluIExvY2F0aW9uOiBoZWFkZXJcblx0XHRcdFx0XHQvLyBkbyBub3QgdGhyb3cgd2hlbiBvcHRpb25zLnJlZGlyZWN0ID09IG1hbnVhbFxuXHRcdFx0XHRcdC8vIGxldCB0aGUgdXNlciBleHRyYWN0IHRoZSBlcnJvcm5lb3VzIHJlZGlyZWN0IFVSTFxuXHRcdFx0XHRcdGlmIChyZXF1ZXN0LnJlZGlyZWN0ICE9PSAnbWFudWFsJykge1xuXHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKGB1cmkgcmVxdWVzdGVkIHJlc3BvbmRzIHdpdGggYW4gaW52YWxpZCByZWRpcmVjdCBVUkw6ICR7bG9jYXRpb259YCwgJ2ludmFsaWQtcmVkaXJlY3QnKSk7XG5cdFx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEhUVFAgZmV0Y2ggc3RlcCA1LjVcblx0XHRcdFx0c3dpdGNoIChyZXF1ZXN0LnJlZGlyZWN0KSB7XG5cdFx0XHRcdFx0Y2FzZSAnZXJyb3InOlxuXHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKGB1cmkgcmVxdWVzdGVkIHJlc3BvbmRzIHdpdGggYSByZWRpcmVjdCwgcmVkaXJlY3QgbW9kZSBpcyBzZXQgdG8gZXJyb3I6ICR7cmVxdWVzdC51cmx9YCwgJ25vLXJlZGlyZWN0JykpO1xuXHRcdFx0XHRcdFx0ZmluYWxpemUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRjYXNlICdtYW51YWwnOlxuXHRcdFx0XHRcdFx0Ly8gTm90aGluZyB0byBkb1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZm9sbG93Jzoge1xuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDJcblx0XHRcdFx0XHRcdGlmIChsb2NhdGlvblVSTCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDVcblx0XHRcdFx0XHRcdGlmIChyZXF1ZXN0LmNvdW50ZXIgPj0gcmVxdWVzdC5mb2xsb3cpIHtcblx0XHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKGBtYXhpbXVtIHJlZGlyZWN0IHJlYWNoZWQgYXQ6ICR7cmVxdWVzdC51cmx9YCwgJ21heC1yZWRpcmVjdCcpKTtcblx0XHRcdFx0XHRcdFx0ZmluYWxpemUoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgNiAoY291bnRlciBpbmNyZW1lbnQpXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgYSBuZXcgUmVxdWVzdCBvYmplY3QuXG5cdFx0XHRcdFx0XHRjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKSxcblx0XHRcdFx0XHRcdFx0Zm9sbG93OiByZXF1ZXN0LmZvbGxvdyxcblx0XHRcdFx0XHRcdFx0Y291bnRlcjogcmVxdWVzdC5jb3VudGVyICsgMSxcblx0XHRcdFx0XHRcdFx0YWdlbnQ6IHJlcXVlc3QuYWdlbnQsXG5cdFx0XHRcdFx0XHRcdGNvbXByZXNzOiByZXF1ZXN0LmNvbXByZXNzLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuXHRcdFx0XHRcdFx0XHRib2R5OiBjbG9uZShyZXF1ZXN0KSxcblx0XHRcdFx0XHRcdFx0c2lnbmFsOiByZXF1ZXN0LnNpZ25hbCxcblx0XHRcdFx0XHRcdFx0c2l6ZTogcmVxdWVzdC5zaXplLFxuXHRcdFx0XHRcdFx0XHRyZWZlcnJlcjogcmVxdWVzdC5yZWZlcnJlcixcblx0XHRcdFx0XHRcdFx0cmVmZXJyZXJQb2xpY3k6IHJlcXVlc3QucmVmZXJyZXJQb2xpY3lcblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdC8vIHdoZW4gZm9yd2FyZGluZyBzZW5zaXRpdmUgaGVhZGVycyBsaWtlIFwiQXV0aG9yaXphdGlvblwiLFxuXHRcdFx0XHRcdFx0Ly8gXCJXV1ctQXV0aGVudGljYXRlXCIsIGFuZCBcIkNvb2tpZVwiIHRvIHVudHJ1c3RlZCB0YXJnZXRzLFxuXHRcdFx0XHRcdFx0Ly8gaGVhZGVycyB3aWxsIGJlIGlnbm9yZWQgd2hlbiBmb2xsb3dpbmcgYSByZWRpcmVjdCB0byBhIGRvbWFpblxuXHRcdFx0XHRcdFx0Ly8gdGhhdCBpcyBub3QgYSBzdWJkb21haW4gbWF0Y2ggb3IgZXhhY3QgbWF0Y2ggb2YgdGhlIGluaXRpYWwgZG9tYWluLlxuXHRcdFx0XHRcdFx0Ly8gRm9yIGV4YW1wbGUsIGEgcmVkaXJlY3QgZnJvbSBcImZvby5jb21cIiB0byBlaXRoZXIgXCJmb28uY29tXCIgb3IgXCJzdWIuZm9vLmNvbVwiXG5cdFx0XHRcdFx0XHQvLyB3aWxsIGZvcndhcmQgdGhlIHNlbnNpdGl2ZSBoZWFkZXJzLCBidXQgYSByZWRpcmVjdCB0byBcImJhci5jb21cIiB3aWxsIG5vdC5cblx0XHRcdFx0XHRcdC8vIGhlYWRlcnMgd2lsbCBhbHNvIGJlIGlnbm9yZWQgd2hlbiBmb2xsb3dpbmcgYSByZWRpcmVjdCB0byBhIGRvbWFpbiB1c2luZ1xuXHRcdFx0XHRcdFx0Ly8gYSBkaWZmZXJlbnQgcHJvdG9jb2wuIEZvciBleGFtcGxlLCBhIHJlZGlyZWN0IGZyb20gXCJodHRwczovL2Zvby5jb21cIiB0byBcImh0dHA6Ly9mb28uY29tXCJcblx0XHRcdFx0XHRcdC8vIHdpbGwgbm90IGZvcndhcmQgdGhlIHNlbnNpdGl2ZSBoZWFkZXJzXG5cdFx0XHRcdFx0XHRpZiAoIWlzRG9tYWluT3JTdWJkb21haW4ocmVxdWVzdC51cmwsIGxvY2F0aW9uVVJMKSB8fCAhaXNTYW1lUHJvdG9jb2wocmVxdWVzdC51cmwsIGxvY2F0aW9uVVJMKSkge1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IG5hbWUgb2YgWydhdXRob3JpemF0aW9uJywgJ3d3dy1hdXRoZW50aWNhdGUnLCAnY29va2llJywgJ2Nvb2tpZTInXSkge1xuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRpb25zLmhlYWRlcnMuZGVsZXRlKG5hbWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEhUVFAtcmVkaXJlY3QgZmV0Y2ggc3RlcCA5XG5cdFx0XHRcdFx0XHRpZiAocmVzcG9uc2VfLnN0YXR1c0NvZGUgIT09IDMwMyAmJiByZXF1ZXN0LmJvZHkgJiYgb3B0aW9uc18uYm9keSBpbnN0YW5jZW9mIFN0cmVhbS5SZWFkYWJsZSkge1xuXHRcdFx0XHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoJ0Nhbm5vdCBmb2xsb3cgcmVkaXJlY3Qgd2l0aCBib2R5IGJlaW5nIGEgcmVhZGFibGUgc3RyZWFtJywgJ3Vuc3VwcG9ydGVkLXJlZGlyZWN0JykpO1xuXHRcdFx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEhUVFAtcmVkaXJlY3QgZmV0Y2ggc3RlcCAxMVxuXHRcdFx0XHRcdFx0aWYgKHJlc3BvbnNlXy5zdGF0dXNDb2RlID09PSAzMDMgfHwgKChyZXNwb25zZV8uc3RhdHVzQ29kZSA9PT0gMzAxIHx8IHJlc3BvbnNlXy5zdGF0dXNDb2RlID09PSAzMDIpICYmIHJlcXVlc3QubWV0aG9kID09PSAnUE9TVCcpKSB7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRpb25zLm1ldGhvZCA9ICdHRVQnO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0T3B0aW9ucy5ib2R5ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0T3B0aW9ucy5oZWFkZXJzLmRlbGV0ZSgnY29udGVudC1sZW5ndGgnKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDE0XG5cdFx0XHRcdFx0XHRjb25zdCByZXNwb25zZVJlZmVycmVyUG9saWN5ID0gcGFyc2VSZWZlcnJlclBvbGljeUZyb21IZWFkZXIoaGVhZGVycyk7XG5cdFx0XHRcdFx0XHRpZiAocmVzcG9uc2VSZWZlcnJlclBvbGljeSkge1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0T3B0aW9ucy5yZWZlcnJlclBvbGljeSA9IHJlc3BvbnNlUmVmZXJyZXJQb2xpY3k7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEhUVFAtcmVkaXJlY3QgZmV0Y2ggc3RlcCAxNVxuXHRcdFx0XHRcdFx0cmVzb2x2ZShmZXRjaChuZXcgUmVxdWVzdChsb2NhdGlvblVSTCwgcmVxdWVzdE9wdGlvbnMpKSk7XG5cdFx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoYFJlZGlyZWN0IG9wdGlvbiAnJHtyZXF1ZXN0LnJlZGlyZWN0fScgaXMgbm90IGEgdmFsaWQgdmFsdWUgb2YgUmVxdWVzdFJlZGlyZWN0YCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByZXBhcmUgcmVzcG9uc2Vcblx0XHRcdGlmIChzaWduYWwpIHtcblx0XHRcdFx0cmVzcG9uc2VfLm9uY2UoJ2VuZCcsICgpID0+IHtcblx0XHRcdFx0XHRzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydEFuZEZpbmFsaXplKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBib2R5ID0gcHVtcChyZXNwb25zZV8sIG5ldyBQYXNzVGhyb3VnaCgpLCBlcnJvciA9PiB7XG5cdFx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9wdWxsLzI5Mzc2XG5cdFx0XHQvKiBjOCBpZ25vcmUgbmV4dCAzICovXG5cdFx0XHRpZiAocHJvY2Vzcy52ZXJzaW9uIDwgJ3YxMi4xMCcpIHtcblx0XHRcdFx0cmVzcG9uc2VfLm9uKCdhYm9ydGVkJywgYWJvcnRBbmRGaW5hbGl6ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHJlc3BvbnNlT3B0aW9ucyA9IHtcblx0XHRcdFx0dXJsOiByZXF1ZXN0LnVybCxcblx0XHRcdFx0c3RhdHVzOiByZXNwb25zZV8uc3RhdHVzQ29kZSxcblx0XHRcdFx0c3RhdHVzVGV4dDogcmVzcG9uc2VfLnN0YXR1c01lc3NhZ2UsXG5cdFx0XHRcdGhlYWRlcnMsXG5cdFx0XHRcdHNpemU6IHJlcXVlc3Quc2l6ZSxcblx0XHRcdFx0Y291bnRlcjogcmVxdWVzdC5jb3VudGVyLFxuXHRcdFx0XHRoaWdoV2F0ZXJNYXJrOiByZXF1ZXN0LmhpZ2hXYXRlck1hcmtcblx0XHRcdH07XG5cblx0XHRcdC8vIEhUVFAtbmV0d29yayBmZXRjaCBzdGVwIDEyLjEuMS4zXG5cdFx0XHRjb25zdCBjb2RpbmdzID0gaGVhZGVycy5nZXQoJ0NvbnRlbnQtRW5jb2RpbmcnKTtcblxuXHRcdFx0Ly8gSFRUUC1uZXR3b3JrIGZldGNoIHN0ZXAgMTIuMS4xLjQ6IGhhbmRsZSBjb250ZW50IGNvZGluZ3NcblxuXHRcdFx0Ly8gaW4gZm9sbG93aW5nIHNjZW5hcmlvcyB3ZSBpZ25vcmUgY29tcHJlc3Npb24gc3VwcG9ydFxuXHRcdFx0Ly8gMS4gY29tcHJlc3Npb24gc3VwcG9ydCBpcyBkaXNhYmxlZFxuXHRcdFx0Ly8gMi4gSEVBRCByZXF1ZXN0XG5cdFx0XHQvLyAzLiBubyBDb250ZW50LUVuY29kaW5nIGhlYWRlclxuXHRcdFx0Ly8gNC4gbm8gY29udGVudCByZXNwb25zZSAoMjA0KVxuXHRcdFx0Ly8gNS4gY29udGVudCBub3QgbW9kaWZpZWQgcmVzcG9uc2UgKDMwNClcblx0XHRcdGlmICghcmVxdWVzdC5jb21wcmVzcyB8fCByZXF1ZXN0Lm1ldGhvZCA9PT0gJ0hFQUQnIHx8IGNvZGluZ3MgPT09IG51bGwgfHwgcmVzcG9uc2VfLnN0YXR1c0NvZGUgPT09IDIwNCB8fCByZXNwb25zZV8uc3RhdHVzQ29kZSA9PT0gMzA0KSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlT3B0aW9ucyk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvciBOb2RlIHY2K1xuXHRcdFx0Ly8gQmUgbGVzcyBzdHJpY3Qgd2hlbiBkZWNvZGluZyBjb21wcmVzc2VkIHJlc3BvbnNlcywgc2luY2Ugc29tZXRpbWVzXG5cdFx0XHQvLyBzZXJ2ZXJzIHNlbmQgc2xpZ2h0bHkgaW52YWxpZCByZXNwb25zZXMgdGhhdCBhcmUgc3RpbGwgYWNjZXB0ZWRcblx0XHRcdC8vIGJ5IGNvbW1vbiBicm93c2Vycy5cblx0XHRcdC8vIEFsd2F5cyB1c2luZyBaX1NZTkNfRkxVU0ggaXMgd2hhdCBjVVJMIGRvZXMuXG5cdFx0XHRjb25zdCB6bGliT3B0aW9ucyA9IHtcblx0XHRcdFx0Zmx1c2g6IHpsaWIuWl9TWU5DX0ZMVVNILFxuXHRcdFx0XHRmaW5pc2hGbHVzaDogemxpYi5aX1NZTkNfRkxVU0hcblx0XHRcdH07XG5cblx0XHRcdC8vIEZvciBnemlwXG5cdFx0XHRpZiAoY29kaW5ncyA9PT0gJ2d6aXAnIHx8IGNvZGluZ3MgPT09ICd4LWd6aXAnKSB7XG5cdFx0XHRcdGJvZHkgPSBwdW1wKGJvZHksIHpsaWIuY3JlYXRlR3VuemlwKHpsaWJPcHRpb25zKSwgZXJyb3IgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZU9wdGlvbnMpO1xuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3IgZGVmbGF0ZVxuXHRcdFx0aWYgKGNvZGluZ3MgPT09ICdkZWZsYXRlJyB8fCBjb2RpbmdzID09PSAneC1kZWZsYXRlJykge1xuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGluZmFtb3VzIHJhdyBkZWZsYXRlIHJlc3BvbnNlIGZyb20gb2xkIHNlcnZlcnNcblx0XHRcdFx0Ly8gYSBoYWNrIGZvciBvbGQgSUlTIGFuZCBBcGFjaGUgc2VydmVyc1xuXHRcdFx0XHRjb25zdCByYXcgPSBwdW1wKHJlc3BvbnNlXywgbmV3IFBhc3NUaHJvdWdoKCksIGVycm9yID0+IHtcblx0XHRcdFx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmF3Lm9uY2UoJ2RhdGEnLCBjaHVuayA9PiB7XG5cdFx0XHRcdFx0Ly8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzc1MTk4Mjhcblx0XHRcdFx0XHRpZiAoKGNodW5rWzBdICYgMHgwRikgPT09IDB4MDgpIHtcblx0XHRcdFx0XHRcdGJvZHkgPSBwdW1wKGJvZHksIHpsaWIuY3JlYXRlSW5mbGF0ZSgpLCBlcnJvciA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRib2R5ID0gcHVtcChib2R5LCB6bGliLmNyZWF0ZUluZmxhdGVSYXcoKSwgZXJyb3IgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZU9wdGlvbnMpO1xuXHRcdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmF3Lm9uY2UoJ2VuZCcsICgpID0+IHtcblx0XHRcdFx0XHQvLyBTb21lIG9sZCBJSVMgc2VydmVycyByZXR1cm4gemVyby1sZW5ndGggT0sgZGVmbGF0ZSByZXNwb25zZXMsIHNvXG5cdFx0XHRcdFx0Ly8gJ2RhdGEnIGlzIG5ldmVyIGVtaXR0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbm9kZS1mZXRjaC9ub2RlLWZldGNoL3B1bGwvOTAzXG5cdFx0XHRcdFx0aWYgKCFyZXNwb25zZSkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoYm9keSwgcmVzcG9uc2VPcHRpb25zKTtcblx0XHRcdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yIGJyXG5cdFx0XHRpZiAoY29kaW5ncyA9PT0gJ2JyJykge1xuXHRcdFx0XHRib2R5ID0gcHVtcChib2R5LCB6bGliLmNyZWF0ZUJyb3RsaURlY29tcHJlc3MoKSwgZXJyb3IgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZU9wdGlvbnMpO1xuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UsIHVzZSByZXNwb25zZSBhcy1pc1xuXHRcdFx0cmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoYm9keSwgcmVzcG9uc2VPcHRpb25zKTtcblx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByb21pc2UvcHJlZmVyLWF3YWl0LXRvLXRoZW5cblx0XHR3cml0ZVRvU3RyZWFtKHJlcXVlc3RfLCByZXF1ZXN0KS5jYXRjaChyZWplY3QpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gZml4UmVzcG9uc2VDaHVua2VkVHJhbnNmZXJCYWRFbmRpbmcocmVxdWVzdCwgZXJyb3JDYWxsYmFjaykge1xuXHRjb25zdCBMQVNUX0NIVU5LID0gQnVmZmVyLmZyb20oJzBcXHJcXG5cXHJcXG4nKTtcblxuXHRsZXQgaXNDaHVua2VkVHJhbnNmZXIgPSBmYWxzZTtcblx0bGV0IHByb3Blckxhc3RDaHVua1JlY2VpdmVkID0gZmFsc2U7XG5cdGxldCBwcmV2aW91c0NodW5rO1xuXG5cdHJlcXVlc3Qub24oJ3Jlc3BvbnNlJywgcmVzcG9uc2UgPT4ge1xuXHRcdGNvbnN0IHtoZWFkZXJzfSA9IHJlc3BvbnNlO1xuXHRcdGlzQ2h1bmtlZFRyYW5zZmVyID0gaGVhZGVyc1sndHJhbnNmZXItZW5jb2RpbmcnXSA9PT0gJ2NodW5rZWQnICYmICFoZWFkZXJzWydjb250ZW50LWxlbmd0aCddO1xuXHR9KTtcblxuXHRyZXF1ZXN0Lm9uKCdzb2NrZXQnLCBzb2NrZXQgPT4ge1xuXHRcdGNvbnN0IG9uU29ja2V0Q2xvc2UgPSAoKSA9PiB7XG5cdFx0XHRpZiAoaXNDaHVua2VkVHJhbnNmZXIgJiYgIXByb3Blckxhc3RDaHVua1JlY2VpdmVkKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdQcmVtYXR1cmUgY2xvc2UnKTtcblx0XHRcdFx0ZXJyb3IuY29kZSA9ICdFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSc7XG5cdFx0XHRcdGVycm9yQ2FsbGJhY2soZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBvbkRhdGEgPSBidWYgPT4ge1xuXHRcdFx0cHJvcGVyTGFzdENodW5rUmVjZWl2ZWQgPSBCdWZmZXIuY29tcGFyZShidWYuc2xpY2UoLTUpLCBMQVNUX0NIVU5LKSA9PT0gMDtcblxuXHRcdFx0Ly8gU29tZXRpbWVzIGZpbmFsIDAtbGVuZ3RoIGNodW5rIGFuZCBlbmQgb2YgbWVzc2FnZSBjb2RlIGFyZSBpbiBzZXBhcmF0ZSBwYWNrZXRzXG5cdFx0XHRpZiAoIXByb3Blckxhc3RDaHVua1JlY2VpdmVkICYmIHByZXZpb3VzQ2h1bmspIHtcblx0XHRcdFx0cHJvcGVyTGFzdENodW5rUmVjZWl2ZWQgPSAoXG5cdFx0XHRcdFx0QnVmZmVyLmNvbXBhcmUocHJldmlvdXNDaHVuay5zbGljZSgtMyksIExBU1RfQ0hVTksuc2xpY2UoMCwgMykpID09PSAwICYmXG5cdFx0XHRcdFx0QnVmZmVyLmNvbXBhcmUoYnVmLnNsaWNlKC0yKSwgTEFTVF9DSFVOSy5zbGljZSgzKSkgPT09IDBcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0cHJldmlvdXNDaHVuayA9IGJ1Zjtcblx0XHR9O1xuXG5cdFx0c29ja2V0LnByZXBlbmRMaXN0ZW5lcignY2xvc2UnLCBvblNvY2tldENsb3NlKTtcblx0XHRzb2NrZXQub24oJ2RhdGEnLCBvbkRhdGEpO1xuXG5cdFx0cmVxdWVzdC5vbignY2xvc2UnLCAoKSA9PiB7XG5cdFx0XHRzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25Tb2NrZXRDbG9zZSk7XG5cdFx0XHRzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbkRhdGEpO1xuXHRcdH0pO1xuXHR9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/request.js":
/*!********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/request.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Request),\n/* harmony export */   getNodeRequestOptions: () => (/* binding */ getNodeRequestOptions)\n/* harmony export */ });\n/* harmony import */ var node_url__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:url */ \"node:url\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:util */ \"node:util\");\n/* harmony import */ var _headers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./headers.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/headers.js\");\n/* harmony import */ var _body_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./body.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/body.js\");\n/* harmony import */ var _utils_is_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/is.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is.js\");\n/* harmony import */ var _utils_get_search_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/get-search.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/get-search.js\");\n/* harmony import */ var _utils_referrer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/referrer.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/referrer.js\");\n/**\n * Request.js\n *\n * Request class contains server only options\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\n\n\n\n\n\n\n\n\nconst INTERNALS = Symbol('Request internals');\n\n/**\n * Check if `obj` is an instance of Request.\n *\n * @param  {*} object\n * @return {boolean}\n */\nconst isRequest = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object[INTERNALS] === 'object'\n\t);\n};\n\nconst doBadDataWarn = (0,node_util__WEBPACK_IMPORTED_MODULE_1__.deprecate)(() => {},\n\t'.data is not a valid RequestInit property, use .body instead',\n\t'https://github.com/node-fetch/node-fetch/issues/1000 (request)');\n\n/**\n * Request class\n *\n * Ref: https://fetch.spec.whatwg.org/#request-class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request extends _body_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n\tconstructor(input, init = {}) {\n\t\tlet parsedURL;\n\n\t\t// Normalize input and force URL to be encoded as UTF-8 (https://github.com/node-fetch/node-fetch/issues/245)\n\t\tif (isRequest(input)) {\n\t\t\tparsedURL = new URL(input.url);\n\t\t} else {\n\t\t\tparsedURL = new URL(input);\n\t\t\tinput = {};\n\t\t}\n\n\t\tif (parsedURL.username !== '' || parsedURL.password !== '') {\n\t\t\tthrow new TypeError(`${parsedURL} is an url with embedded credentials.`);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tif (/^(delete|get|head|options|post|put)$/i.test(method)) {\n\t\t\tmethod = method.toUpperCase();\n\t\t}\n\n\t\tif (!isRequest(init) && 'data' in init) {\n\t\t\tdoBadDataWarn();\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif ((init.body != null || (isRequest(input) && input.body !== null)) &&\n\t\t\t(method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tconst inputBody = init.body ?\n\t\t\tinit.body :\n\t\t\t(isRequest(input) && input.body !== null ?\n\t\t\t\t(0,_body_js__WEBPACK_IMPORTED_MODULE_2__.clone)(input) :\n\t\t\t\tnull);\n\n\t\tsuper(inputBody, {\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new _headers_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](init.headers || input.headers || {});\n\n\t\tif (inputBody !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = (0,_body_js__WEBPACK_IMPORTED_MODULE_2__.extractContentType)(inputBody, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.set('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ?\n\t\t\tinput.signal :\n\t\t\tnull;\n\t\tif ('signal' in init) {\n\t\t\tsignal = init.signal;\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (signal != null && !(0,_utils_is_js__WEBPACK_IMPORTED_MODULE_4__.isAbortSignal)(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal or EventTarget');\n\t\t}\n\n\t\t// 5.4, Request constructor steps, step 15.1\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tlet referrer = init.referrer == null ? input.referrer : init.referrer;\n\t\tif (referrer === '') {\n\t\t\t// 5.4, Request constructor steps, step 15.2\n\t\t\treferrer = 'no-referrer';\n\t\t} else if (referrer) {\n\t\t\t// 5.4, Request constructor steps, step 15.3.1, 15.3.2\n\t\t\tconst parsedReferrer = new URL(referrer);\n\t\t\t// 5.4, Request constructor steps, step 15.3.3, 15.3.4\n\t\t\treferrer = /^about:(\\/\\/)?client$/.test(parsedReferrer) ? 'client' : parsedReferrer;\n\t\t} else {\n\t\t\treferrer = undefined;\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal,\n\t\t\treferrer\n\t\t};\n\n\t\t// Node-fetch-only options\n\t\tthis.follow = init.follow === undefined ? (input.follow === undefined ? 20 : input.follow) : init.follow;\n\t\tthis.compress = init.compress === undefined ? (input.compress === undefined ? true : input.compress) : init.compress;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t\tthis.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;\n\t\tthis.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;\n\n\t\t// 5.4, Request constructor steps, step 16.\n\t\t// Default is empty string per https://fetch.spec.whatwg.org/#concept-request-referrer-policy\n\t\tthis.referrerPolicy = init.referrerPolicy || input.referrerPolicy || '';\n\t}\n\n\t/** @returns {string} */\n\tget method() {\n\t\treturn this[INTERNALS].method;\n\t}\n\n\t/** @returns {string} */\n\tget url() {\n\t\treturn (0,node_url__WEBPACK_IMPORTED_MODULE_0__.format)(this[INTERNALS].parsedURL);\n\t}\n\n\t/** @returns {Headers} */\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS].redirect;\n\t}\n\n\t/** @returns {AbortSignal} */\n\tget signal() {\n\t\treturn this[INTERNALS].signal;\n\t}\n\n\t// https://fetch.spec.whatwg.org/#dom-request-referrer\n\tget referrer() {\n\t\tif (this[INTERNALS].referrer === 'no-referrer') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer === 'client') {\n\t\t\treturn 'about:client';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer) {\n\t\t\treturn this[INTERNALS].referrer.toString();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget referrerPolicy() {\n\t\treturn this[INTERNALS].referrerPolicy;\n\t}\n\n\tset referrerPolicy(referrerPolicy) {\n\t\tthis[INTERNALS].referrerPolicy = (0,_utils_referrer_js__WEBPACK_IMPORTED_MODULE_5__.validateReferrerPolicy)(referrerPolicy);\n\t}\n\n\t/**\n\t * Clone this request\n\t *\n\t * @return  Request\n\t */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Request';\n\t}\n}\n\nObject.defineProperties(Request.prototype, {\n\tmethod: {enumerable: true},\n\turl: {enumerable: true},\n\theaders: {enumerable: true},\n\tredirect: {enumerable: true},\n\tclone: {enumerable: true},\n\tsignal: {enumerable: true},\n\treferrer: {enumerable: true},\n\treferrerPolicy: {enumerable: true}\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param {Request} request - A Request instance\n * @return The options object to be passed to http.request\n */\nconst getNodeRequestOptions = request => {\n\tconst {parsedURL} = request[INTERNALS];\n\tconst headers = new _headers_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](request[INTERNALS].headers);\n\n\t// Fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body === null && /^(post|put)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\n\tif (request.body !== null) {\n\t\tconst totalBytes = (0,_body_js__WEBPACK_IMPORTED_MODULE_2__.getTotalBytes)(request);\n\t\t// Set Content-Length if totalBytes is a number (that is not NaN)\n\t\tif (typeof totalBytes === 'number' && !Number.isNaN(totalBytes)) {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// 4.1. Main fetch, step 2.6\n\t// > If request's referrer policy is the empty string, then set request's referrer policy to the\n\t// > default referrer policy.\n\tif (request.referrerPolicy === '') {\n\t\trequest.referrerPolicy = _utils_referrer_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_REFERRER_POLICY;\n\t}\n\n\t// 4.1. Main fetch, step 2.7\n\t// > If request's referrer is not \"no-referrer\", set request's referrer to the result of invoking\n\t// > determine request's referrer.\n\tif (request.referrer && request.referrer !== 'no-referrer') {\n\t\trequest[INTERNALS].referrer = (0,_utils_referrer_js__WEBPACK_IMPORTED_MODULE_5__.determineRequestsReferrer)(request);\n\t} else {\n\t\trequest[INTERNALS].referrer = 'no-referrer';\n\t}\n\n\t// 4.5. HTTP-network-or-cache fetch, step 6.9\n\t// > If httpRequest's referrer is a URL, then append `Referer`/httpRequest's referrer, serialized\n\t// >  and isomorphic encoded, to httpRequest's header list.\n\tif (request[INTERNALS].referrer instanceof URL) {\n\t\theaders.set('Referer', request.referrer);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip, deflate, br');\n\t}\n\n\tlet {agent} = request;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\tconst search = (0,_utils_get_search_js__WEBPACK_IMPORTED_MODULE_6__.getSearch)(parsedURL);\n\n\t// Pass the full URL directly to request(), but overwrite the following\n\t// options:\n\tconst options = {\n\t\t// Overwrite search to retain trailing ? (issue #776)\n\t\tpath: parsedURL.pathname + search,\n\t\t// The following options are not expressed in the URL\n\t\tmethod: request.method,\n\t\theaders: headers[Symbol.for('nodejs.util.inspect.custom')](),\n\t\tinsecureHTTPParser: request.insecureHTTPParser,\n\t\tagent\n\t};\n\n\treturn {\n\t\t/** @type {URL} */\n\t\tparsedURL,\n\t\toptions\n\t};\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9yZXF1ZXN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU2QztBQUNUO0FBQ0Q7QUFDc0M7QUFDN0I7QUFDSTtBQUduQjs7QUFFN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxHQUFHO0FBQ2YsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixvREFBUyxTQUFTO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2Usc0JBQXNCLGdEQUFJO0FBQ3pDLDZCQUE2QjtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLFdBQVc7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrQ0FBSztBQUNUOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVILHNCQUFzQixtREFBTyxvQ0FBb0M7O0FBRWpFO0FBQ0EsdUJBQXVCLDREQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsMkRBQWE7QUFDdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7O0FBRUEsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsU0FBUyxnREFBUztBQUNsQjs7QUFFQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQywwRUFBc0I7QUFDekQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsaUJBQWlCO0FBQzNCLE9BQU8saUJBQWlCO0FBQ3hCLFdBQVcsaUJBQWlCO0FBQzVCLFlBQVksaUJBQWlCO0FBQzdCLFNBQVMsaUJBQWlCO0FBQzFCLFVBQVUsaUJBQWlCO0FBQzNCLFlBQVksaUJBQWlCO0FBQzdCLGtCQUFrQjtBQUNsQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ087QUFDUCxRQUFRLFdBQVc7QUFDbkIscUJBQXFCLG1EQUFPOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCLHVEQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVFQUF1QjtBQUNsRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2RUFBeUI7QUFDekQsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sT0FBTztBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdCQUFnQiwrREFBUzs7QUFFekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsS0FBSztBQUNsQjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvcmVxdWVzdC5qcz84M2ZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVxdWVzdC5qc1xuICpcbiAqIFJlcXVlc3QgY2xhc3MgY29udGFpbnMgc2VydmVyIG9ubHkgb3B0aW9uc1xuICpcbiAqIEFsbCBzcGVjIGFsZ29yaXRobSBzdGVwIG51bWJlcnMgYXJlIGJhc2VkIG9uIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnL2NvbW1pdC1zbmFwc2hvdHMvYWU3MTY4MjJjYjNhNjE4NDMyMjZjZDA5MGVlZmM2NTg5NDQ2YzFkMi8uXG4gKi9cblxuaW1wb3J0IHtmb3JtYXQgYXMgZm9ybWF0VXJsfSBmcm9tICdub2RlOnVybCc7XG5pbXBvcnQge2RlcHJlY2F0ZX0gZnJvbSAnbm9kZTp1dGlsJztcbmltcG9ydCBIZWFkZXJzIGZyb20gJy4vaGVhZGVycy5qcyc7XG5pbXBvcnQgQm9keSwge2Nsb25lLCBleHRyYWN0Q29udGVudFR5cGUsIGdldFRvdGFsQnl0ZXN9IGZyb20gJy4vYm9keS5qcyc7XG5pbXBvcnQge2lzQWJvcnRTaWduYWx9IGZyb20gJy4vdXRpbHMvaXMuanMnO1xuaW1wb3J0IHtnZXRTZWFyY2h9IGZyb20gJy4vdXRpbHMvZ2V0LXNlYXJjaC5qcyc7XG5pbXBvcnQge1xuXHR2YWxpZGF0ZVJlZmVycmVyUG9saWN5LCBkZXRlcm1pbmVSZXF1ZXN0c1JlZmVycmVyLCBERUZBVUxUX1JFRkVSUkVSX1BPTElDWVxufSBmcm9tICcuL3V0aWxzL3JlZmVycmVyLmpzJztcblxuY29uc3QgSU5URVJOQUxTID0gU3ltYm9sKCdSZXF1ZXN0IGludGVybmFscycpO1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGFuIGluc3RhbmNlIG9mIFJlcXVlc3QuXG4gKlxuICogQHBhcmFtICB7Kn0gb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5jb25zdCBpc1JlcXVlc3QgPSBvYmplY3QgPT4ge1xuXHRyZXR1cm4gKFxuXHRcdHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmXG5cdFx0dHlwZW9mIG9iamVjdFtJTlRFUk5BTFNdID09PSAnb2JqZWN0J1xuXHQpO1xufTtcblxuY29uc3QgZG9CYWREYXRhV2FybiA9IGRlcHJlY2F0ZSgoKSA9PiB7fSxcblx0Jy5kYXRhIGlzIG5vdCBhIHZhbGlkIFJlcXVlc3RJbml0IHByb3BlcnR5LCB1c2UgLmJvZHkgaW5zdGVhZCcsXG5cdCdodHRwczovL2dpdGh1Yi5jb20vbm9kZS1mZXRjaC9ub2RlLWZldGNoL2lzc3Vlcy8xMDAwIChyZXF1ZXN0KScpO1xuXG4vKipcbiAqIFJlcXVlc3QgY2xhc3NcbiAqXG4gKiBSZWY6IGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNyZXF1ZXN0LWNsYXNzXG4gKlxuICogQHBhcmFtICAgTWl4ZWQgICBpbnB1dCAgVXJsIG9yIFJlcXVlc3QgaW5zdGFuY2VcbiAqIEBwYXJhbSAgIE9iamVjdCAgaW5pdCAgIEN1c3RvbSBvcHRpb25zXG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3QgZXh0ZW5kcyBCb2R5IHtcblx0Y29uc3RydWN0b3IoaW5wdXQsIGluaXQgPSB7fSkge1xuXHRcdGxldCBwYXJzZWRVUkw7XG5cblx0XHQvLyBOb3JtYWxpemUgaW5wdXQgYW5kIGZvcmNlIFVSTCB0byBiZSBlbmNvZGVkIGFzIFVURi04IChodHRwczovL2dpdGh1Yi5jb20vbm9kZS1mZXRjaC9ub2RlLWZldGNoL2lzc3Vlcy8yNDUpXG5cdFx0aWYgKGlzUmVxdWVzdChpbnB1dCkpIHtcblx0XHRcdHBhcnNlZFVSTCA9IG5ldyBVUkwoaW5wdXQudXJsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cGFyc2VkVVJMID0gbmV3IFVSTChpbnB1dCk7XG5cdFx0XHRpbnB1dCA9IHt9O1xuXHRcdH1cblxuXHRcdGlmIChwYXJzZWRVUkwudXNlcm5hbWUgIT09ICcnIHx8IHBhcnNlZFVSTC5wYXNzd29yZCAhPT0gJycpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYCR7cGFyc2VkVVJMfSBpcyBhbiB1cmwgd2l0aCBlbWJlZGRlZCBjcmVkZW50aWFscy5gKTtcblx0XHR9XG5cblx0XHRsZXQgbWV0aG9kID0gaW5pdC5tZXRob2QgfHwgaW5wdXQubWV0aG9kIHx8ICdHRVQnO1xuXHRcdGlmICgvXihkZWxldGV8Z2V0fGhlYWR8b3B0aW9uc3xwb3N0fHB1dCkkL2kudGVzdChtZXRob2QpKSB7XG5cdFx0XHRtZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKTtcblx0XHR9XG5cblx0XHRpZiAoIWlzUmVxdWVzdChpbml0KSAmJiAnZGF0YScgaW4gaW5pdCkge1xuXHRcdFx0ZG9CYWREYXRhV2FybigpO1xuXHRcdH1cblxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLCBlcWVxZXFcblx0XHRpZiAoKGluaXQuYm9keSAhPSBudWxsIHx8IChpc1JlcXVlc3QoaW5wdXQpICYmIGlucHV0LmJvZHkgIT09IG51bGwpKSAmJlxuXHRcdFx0KG1ldGhvZCA9PT0gJ0dFVCcgfHwgbWV0aG9kID09PSAnSEVBRCcpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdSZXF1ZXN0IHdpdGggR0VUL0hFQUQgbWV0aG9kIGNhbm5vdCBoYXZlIGJvZHknKTtcblx0XHR9XG5cblx0XHRjb25zdCBpbnB1dEJvZHkgPSBpbml0LmJvZHkgP1xuXHRcdFx0aW5pdC5ib2R5IDpcblx0XHRcdChpc1JlcXVlc3QoaW5wdXQpICYmIGlucHV0LmJvZHkgIT09IG51bGwgP1xuXHRcdFx0XHRjbG9uZShpbnB1dCkgOlxuXHRcdFx0XHRudWxsKTtcblxuXHRcdHN1cGVyKGlucHV0Qm9keSwge1xuXHRcdFx0c2l6ZTogaW5pdC5zaXplIHx8IGlucHV0LnNpemUgfHwgMFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKGluaXQuaGVhZGVycyB8fCBpbnB1dC5oZWFkZXJzIHx8IHt9KTtcblxuXHRcdGlmIChpbnB1dEJvZHkgIT09IG51bGwgJiYgIWhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKSkge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSBleHRyYWN0Q29udGVudFR5cGUoaW5wdXRCb2R5LCB0aGlzKTtcblx0XHRcdGlmIChjb250ZW50VHlwZSkge1xuXHRcdFx0XHRoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgY29udGVudFR5cGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGxldCBzaWduYWwgPSBpc1JlcXVlc3QoaW5wdXQpID9cblx0XHRcdGlucHV0LnNpZ25hbCA6XG5cdFx0XHRudWxsO1xuXHRcdGlmICgnc2lnbmFsJyBpbiBpbml0KSB7XG5cdFx0XHRzaWduYWwgPSBpbml0LnNpZ25hbDtcblx0XHR9XG5cblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXEtbnVsbCwgZXFlcWVxXG5cdFx0aWYgKHNpZ25hbCAhPSBudWxsICYmICFpc0Fib3J0U2lnbmFsKHNpZ25hbCkpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHNpZ25hbCB0byBiZSBhbiBpbnN0YW5jZW9mIEFib3J0U2lnbmFsIG9yIEV2ZW50VGFyZ2V0Jyk7XG5cdFx0fVxuXG5cdFx0Ly8gwqc1LjQsIFJlcXVlc3QgY29uc3RydWN0b3Igc3RlcHMsIHN0ZXAgMTUuMVxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLCBlcWVxZXFcblx0XHRsZXQgcmVmZXJyZXIgPSBpbml0LnJlZmVycmVyID09IG51bGwgPyBpbnB1dC5yZWZlcnJlciA6IGluaXQucmVmZXJyZXI7XG5cdFx0aWYgKHJlZmVycmVyID09PSAnJykge1xuXHRcdFx0Ly8gwqc1LjQsIFJlcXVlc3QgY29uc3RydWN0b3Igc3RlcHMsIHN0ZXAgMTUuMlxuXHRcdFx0cmVmZXJyZXIgPSAnbm8tcmVmZXJyZXInO1xuXHRcdH0gZWxzZSBpZiAocmVmZXJyZXIpIHtcblx0XHRcdC8vIMKnNS40LCBSZXF1ZXN0IGNvbnN0cnVjdG9yIHN0ZXBzLCBzdGVwIDE1LjMuMSwgMTUuMy4yXG5cdFx0XHRjb25zdCBwYXJzZWRSZWZlcnJlciA9IG5ldyBVUkwocmVmZXJyZXIpO1xuXHRcdFx0Ly8gwqc1LjQsIFJlcXVlc3QgY29uc3RydWN0b3Igc3RlcHMsIHN0ZXAgMTUuMy4zLCAxNS4zLjRcblx0XHRcdHJlZmVycmVyID0gL15hYm91dDooXFwvXFwvKT9jbGllbnQkLy50ZXN0KHBhcnNlZFJlZmVycmVyKSA/ICdjbGllbnQnIDogcGFyc2VkUmVmZXJyZXI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlZmVycmVyID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHRoaXNbSU5URVJOQUxTXSA9IHtcblx0XHRcdG1ldGhvZCxcblx0XHRcdHJlZGlyZWN0OiBpbml0LnJlZGlyZWN0IHx8IGlucHV0LnJlZGlyZWN0IHx8ICdmb2xsb3cnLFxuXHRcdFx0aGVhZGVycyxcblx0XHRcdHBhcnNlZFVSTCxcblx0XHRcdHNpZ25hbCxcblx0XHRcdHJlZmVycmVyXG5cdFx0fTtcblxuXHRcdC8vIE5vZGUtZmV0Y2gtb25seSBvcHRpb25zXG5cdFx0dGhpcy5mb2xsb3cgPSBpbml0LmZvbGxvdyA9PT0gdW5kZWZpbmVkID8gKGlucHV0LmZvbGxvdyA9PT0gdW5kZWZpbmVkID8gMjAgOiBpbnB1dC5mb2xsb3cpIDogaW5pdC5mb2xsb3c7XG5cdFx0dGhpcy5jb21wcmVzcyA9IGluaXQuY29tcHJlc3MgPT09IHVuZGVmaW5lZCA/IChpbnB1dC5jb21wcmVzcyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGlucHV0LmNvbXByZXNzKSA6IGluaXQuY29tcHJlc3M7XG5cdFx0dGhpcy5jb3VudGVyID0gaW5pdC5jb3VudGVyIHx8IGlucHV0LmNvdW50ZXIgfHwgMDtcblx0XHR0aGlzLmFnZW50ID0gaW5pdC5hZ2VudCB8fCBpbnB1dC5hZ2VudDtcblx0XHR0aGlzLmhpZ2hXYXRlck1hcmsgPSBpbml0LmhpZ2hXYXRlck1hcmsgfHwgaW5wdXQuaGlnaFdhdGVyTWFyayB8fCAxNjM4NDtcblx0XHR0aGlzLmluc2VjdXJlSFRUUFBhcnNlciA9IGluaXQuaW5zZWN1cmVIVFRQUGFyc2VyIHx8IGlucHV0Lmluc2VjdXJlSFRUUFBhcnNlciB8fCBmYWxzZTtcblxuXHRcdC8vIMKnNS40LCBSZXF1ZXN0IGNvbnN0cnVjdG9yIHN0ZXBzLCBzdGVwIDE2LlxuXHRcdC8vIERlZmF1bHQgaXMgZW1wdHkgc3RyaW5nIHBlciBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1yZXF1ZXN0LXJlZmVycmVyLXBvbGljeVxuXHRcdHRoaXMucmVmZXJyZXJQb2xpY3kgPSBpbml0LnJlZmVycmVyUG9saWN5IHx8IGlucHV0LnJlZmVycmVyUG9saWN5IHx8ICcnO1xuXHR9XG5cblx0LyoqIEByZXR1cm5zIHtzdHJpbmd9ICovXG5cdGdldCBtZXRob2QoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5tZXRob2Q7XG5cdH1cblxuXHQvKiogQHJldHVybnMge3N0cmluZ30gKi9cblx0Z2V0IHVybCgpIHtcblx0XHRyZXR1cm4gZm9ybWF0VXJsKHRoaXNbSU5URVJOQUxTXS5wYXJzZWRVUkwpO1xuXHR9XG5cblx0LyoqIEByZXR1cm5zIHtIZWFkZXJzfSAqL1xuXHRnZXQgaGVhZGVycygpIHtcblx0XHRyZXR1cm4gdGhpc1tJTlRFUk5BTFNdLmhlYWRlcnM7XG5cdH1cblxuXHRnZXQgcmVkaXJlY3QoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5yZWRpcmVjdDtcblx0fVxuXG5cdC8qKiBAcmV0dXJucyB7QWJvcnRTaWduYWx9ICovXG5cdGdldCBzaWduYWwoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5zaWduYWw7XG5cdH1cblxuXHQvLyBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jZG9tLXJlcXVlc3QtcmVmZXJyZXJcblx0Z2V0IHJlZmVycmVyKCkge1xuXHRcdGlmICh0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXIgPT09ICduby1yZWZlcnJlcicpIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cblx0XHRpZiAodGhpc1tJTlRFUk5BTFNdLnJlZmVycmVyID09PSAnY2xpZW50Jykge1xuXHRcdFx0cmV0dXJuICdhYm91dDpjbGllbnQnO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXIpIHtcblx0XHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXIudG9TdHJpbmcoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0Z2V0IHJlZmVycmVyUG9saWN5KCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXJQb2xpY3k7XG5cdH1cblxuXHRzZXQgcmVmZXJyZXJQb2xpY3kocmVmZXJyZXJQb2xpY3kpIHtcblx0XHR0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXJQb2xpY3kgPSB2YWxpZGF0ZVJlZmVycmVyUG9saWN5KHJlZmVycmVyUG9saWN5KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9uZSB0aGlzIHJlcXVlc3Rcblx0ICpcblx0ICogQHJldHVybiAgUmVxdWVzdFxuXHQgKi9cblx0Y2xvbmUoKSB7XG5cdFx0cmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpO1xuXHR9XG5cblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiAnUmVxdWVzdCc7XG5cdH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUmVxdWVzdC5wcm90b3R5cGUsIHtcblx0bWV0aG9kOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHVybDoge2VudW1lcmFibGU6IHRydWV9LFxuXHRoZWFkZXJzOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHJlZGlyZWN0OiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGNsb25lOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHNpZ25hbDoge2VudW1lcmFibGU6IHRydWV9LFxuXHRyZWZlcnJlcjoge2VudW1lcmFibGU6IHRydWV9LFxuXHRyZWZlcnJlclBvbGljeToge2VudW1lcmFibGU6IHRydWV9XG59KTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgUmVxdWVzdCB0byBOb2RlLmpzIGh0dHAgcmVxdWVzdCBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCAtIEEgUmVxdWVzdCBpbnN0YW5jZVxuICogQHJldHVybiBUaGUgb3B0aW9ucyBvYmplY3QgdG8gYmUgcGFzc2VkIHRvIGh0dHAucmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgZ2V0Tm9kZVJlcXVlc3RPcHRpb25zID0gcmVxdWVzdCA9PiB7XG5cdGNvbnN0IHtwYXJzZWRVUkx9ID0gcmVxdWVzdFtJTlRFUk5BTFNdO1xuXHRjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMocmVxdWVzdFtJTlRFUk5BTFNdLmhlYWRlcnMpO1xuXG5cdC8vIEZldGNoIHN0ZXAgMS4zXG5cdGlmICghaGVhZGVycy5oYXMoJ0FjY2VwdCcpKSB7XG5cdFx0aGVhZGVycy5zZXQoJ0FjY2VwdCcsICcqLyonKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yay1vci1jYWNoZSBmZXRjaCBzdGVwcyAyLjQtMi43XG5cdGxldCBjb250ZW50TGVuZ3RoVmFsdWUgPSBudWxsO1xuXHRpZiAocmVxdWVzdC5ib2R5ID09PSBudWxsICYmIC9eKHBvc3R8cHV0KSQvaS50ZXN0KHJlcXVlc3QubWV0aG9kKSkge1xuXHRcdGNvbnRlbnRMZW5ndGhWYWx1ZSA9ICcwJztcblx0fVxuXG5cdGlmIChyZXF1ZXN0LmJvZHkgIT09IG51bGwpIHtcblx0XHRjb25zdCB0b3RhbEJ5dGVzID0gZ2V0VG90YWxCeXRlcyhyZXF1ZXN0KTtcblx0XHQvLyBTZXQgQ29udGVudC1MZW5ndGggaWYgdG90YWxCeXRlcyBpcyBhIG51bWJlciAodGhhdCBpcyBub3QgTmFOKVxuXHRcdGlmICh0eXBlb2YgdG90YWxCeXRlcyA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih0b3RhbEJ5dGVzKSkge1xuXHRcdFx0Y29udGVudExlbmd0aFZhbHVlID0gU3RyaW5nKHRvdGFsQnl0ZXMpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChjb250ZW50TGVuZ3RoVmFsdWUpIHtcblx0XHRoZWFkZXJzLnNldCgnQ29udGVudC1MZW5ndGgnLCBjb250ZW50TGVuZ3RoVmFsdWUpO1xuXHR9XG5cblx0Ly8gNC4xLiBNYWluIGZldGNoLCBzdGVwIDIuNlxuXHQvLyA+IElmIHJlcXVlc3QncyByZWZlcnJlciBwb2xpY3kgaXMgdGhlIGVtcHR5IHN0cmluZywgdGhlbiBzZXQgcmVxdWVzdCdzIHJlZmVycmVyIHBvbGljeSB0byB0aGVcblx0Ly8gPiBkZWZhdWx0IHJlZmVycmVyIHBvbGljeS5cblx0aWYgKHJlcXVlc3QucmVmZXJyZXJQb2xpY3kgPT09ICcnKSB7XG5cdFx0cmVxdWVzdC5yZWZlcnJlclBvbGljeSA9IERFRkFVTFRfUkVGRVJSRVJfUE9MSUNZO1xuXHR9XG5cblx0Ly8gNC4xLiBNYWluIGZldGNoLCBzdGVwIDIuN1xuXHQvLyA+IElmIHJlcXVlc3QncyByZWZlcnJlciBpcyBub3QgXCJuby1yZWZlcnJlclwiLCBzZXQgcmVxdWVzdCdzIHJlZmVycmVyIHRvIHRoZSByZXN1bHQgb2YgaW52b2tpbmdcblx0Ly8gPiBkZXRlcm1pbmUgcmVxdWVzdCdzIHJlZmVycmVyLlxuXHRpZiAocmVxdWVzdC5yZWZlcnJlciAmJiByZXF1ZXN0LnJlZmVycmVyICE9PSAnbm8tcmVmZXJyZXInKSB7XG5cdFx0cmVxdWVzdFtJTlRFUk5BTFNdLnJlZmVycmVyID0gZGV0ZXJtaW5lUmVxdWVzdHNSZWZlcnJlcihyZXF1ZXN0KTtcblx0fSBlbHNlIHtcblx0XHRyZXF1ZXN0W0lOVEVSTkFMU10ucmVmZXJyZXIgPSAnbm8tcmVmZXJyZXInO1xuXHR9XG5cblx0Ly8gNC41LiBIVFRQLW5ldHdvcmstb3ItY2FjaGUgZmV0Y2gsIHN0ZXAgNi45XG5cdC8vID4gSWYgaHR0cFJlcXVlc3QncyByZWZlcnJlciBpcyBhIFVSTCwgdGhlbiBhcHBlbmQgYFJlZmVyZXJgL2h0dHBSZXF1ZXN0J3MgcmVmZXJyZXIsIHNlcmlhbGl6ZWRcblx0Ly8gPiAgYW5kIGlzb21vcnBoaWMgZW5jb2RlZCwgdG8gaHR0cFJlcXVlc3QncyBoZWFkZXIgbGlzdC5cblx0aWYgKHJlcXVlc3RbSU5URVJOQUxTXS5yZWZlcnJlciBpbnN0YW5jZW9mIFVSTCkge1xuXHRcdGhlYWRlcnMuc2V0KCdSZWZlcmVyJywgcmVxdWVzdC5yZWZlcnJlcik7XG5cdH1cblxuXHQvLyBIVFRQLW5ldHdvcmstb3ItY2FjaGUgZmV0Y2ggc3RlcCAyLjExXG5cdGlmICghaGVhZGVycy5oYXMoJ1VzZXItQWdlbnQnKSkge1xuXHRcdGhlYWRlcnMuc2V0KCdVc2VyLUFnZW50JywgJ25vZGUtZmV0Y2gnKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yay1vci1jYWNoZSBmZXRjaCBzdGVwIDIuMTVcblx0aWYgKHJlcXVlc3QuY29tcHJlc3MgJiYgIWhlYWRlcnMuaGFzKCdBY2NlcHQtRW5jb2RpbmcnKSkge1xuXHRcdGhlYWRlcnMuc2V0KCdBY2NlcHQtRW5jb2RpbmcnLCAnZ3ppcCwgZGVmbGF0ZSwgYnInKTtcblx0fVxuXG5cdGxldCB7YWdlbnR9ID0gcmVxdWVzdDtcblx0aWYgKHR5cGVvZiBhZ2VudCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGFnZW50ID0gYWdlbnQocGFyc2VkVVJMKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yayBmZXRjaCBzdGVwIDQuMlxuXHQvLyBjaHVua2VkIGVuY29kaW5nIGlzIGhhbmRsZWQgYnkgTm9kZS5qc1xuXG5cdGNvbnN0IHNlYXJjaCA9IGdldFNlYXJjaChwYXJzZWRVUkwpO1xuXG5cdC8vIFBhc3MgdGhlIGZ1bGwgVVJMIGRpcmVjdGx5IHRvIHJlcXVlc3QoKSwgYnV0IG92ZXJ3cml0ZSB0aGUgZm9sbG93aW5nXG5cdC8vIG9wdGlvbnM6XG5cdGNvbnN0IG9wdGlvbnMgPSB7XG5cdFx0Ly8gT3ZlcndyaXRlIHNlYXJjaCB0byByZXRhaW4gdHJhaWxpbmcgPyAoaXNzdWUgIzc3Nilcblx0XHRwYXRoOiBwYXJzZWRVUkwucGF0aG5hbWUgKyBzZWFyY2gsXG5cdFx0Ly8gVGhlIGZvbGxvd2luZyBvcHRpb25zIGFyZSBub3QgZXhwcmVzc2VkIGluIHRoZSBVUkxcblx0XHRtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuXHRcdGhlYWRlcnM6IGhlYWRlcnNbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0oKSxcblx0XHRpbnNlY3VyZUhUVFBQYXJzZXI6IHJlcXVlc3QuaW5zZWN1cmVIVFRQUGFyc2VyLFxuXHRcdGFnZW50XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHQvKiogQHR5cGUge1VSTH0gKi9cblx0XHRwYXJzZWRVUkwsXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/response.js":
/*!*********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/response.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Response)\n/* harmony export */ });\n/* harmony import */ var _headers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./headers.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/headers.js\");\n/* harmony import */ var _body_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./body.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/body.js\");\n/* harmony import */ var _utils_is_redirect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/is-redirect.js */ \"(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is-redirect.js\");\n/**\n * Response.js\n *\n * Response class provides content decoding\n */\n\n\n\n\n\nconst INTERNALS = Symbol('Response internals');\n\n/**\n * Response class\n *\n * Ref: https://fetch.spec.whatwg.org/#response-class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response extends _body_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n\tconstructor(body = null, options = {}) {\n\t\tsuper(body, options);\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq, no-negated-condition\n\t\tconst status = options.status != null ? options.status : 200;\n\n\t\tconst headers = new _headers_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](options.headers);\n\n\t\tif (body !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = (0,_body_js__WEBPACK_IMPORTED_MODULE_0__.extractContentType)(body, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\ttype: 'default',\n\t\t\turl: options.url,\n\t\t\tstatus,\n\t\t\tstatusText: options.statusText || '',\n\t\t\theaders,\n\t\t\tcounter: options.counter,\n\t\t\thighWaterMark: options.highWaterMark\n\t\t};\n\t}\n\n\tget type() {\n\t\treturn this[INTERNALS].type;\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS].status;\n\t}\n\n\t/**\n\t * Convenience property representing if the request ended normally\n\t */\n\tget ok() {\n\t\treturn this[INTERNALS].status >= 200 && this[INTERNALS].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget highWaterMark() {\n\t\treturn this[INTERNALS].highWaterMark;\n\t}\n\n\t/**\n\t * Clone this response\n\t *\n\t * @return  Response\n\t */\n\tclone() {\n\t\treturn new Response((0,_body_js__WEBPACK_IMPORTED_MODULE_0__.clone)(this, this.highWaterMark), {\n\t\t\ttype: this.type,\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected,\n\t\t\tsize: this.size,\n\t\t\thighWaterMark: this.highWaterMark\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} url    The URL that the new response is to originate from.\n\t * @param {number} status An optional status code for the response (e.g., 302.)\n\t * @returns {Response}    A Response object.\n\t */\n\tstatic redirect(url, status = 302) {\n\t\tif (!(0,_utils_is_redirect_js__WEBPACK_IMPORTED_MODULE_2__.isRedirect)(status)) {\n\t\t\tthrow new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n\t\t}\n\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\tlocation: new URL(url).toString()\n\t\t\t},\n\t\t\tstatus\n\t\t});\n\t}\n\n\tstatic error() {\n\t\tconst response = new Response(null, {status: 0, statusText: ''});\n\t\tresponse[INTERNALS].type = 'error';\n\t\treturn response;\n\t}\n\n\tstatic json(data = undefined, init = {}) {\n\t\tconst body = JSON.stringify(data);\n\n\t\tif (body === undefined) {\n\t\t\tthrow new TypeError('data is not JSON serializable');\n\t\t}\n\n\t\tconst headers = new _headers_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](init && init.headers);\n\n\t\tif (!headers.has('content-type')) {\n\t\t\theaders.set('content-type', 'application/json');\n\t\t}\n\n\t\treturn new Response(body, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Response';\n\t}\n}\n\nObject.defineProperties(Response.prototype, {\n\ttype: {enumerable: true},\n\turl: {enumerable: true},\n\tstatus: {enumerable: true},\n\tok: {enumerable: true},\n\tredirected: {enumerable: true},\n\tstatusText: {enumerable: true},\n\theaders: {enumerable: true},\n\tclone: {enumerable: true}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9yZXNwb25zZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUM7QUFDdUI7QUFDUjs7QUFFbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsdUJBQXVCLGdEQUFJO0FBQzFDLHNDQUFzQztBQUN0Qzs7QUFFQTtBQUNBOztBQUVBLHNCQUFzQixtREFBTzs7QUFFN0I7QUFDQSx1QkFBdUIsNERBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFLO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLFlBQVksUUFBUTtBQUNwQixZQUFZLFFBQVE7QUFDcEIsY0FBYyxhQUFhO0FBQzNCO0FBQ0E7QUFDQSxPQUFPLGlFQUFVO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsdUNBQXVDLDBCQUEwQjtBQUNqRTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsbURBQU87O0FBRTdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRLGlCQUFpQjtBQUN6QixPQUFPLGlCQUFpQjtBQUN4QixVQUFVLGlCQUFpQjtBQUMzQixNQUFNLGlCQUFpQjtBQUN2QixjQUFjLGlCQUFpQjtBQUMvQixjQUFjLGlCQUFpQjtBQUMvQixXQUFXLGlCQUFpQjtBQUM1QixTQUFTO0FBQ1QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvcmVzcG9uc2UuanM/NmIwMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlc3BvbnNlLmpzXG4gKlxuICogUmVzcG9uc2UgY2xhc3MgcHJvdmlkZXMgY29udGVudCBkZWNvZGluZ1xuICovXG5cbmltcG9ydCBIZWFkZXJzIGZyb20gJy4vaGVhZGVycy5qcyc7XG5pbXBvcnQgQm9keSwge2Nsb25lLCBleHRyYWN0Q29udGVudFR5cGV9IGZyb20gJy4vYm9keS5qcyc7XG5pbXBvcnQge2lzUmVkaXJlY3R9IGZyb20gJy4vdXRpbHMvaXMtcmVkaXJlY3QuanMnO1xuXG5jb25zdCBJTlRFUk5BTFMgPSBTeW1ib2woJ1Jlc3BvbnNlIGludGVybmFscycpO1xuXG4vKipcbiAqIFJlc3BvbnNlIGNsYXNzXG4gKlxuICogUmVmOiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jcmVzcG9uc2UtY2xhc3NcbiAqXG4gKiBAcGFyYW0gICBTdHJlYW0gIGJvZHkgIFJlYWRhYmxlIHN0cmVhbVxuICogQHBhcmFtICAgT2JqZWN0ICBvcHRzICBSZXNwb25zZSBvcHRpb25zXG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc3BvbnNlIGV4dGVuZHMgQm9keSB7XG5cdGNvbnN0cnVjdG9yKGJvZHkgPSBudWxsLCBvcHRpb25zID0ge30pIHtcblx0XHRzdXBlcihib2R5LCBvcHRpb25zKTtcblxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLCBlcWVxZXEsIG5vLW5lZ2F0ZWQtY29uZGl0aW9uXG5cdFx0Y29uc3Qgc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgIT0gbnVsbCA/IG9wdGlvbnMuc3RhdHVzIDogMjAwO1xuXG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG5cblx0XHRpZiAoYm9keSAhPT0gbnVsbCAmJiAhaGVhZGVycy5oYXMoJ0NvbnRlbnQtVHlwZScpKSB7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IGV4dHJhY3RDb250ZW50VHlwZShib2R5LCB0aGlzKTtcblx0XHRcdGlmIChjb250ZW50VHlwZSkge1xuXHRcdFx0XHRoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgY29udGVudFR5cGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXNbSU5URVJOQUxTXSA9IHtcblx0XHRcdHR5cGU6ICdkZWZhdWx0Jyxcblx0XHRcdHVybDogb3B0aW9ucy51cmwsXG5cdFx0XHRzdGF0dXMsXG5cdFx0XHRzdGF0dXNUZXh0OiBvcHRpb25zLnN0YXR1c1RleHQgfHwgJycsXG5cdFx0XHRoZWFkZXJzLFxuXHRcdFx0Y291bnRlcjogb3B0aW9ucy5jb3VudGVyLFxuXHRcdFx0aGlnaFdhdGVyTWFyazogb3B0aW9ucy5oaWdoV2F0ZXJNYXJrXG5cdFx0fTtcblx0fVxuXG5cdGdldCB0eXBlKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10udHlwZTtcblx0fVxuXG5cdGdldCB1cmwoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS51cmwgfHwgJyc7XG5cdH1cblxuXHRnZXQgc3RhdHVzKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIHByb3BlcnR5IHJlcHJlc2VudGluZyBpZiB0aGUgcmVxdWVzdCBlbmRlZCBub3JtYWxseVxuXHQgKi9cblx0Z2V0IG9rKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzID49IDIwMCAmJiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzIDwgMzAwO1xuXHR9XG5cblx0Z2V0IHJlZGlyZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5jb3VudGVyID4gMDtcblx0fVxuXG5cdGdldCBzdGF0dXNUZXh0KCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzVGV4dDtcblx0fVxuXG5cdGdldCBoZWFkZXJzKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uaGVhZGVycztcblx0fVxuXG5cdGdldCBoaWdoV2F0ZXJNYXJrKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uaGlnaFdhdGVyTWFyaztcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9uZSB0aGlzIHJlc3BvbnNlXG5cdCAqXG5cdCAqIEByZXR1cm4gIFJlc3BvbnNlXG5cdCAqL1xuXHRjbG9uZSgpIHtcblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKGNsb25lKHRoaXMsIHRoaXMuaGlnaFdhdGVyTWFyayksIHtcblx0XHRcdHR5cGU6IHRoaXMudHlwZSxcblx0XHRcdHVybDogdGhpcy51cmwsXG5cdFx0XHRzdGF0dXM6IHRoaXMuc3RhdHVzLFxuXHRcdFx0c3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHRcdFx0aGVhZGVyczogdGhpcy5oZWFkZXJzLFxuXHRcdFx0b2s6IHRoaXMub2ssXG5cdFx0XHRyZWRpcmVjdGVkOiB0aGlzLnJlZGlyZWN0ZWQsXG5cdFx0XHRzaXplOiB0aGlzLnNpemUsXG5cdFx0XHRoaWdoV2F0ZXJNYXJrOiB0aGlzLmhpZ2hXYXRlck1hcmtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsICAgIFRoZSBVUkwgdGhhdCB0aGUgbmV3IHJlc3BvbnNlIGlzIHRvIG9yaWdpbmF0ZSBmcm9tLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzIEFuIG9wdGlvbmFsIHN0YXR1cyBjb2RlIGZvciB0aGUgcmVzcG9uc2UgKGUuZy4sIDMwMi4pXG5cdCAqIEByZXR1cm5zIHtSZXNwb25zZX0gICAgQSBSZXNwb25zZSBvYmplY3QuXG5cdCAqL1xuXHRzdGF0aWMgcmVkaXJlY3QodXJsLCBzdGF0dXMgPSAzMDIpIHtcblx0XHRpZiAoIWlzUmVkaXJlY3Qoc3RhdHVzKSkge1xuXHRcdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIFwicmVkaXJlY3RcIiBvbiBcInJlc3BvbnNlXCI6IEludmFsaWQgc3RhdHVzIGNvZGUnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0bG9jYXRpb246IG5ldyBVUkwodXJsKS50b1N0cmluZygpXG5cdFx0XHR9LFxuXHRcdFx0c3RhdHVzXG5cdFx0fSk7XG5cdH1cblxuXHRzdGF0aWMgZXJyb3IoKSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KTtcblx0XHRyZXNwb25zZVtJTlRFUk5BTFNdLnR5cGUgPSAnZXJyb3InO1xuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxuXG5cdHN0YXRpYyBqc29uKGRhdGEgPSB1bmRlZmluZWQsIGluaXQgPSB7fSkge1xuXHRcdGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblxuXHRcdGlmIChib2R5ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgaXMgbm90IEpTT04gc2VyaWFsaXphYmxlJyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKGluaXQgJiYgaW5pdC5oZWFkZXJzKTtcblxuXHRcdGlmICghaGVhZGVycy5oYXMoJ2NvbnRlbnQtdHlwZScpKSB7XG5cdFx0XHRoZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHksIHtcblx0XHRcdC4uLmluaXQsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fSk7XG5cdH1cblxuXHRnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG5cdFx0cmV0dXJuICdSZXNwb25zZSc7XG5cdH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUmVzcG9uc2UucHJvdG90eXBlLCB7XG5cdHR5cGU6IHtlbnVtZXJhYmxlOiB0cnVlfSxcblx0dXJsOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHN0YXR1czoge2VudW1lcmFibGU6IHRydWV9LFxuXHRvazoge2VudW1lcmFibGU6IHRydWV9LFxuXHRyZWRpcmVjdGVkOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHN0YXR1c1RleHQ6IHtlbnVtZXJhYmxlOiB0cnVlfSxcblx0aGVhZGVyczoge2VudW1lcmFibGU6IHRydWV9LFxuXHRjbG9uZToge2VudW1lcmFibGU6IHRydWV9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/response.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/get-search.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/utils/get-search.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSearch: () => (/* binding */ getSearch)\n/* harmony export */ });\nconst getSearch = parsedURL => {\n\tif (parsedURL.search) {\n\t\treturn parsedURL.search;\n\t}\n\n\tconst lastOffset = parsedURL.href.length - 1;\n\tconst hash = parsedURL.hash || (parsedURL.href[lastOffset] === '#' ? '#' : '');\n\treturn parsedURL.href[lastOffset - hash.length] === '?' ? '?' : '';\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9nZXQtc2VhcmNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvdXRpbHMvZ2V0LXNlYXJjaC5qcz85NTEzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBnZXRTZWFyY2ggPSBwYXJzZWRVUkwgPT4ge1xuXHRpZiAocGFyc2VkVVJMLnNlYXJjaCkge1xuXHRcdHJldHVybiBwYXJzZWRVUkwuc2VhcmNoO1xuXHR9XG5cblx0Y29uc3QgbGFzdE9mZnNldCA9IHBhcnNlZFVSTC5ocmVmLmxlbmd0aCAtIDE7XG5cdGNvbnN0IGhhc2ggPSBwYXJzZWRVUkwuaGFzaCB8fCAocGFyc2VkVVJMLmhyZWZbbGFzdE9mZnNldF0gPT09ICcjJyA/ICcjJyA6ICcnKTtcblx0cmV0dXJuIHBhcnNlZFVSTC5ocmVmW2xhc3RPZmZzZXQgLSBoYXNoLmxlbmd0aF0gPT09ICc/JyA/ICc/JyA6ICcnO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/get-search.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is-redirect.js":
/*!******************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/utils/is-redirect.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isRedirect: () => (/* binding */ isRedirect)\n/* harmony export */ });\nconst redirectStatus = new Set([301, 302, 303, 307, 308]);\n\n/**\n * Redirect code matching\n *\n * @param {number} code - Status code\n * @return {boolean}\n */\nconst isRedirect = code => {\n\treturn redirectStatus.has(code);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9pcy1yZWRpcmVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVk7QUFDWjtBQUNPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZ2Vua2l0Ly4vbm9kZV9tb2R1bGVzL2dlbmtpdC9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvdXRpbHMvaXMtcmVkaXJlY3QuanM/MGYxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZWRpcmVjdFN0YXR1cyA9IG5ldyBTZXQoWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XSk7XG5cbi8qKlxuICogUmVkaXJlY3QgY29kZSBtYXRjaGluZ1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIC0gU3RhdHVzIGNvZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc1JlZGlyZWN0ID0gY29kZSA9PiB7XG5cdHJldHVybiByZWRpcmVjdFN0YXR1cy5oYXMoY29kZSk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is-redirect.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is.js":
/*!*********************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/utils/is.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAbortSignal: () => (/* binding */ isAbortSignal),\n/* harmony export */   isBlob: () => (/* binding */ isBlob),\n/* harmony export */   isDomainOrSubdomain: () => (/* binding */ isDomainOrSubdomain),\n/* harmony export */   isSameProtocol: () => (/* binding */ isSameProtocol),\n/* harmony export */   isURLSearchParameters: () => (/* binding */ isURLSearchParameters)\n/* harmony export */ });\n/**\n * Is.js\n *\n * Object type checks.\n */\n\nconst NAME = Symbol.toStringTag;\n\n/**\n * Check if `obj` is a URLSearchParams object\n * ref: https://github.com/node-fetch/node-fetch/issues/296#issuecomment-307598143\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nconst isURLSearchParameters = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.append === 'function' &&\n\t\ttypeof object.delete === 'function' &&\n\t\ttypeof object.get === 'function' &&\n\t\ttypeof object.getAll === 'function' &&\n\t\ttypeof object.has === 'function' &&\n\t\ttypeof object.set === 'function' &&\n\t\ttypeof object.sort === 'function' &&\n\t\tobject[NAME] === 'URLSearchParams'\n\t);\n};\n\n/**\n * Check if `object` is a W3C `Blob` object (which `File` inherits from)\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nconst isBlob = object => {\n\treturn (\n\t\tobject &&\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.arrayBuffer === 'function' &&\n\t\ttypeof object.type === 'string' &&\n\t\ttypeof object.stream === 'function' &&\n\t\ttypeof object.constructor === 'function' &&\n\t\t/^(Blob|File)$/.test(object[NAME])\n\t);\n};\n\n/**\n * Check if `obj` is an instance of AbortSignal.\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nconst isAbortSignal = object => {\n\treturn (\n\t\ttypeof object === 'object' && (\n\t\t\tobject[NAME] === 'AbortSignal' ||\n\t\t\tobject[NAME] === 'EventTarget'\n\t\t)\n\t);\n};\n\n/**\n * isDomainOrSubdomain reports whether sub is a subdomain (or exact match) of\n * the parent domain.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isDomainOrSubdomain = (destination, original) => {\n\tconst orig = new URL(original).hostname;\n\tconst dest = new URL(destination).hostname;\n\n\treturn orig === dest || orig.endsWith(`.${dest}`);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = (destination, original) => {\n\tconst orig = new URL(original).protocol;\n\tconst dest = new URL(destination).protocol;\n\n\treturn orig === dest;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9pcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsWUFBWTtBQUNaO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLFlBQVk7QUFDWjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLFlBQVk7QUFDWjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFlBQVk7QUFDdkI7QUFDTztBQUNQO0FBQ0E7O0FBRUEsMkNBQTJDLEtBQUs7QUFDaEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxZQUFZO0FBQ3ZCO0FBQ087QUFDUDtBQUNBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL3V0aWxzL2lzLmpzP2RlNDIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJcy5qc1xuICpcbiAqIE9iamVjdCB0eXBlIGNoZWNrcy5cbiAqL1xuXG5jb25zdCBOQU1FID0gU3ltYm9sLnRvU3RyaW5nVGFnO1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICogcmVmOiBodHRwczovL2dpdGh1Yi5jb20vbm9kZS1mZXRjaC9ub2RlLWZldGNoL2lzc3Vlcy8yOTYjaXNzdWVjb21tZW50LTMwNzU5ODE0M1xuICogQHBhcmFtIHsqfSBvYmplY3QgLSBPYmplY3QgdG8gY2hlY2sgZm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNVUkxTZWFyY2hQYXJhbWV0ZXJzID0gb2JqZWN0ID0+IHtcblx0cmV0dXJuIChcblx0XHR0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJlxuXHRcdHR5cGVvZiBvYmplY3QuYXBwZW5kID09PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIG9iamVjdC5kZWxldGUgPT09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2Ygb2JqZWN0LmdldCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3QuZ2V0QWxsID09PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIG9iamVjdC5oYXMgPT09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2Ygb2JqZWN0LnNldCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3Quc29ydCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdG9iamVjdFtOQU1FXSA9PT0gJ1VSTFNlYXJjaFBhcmFtcydcblx0KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYG9iamVjdGAgaXMgYSBXM0MgYEJsb2JgIG9iamVjdCAod2hpY2ggYEZpbGVgIGluaGVyaXRzIGZyb20pXG4gKiBAcGFyYW0geyp9IG9iamVjdCAtIE9iamVjdCB0byBjaGVjayBmb3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2IgPSBvYmplY3QgPT4ge1xuXHRyZXR1cm4gKFxuXHRcdG9iamVjdCAmJlxuXHRcdHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmXG5cdFx0dHlwZW9mIG9iamVjdC5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3QudHlwZSA9PT0gJ3N0cmluZycgJiZcblx0XHR0eXBlb2Ygb2JqZWN0LnN0cmVhbSA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicgJiZcblx0XHQvXihCbG9ifEZpbGUpJC8udGVzdChvYmplY3RbTkFNRV0pXG5cdCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGFuIGluc3RhbmNlIG9mIEFib3J0U2lnbmFsLlxuICogQHBhcmFtIHsqfSBvYmplY3QgLSBPYmplY3QgdG8gY2hlY2sgZm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNBYm9ydFNpZ25hbCA9IG9iamVjdCA9PiB7XG5cdHJldHVybiAoXG5cdFx0dHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgKFxuXHRcdFx0b2JqZWN0W05BTUVdID09PSAnQWJvcnRTaWduYWwnIHx8XG5cdFx0XHRvYmplY3RbTkFNRV0gPT09ICdFdmVudFRhcmdldCdcblx0XHQpXG5cdCk7XG59O1xuXG4vKipcbiAqIGlzRG9tYWluT3JTdWJkb21haW4gcmVwb3J0cyB3aGV0aGVyIHN1YiBpcyBhIHN1YmRvbWFpbiAob3IgZXhhY3QgbWF0Y2gpIG9mXG4gKiB0aGUgcGFyZW50IGRvbWFpbi5cbiAqXG4gKiBCb3RoIGRvbWFpbnMgbXVzdCBhbHJlYWR5IGJlIGluIGNhbm9uaWNhbCBmb3JtLlxuICogQHBhcmFtIHtzdHJpbmd8VVJMfSBvcmlnaW5hbFxuICogQHBhcmFtIHtzdHJpbmd8VVJMfSBkZXN0aW5hdGlvblxuICovXG5leHBvcnQgY29uc3QgaXNEb21haW5PclN1YmRvbWFpbiA9IChkZXN0aW5hdGlvbiwgb3JpZ2luYWwpID0+IHtcblx0Y29uc3Qgb3JpZyA9IG5ldyBVUkwob3JpZ2luYWwpLmhvc3RuYW1lO1xuXHRjb25zdCBkZXN0ID0gbmV3IFVSTChkZXN0aW5hdGlvbikuaG9zdG5hbWU7XG5cblx0cmV0dXJuIG9yaWcgPT09IGRlc3QgfHwgb3JpZy5lbmRzV2l0aChgLiR7ZGVzdH1gKTtcbn07XG5cbi8qKlxuICogaXNTYW1lUHJvdG9jb2wgcmVwb3J0cyB3aGV0aGVyIHRoZSB0d28gcHJvdmlkZWQgVVJMcyB1c2UgdGhlIHNhbWUgcHJvdG9jb2wuXG4gKlxuICogQm90aCBkb21haW5zIG11c3QgYWxyZWFkeSBiZSBpbiBjYW5vbmljYWwgZm9ybS5cbiAqIEBwYXJhbSB7c3RyaW5nfFVSTH0gb3JpZ2luYWxcbiAqIEBwYXJhbSB7c3RyaW5nfFVSTH0gZGVzdGluYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGlzU2FtZVByb3RvY29sID0gKGRlc3RpbmF0aW9uLCBvcmlnaW5hbCkgPT4ge1xuXHRjb25zdCBvcmlnID0gbmV3IFVSTChvcmlnaW5hbCkucHJvdG9jb2w7XG5cdGNvbnN0IGRlc3QgPSBuZXcgVVJMKGRlc3RpbmF0aW9uKS5wcm90b2NvbDtcblxuXHRyZXR1cm4gb3JpZyA9PT0gZGVzdDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/is.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/multipart-parser.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/utils/multipart-parser.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toFormData: () => (/* binding */ toFormData)\n/* harmony export */ });\n/* harmony import */ var fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fetch-blob/from.js */ \"(rsc)/./node_modules/fetch-blob/from.js\");\n/* harmony import */ var formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! formdata-polyfill/esm.min.js */ \"(rsc)/./node_modules/formdata-polyfill/esm.min.js\");\n\n\n\nlet s = 0;\nconst S = {\n\tSTART_BOUNDARY: s++,\n\tHEADER_FIELD_START: s++,\n\tHEADER_FIELD: s++,\n\tHEADER_VALUE_START: s++,\n\tHEADER_VALUE: s++,\n\tHEADER_VALUE_ALMOST_DONE: s++,\n\tHEADERS_ALMOST_DONE: s++,\n\tPART_DATA_START: s++,\n\tPART_DATA: s++,\n\tEND: s++\n};\n\nlet f = 1;\nconst F = {\n\tPART_BOUNDARY: f,\n\tLAST_BOUNDARY: f *= 2\n};\n\nconst LF = 10;\nconst CR = 13;\nconst SPACE = 32;\nconst HYPHEN = 45;\nconst COLON = 58;\nconst A = 97;\nconst Z = 122;\n\nconst lower = c => c | 0x20;\n\nconst noop = () => {};\n\nclass MultipartParser {\n\t/**\n\t * @param {string} boundary\n\t */\n\tconstructor(boundary) {\n\t\tthis.index = 0;\n\t\tthis.flags = 0;\n\n\t\tthis.onHeaderEnd = noop;\n\t\tthis.onHeaderField = noop;\n\t\tthis.onHeadersEnd = noop;\n\t\tthis.onHeaderValue = noop;\n\t\tthis.onPartBegin = noop;\n\t\tthis.onPartData = noop;\n\t\tthis.onPartEnd = noop;\n\n\t\tthis.boundaryChars = {};\n\n\t\tboundary = '\\r\\n--' + boundary;\n\t\tconst ui8a = new Uint8Array(boundary.length);\n\t\tfor (let i = 0; i < boundary.length; i++) {\n\t\t\tui8a[i] = boundary.charCodeAt(i);\n\t\t\tthis.boundaryChars[ui8a[i]] = true;\n\t\t}\n\n\t\tthis.boundary = ui8a;\n\t\tthis.lookbehind = new Uint8Array(this.boundary.length + 8);\n\t\tthis.state = S.START_BOUNDARY;\n\t}\n\n\t/**\n\t * @param {Uint8Array} data\n\t */\n\twrite(data) {\n\t\tlet i = 0;\n\t\tconst length_ = data.length;\n\t\tlet previousIndex = this.index;\n\t\tlet {lookbehind, boundary, boundaryChars, index, state, flags} = this;\n\t\tconst boundaryLength = this.boundary.length;\n\t\tconst boundaryEnd = boundaryLength - 1;\n\t\tconst bufferLength = data.length;\n\t\tlet c;\n\t\tlet cl;\n\n\t\tconst mark = name => {\n\t\t\tthis[name + 'Mark'] = i;\n\t\t};\n\n\t\tconst clear = name => {\n\t\t\tdelete this[name + 'Mark'];\n\t\t};\n\n\t\tconst callback = (callbackSymbol, start, end, ui8a) => {\n\t\t\tif (start === undefined || start !== end) {\n\t\t\t\tthis[callbackSymbol](ui8a && ui8a.subarray(start, end));\n\t\t\t}\n\t\t};\n\n\t\tconst dataCallback = (name, clear) => {\n\t\t\tconst markSymbol = name + 'Mark';\n\t\t\tif (!(markSymbol in this)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (clear) {\n\t\t\t\tcallback(name, this[markSymbol], i, data);\n\t\t\t\tdelete this[markSymbol];\n\t\t\t} else {\n\t\t\t\tcallback(name, this[markSymbol], data.length, data);\n\t\t\t\tthis[markSymbol] = 0;\n\t\t\t}\n\t\t};\n\n\t\tfor (i = 0; i < length_; i++) {\n\t\t\tc = data[i];\n\n\t\t\tswitch (state) {\n\t\t\t\tcase S.START_BOUNDARY:\n\t\t\t\t\tif (index === boundary.length - 2) {\n\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else if (c !== CR) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (index - 1 === boundary.length - 2) {\n\t\t\t\t\t\tif (flags & F.LAST_BOUNDARY && c === HYPHEN) {\n\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t} else if (!(flags & F.LAST_BOUNDARY) && c === LF) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c !== boundary[index + 2]) {\n\t\t\t\t\t\tindex = -2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === boundary[index + 2]) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_FIELD_START:\n\t\t\t\t\tstate = S.HEADER_FIELD;\n\t\t\t\t\tmark('onHeaderField');\n\t\t\t\t\tindex = 0;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_FIELD:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tclear('onHeaderField');\n\t\t\t\t\t\tstate = S.HEADERS_ALMOST_DONE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tindex++;\n\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === COLON) {\n\t\t\t\t\t\tif (index === 1) {\n\t\t\t\t\t\t\t// empty header field\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataCallback('onHeaderField', true);\n\t\t\t\t\t\tstate = S.HEADER_VALUE_START;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcl = lower(c);\n\t\t\t\t\tif (cl < A || cl > Z) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_START:\n\t\t\t\t\tif (c === SPACE) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tmark('onHeaderValue');\n\t\t\t\t\tstate = S.HEADER_VALUE;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_VALUE:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tdataCallback('onHeaderValue', true);\n\t\t\t\t\t\tcallback('onHeaderEnd');\n\t\t\t\t\t\tstate = S.HEADER_VALUE_ALMOST_DONE;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADERS_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('onHeadersEnd');\n\t\t\t\t\tstate = S.PART_DATA_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.PART_DATA_START:\n\t\t\t\t\tstate = S.PART_DATA;\n\t\t\t\t\tmark('onPartData');\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.PART_DATA:\n\t\t\t\t\tpreviousIndex = index;\n\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t// boyer-moore derrived algorithm to safely skip non-boundary data\n\t\t\t\t\t\ti += boundaryEnd;\n\t\t\t\t\t\twhile (i < bufferLength && !(data[i] in boundaryChars)) {\n\t\t\t\t\t\t\ti += boundaryLength;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti -= boundaryEnd;\n\t\t\t\t\t\tc = data[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index < boundary.length) {\n\t\t\t\t\t\tif (boundary[index] === c) {\n\t\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\t\tdataCallback('onPartData', true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index === boundary.length) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\t\t// CR = part boundary\n\t\t\t\t\t\t\tflags |= F.PART_BOUNDARY;\n\t\t\t\t\t\t} else if (c === HYPHEN) {\n\t\t\t\t\t\t\t// HYPHEN = end boundary\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index - 1 === boundary.length) {\n\t\t\t\t\t\tif (flags & F.PART_BOUNDARY) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tif (c === LF) {\n\t\t\t\t\t\t\t\t// unset the PART_BOUNDARY flag\n\t\t\t\t\t\t\t\tflags &= ~F.PART_BOUNDARY;\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (flags & F.LAST_BOUNDARY) {\n\t\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t// when matching a possible boundary, keep a lookbehind reference\n\t\t\t\t\t\t// in case it turns out to be a false lead\n\t\t\t\t\t\tlookbehind[index - 1] = c;\n\t\t\t\t\t} else if (previousIndex > 0) {\n\t\t\t\t\t\t// if our boundary turned out to be rubbish, the captured lookbehind\n\t\t\t\t\t\t// belongs to partData\n\t\t\t\t\t\tconst _lookbehind = new Uint8Array(lookbehind.buffer, lookbehind.byteOffset, lookbehind.byteLength);\n\t\t\t\t\t\tcallback('onPartData', 0, previousIndex, _lookbehind);\n\t\t\t\t\t\tpreviousIndex = 0;\n\t\t\t\t\t\tmark('onPartData');\n\n\t\t\t\t\t\t// reconsider the current character even so it interrupted the sequence\n\t\t\t\t\t\t// it could be the beginning of a new sequence\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.END:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unexpected state entered: ${state}`);\n\t\t\t}\n\t\t}\n\n\t\tdataCallback('onHeaderField');\n\t\tdataCallback('onHeaderValue');\n\t\tdataCallback('onPartData');\n\n\t\t// Update properties for the next call\n\t\tthis.index = index;\n\t\tthis.state = state;\n\t\tthis.flags = flags;\n\t}\n\n\tend() {\n\t\tif ((this.state === S.HEADER_FIELD_START && this.index === 0) ||\n\t\t\t(this.state === S.PART_DATA && this.index === this.boundary.length)) {\n\t\t\tthis.onPartEnd();\n\t\t} else if (this.state !== S.END) {\n\t\t\tthrow new Error('MultipartParser.end(): stream ended unexpectedly');\n\t\t}\n\t}\n}\n\nfunction _fileName(headerValue) {\n\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\tconst m = headerValue.match(/\\bfilename=(\"(.*?)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))($|;\\s)/i);\n\tif (!m) {\n\t\treturn;\n\t}\n\n\tconst match = m[2] || m[3] || '';\n\tlet filename = match.slice(match.lastIndexOf('\\\\') + 1);\n\tfilename = filename.replace(/%22/g, '\"');\n\tfilename = filename.replace(/&#(\\d{4});/g, (m, code) => {\n\t\treturn String.fromCharCode(code);\n\t});\n\treturn filename;\n}\n\nasync function toFormData(Body, ct) {\n\tif (!/multipart/i.test(ct)) {\n\t\tthrow new TypeError('Failed to fetch');\n\t}\n\n\tconst m = ct.match(/boundary=(?:\"([^\"]+)\"|([^;]+))/i);\n\n\tif (!m) {\n\t\tthrow new TypeError('no or bad content-type header, no multipart boundary');\n\t}\n\n\tconst parser = new MultipartParser(m[1] || m[2]);\n\n\tlet headerField;\n\tlet headerValue;\n\tlet entryValue;\n\tlet entryName;\n\tlet contentType;\n\tlet filename;\n\tconst entryChunks = [];\n\tconst formData = new formdata_polyfill_esm_min_js__WEBPACK_IMPORTED_MODULE_1__.FormData();\n\n\tconst onPartData = ui8a => {\n\t\tentryValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tconst appendToFile = ui8a => {\n\t\tentryChunks.push(ui8a);\n\t};\n\n\tconst appendFileToFormData = () => {\n\t\tconst file = new fetch_blob_from_js__WEBPACK_IMPORTED_MODULE_0__.File(entryChunks, filename, {type: contentType});\n\t\tformData.append(entryName, file);\n\t};\n\n\tconst appendEntryToFormData = () => {\n\t\tformData.append(entryName, entryValue);\n\t};\n\n\tconst decoder = new TextDecoder('utf-8');\n\tdecoder.decode();\n\n\tparser.onPartBegin = function () {\n\t\tparser.onPartData = onPartData;\n\t\tparser.onPartEnd = appendEntryToFormData;\n\n\t\theaderField = '';\n\t\theaderValue = '';\n\t\tentryValue = '';\n\t\tentryName = '';\n\t\tcontentType = '';\n\t\tfilename = null;\n\t\tentryChunks.length = 0;\n\t};\n\n\tparser.onHeaderField = function (ui8a) {\n\t\theaderField += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderValue = function (ui8a) {\n\t\theaderValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderEnd = function () {\n\t\theaderValue += decoder.decode();\n\t\theaderField = headerField.toLowerCase();\n\n\t\tif (headerField === 'content-disposition') {\n\t\t\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\t\t\tconst m = headerValue.match(/\\bname=(\"([^\"]*)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))/i);\n\n\t\t\tif (m) {\n\t\t\t\tentryName = m[2] || m[3] || '';\n\t\t\t}\n\n\t\t\tfilename = _fileName(headerValue);\n\n\t\t\tif (filename) {\n\t\t\t\tparser.onPartData = appendToFile;\n\t\t\t\tparser.onPartEnd = appendFileToFormData;\n\t\t\t}\n\t\t} else if (headerField === 'content-type') {\n\t\t\tcontentType = headerValue;\n\t\t}\n\n\t\theaderValue = '';\n\t\theaderField = '';\n\t};\n\n\tfor await (const chunk of Body) {\n\t\tparser.write(chunk);\n\t}\n\n\tparser.end();\n\n\treturn formData;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9tdWx0aXBhcnQtcGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3QztBQUNjOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixxQkFBcUI7QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDBEQUEwRDtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLGFBQWE7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxNQUFNO0FBQ3hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDREQUE0RCxZQUFZLFlBQVk7QUFDcEY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxFQUFFLEVBQUU7QUFDeEM7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTs7QUFFQSwrQ0FBK0M7O0FBRS9DO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrRUFBUTs7QUFFOUI7QUFDQSxzQ0FBc0MsYUFBYTtBQUNuRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsb0RBQUkseUJBQXlCLGtCQUFrQjtBQUNsRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGFBQWE7QUFDcEQ7O0FBRUE7QUFDQSx1Q0FBdUMsYUFBYTtBQUNwRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDREQUE0RCxZQUFZOztBQUV4RTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdlbmtpdC8uL25vZGVfbW9kdWxlcy9nZW5raXQvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL3V0aWxzL211bHRpcGFydC1wYXJzZXIuanM/NDljYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZpbGV9IGZyb20gJ2ZldGNoLWJsb2IvZnJvbS5qcyc7XG5pbXBvcnQge0Zvcm1EYXRhfSBmcm9tICdmb3JtZGF0YS1wb2x5ZmlsbC9lc20ubWluLmpzJztcblxubGV0IHMgPSAwO1xuY29uc3QgUyA9IHtcblx0U1RBUlRfQk9VTkRBUlk6IHMrKyxcblx0SEVBREVSX0ZJRUxEX1NUQVJUOiBzKyssXG5cdEhFQURFUl9GSUVMRDogcysrLFxuXHRIRUFERVJfVkFMVUVfU1RBUlQ6IHMrKyxcblx0SEVBREVSX1ZBTFVFOiBzKyssXG5cdEhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTogcysrLFxuXHRIRUFERVJTX0FMTU9TVF9ET05FOiBzKyssXG5cdFBBUlRfREFUQV9TVEFSVDogcysrLFxuXHRQQVJUX0RBVEE6IHMrKyxcblx0RU5EOiBzKytcbn07XG5cbmxldCBmID0gMTtcbmNvbnN0IEYgPSB7XG5cdFBBUlRfQk9VTkRBUlk6IGYsXG5cdExBU1RfQk9VTkRBUlk6IGYgKj0gMlxufTtcblxuY29uc3QgTEYgPSAxMDtcbmNvbnN0IENSID0gMTM7XG5jb25zdCBTUEFDRSA9IDMyO1xuY29uc3QgSFlQSEVOID0gNDU7XG5jb25zdCBDT0xPTiA9IDU4O1xuY29uc3QgQSA9IDk3O1xuY29uc3QgWiA9IDEyMjtcblxuY29uc3QgbG93ZXIgPSBjID0+IGMgfCAweDIwO1xuXG5jb25zdCBub29wID0gKCkgPT4ge307XG5cbmNsYXNzIE11bHRpcGFydFBhcnNlciB7XG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYm91bmRhcnlcblx0ICovXG5cdGNvbnN0cnVjdG9yKGJvdW5kYXJ5KSB7XG5cdFx0dGhpcy5pbmRleCA9IDA7XG5cdFx0dGhpcy5mbGFncyA9IDA7XG5cblx0XHR0aGlzLm9uSGVhZGVyRW5kID0gbm9vcDtcblx0XHR0aGlzLm9uSGVhZGVyRmllbGQgPSBub29wO1xuXHRcdHRoaXMub25IZWFkZXJzRW5kID0gbm9vcDtcblx0XHR0aGlzLm9uSGVhZGVyVmFsdWUgPSBub29wO1xuXHRcdHRoaXMub25QYXJ0QmVnaW4gPSBub29wO1xuXHRcdHRoaXMub25QYXJ0RGF0YSA9IG5vb3A7XG5cdFx0dGhpcy5vblBhcnRFbmQgPSBub29wO1xuXG5cdFx0dGhpcy5ib3VuZGFyeUNoYXJzID0ge307XG5cblx0XHRib3VuZGFyeSA9ICdcXHJcXG4tLScgKyBib3VuZGFyeTtcblx0XHRjb25zdCB1aThhID0gbmV3IFVpbnQ4QXJyYXkoYm91bmRhcnkubGVuZ3RoKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGJvdW5kYXJ5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR1aThhW2ldID0gYm91bmRhcnkuY2hhckNvZGVBdChpKTtcblx0XHRcdHRoaXMuYm91bmRhcnlDaGFyc1t1aThhW2ldXSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0dGhpcy5ib3VuZGFyeSA9IHVpOGE7XG5cdFx0dGhpcy5sb29rYmVoaW5kID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5ib3VuZGFyeS5sZW5ndGggKyA4KTtcblx0XHR0aGlzLnN0YXRlID0gUy5TVEFSVF9CT1VOREFSWTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGRhdGFcblx0ICovXG5cdHdyaXRlKGRhdGEpIHtcblx0XHRsZXQgaSA9IDA7XG5cdFx0Y29uc3QgbGVuZ3RoXyA9IGRhdGEubGVuZ3RoO1xuXHRcdGxldCBwcmV2aW91c0luZGV4ID0gdGhpcy5pbmRleDtcblx0XHRsZXQge2xvb2tiZWhpbmQsIGJvdW5kYXJ5LCBib3VuZGFyeUNoYXJzLCBpbmRleCwgc3RhdGUsIGZsYWdzfSA9IHRoaXM7XG5cdFx0Y29uc3QgYm91bmRhcnlMZW5ndGggPSB0aGlzLmJvdW5kYXJ5Lmxlbmd0aDtcblx0XHRjb25zdCBib3VuZGFyeUVuZCA9IGJvdW5kYXJ5TGVuZ3RoIC0gMTtcblx0XHRjb25zdCBidWZmZXJMZW5ndGggPSBkYXRhLmxlbmd0aDtcblx0XHRsZXQgYztcblx0XHRsZXQgY2w7XG5cblx0XHRjb25zdCBtYXJrID0gbmFtZSA9PiB7XG5cdFx0XHR0aGlzW25hbWUgKyAnTWFyayddID0gaTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgY2xlYXIgPSBuYW1lID0+IHtcblx0XHRcdGRlbGV0ZSB0aGlzW25hbWUgKyAnTWFyayddO1xuXHRcdH07XG5cblx0XHRjb25zdCBjYWxsYmFjayA9IChjYWxsYmFja1N5bWJvbCwgc3RhcnQsIGVuZCwgdWk4YSkgPT4ge1xuXHRcdFx0aWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgIT09IGVuZCkge1xuXHRcdFx0XHR0aGlzW2NhbGxiYWNrU3ltYm9sXSh1aThhICYmIHVpOGEuc3ViYXJyYXkoc3RhcnQsIGVuZCkpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBkYXRhQ2FsbGJhY2sgPSAobmFtZSwgY2xlYXIpID0+IHtcblx0XHRcdGNvbnN0IG1hcmtTeW1ib2wgPSBuYW1lICsgJ01hcmsnO1xuXHRcdFx0aWYgKCEobWFya1N5bWJvbCBpbiB0aGlzKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjbGVhcikge1xuXHRcdFx0XHRjYWxsYmFjayhuYW1lLCB0aGlzW21hcmtTeW1ib2xdLCBpLCBkYXRhKTtcblx0XHRcdFx0ZGVsZXRlIHRoaXNbbWFya1N5bWJvbF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYWxsYmFjayhuYW1lLCB0aGlzW21hcmtTeW1ib2xdLCBkYXRhLmxlbmd0aCwgZGF0YSk7XG5cdFx0XHRcdHRoaXNbbWFya1N5bWJvbF0gPSAwO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoXzsgaSsrKSB7XG5cdFx0XHRjID0gZGF0YVtpXTtcblxuXHRcdFx0c3dpdGNoIChzdGF0ZSkge1xuXHRcdFx0XHRjYXNlIFMuU1RBUlRfQk9VTkRBUlk6XG5cdFx0XHRcdFx0aWYgKGluZGV4ID09PSBib3VuZGFyeS5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PT0gSFlQSEVOKSB7XG5cdFx0XHRcdFx0XHRcdGZsYWdzIHw9IEYuTEFTVF9CT1VOREFSWTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYyAhPT0gQ1IpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCAtIDEgPT09IGJvdW5kYXJ5Lmxlbmd0aCAtIDIpIHtcblx0XHRcdFx0XHRcdGlmIChmbGFncyAmIEYuTEFTVF9CT1VOREFSWSAmJiBjID09PSBIWVBIRU4pIHtcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBTLkVORDtcblx0XHRcdFx0XHRcdFx0ZmxhZ3MgPSAwO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICghKGZsYWdzICYgRi5MQVNUX0JPVU5EQVJZKSAmJiBjID09PSBMRikge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvblBhcnRCZWdpbicpO1xuXHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEX1NUQVJUO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYyAhPT0gYm91bmRhcnlbaW5kZXggKyAyXSkge1xuXHRcdFx0XHRcdFx0aW5kZXggPSAtMjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYyA9PT0gYm91bmRhcnlbaW5kZXggKyAyXSkge1xuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkhFQURFUl9GSUVMRF9TVEFSVDpcblx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEO1xuXHRcdFx0XHRcdG1hcmsoJ29uSGVhZGVyRmllbGQnKTtcblx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0Ly8gZmFsbHMgdGhyb3VnaFxuXHRcdFx0XHRjYXNlIFMuSEVBREVSX0ZJRUxEOlxuXHRcdFx0XHRcdGlmIChjID09PSBDUikge1xuXHRcdFx0XHRcdFx0Y2xlYXIoJ29uSGVhZGVyRmllbGQnKTtcblx0XHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJTX0FMTU9TVF9ET05FO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRpZiAoYyA9PT0gSFlQSEVOKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYyA9PT0gQ09MT04pIHtcblx0XHRcdFx0XHRcdGlmIChpbmRleCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0XHQvLyBlbXB0eSBoZWFkZXIgZmllbGRcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyRmllbGQnLCB0cnVlKTtcblx0XHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJfVkFMVUVfU1RBUlQ7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjbCA9IGxvd2VyKGMpO1xuXHRcdFx0XHRcdGlmIChjbCA8IEEgfHwgY2wgPiBaKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgUy5IRUFERVJfVkFMVUVfU1RBUlQ6XG5cdFx0XHRcdFx0aWYgKGMgPT09IFNQQUNFKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRtYXJrKCdvbkhlYWRlclZhbHVlJyk7XG5cdFx0XHRcdFx0c3RhdGUgPSBTLkhFQURFUl9WQUxVRTtcblx0XHRcdFx0XHQvLyBmYWxscyB0aHJvdWdoXG5cdFx0XHRcdGNhc2UgUy5IRUFERVJfVkFMVUU6XG5cdFx0XHRcdFx0aWYgKGMgPT09IENSKSB7XG5cdFx0XHRcdFx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyVmFsdWUnLCB0cnVlKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvbkhlYWRlckVuZCcpO1xuXHRcdFx0XHRcdFx0c3RhdGUgPSBTLkhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTpcblx0XHRcdFx0XHRpZiAoYyAhPT0gTEYpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEX1NUQVJUO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFMuSEVBREVSU19BTE1PU1RfRE9ORTpcblx0XHRcdFx0XHRpZiAoYyAhPT0gTEYpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjaygnb25IZWFkZXJzRW5kJyk7XG5cdFx0XHRcdFx0c3RhdGUgPSBTLlBBUlRfREFUQV9TVEFSVDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLlBBUlRfREFUQV9TVEFSVDpcblx0XHRcdFx0XHRzdGF0ZSA9IFMuUEFSVF9EQVRBO1xuXHRcdFx0XHRcdG1hcmsoJ29uUGFydERhdGEnKTtcblx0XHRcdFx0XHQvLyBmYWxscyB0aHJvdWdoXG5cdFx0XHRcdGNhc2UgUy5QQVJUX0RBVEE6XG5cdFx0XHRcdFx0cHJldmlvdXNJbmRleCA9IGluZGV4O1xuXG5cdFx0XHRcdFx0aWYgKGluZGV4ID09PSAwKSB7XG5cdFx0XHRcdFx0XHQvLyBib3llci1tb29yZSBkZXJyaXZlZCBhbGdvcml0aG0gdG8gc2FmZWx5IHNraXAgbm9uLWJvdW5kYXJ5IGRhdGFcblx0XHRcdFx0XHRcdGkgKz0gYm91bmRhcnlFbmQ7XG5cdFx0XHRcdFx0XHR3aGlsZSAoaSA8IGJ1ZmZlckxlbmd0aCAmJiAhKGRhdGFbaV0gaW4gYm91bmRhcnlDaGFycykpIHtcblx0XHRcdFx0XHRcdFx0aSArPSBib3VuZGFyeUxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aSAtPSBib3VuZGFyeUVuZDtcblx0XHRcdFx0XHRcdGMgPSBkYXRhW2ldO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChpbmRleCA8IGJvdW5kYXJ5Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0aWYgKGJvdW5kYXJ5W2luZGV4XSA9PT0gYykge1xuXHRcdFx0XHRcdFx0XHRpZiAoaW5kZXggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRkYXRhQ2FsbGJhY2soJ29uUGFydERhdGEnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCA9PT0gYm91bmRhcnkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0aWYgKGMgPT09IENSKSB7XG5cdFx0XHRcdFx0XHRcdC8vIENSID0gcGFydCBib3VuZGFyeVxuXHRcdFx0XHRcdFx0XHRmbGFncyB8PSBGLlBBUlRfQk9VTkRBUlk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IEhZUEhFTikge1xuXHRcdFx0XHRcdFx0XHQvLyBIWVBIRU4gPSBlbmQgYm91bmRhcnlcblx0XHRcdFx0XHRcdFx0ZmxhZ3MgfD0gRi5MQVNUX0JPVU5EQVJZO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaW5kZXggLSAxID09PSBib3VuZGFyeS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGlmIChmbGFncyAmIEYuUEFSVF9CT1VOREFSWSkge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRcdGlmIChjID09PSBMRikge1xuXHRcdFx0XHRcdFx0XHRcdC8vIHVuc2V0IHRoZSBQQVJUX0JPVU5EQVJZIGZsYWdcblx0XHRcdFx0XHRcdFx0XHRmbGFncyAmPSB+Ri5QQVJUX0JPVU5EQVJZO1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvblBhcnRFbmQnKTtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjaygnb25QYXJ0QmVnaW4nKTtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEX1NUQVJUO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGZsYWdzICYgRi5MQVNUX0JPVU5EQVJZKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjID09PSBIWVBIRU4pIHtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjaygnb25QYXJ0RW5kJyk7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdGUgPSBTLkVORDtcblx0XHRcdFx0XHRcdFx0XHRmbGFncyA9IDA7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0aW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGluZGV4ID4gMCkge1xuXHRcdFx0XHRcdFx0Ly8gd2hlbiBtYXRjaGluZyBhIHBvc3NpYmxlIGJvdW5kYXJ5LCBrZWVwIGEgbG9va2JlaGluZCByZWZlcmVuY2Vcblx0XHRcdFx0XHRcdC8vIGluIGNhc2UgaXQgdHVybnMgb3V0IHRvIGJlIGEgZmFsc2UgbGVhZFxuXHRcdFx0XHRcdFx0bG9va2JlaGluZFtpbmRleCAtIDFdID0gYztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHByZXZpb3VzSW5kZXggPiAwKSB7XG5cdFx0XHRcdFx0XHQvLyBpZiBvdXIgYm91bmRhcnkgdHVybmVkIG91dCB0byBiZSBydWJiaXNoLCB0aGUgY2FwdHVyZWQgbG9va2JlaGluZFxuXHRcdFx0XHRcdFx0Ly8gYmVsb25ncyB0byBwYXJ0RGF0YVxuXHRcdFx0XHRcdFx0Y29uc3QgX2xvb2tiZWhpbmQgPSBuZXcgVWludDhBcnJheShsb29rYmVoaW5kLmJ1ZmZlciwgbG9va2JlaGluZC5ieXRlT2Zmc2V0LCBsb29rYmVoaW5kLmJ5dGVMZW5ndGgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soJ29uUGFydERhdGEnLCAwLCBwcmV2aW91c0luZGV4LCBfbG9va2JlaGluZCk7XG5cdFx0XHRcdFx0XHRwcmV2aW91c0luZGV4ID0gMDtcblx0XHRcdFx0XHRcdG1hcmsoJ29uUGFydERhdGEnKTtcblxuXHRcdFx0XHRcdFx0Ly8gcmVjb25zaWRlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZXZlbiBzbyBpdCBpbnRlcnJ1cHRlZCB0aGUgc2VxdWVuY2Vcblx0XHRcdFx0XHRcdC8vIGl0IGNvdWxkIGJlIHRoZSBiZWdpbm5pbmcgb2YgYSBuZXcgc2VxdWVuY2Vcblx0XHRcdFx0XHRcdGktLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkVORDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgc3RhdGUgZW50ZXJlZDogJHtzdGF0ZX1gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyRmllbGQnKTtcblx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyVmFsdWUnKTtcblx0XHRkYXRhQ2FsbGJhY2soJ29uUGFydERhdGEnKTtcblxuXHRcdC8vIFVwZGF0ZSBwcm9wZXJ0aWVzIGZvciB0aGUgbmV4dCBjYWxsXG5cdFx0dGhpcy5pbmRleCA9IGluZGV4O1xuXHRcdHRoaXMuc3RhdGUgPSBzdGF0ZTtcblx0XHR0aGlzLmZsYWdzID0gZmxhZ3M7XG5cdH1cblxuXHRlbmQoKSB7XG5cdFx0aWYgKCh0aGlzLnN0YXRlID09PSBTLkhFQURFUl9GSUVMRF9TVEFSVCAmJiB0aGlzLmluZGV4ID09PSAwKSB8fFxuXHRcdFx0KHRoaXMuc3RhdGUgPT09IFMuUEFSVF9EQVRBICYmIHRoaXMuaW5kZXggPT09IHRoaXMuYm91bmRhcnkubGVuZ3RoKSkge1xuXHRcdFx0dGhpcy5vblBhcnRFbmQoKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuc3RhdGUgIT09IFMuRU5EKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGFydFBhcnNlci5lbmQoKTogc3RyZWFtIGVuZGVkIHVuZXhwZWN0ZWRseScpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBfZmlsZU5hbWUoaGVhZGVyVmFsdWUpIHtcblx0Ly8gbWF0Y2hlcyBlaXRoZXIgYSBxdW90ZWQtc3RyaW5nIG9yIGEgdG9rZW4gKFJGQyAyNjE2IHNlY3Rpb24gMTkuNS4xKVxuXHRjb25zdCBtID0gaGVhZGVyVmFsdWUubWF0Y2goL1xcYmZpbGVuYW1lPShcIiguKj8pXCJ8KFteKCk8PkAsOzpcXFxcXCIvW1xcXT89e31cXHNcXHRdKykpKCR8O1xccykvaSk7XG5cdGlmICghbSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IG1hdGNoID0gbVsyXSB8fCBtWzNdIHx8ICcnO1xuXHRsZXQgZmlsZW5hbWUgPSBtYXRjaC5zbGljZShtYXRjaC5sYXN0SW5kZXhPZignXFxcXCcpICsgMSk7XG5cdGZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgvJTIyL2csICdcIicpO1xuXHRmaWxlbmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoLyYjKFxcZHs0fSk7L2csIChtLCBjb2RlKSA9PiB7XG5cdFx0cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG5cdH0pO1xuXHRyZXR1cm4gZmlsZW5hbWU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b0Zvcm1EYXRhKEJvZHksIGN0KSB7XG5cdGlmICghL211bHRpcGFydC9pLnRlc3QoY3QpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRmFpbGVkIHRvIGZldGNoJyk7XG5cdH1cblxuXHRjb25zdCBtID0gY3QubWF0Y2goL2JvdW5kYXJ5PSg/OlwiKFteXCJdKylcInwoW147XSspKS9pKTtcblxuXHRpZiAoIW0pIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdubyBvciBiYWQgY29udGVudC10eXBlIGhlYWRlciwgbm8gbXVsdGlwYXJ0IGJvdW5kYXJ5Jyk7XG5cdH1cblxuXHRjb25zdCBwYXJzZXIgPSBuZXcgTXVsdGlwYXJ0UGFyc2VyKG1bMV0gfHwgbVsyXSk7XG5cblx0bGV0IGhlYWRlckZpZWxkO1xuXHRsZXQgaGVhZGVyVmFsdWU7XG5cdGxldCBlbnRyeVZhbHVlO1xuXHRsZXQgZW50cnlOYW1lO1xuXHRsZXQgY29udGVudFR5cGU7XG5cdGxldCBmaWxlbmFtZTtcblx0Y29uc3QgZW50cnlDaHVua3MgPSBbXTtcblx0Y29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuXHRjb25zdCBvblBhcnREYXRhID0gdWk4YSA9PiB7XG5cdFx0ZW50cnlWYWx1ZSArPSBkZWNvZGVyLmRlY29kZSh1aThhLCB7c3RyZWFtOiB0cnVlfSk7XG5cdH07XG5cblx0Y29uc3QgYXBwZW5kVG9GaWxlID0gdWk4YSA9PiB7XG5cdFx0ZW50cnlDaHVua3MucHVzaCh1aThhKTtcblx0fTtcblxuXHRjb25zdCBhcHBlbmRGaWxlVG9Gb3JtRGF0YSA9ICgpID0+IHtcblx0XHRjb25zdCBmaWxlID0gbmV3IEZpbGUoZW50cnlDaHVua3MsIGZpbGVuYW1lLCB7dHlwZTogY29udGVudFR5cGV9KTtcblx0XHRmb3JtRGF0YS5hcHBlbmQoZW50cnlOYW1lLCBmaWxlKTtcblx0fTtcblxuXHRjb25zdCBhcHBlbmRFbnRyeVRvRm9ybURhdGEgPSAoKSA9PiB7XG5cdFx0Zm9ybURhdGEuYXBwZW5kKGVudHJ5TmFtZSwgZW50cnlWYWx1ZSk7XG5cdH07XG5cblx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcblx0ZGVjb2Rlci5kZWNvZGUoKTtcblxuXHRwYXJzZXIub25QYXJ0QmVnaW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0cGFyc2VyLm9uUGFydERhdGEgPSBvblBhcnREYXRhO1xuXHRcdHBhcnNlci5vblBhcnRFbmQgPSBhcHBlbmRFbnRyeVRvRm9ybURhdGE7XG5cblx0XHRoZWFkZXJGaWVsZCA9ICcnO1xuXHRcdGhlYWRlclZhbHVlID0gJyc7XG5cdFx0ZW50cnlWYWx1ZSA9ICcnO1xuXHRcdGVudHJ5TmFtZSA9ICcnO1xuXHRcdGNvbnRlbnRUeXBlID0gJyc7XG5cdFx0ZmlsZW5hbWUgPSBudWxsO1xuXHRcdGVudHJ5Q2h1bmtzLmxlbmd0aCA9IDA7XG5cdH07XG5cblx0cGFyc2VyLm9uSGVhZGVyRmllbGQgPSBmdW5jdGlvbiAodWk4YSkge1xuXHRcdGhlYWRlckZpZWxkICs9IGRlY29kZXIuZGVjb2RlKHVpOGEsIHtzdHJlYW06IHRydWV9KTtcblx0fTtcblxuXHRwYXJzZXIub25IZWFkZXJWYWx1ZSA9IGZ1bmN0aW9uICh1aThhKSB7XG5cdFx0aGVhZGVyVmFsdWUgKz0gZGVjb2Rlci5kZWNvZGUodWk4YSwge3N0cmVhbTogdHJ1ZX0pO1xuXHR9O1xuXG5cdHBhcnNlci5vbkhlYWRlckVuZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRoZWFkZXJWYWx1ZSArPSBkZWNvZGVyLmRlY29kZSgpO1xuXHRcdGhlYWRlckZpZWxkID0gaGVhZGVyRmllbGQudG9Mb3dlckNhc2UoKTtcblxuXHRcdGlmIChoZWFkZXJGaWVsZCA9PT0gJ2NvbnRlbnQtZGlzcG9zaXRpb24nKSB7XG5cdFx0XHQvLyBtYXRjaGVzIGVpdGhlciBhIHF1b3RlZC1zdHJpbmcgb3IgYSB0b2tlbiAoUkZDIDI2MTYgc2VjdGlvbiAxOS41LjEpXG5cdFx0XHRjb25zdCBtID0gaGVhZGVyVmFsdWUubWF0Y2goL1xcYm5hbWU9KFwiKFteXCJdKilcInwoW14oKTw+QCw7OlxcXFxcIi9bXFxdPz17fVxcc1xcdF0rKSkvaSk7XG5cblx0XHRcdGlmIChtKSB7XG5cdFx0XHRcdGVudHJ5TmFtZSA9IG1bMl0gfHwgbVszXSB8fCAnJztcblx0XHRcdH1cblxuXHRcdFx0ZmlsZW5hbWUgPSBfZmlsZU5hbWUoaGVhZGVyVmFsdWUpO1xuXG5cdFx0XHRpZiAoZmlsZW5hbWUpIHtcblx0XHRcdFx0cGFyc2VyLm9uUGFydERhdGEgPSBhcHBlbmRUb0ZpbGU7XG5cdFx0XHRcdHBhcnNlci5vblBhcnRFbmQgPSBhcHBlbmRGaWxlVG9Gb3JtRGF0YTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGhlYWRlckZpZWxkID09PSAnY29udGVudC10eXBlJykge1xuXHRcdFx0Y29udGVudFR5cGUgPSBoZWFkZXJWYWx1ZTtcblx0XHR9XG5cblx0XHRoZWFkZXJWYWx1ZSA9ICcnO1xuXHRcdGhlYWRlckZpZWxkID0gJyc7XG5cdH07XG5cblx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBCb2R5KSB7XG5cdFx0cGFyc2VyLndyaXRlKGNodW5rKTtcblx0fVxuXG5cdHBhcnNlci5lbmQoKTtcblxuXHRyZXR1cm4gZm9ybURhdGE7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/multipart-parser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/referrer.js":
/*!***************************************************************************!*\
  !*** ./node_modules/genkit/node_modules/node-fetch/src/utils/referrer.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_REFERRER_POLICY: () => (/* binding */ DEFAULT_REFERRER_POLICY),\n/* harmony export */   ReferrerPolicy: () => (/* binding */ ReferrerPolicy),\n/* harmony export */   determineRequestsReferrer: () => (/* binding */ determineRequestsReferrer),\n/* harmony export */   isOriginPotentiallyTrustworthy: () => (/* binding */ isOriginPotentiallyTrustworthy),\n/* harmony export */   isUrlPotentiallyTrustworthy: () => (/* binding */ isUrlPotentiallyTrustworthy),\n/* harmony export */   parseReferrerPolicyFromHeader: () => (/* binding */ parseReferrerPolicyFromHeader),\n/* harmony export */   stripURLForUseAsAReferrer: () => (/* binding */ stripURLForUseAsAReferrer),\n/* harmony export */   validateReferrerPolicy: () => (/* binding */ validateReferrerPolicy)\n/* harmony export */ });\n/* harmony import */ var node_net__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:net */ \"node:net\");\n\n\n/**\n * @external URL\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/URL|URL}\n */\n\n/**\n * @module utils/referrer\n * @private\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#strip-url|Referrer Policy 8.4. Strip url for use as a referrer}\n * @param {string} URL\n * @param {boolean} [originOnly=false]\n */\nfunction stripURLForUseAsAReferrer(url, originOnly = false) {\n\t// 1. If url is null, return no referrer.\n\tif (url == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\treturn 'no-referrer';\n\t}\n\n\turl = new URL(url);\n\n\t// 2. If url's scheme is a local scheme, then return no referrer.\n\tif (/^(about|blob|data):$/.test(url.protocol)) {\n\t\treturn 'no-referrer';\n\t}\n\n\t// 3. Set url's username to the empty string.\n\turl.username = '';\n\n\t// 4. Set url's password to null.\n\t// Note: `null` appears to be a mistake as this actually results in the password being `\"null\"`.\n\turl.password = '';\n\n\t// 5. Set url's fragment to null.\n\t// Note: `null` appears to be a mistake as this actually results in the fragment being `\"#null\"`.\n\turl.hash = '';\n\n\t// 6. If the origin-only flag is true, then:\n\tif (originOnly) {\n\t\t// 6.1. Set url's path to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the path being `\"/null\"`.\n\t\turl.pathname = '';\n\n\t\t// 6.2. Set url's query to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the query being `\"?null\"`.\n\t\turl.search = '';\n\t}\n\n\t// 7. Return url.\n\treturn url;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#enumdef-referrerpolicy|enum ReferrerPolicy}\n */\nconst ReferrerPolicy = new Set([\n\t'',\n\t'no-referrer',\n\t'no-referrer-when-downgrade',\n\t'same-origin',\n\t'origin',\n\t'strict-origin',\n\t'origin-when-cross-origin',\n\t'strict-origin-when-cross-origin',\n\t'unsafe-url'\n]);\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#default-referrer-policy|default referrer policy}\n */\nconst DEFAULT_REFERRER_POLICY = 'strict-origin-when-cross-origin';\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#referrer-policies|Referrer Policy 3. Referrer Policies}\n * @param {string} referrerPolicy\n * @returns {string} referrerPolicy\n */\nfunction validateReferrerPolicy(referrerPolicy) {\n\tif (!ReferrerPolicy.has(referrerPolicy)) {\n\t\tthrow new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);\n\t}\n\n\treturn referrerPolicy;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy|Referrer Policy 3.2. Is origin potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nfunction isOriginPotentiallyTrustworthy(url) {\n\t// 1. If origin is an opaque origin, return \"Not Trustworthy\".\n\t// Not applicable\n\n\t// 2. Assert: origin is a tuple origin.\n\t// Not for implementations\n\n\t// 3. If origin's scheme is either \"https\" or \"wss\", return \"Potentially Trustworthy\".\n\tif (/^(http|ws)s:$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 4. If origin's host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return \"Potentially Trustworthy\".\n\tconst hostIp = url.host.replace(/(^\\[)|(]$)/g, '');\n\tconst hostIPVersion = (0,node_net__WEBPACK_IMPORTED_MODULE_0__.isIP)(hostIp);\n\n\tif (hostIPVersion === 4 && /^127\\./.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\tif (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\t// 5. If origin's host component is \"localhost\" or falls within \".localhost\", and the user agent conforms to the name resolution rules in [let-localhost-be-localhost], return \"Potentially Trustworthy\".\n\t// We are returning FALSE here because we cannot ensure conformance to\n\t// let-localhost-be-loalhost (https://tools.ietf.org/html/draft-west-let-localhost-be-localhost)\n\tif (url.host === 'localhost' || url.host.endsWith('.localhost')) {\n\t\treturn false;\n\t}\n\n\t// 6. If origin's scheme component is file, return \"Potentially Trustworthy\".\n\tif (url.protocol === 'file:') {\n\t\treturn true;\n\t}\n\n\t// 7. If origin's scheme component is one which the user agent considers to be authenticated, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 8. If origin has been configured as a trustworthy origin, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 9. Return \"Not Trustworthy\".\n\treturn false;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-url-trustworthy|Referrer Policy 3.3. Is url potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nfunction isUrlPotentiallyTrustworthy(url) {\n\t// 1. If url is \"about:blank\" or \"about:srcdoc\", return \"Potentially Trustworthy\".\n\tif (/^about:(blank|srcdoc)$/.test(url)) {\n\t\treturn true;\n\t}\n\n\t// 2. If url's scheme is \"data\", return \"Potentially Trustworthy\".\n\tif (url.protocol === 'data:') {\n\t\treturn true;\n\t}\n\n\t// Note: The origin of blob: and filesystem: URLs is the origin of the context in which they were\n\t// created. Therefore, blobs created in a trustworthy origin will themselves be potentially\n\t// trustworthy.\n\tif (/^(blob|filesystem):$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 3. Return the result of executing 3.2 Is origin potentially trustworthy? on url's origin.\n\treturn isOriginPotentiallyTrustworthy(url);\n}\n\n/**\n * Modifies the referrerURL to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerURLCallback\n * @param {external:URL} referrerURL\n * @returns {external:URL} modified referrerURL\n */\n\n/**\n * Modifies the referrerOrigin to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerOriginCallback\n * @param {external:URL} referrerOrigin\n * @returns {external:URL} modified referrerOrigin\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}\n * @param {Request} request\n * @param {object} o\n * @param {module:utils/referrer~referrerURLCallback} o.referrerURLCallback\n * @param {module:utils/referrer~referrerOriginCallback} o.referrerOriginCallback\n * @returns {external:URL} Request's referrer\n */\nfunction determineRequestsReferrer(request, {referrerURLCallback, referrerOriginCallback} = {}) {\n\t// There are 2 notes in the specification about invalid pre-conditions.  We return null, here, for\n\t// these cases:\n\t// > Note: If request's referrer is \"no-referrer\", Fetch will not call into this algorithm.\n\t// > Note: If request's referrer policy is the empty string, Fetch will not call into this\n\t// > algorithm.\n\tif (request.referrer === 'no-referrer' || request.referrerPolicy === '') {\n\t\treturn null;\n\t}\n\n\t// 1. Let policy be request's associated referrer policy.\n\tconst policy = request.referrerPolicy;\n\n\t// 2. Let environment be request's client.\n\t// not applicable to node.js\n\n\t// 3. Switch on request's referrer:\n\tif (request.referrer === 'about:client') {\n\t\treturn 'no-referrer';\n\t}\n\n\t// \"a URL\": Let referrerSource be request's referrer.\n\tconst referrerSource = request.referrer;\n\n\t// 4. Let request's referrerURL be the result of stripping referrerSource for use as a referrer.\n\tlet referrerURL = stripURLForUseAsAReferrer(referrerSource);\n\n\t// 5. Let referrerOrigin be the result of stripping referrerSource for use as a referrer, with the\n\t//    origin-only flag set to true.\n\tlet referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);\n\n\t// 6. If the result of serializing referrerURL is a string whose length is greater than 4096, set\n\t//    referrerURL to referrerOrigin.\n\tif (referrerURL.toString().length > 4096) {\n\t\treferrerURL = referrerOrigin;\n\t}\n\n\t// 7. The user agent MAY alter referrerURL or referrerOrigin at this point to enforce arbitrary\n\t//    policy considerations in the interests of minimizing data leakage. For example, the user\n\t//    agent could strip the URL down to an origin, modify its host, replace it with an empty\n\t//    string, etc.\n\tif (referrerURLCallback) {\n\t\treferrerURL = referrerURLCallback(referrerURL);\n\t}\n\n\tif (referrerOriginCallback) {\n\t\treferrerOrigin = referrerOriginCallback(referrerOrigin);\n\t}\n\n\t// 8.Execute the statements corresponding to the value of policy:\n\tconst currentURL = new URL(request.url);\n\n\tswitch (policy) {\n\t\tcase 'no-referrer':\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin':\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'unsafe-url':\n\t\t\treturn referrerURL;\n\n\t\tcase 'strict-origin':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerOrigin.\n\t\t\treturn referrerOrigin.toString();\n\n\t\tcase 'strict-origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 3. Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'same-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. Return no referrer.\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'no-referrer-when-downgrade':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerURL.\n\t\t\treturn referrerURL;\n\n\t\tdefault:\n\t\t\tthrow new TypeError(`Invalid referrerPolicy: ${policy}`);\n\t}\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header|Referrer Policy 8.1. Parse a referrer policy from a Referrer-Policy header}\n * @param {Headers} headers Response headers\n * @returns {string} policy\n */\nfunction parseReferrerPolicyFromHeader(headers) {\n\t// 1. Let policy-tokens be the result of extracting header list values given `Referrer-Policy`\n\t//    and responses header list.\n\tconst policyTokens = (headers.get('referrer-policy') || '').split(/[,\\s]+/);\n\n\t// 2. Let policy be the empty string.\n\tlet policy = '';\n\n\t// 3. For each token in policy-tokens, if token is a referrer policy and token is not the empty\n\t//    string, then set policy to token.\n\t// Note: This algorithm loops over multiple policy values to allow deployment of new policy\n\t// values with fallbacks for older user agents, as described in  11.1 Unknown Policy Values.\n\tfor (const token of policyTokens) {\n\t\tif (token && ReferrerPolicy.has(token)) {\n\t\t\tpolicy = token;\n\t\t}\n\t}\n\n\t// 4. Return policy.\n\treturn policy;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9yZWZlcnJlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEI7O0FBRTlCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1QsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQjtBQUNPO0FBQ1A7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ087O0FBRVA7QUFDQSxTQUFTO0FBQ1QsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNPO0FBQ1A7QUFDQSxpREFBaUQsZUFBZTtBQUNoRTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNULFdBQVcsY0FBYztBQUN6QjtBQUNBO0FBQ087QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qiw4Q0FBSTs7QUFFM0I7QUFDQTtBQUNBOztBQUVBLHNDQUFzQyxFQUFFLFdBQVcsSUFBSTtBQUN2RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNULFdBQVcsY0FBYztBQUN6QjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLHNJQUFzSTtBQUMvSTtBQUNBLFdBQVcsY0FBYztBQUN6QixhQUFhLGNBQWM7QUFDM0I7O0FBRUE7QUFDQTtBQUNBLFNBQVMsc0lBQXNJO0FBQy9JO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLGFBQWEsY0FBYztBQUMzQjs7QUFFQTtBQUNBLFNBQVM7QUFDVCxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsMkNBQTJDO0FBQ3RELFdBQVcsOENBQThDO0FBQ3pELGFBQWEsY0FBYztBQUMzQjtBQUNPLDZDQUE2Qyw2Q0FBNkMsSUFBSTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esa0RBQWtELE9BQU87QUFDekQ7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxXQUFXLFNBQVM7QUFDcEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1nZW5raXQvLi9ub2RlX21vZHVsZXMvZ2Vua2l0L25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9yZWZlcnJlci5qcz9mYTQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aXNJUH0gZnJvbSAnbm9kZTpuZXQnO1xuXG4vKipcbiAqIEBleHRlcm5hbCBVUkxcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9VUkx8VVJMfVxuICovXG5cbi8qKlxuICogQG1vZHVsZSB1dGlscy9yZWZlcnJlclxuICogQHByaXZhdGVcbiAqL1xuXG4vKipcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMtcmVmZXJyZXItcG9saWN5LyNzdHJpcC11cmx8UmVmZXJyZXIgUG9saWN5IMKnOC40LiBTdHJpcCB1cmwgZm9yIHVzZSBhcyBhIHJlZmVycmVyfVxuICogQHBhcmFtIHtzdHJpbmd9IFVSTFxuICogQHBhcmFtIHtib29sZWFufSBbb3JpZ2luT25seT1mYWxzZV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwVVJMRm9yVXNlQXNBUmVmZXJyZXIodXJsLCBvcmlnaW5Pbmx5ID0gZmFsc2UpIHtcblx0Ly8gMS4gSWYgdXJsIGlzIG51bGwsIHJldHVybiBubyByZWZlcnJlci5cblx0aWYgKHVybCA9PSBudWxsKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXEtbnVsbCwgZXFlcWVxXG5cdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdH1cblxuXHR1cmwgPSBuZXcgVVJMKHVybCk7XG5cblx0Ly8gMi4gSWYgdXJsJ3Mgc2NoZW1lIGlzIGEgbG9jYWwgc2NoZW1lLCB0aGVuIHJldHVybiBubyByZWZlcnJlci5cblx0aWYgKC9eKGFib3V0fGJsb2J8ZGF0YSk6JC8udGVzdCh1cmwucHJvdG9jb2wpKSB7XG5cdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdH1cblxuXHQvLyAzLiBTZXQgdXJsJ3MgdXNlcm5hbWUgdG8gdGhlIGVtcHR5IHN0cmluZy5cblx0dXJsLnVzZXJuYW1lID0gJyc7XG5cblx0Ly8gNC4gU2V0IHVybCdzIHBhc3N3b3JkIHRvIG51bGwuXG5cdC8vIE5vdGU6IGBudWxsYCBhcHBlYXJzIHRvIGJlIGEgbWlzdGFrZSBhcyB0aGlzIGFjdHVhbGx5IHJlc3VsdHMgaW4gdGhlIHBhc3N3b3JkIGJlaW5nIGBcIm51bGxcImAuXG5cdHVybC5wYXNzd29yZCA9ICcnO1xuXG5cdC8vIDUuIFNldCB1cmwncyBmcmFnbWVudCB0byBudWxsLlxuXHQvLyBOb3RlOiBgbnVsbGAgYXBwZWFycyB0byBiZSBhIG1pc3Rha2UgYXMgdGhpcyBhY3R1YWxseSByZXN1bHRzIGluIHRoZSBmcmFnbWVudCBiZWluZyBgXCIjbnVsbFwiYC5cblx0dXJsLmhhc2ggPSAnJztcblxuXHQvLyA2LiBJZiB0aGUgb3JpZ2luLW9ubHkgZmxhZyBpcyB0cnVlLCB0aGVuOlxuXHRpZiAob3JpZ2luT25seSkge1xuXHRcdC8vIDYuMS4gU2V0IHVybCdzIHBhdGggdG8gbnVsbC5cblx0XHQvLyBOb3RlOiBgbnVsbGAgYXBwZWFycyB0byBiZSBhIG1pc3Rha2UgYXMgdGhpcyBhY3R1YWxseSByZXN1bHRzIGluIHRoZSBwYXRoIGJlaW5nIGBcIi9udWxsXCJgLlxuXHRcdHVybC5wYXRobmFtZSA9ICcnO1xuXG5cdFx0Ly8gNi4yLiBTZXQgdXJsJ3MgcXVlcnkgdG8gbnVsbC5cblx0XHQvLyBOb3RlOiBgbnVsbGAgYXBwZWFycyB0byBiZSBhIG1pc3Rha2UgYXMgdGhpcyBhY3R1YWxseSByZXN1bHRzIGluIHRoZSBxdWVyeSBiZWluZyBgXCI/bnVsbFwiYC5cblx0XHR1cmwuc2VhcmNoID0gJyc7XG5cdH1cblxuXHQvLyA3LiBSZXR1cm4gdXJsLlxuXHRyZXR1cm4gdXJsO1xufVxuXG4vKipcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMtcmVmZXJyZXItcG9saWN5LyNlbnVtZGVmLXJlZmVycmVycG9saWN5fGVudW0gUmVmZXJyZXJQb2xpY3l9XG4gKi9cbmV4cG9ydCBjb25zdCBSZWZlcnJlclBvbGljeSA9IG5ldyBTZXQoW1xuXHQnJyxcblx0J25vLXJlZmVycmVyJyxcblx0J25vLXJlZmVycmVyLXdoZW4tZG93bmdyYWRlJyxcblx0J3NhbWUtb3JpZ2luJyxcblx0J29yaWdpbicsXG5cdCdzdHJpY3Qtb3JpZ2luJyxcblx0J29yaWdpbi13aGVuLWNyb3NzLW9yaWdpbicsXG5cdCdzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luJyxcblx0J3Vuc2FmZS11cmwnXG5dKTtcblxuLyoqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXJlZmVycmVyLXBvbGljeS8jZGVmYXVsdC1yZWZlcnJlci1wb2xpY3l8ZGVmYXVsdCByZWZlcnJlciBwb2xpY3l9XG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFRkVSUkVSX1BPTElDWSA9ICdzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luJztcblxuLyoqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXJlZmVycmVyLXBvbGljeS8jcmVmZXJyZXItcG9saWNpZXN8UmVmZXJyZXIgUG9saWN5IMKnMy4gUmVmZXJyZXIgUG9saWNpZXN9XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVmZXJyZXJQb2xpY3lcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJlZmVycmVyUG9saWN5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlZmVycmVyUG9saWN5KHJlZmVycmVyUG9saWN5KSB7XG5cdGlmICghUmVmZXJyZXJQb2xpY3kuaGFzKHJlZmVycmVyUG9saWN5KSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgcmVmZXJyZXJQb2xpY3k6ICR7cmVmZXJyZXJQb2xpY3l9YCk7XG5cdH1cblxuXHRyZXR1cm4gcmVmZXJyZXJQb2xpY3k7XG59XG5cbi8qKlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1zZWN1cmUtY29udGV4dHMvI2lzLW9yaWdpbi10cnVzdHdvcnRoeXxSZWZlcnJlciBQb2xpY3kgwqczLjIuIElzIG9yaWdpbiBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeT99XG4gKiBAcGFyYW0ge2V4dGVybmFsOlVSTH0gdXJsXG4gKiBAcmV0dXJucyBgdHJ1ZWA6IFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIiwgYGZhbHNlYDogXCJOb3QgVHJ1c3R3b3J0aHlcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPcmlnaW5Qb3RlbnRpYWxseVRydXN0d29ydGh5KHVybCkge1xuXHQvLyAxLiBJZiBvcmlnaW4gaXMgYW4gb3BhcXVlIG9yaWdpbiwgcmV0dXJuIFwiTm90IFRydXN0d29ydGh5XCIuXG5cdC8vIE5vdCBhcHBsaWNhYmxlXG5cblx0Ly8gMi4gQXNzZXJ0OiBvcmlnaW4gaXMgYSB0dXBsZSBvcmlnaW4uXG5cdC8vIE5vdCBmb3IgaW1wbGVtZW50YXRpb25zXG5cblx0Ly8gMy4gSWYgb3JpZ2luJ3Mgc2NoZW1lIGlzIGVpdGhlciBcImh0dHBzXCIgb3IgXCJ3c3NcIiwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0aWYgKC9eKGh0dHB8d3MpczokLy50ZXN0KHVybC5wcm90b2NvbCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDQuIElmIG9yaWdpbidzIGhvc3QgY29tcG9uZW50IG1hdGNoZXMgb25lIG9mIHRoZSBDSURSIG5vdGF0aW9ucyAxMjcuMC4wLjAvOCBvciA6OjEvMTI4IFtSRkM0NjMyXSwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0Y29uc3QgaG9zdElwID0gdXJsLmhvc3QucmVwbGFjZSgvKF5cXFspfChdJCkvZywgJycpO1xuXHRjb25zdCBob3N0SVBWZXJzaW9uID0gaXNJUChob3N0SXApO1xuXG5cdGlmIChob3N0SVBWZXJzaW9uID09PSA0ICYmIC9eMTI3XFwuLy50ZXN0KGhvc3RJcCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmIChob3N0SVBWZXJzaW9uID09PSA2ICYmIC9eKCgoMCs6KXs3fSl8KDo6KDArOil7MCw2fSkpMCoxJC8udGVzdChob3N0SXApKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyA1LiBJZiBvcmlnaW4ncyBob3N0IGNvbXBvbmVudCBpcyBcImxvY2FsaG9zdFwiIG9yIGZhbGxzIHdpdGhpbiBcIi5sb2NhbGhvc3RcIiwgYW5kIHRoZSB1c2VyIGFnZW50IGNvbmZvcm1zIHRvIHRoZSBuYW1lIHJlc29sdXRpb24gcnVsZXMgaW4gW2xldC1sb2NhbGhvc3QtYmUtbG9jYWxob3N0XSwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0Ly8gV2UgYXJlIHJldHVybmluZyBGQUxTRSBoZXJlIGJlY2F1c2Ugd2UgY2Fubm90IGVuc3VyZSBjb25mb3JtYW5jZSB0b1xuXHQvLyBsZXQtbG9jYWxob3N0LWJlLWxvYWxob3N0IChodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtd2VzdC1sZXQtbG9jYWxob3N0LWJlLWxvY2FsaG9zdClcblx0aWYgKHVybC5ob3N0ID09PSAnbG9jYWxob3N0JyB8fCB1cmwuaG9zdC5lbmRzV2l0aCgnLmxvY2FsaG9zdCcpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gNi4gSWYgb3JpZ2luJ3Mgc2NoZW1lIGNvbXBvbmVudCBpcyBmaWxlLCByZXR1cm4gXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLlxuXHRpZiAodXJsLnByb3RvY29sID09PSAnZmlsZTonKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyA3LiBJZiBvcmlnaW4ncyBzY2hlbWUgY29tcG9uZW50IGlzIG9uZSB3aGljaCB0aGUgdXNlciBhZ2VudCBjb25zaWRlcnMgdG8gYmUgYXV0aGVudGljYXRlZCwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0Ly8gTm90IHN1cHBvcnRlZFxuXG5cdC8vIDguIElmIG9yaWdpbiBoYXMgYmVlbiBjb25maWd1cmVkIGFzIGEgdHJ1c3R3b3J0aHkgb3JpZ2luLCByZXR1cm4gXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLlxuXHQvLyBOb3Qgc3VwcG9ydGVkXG5cblx0Ly8gOS4gUmV0dXJuIFwiTm90IFRydXN0d29ydGh5XCIuXG5cdHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXNlY3VyZS1jb250ZXh0cy8jaXMtdXJsLXRydXN0d29ydGh5fFJlZmVycmVyIFBvbGljeSDCpzMuMy4gSXMgdXJsIHBvdGVudGlhbGx5IHRydXN0d29ydGh5P31cbiAqIEBwYXJhbSB7ZXh0ZXJuYWw6VVJMfSB1cmxcbiAqIEByZXR1cm5zIGB0cnVlYDogXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLCBgZmFsc2VgOiBcIk5vdCBUcnVzdHdvcnRoeVwiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkodXJsKSB7XG5cdC8vIDEuIElmIHVybCBpcyBcImFib3V0OmJsYW5rXCIgb3IgXCJhYm91dDpzcmNkb2NcIiwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0aWYgKC9eYWJvdXQ6KGJsYW5rfHNyY2RvYykkLy50ZXN0KHVybCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDIuIElmIHVybCdzIHNjaGVtZSBpcyBcImRhdGFcIiwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0aWYgKHVybC5wcm90b2NvbCA9PT0gJ2RhdGE6Jykge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gTm90ZTogVGhlIG9yaWdpbiBvZiBibG9iOiBhbmQgZmlsZXN5c3RlbTogVVJMcyBpcyB0aGUgb3JpZ2luIG9mIHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZXkgd2VyZVxuXHQvLyBjcmVhdGVkLiBUaGVyZWZvcmUsIGJsb2JzIGNyZWF0ZWQgaW4gYSB0cnVzdHdvcnRoeSBvcmlnaW4gd2lsbCB0aGVtc2VsdmVzIGJlIHBvdGVudGlhbGx5XG5cdC8vIHRydXN0d29ydGh5LlxuXHRpZiAoL14oYmxvYnxmaWxlc3lzdGVtKTokLy50ZXN0KHVybC5wcm90b2NvbCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDMuIFJldHVybiB0aGUgcmVzdWx0IG9mIGV4ZWN1dGluZyDCpzMuMiBJcyBvcmlnaW4gcG90ZW50aWFsbHkgdHJ1c3R3b3J0aHk/IG9uIHVybCdzIG9yaWdpbi5cblx0cmV0dXJuIGlzT3JpZ2luUG90ZW50aWFsbHlUcnVzdHdvcnRoeSh1cmwpO1xufVxuXG4vKipcbiAqIE1vZGlmaWVzIHRoZSByZWZlcnJlclVSTCB0byBlbmZvcmNlIGFueSBleHRyYSBzZWN1cml0eSBwb2xpY3kgY29uc2lkZXJhdGlvbnMuXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXJlZmVycmVyLXBvbGljeS8jZGV0ZXJtaW5lLXJlcXVlc3RzLXJlZmVycmVyfFJlZmVycmVyIFBvbGljeSDCpzguMy4gRGV0ZXJtaW5lIHJlcXVlc3QncyBSZWZlcnJlcn0sIHN0ZXAgN1xuICogQGNhbGxiYWNrIG1vZHVsZTp1dGlscy9yZWZlcnJlcn5yZWZlcnJlclVSTENhbGxiYWNrXG4gKiBAcGFyYW0ge2V4dGVybmFsOlVSTH0gcmVmZXJyZXJVUkxcbiAqIEByZXR1cm5zIHtleHRlcm5hbDpVUkx9IG1vZGlmaWVkIHJlZmVycmVyVVJMXG4gKi9cblxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcmVmZXJyZXJPcmlnaW4gdG8gZW5mb3JjZSBhbnkgZXh0cmEgc2VjdXJpdHkgcG9saWN5IGNvbnNpZGVyYXRpb25zLlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1yZWZlcnJlci1wb2xpY3kvI2RldGVybWluZS1yZXF1ZXN0cy1yZWZlcnJlcnxSZWZlcnJlciBQb2xpY3kgwqc4LjMuIERldGVybWluZSByZXF1ZXN0J3MgUmVmZXJyZXJ9LCBzdGVwIDdcbiAqIEBjYWxsYmFjayBtb2R1bGU6dXRpbHMvcmVmZXJyZXJ+cmVmZXJyZXJPcmlnaW5DYWxsYmFja1xuICogQHBhcmFtIHtleHRlcm5hbDpVUkx9IHJlZmVycmVyT3JpZ2luXG4gKiBAcmV0dXJucyB7ZXh0ZXJuYWw6VVJMfSBtb2RpZmllZCByZWZlcnJlck9yaWdpblxuICovXG5cbi8qKlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1yZWZlcnJlci1wb2xpY3kvI2RldGVybWluZS1yZXF1ZXN0cy1yZWZlcnJlcnxSZWZlcnJlciBQb2xpY3kgwqc4LjMuIERldGVybWluZSByZXF1ZXN0J3MgUmVmZXJyZXJ9XG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3RcbiAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gKiBAcGFyYW0ge21vZHVsZTp1dGlscy9yZWZlcnJlcn5yZWZlcnJlclVSTENhbGxiYWNrfSBvLnJlZmVycmVyVVJMQ2FsbGJhY2tcbiAqIEBwYXJhbSB7bW9kdWxlOnV0aWxzL3JlZmVycmVyfnJlZmVycmVyT3JpZ2luQ2FsbGJhY2t9IG8ucmVmZXJyZXJPcmlnaW5DYWxsYmFja1xuICogQHJldHVybnMge2V4dGVybmFsOlVSTH0gUmVxdWVzdCdzIHJlZmVycmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmVSZXF1ZXN0c1JlZmVycmVyKHJlcXVlc3QsIHtyZWZlcnJlclVSTENhbGxiYWNrLCByZWZlcnJlck9yaWdpbkNhbGxiYWNrfSA9IHt9KSB7XG5cdC8vIFRoZXJlIGFyZSAyIG5vdGVzIGluIHRoZSBzcGVjaWZpY2F0aW9uIGFib3V0IGludmFsaWQgcHJlLWNvbmRpdGlvbnMuICBXZSByZXR1cm4gbnVsbCwgaGVyZSwgZm9yXG5cdC8vIHRoZXNlIGNhc2VzOlxuXHQvLyA+IE5vdGU6IElmIHJlcXVlc3QncyByZWZlcnJlciBpcyBcIm5vLXJlZmVycmVyXCIsIEZldGNoIHdpbGwgbm90IGNhbGwgaW50byB0aGlzIGFsZ29yaXRobS5cblx0Ly8gPiBOb3RlOiBJZiByZXF1ZXN0J3MgcmVmZXJyZXIgcG9saWN5IGlzIHRoZSBlbXB0eSBzdHJpbmcsIEZldGNoIHdpbGwgbm90IGNhbGwgaW50byB0aGlzXG5cdC8vID4gYWxnb3JpdGhtLlxuXHRpZiAocmVxdWVzdC5yZWZlcnJlciA9PT0gJ25vLXJlZmVycmVyJyB8fCByZXF1ZXN0LnJlZmVycmVyUG9saWN5ID09PSAnJykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gMS4gTGV0IHBvbGljeSBiZSByZXF1ZXN0J3MgYXNzb2NpYXRlZCByZWZlcnJlciBwb2xpY3kuXG5cdGNvbnN0IHBvbGljeSA9IHJlcXVlc3QucmVmZXJyZXJQb2xpY3k7XG5cblx0Ly8gMi4gTGV0IGVudmlyb25tZW50IGJlIHJlcXVlc3QncyBjbGllbnQuXG5cdC8vIG5vdCBhcHBsaWNhYmxlIHRvIG5vZGUuanNcblxuXHQvLyAzLiBTd2l0Y2ggb24gcmVxdWVzdCdzIHJlZmVycmVyOlxuXHRpZiAocmVxdWVzdC5yZWZlcnJlciA9PT0gJ2Fib3V0OmNsaWVudCcpIHtcblx0XHRyZXR1cm4gJ25vLXJlZmVycmVyJztcblx0fVxuXG5cdC8vIFwiYSBVUkxcIjogTGV0IHJlZmVycmVyU291cmNlIGJlIHJlcXVlc3QncyByZWZlcnJlci5cblx0Y29uc3QgcmVmZXJyZXJTb3VyY2UgPSByZXF1ZXN0LnJlZmVycmVyO1xuXG5cdC8vIDQuIExldCByZXF1ZXN0J3MgcmVmZXJyZXJVUkwgYmUgdGhlIHJlc3VsdCBvZiBzdHJpcHBpbmcgcmVmZXJyZXJTb3VyY2UgZm9yIHVzZSBhcyBhIHJlZmVycmVyLlxuXHRsZXQgcmVmZXJyZXJVUkwgPSBzdHJpcFVSTEZvclVzZUFzQVJlZmVycmVyKHJlZmVycmVyU291cmNlKTtcblxuXHQvLyA1LiBMZXQgcmVmZXJyZXJPcmlnaW4gYmUgdGhlIHJlc3VsdCBvZiBzdHJpcHBpbmcgcmVmZXJyZXJTb3VyY2UgZm9yIHVzZSBhcyBhIHJlZmVycmVyLCB3aXRoIHRoZVxuXHQvLyAgICBvcmlnaW4tb25seSBmbGFnIHNldCB0byB0cnVlLlxuXHRsZXQgcmVmZXJyZXJPcmlnaW4gPSBzdHJpcFVSTEZvclVzZUFzQVJlZmVycmVyKHJlZmVycmVyU291cmNlLCB0cnVlKTtcblxuXHQvLyA2LiBJZiB0aGUgcmVzdWx0IG9mIHNlcmlhbGl6aW5nIHJlZmVycmVyVVJMIGlzIGEgc3RyaW5nIHdob3NlIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gNDA5Niwgc2V0XG5cdC8vICAgIHJlZmVycmVyVVJMIHRvIHJlZmVycmVyT3JpZ2luLlxuXHRpZiAocmVmZXJyZXJVUkwudG9TdHJpbmcoKS5sZW5ndGggPiA0MDk2KSB7XG5cdFx0cmVmZXJyZXJVUkwgPSByZWZlcnJlck9yaWdpbjtcblx0fVxuXG5cdC8vIDcuIFRoZSB1c2VyIGFnZW50IE1BWSBhbHRlciByZWZlcnJlclVSTCBvciByZWZlcnJlck9yaWdpbiBhdCB0aGlzIHBvaW50IHRvIGVuZm9yY2UgYXJiaXRyYXJ5XG5cdC8vICAgIHBvbGljeSBjb25zaWRlcmF0aW9ucyBpbiB0aGUgaW50ZXJlc3RzIG9mIG1pbmltaXppbmcgZGF0YSBsZWFrYWdlLiBGb3IgZXhhbXBsZSwgdGhlIHVzZXJcblx0Ly8gICAgYWdlbnQgY291bGQgc3RyaXAgdGhlIFVSTCBkb3duIHRvIGFuIG9yaWdpbiwgbW9kaWZ5IGl0cyBob3N0LCByZXBsYWNlIGl0IHdpdGggYW4gZW1wdHlcblx0Ly8gICAgc3RyaW5nLCBldGMuXG5cdGlmIChyZWZlcnJlclVSTENhbGxiYWNrKSB7XG5cdFx0cmVmZXJyZXJVUkwgPSByZWZlcnJlclVSTENhbGxiYWNrKHJlZmVycmVyVVJMKTtcblx0fVxuXG5cdGlmIChyZWZlcnJlck9yaWdpbkNhbGxiYWNrKSB7XG5cdFx0cmVmZXJyZXJPcmlnaW4gPSByZWZlcnJlck9yaWdpbkNhbGxiYWNrKHJlZmVycmVyT3JpZ2luKTtcblx0fVxuXG5cdC8vIDguRXhlY3V0ZSB0aGUgc3RhdGVtZW50cyBjb3JyZXNwb25kaW5nIHRvIHRoZSB2YWx1ZSBvZiBwb2xpY3k6XG5cdGNvbnN0IGN1cnJlbnRVUkwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcblxuXHRzd2l0Y2ggKHBvbGljeSkge1xuXHRcdGNhc2UgJ25vLXJlZmVycmVyJzpcblx0XHRcdHJldHVybiAnbm8tcmVmZXJyZXInO1xuXG5cdFx0Y2FzZSAnb3JpZ2luJzpcblx0XHRcdHJldHVybiByZWZlcnJlck9yaWdpbjtcblxuXHRcdGNhc2UgJ3Vuc2FmZS11cmwnOlxuXHRcdFx0cmV0dXJuIHJlZmVycmVyVVJMO1xuXG5cdFx0Y2FzZSAnc3RyaWN0LW9yaWdpbic6XG5cdFx0XHQvLyAxLiBJZiByZWZlcnJlclVSTCBpcyBhIHBvdGVudGlhbGx5IHRydXN0d29ydGh5IFVSTCBhbmQgcmVxdWVzdCdzIGN1cnJlbnQgVVJMIGlzIG5vdCBhXG5cdFx0XHQvLyAgICBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeSBVUkwsIHRoZW4gcmV0dXJuIG5vIHJlZmVycmVyLlxuXHRcdFx0aWYgKGlzVXJsUG90ZW50aWFsbHlUcnVzdHdvcnRoeShyZWZlcnJlclVSTCkgJiYgIWlzVXJsUG90ZW50aWFsbHlUcnVzdHdvcnRoeShjdXJyZW50VVJMKSkge1xuXHRcdFx0XHRyZXR1cm4gJ25vLXJlZmVycmVyJztcblx0XHRcdH1cblxuXHRcdFx0Ly8gMi4gUmV0dXJuIHJlZmVycmVyT3JpZ2luLlxuXHRcdFx0cmV0dXJuIHJlZmVycmVyT3JpZ2luLnRvU3RyaW5nKCk7XG5cblx0XHRjYXNlICdzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luJzpcblx0XHRcdC8vIDEuIElmIHRoZSBvcmlnaW4gb2YgcmVmZXJyZXJVUkwgYW5kIHRoZSBvcmlnaW4gb2YgcmVxdWVzdCdzIGN1cnJlbnQgVVJMIGFyZSB0aGUgc2FtZSwgdGhlblxuXHRcdFx0Ly8gICAgcmV0dXJuIHJlZmVycmVyVVJMLlxuXHRcdFx0aWYgKHJlZmVycmVyVVJMLm9yaWdpbiA9PT0gY3VycmVudFVSTC5vcmlnaW4pIHtcblx0XHRcdFx0cmV0dXJuIHJlZmVycmVyVVJMO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAyLiBJZiByZWZlcnJlclVSTCBpcyBhIHBvdGVudGlhbGx5IHRydXN0d29ydGh5IFVSTCBhbmQgcmVxdWVzdCdzIGN1cnJlbnQgVVJMIGlzIG5vdCBhXG5cdFx0XHQvLyAgICBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeSBVUkwsIHRoZW4gcmV0dXJuIG5vIHJlZmVycmVyLlxuXHRcdFx0aWYgKGlzVXJsUG90ZW50aWFsbHlUcnVzdHdvcnRoeShyZWZlcnJlclVSTCkgJiYgIWlzVXJsUG90ZW50aWFsbHlUcnVzdHdvcnRoeShjdXJyZW50VVJMKSkge1xuXHRcdFx0XHRyZXR1cm4gJ25vLXJlZmVycmVyJztcblx0XHRcdH1cblxuXHRcdFx0Ly8gMy4gUmV0dXJuIHJlZmVycmVyT3JpZ2luLlxuXHRcdFx0cmV0dXJuIHJlZmVycmVyT3JpZ2luO1xuXG5cdFx0Y2FzZSAnc2FtZS1vcmlnaW4nOlxuXHRcdFx0Ly8gMS4gSWYgdGhlIG9yaWdpbiBvZiByZWZlcnJlclVSTCBhbmQgdGhlIG9yaWdpbiBvZiByZXF1ZXN0J3MgY3VycmVudCBVUkwgYXJlIHRoZSBzYW1lLCB0aGVuXG5cdFx0XHQvLyAgICByZXR1cm4gcmVmZXJyZXJVUkwuXG5cdFx0XHRpZiAocmVmZXJyZXJVUkwub3JpZ2luID09PSBjdXJyZW50VVJMLm9yaWdpbikge1xuXHRcdFx0XHRyZXR1cm4gcmVmZXJyZXJVUkw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDIuIFJldHVybiBubyByZWZlcnJlci5cblx0XHRcdHJldHVybiAnbm8tcmVmZXJyZXInO1xuXG5cdFx0Y2FzZSAnb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luJzpcblx0XHRcdC8vIDEuIElmIHRoZSBvcmlnaW4gb2YgcmVmZXJyZXJVUkwgYW5kIHRoZSBvcmlnaW4gb2YgcmVxdWVzdCdzIGN1cnJlbnQgVVJMIGFyZSB0aGUgc2FtZSwgdGhlblxuXHRcdFx0Ly8gICAgcmV0dXJuIHJlZmVycmVyVVJMLlxuXHRcdFx0aWYgKHJlZmVycmVyVVJMLm9yaWdpbiA9PT0gY3VycmVudFVSTC5vcmlnaW4pIHtcblx0XHRcdFx0cmV0dXJuIHJlZmVycmVyVVJMO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gcmVmZXJyZXJPcmlnaW4uXG5cdFx0XHRyZXR1cm4gcmVmZXJyZXJPcmlnaW47XG5cblx0XHRjYXNlICduby1yZWZlcnJlci13aGVuLWRvd25ncmFkZSc6XG5cdFx0XHQvLyAxLiBJZiByZWZlcnJlclVSTCBpcyBhIHBvdGVudGlhbGx5IHRydXN0d29ydGh5IFVSTCBhbmQgcmVxdWVzdCdzIGN1cnJlbnQgVVJMIGlzIG5vdCBhXG5cdFx0XHQvLyAgICBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeSBVUkwsIHRoZW4gcmV0dXJuIG5vIHJlZmVycmVyLlxuXHRcdFx0aWYgKGlzVXJsUG90ZW50aWFsbHlUcnVzdHdvcnRoeShyZWZlcnJlclVSTCkgJiYgIWlzVXJsUG90ZW50aWFsbHlUcnVzdHdvcnRoeShjdXJyZW50VVJMKSkge1xuXHRcdFx0XHRyZXR1cm4gJ25vLXJlZmVycmVyJztcblx0XHRcdH1cblxuXHRcdFx0Ly8gMi4gUmV0dXJuIHJlZmVycmVyVVJMLlxuXHRcdFx0cmV0dXJuIHJlZmVycmVyVVJMO1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgcmVmZXJyZXJQb2xpY3k6ICR7cG9saWN5fWApO1xuXHR9XG59XG5cbi8qKlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1yZWZlcnJlci1wb2xpY3kvI3BhcnNlLXJlZmVycmVyLXBvbGljeS1mcm9tLWhlYWRlcnxSZWZlcnJlciBQb2xpY3kgwqc4LjEuIFBhcnNlIGEgcmVmZXJyZXIgcG9saWN5IGZyb20gYSBSZWZlcnJlci1Qb2xpY3kgaGVhZGVyfVxuICogQHBhcmFtIHtIZWFkZXJzfSBoZWFkZXJzIFJlc3BvbnNlIGhlYWRlcnNcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHBvbGljeVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWZlcnJlclBvbGljeUZyb21IZWFkZXIoaGVhZGVycykge1xuXHQvLyAxLiBMZXQgcG9saWN5LXRva2VucyBiZSB0aGUgcmVzdWx0IG9mIGV4dHJhY3RpbmcgaGVhZGVyIGxpc3QgdmFsdWVzIGdpdmVuIGBSZWZlcnJlci1Qb2xpY3lgXG5cdC8vICAgIGFuZCByZXNwb25zZeKAmXMgaGVhZGVyIGxpc3QuXG5cdGNvbnN0IHBvbGljeVRva2VucyA9IChoZWFkZXJzLmdldCgncmVmZXJyZXItcG9saWN5JykgfHwgJycpLnNwbGl0KC9bLFxcc10rLyk7XG5cblx0Ly8gMi4gTGV0IHBvbGljeSBiZSB0aGUgZW1wdHkgc3RyaW5nLlxuXHRsZXQgcG9saWN5ID0gJyc7XG5cblx0Ly8gMy4gRm9yIGVhY2ggdG9rZW4gaW4gcG9saWN5LXRva2VucywgaWYgdG9rZW4gaXMgYSByZWZlcnJlciBwb2xpY3kgYW5kIHRva2VuIGlzIG5vdCB0aGUgZW1wdHlcblx0Ly8gICAgc3RyaW5nLCB0aGVuIHNldCBwb2xpY3kgdG8gdG9rZW4uXG5cdC8vIE5vdGU6IFRoaXMgYWxnb3JpdGhtIGxvb3BzIG92ZXIgbXVsdGlwbGUgcG9saWN5IHZhbHVlcyB0byBhbGxvdyBkZXBsb3ltZW50IG9mIG5ldyBwb2xpY3lcblx0Ly8gdmFsdWVzIHdpdGggZmFsbGJhY2tzIGZvciBvbGRlciB1c2VyIGFnZW50cywgYXMgZGVzY3JpYmVkIGluIMKnIDExLjEgVW5rbm93biBQb2xpY3kgVmFsdWVzLlxuXHRmb3IgKGNvbnN0IHRva2VuIG9mIHBvbGljeVRva2Vucykge1xuXHRcdGlmICh0b2tlbiAmJiBSZWZlcnJlclBvbGljeS5oYXModG9rZW4pKSB7XG5cdFx0XHRwb2xpY3kgPSB0b2tlbjtcblx0XHR9XG5cdH1cblxuXHQvLyA0LiBSZXR1cm4gcG9saWN5LlxuXHRyZXR1cm4gcG9saWN5O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/genkit/node_modules/node-fetch/src/utils/referrer.js\n");

/***/ })

};
;